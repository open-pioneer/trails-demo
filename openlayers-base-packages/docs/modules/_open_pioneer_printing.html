<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@open-pioneer/printing - v0.2.0 | Open Pioneer Trails Packages</title><meta name="description" content="Documentation for Open Pioneer Trails Packages"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Open Pioneer Trails Packages</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">Open Pioneer Trails Packages</a></li><li><a href="_open_pioneer_printing.html">@open-pioneer/printing</a></li></ul><h1>Module @open-pioneer/printing - v0.2.0</h1></div><section class="tsd-panel tsd-typography"><a id="md:open-pioneerprinting" class="tsd-anchor"></a><h1 class="tsd-anchor-link">@open-pioneer/printing<a href="#md:open-pioneerprinting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This package provides a UI component and an API to export the current map view as a printable file.</p>
<p>The UI allows users to enter a title, switch between the printing file formats, and trigger the export.</p>
<p>The supported file formats are PDF and PNG.
If file format is PNG, the current map canvas is exported as an image.
If file format is PDF, the map is printed as a DIN A4 landscape PDF file, preserving the current map scale and showing the current map center in the middle of the exported map image.</p>
<p>The package also provides a printing service that creates an image of the map as a canvas element or a data URL for a PNG image.</p>
<a id="md:usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage<a href="#md:usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:ui-component" class="tsd-anchor"></a><h3 class="tsd-anchor-link">UI Component<a href="#md:ui-component" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To integrate the printing in your app, insert the following snippet and reference a map ID:</p>
<pre><code class="tsx"><span class="hl-0">&lt;</span><span class="hl-1">Printing</span><span class="hl-2"> </span><span class="hl-3">mapId</span><span class="hl-2">=</span><span class="hl-4">&quot;map_id&quot;</span><span class="hl-2"> </span><span class="hl-0">/&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="md:printing-service" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Printing Service<a href="#md:printing-service" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To use the printing service, inject it as following:</p>
<pre><code class="js"><span class="hl-10">// build.config.mjs</span><br/><span class="hl-11">import</span><span class="hl-2"> { </span><span class="hl-7">defineBuildConfig</span><span class="hl-2"> } </span><span class="hl-11">from</span><span class="hl-2"> </span><span class="hl-4">&quot;@open-pioneer/build-support&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-11">export</span><span class="hl-2"> </span><span class="hl-11">default</span><span class="hl-2"> </span><span class="hl-9">defineBuildConfig</span><span class="hl-2">({</span><br/><span class="hl-2">    </span><span class="hl-7">ui:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-7">references:</span><span class="hl-2"> [</span><span class="hl-4">&quot;printing.PrintingService&quot;</span><span class="hl-2">]</span><br/><span class="hl-2">    }</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

<pre><code class="tsx"><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-12">printingService</span><span class="hl-2"> = </span><span class="hl-9">useService</span><span class="hl-2">&lt;</span><span class="hl-1">PrintingService</span><span class="hl-2">&gt;(</span><span class="hl-4">&quot;printing.PrintingService&quot;</span><span class="hl-2">);</span><br/><br/><span class="hl-10">// Triggers printing and waits for the result.</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-12">printResult</span><span class="hl-2"> = </span><span class="hl-11">await</span><span class="hl-2"> </span><span class="hl-7">printingService</span><span class="hl-2">.</span><span class="hl-9">printMap</span><span class="hl-2">(</span><span class="hl-7">map</span><span class="hl-2">);</span><br/><br/><span class="hl-10">// An HTMLCanvasElement containing an image of the map</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-12">canvas</span><span class="hl-2"> = </span><span class="hl-7">printResult</span><span class="hl-2">.</span><span class="hl-9">getCanvas</span><span class="hl-2">();</span><br/><br/><span class="hl-10">// For convenience, an image encoded as PNG (i.e. `data:image/png;base64,...`)</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-12">dataURL</span><span class="hl-2"> = </span><span class="hl-7">printResult</span><span class="hl-2">.</span><span class="hl-9">getPNGDataURL</span><span class="hl-2">();</span>
</code><button type="button">Copy</button></pre>

<p>It is configurable whether to add an overlay element above the map or not.
The default overlay blocks user interactions while the map is printing.
The text content of the overlay can be overwritten by configuring a custom text.</p>
<p>Example:</p>
<pre><code class="tsx"><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-12">printResult</span><span class="hl-2"> = </span><span class="hl-11">await</span><span class="hl-2"> </span><span class="hl-7">printingService</span><span class="hl-2">.</span><span class="hl-9">printMap</span><span class="hl-2">(</span><span class="hl-7">map</span><span class="hl-2">, {</span><br/><span class="hl-2">    </span><span class="hl-7">blockUserInteraction:</span><span class="hl-2"> </span><span class="hl-5">true</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-7">overlayText:</span><span class="hl-2"> </span><span class="hl-4">&quot;custom text&quot;</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:printed-elements" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Printed elements<a href="#md:printed-elements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The printed map contains all map elements, visible layers, scale-bar and a title. If the user does not enter a title, the map is printed without title.
To prevent custom elements from showing in the printed map, add the CSS class name <code>printing-hide</code> to the elements.</p>
<a id="md:view-padding" class="tsd-anchor"></a><h3 class="tsd-anchor-link">View padding<a href="#md:view-padding" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The printing widget and the printing service will by default respect the map's current view <code>padding</code> (see OpenLayers <a href="https://openlayers.org/en/latest/apidoc/module-ol_View-View.html" target="_blank" class="external">View class</a>).
This means that padded regions (a border on every side) will <em>not</em> be included in the printed result.</p>
<p>To ignore the view padding when printing the map, you can pass <code>viewPadding: &quot;ignore&quot;</code> to the printing service or the printing component.</p>
<a id="md:known-issues" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Known issues<a href="#md:known-issues" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Printing to PNG may not work on Safari / Chrome on iOS (see <a href="https://github.com/open-pioneer/trails-openlayers-base-packages/issues/294" target="_blank" class="external">https://github.com/open-pioneer/trails-openlayers-base-packages/issues/294</a>)</li>
</ul>
<a id="md:license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">License<a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Apache-2.0 (see <code>LICENSE</code> file)</p>
</section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><h3 class="tsd-index-heading uppercase">Index</h3><section class="tsd-index-section"><h3 class="tsd-index-heading">Interfaces</h3><div class="tsd-index-list"><a href="../interfaces/_open_pioneer_printing.PrintingOptions.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Printing<wbr/>Options</span></a>
<a href="../interfaces/_open_pioneer_printing.PrintingProps.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Printing<wbr/>Props</span></a>
<a href="../interfaces/_open_pioneer_printing.PrintingService.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Printing<wbr/>Service</span></a>
<a href="../interfaces/_open_pioneer_printing.PrintResult.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Print<wbr/>Result</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Type Aliases</h3><div class="tsd-index-list"><a href="../types/_open_pioneer_printing.ViewPaddingBehavior.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>View<wbr/>Padding<wbr/>Behavior</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Functions</h3><div class="tsd-index-list"><a href="../functions/_open_pioneer_printing.Printing.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>Printing</span></a>
</div></section></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:open-pioneerprinting"><span>@open-<wbr/>pioneer/printing</span></a><ul><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:ui-component"><span>UI <wbr/>Component</span></a></li><li><a href="#md:printing-service"><span>Printing <wbr/>Service</span></a></li><li><a href="#md:printed-elements"><span>Printed elements</span></a></li><li><a href="#md:view-padding"><span>View padding</span></a></li></ul></li><li><a href="#md:known-issues"><span>Known issues</span></a></li><li><a href="#md:license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Open Pioneer Trails Packages</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
