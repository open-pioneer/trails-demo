import{bM as Pt,u as vt,o as _t,E as xt,bN as U,bO as wt,bP as jt,l as Ft,M as ue,bQ as G,bR as Mt,bS as St,bT as Gt,bU as Ot,bV as Et,bW as Rt,bX as Lt,bY as de,ah as kt,bZ as At,ac as re,b_ as Nt,b$ as Tt,c0 as It,c1 as Bt,c2 as Dt,c3 as Ht,c4 as ne,c5 as Vt,c6 as zt,c7 as $t,c8 as Re,c9 as Yt,af as oe,ca as Xt,cb as Le,ab as ke,y as w,cc as y,s as Jt,cd as Ut,bC as Ae,ce as Zt,cf as Kt,bv as Wt,cg as E,aw as Z}from"./6df5caa67203.js";import{L as ie}from"./e5f03af71751.js";import{M as Qt,N as Ne,f as k,j as a,c as O,v as A,r as d,O as qt,P as es,Q as ee,T as L,U as v,m as ts,V as ss,a as rs,W as ns,C as os,X as is,Y as as,B as Te,Z as Ie}from"./4536b7b97685.js";import{u as he,T as Be,c as De,a as Me,S as Se}from"./ca4907bed514.js";import{F as ls,a as cs,b as us,c as He,S as ds}from"./8bf49a9d82dc.js";import{u as Ve}from"./36ac208a0fdb.js";import{B as hs}from"./442a534e2059.js";import{C as fs}from"./e608e3fdf504.js";import{u as gs,b as ms,c as ps,l as ys,M as Cs,d as bs,e as Ps,f as vs}from"./2b7fef9ea326.js";import{T as ae}from"./b1b26d36649f.js";import{L as _s}from"./2230dc970b93.js";import{B as $}from"./6f807709641e.js";import{F as le}from"./54e23a1707a6.js";function xs(r){return"current"in r}var ze=()=>typeof window<"u";function ws(){var r;const e=navigator.userAgentData;return(r=e?.platform)!=null?r:navigator.platform}var js=r=>ze()&&r.test(navigator.vendor),Fs=r=>ze()&&r.test(ws()),Ms=()=>Fs(/mac|iphone|ipad|ipod/i),Ss=()=>Ms()&&js(/apple/i);function Gs(r){const{ref:e,elements:t,enabled:s}=r,n=()=>{var o,i;return(i=(o=e.current)==null?void 0:o.ownerDocument)!=null?i:document};Qt(n,"pointerdown",o=>{if(!Ss()||!s)return;const i=o.target,c=(t??[e]).some(u=>{const h=xs(u)?u.current:u;return h?.contains(i)||h===i});n().activeElement!==i&&c&&(o.preventDefault(),i.focus())})}var[Os,F]=Ne({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Es,N]=Ne({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),$e=k(function(e,t){const{getHeaderProps:s}=F(),n=N();return a.jsx(O.header,{...s(e,t),className:A("chakra-popover__header",e.className),__css:n.header})});$e.displayName="PopoverHeader";function Ye(r){const e=d.Children.only(r.children),{getTriggerProps:t}=F();return d.cloneElement(e,t(e.props,e.ref))}Ye.displayName="PopoverTrigger";var S={click:"click",hover:"hover"};function Rs(r={}){const{closeOnBlur:e=!0,closeOnEsc:t=!0,initialFocusRef:s,id:n,returnFocusOnClose:o=!0,autoFocus:i=!0,arrowSize:l,arrowShadowColor:c,trigger:u=S.click,openDelay:h=200,closeDelay:g=200,isLazy:p,lazyBehavior:P="unmount",computePositionOnMount:nt,...ot}=r,{isOpen:C,onClose:_,onOpen:K,onToggle:Ce}=qt(r),W=d.useRef(null),T=d.useRef(null),M=d.useRef(null),R=d.useRef(!1),be=d.useRef(!1);C&&(be.current=!0);const[Pe,it]=d.useState(!1),[ve,at]=d.useState(!1),lt=d.useId(),ct=n??lt,[_e,I,B,D]=["popover-trigger","popover-content","popover-header","popover-body"].map(f=>`${f}-${ct}`),{referenceRef:H,getArrowProps:ut,getPopperProps:xe,getArrowInnerProps:dt,forceUpdate:ht}=es({...ot,enabled:C||!!nt}),we=gs({isOpen:C,ref:M});Gs({enabled:C,ref:T}),ms(M,{focusRef:T,visible:C,shouldFocus:o&&u===S.click}),ps(M,{focusRef:s,visible:C,shouldFocus:i&&u===S.click});const je=ys({wasSelected:be.current,enabled:p,mode:P,isSelected:we.present}),ft=d.useCallback((f={},b=null)=>{const m={...f,style:{...f.style,transformOrigin:ee.transformOrigin.varRef,[ee.arrowSize.var]:l?`${l}px`:void 0,[ee.arrowShadowColor.var]:c},ref:L(M,b),children:je?f.children:null,id:I,tabIndex:-1,role:"dialog",onKeyDown:v(f.onKeyDown,x=>{t&&x.key==="Escape"&&_()}),onBlur:v(f.onBlur,x=>{const V=Ge(x),q=te(M.current,V),bt=te(T.current,V);C&&e&&(!q&&!bt)&&_()}),"aria-labelledby":Pe?B:void 0,"aria-describedby":ve?D:void 0};return u===S.hover&&(m.role="tooltip",m.onMouseEnter=v(f.onMouseEnter,()=>{R.current=!0}),m.onMouseLeave=v(f.onMouseLeave,x=>{x.nativeEvent.relatedTarget!==null&&(R.current=!1,setTimeout(()=>_(),g))})),m},[je,I,Pe,B,ve,D,u,t,_,C,e,g,c,l]),gt=d.useCallback((f={},b=null)=>xe({...f,style:{visibility:C?"visible":"hidden",...f.style}},b),[C,xe]),mt=d.useCallback((f,b=null)=>({...f,ref:L(b,W,H)}),[W,H]),j=d.useRef(),Q=d.useRef(),Fe=d.useCallback(f=>{W.current==null&&H(f)},[H]),pt=d.useCallback((f={},b=null)=>{const m={...f,ref:L(T,b,Fe),id:_e,"aria-haspopup":"dialog","aria-expanded":C,"aria-controls":I};return u===S.click&&(m.onClick=v(f.onClick,Ce)),u===S.hover&&(m.onFocus=v(f.onFocus,()=>{j.current===void 0&&K()}),m.onBlur=v(f.onBlur,x=>{const V=Ge(x),q=!te(M.current,V);C&&e&&q&&_()}),m.onKeyDown=v(f.onKeyDown,x=>{x.key==="Escape"&&_()}),m.onMouseEnter=v(f.onMouseEnter,()=>{R.current=!0,j.current=window.setTimeout(()=>K(),h)}),m.onMouseLeave=v(f.onMouseLeave,()=>{R.current=!1,j.current&&(clearTimeout(j.current),j.current=void 0),Q.current=window.setTimeout(()=>{R.current===!1&&_()},g)})),m},[_e,C,I,u,Fe,Ce,K,e,_,h,g]);d.useEffect(()=>()=>{j.current&&clearTimeout(j.current),Q.current&&clearTimeout(Q.current)},[]);const yt=d.useCallback((f={},b=null)=>({...f,id:B,ref:L(b,m=>{it(!!m)})}),[B]),Ct=d.useCallback((f={},b=null)=>({...f,id:D,ref:L(b,m=>{at(!!m)})}),[D]);return{forceUpdate:ht,isOpen:C,onAnimationComplete:we.onComplete,onClose:_,getAnchorProps:mt,getArrowProps:ut,getArrowInnerProps:dt,getPopoverPositionerProps:gt,getPopoverProps:ft,getTriggerProps:pt,getHeaderProps:yt,getBodyProps:Ct}}function te(r,e){return r===e||r?.contains(e)}function Ge(r){var e;const t=r.currentTarget.ownerDocument.activeElement;return(e=r.relatedTarget)!=null?e:t}function Xe(r){const e=ts("Popover",r),{children:t,...s}=ss(r),n=rs(),o=Rs({...s,direction:n.direction});return a.jsx(Os,{value:o,children:a.jsx(Es,{value:e,children:ns(t,{isOpen:o.isOpen,onClose:o.onClose,forceUpdate:o.forceUpdate})})})}Xe.displayName="Popover";var se=(r,e)=>e?`${r}.${e}, ${e}`:void 0;function Je(r){var e;const{bg:t,bgColor:s,backgroundColor:n,shadow:o,boxShadow:i,shadowColor:l}=r,{getArrowProps:c,getArrowInnerProps:u}=F(),h=N(),g=(e=t??s)!=null?e:n,p=o??i;return a.jsx(O.div,{...c(),className:"chakra-popover__arrow-positioner",children:a.jsx(O.div,{className:A("chakra-popover__arrow",r.className),...u(r),__css:{"--popper-arrow-shadow-color":se("colors",l),"--popper-arrow-bg":se("colors",g),"--popper-arrow-shadow":se("shadows",p),...h.arrow}})})}Je.displayName="PopoverArrow";var Ue=k(function(e,t){const{getBodyProps:s}=F(),n=N();return a.jsx(O.div,{...s(e,t),className:A("chakra-popover__body",e.className),__css:n.body})});Ue.displayName="PopoverBody";var Ze=k(function(e,t){const{onClose:s}=F(),n=N();return a.jsx(os,{size:"sm",onClick:s,className:A("chakra-popover__close-btn",e.className),__css:n.closeButton,ref:t,...e})});Ze.displayName="PopoverCloseButton";function Ls(r){if(r)return{enter:{...r.enter,visibility:"visible"},exit:{...r.exit,transitionEnd:{visibility:"hidden"}}}}var ks={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},As=O(is.section),Ke=k(function(e,t){const{variants:s=ks,...n}=e,{isOpen:o}=F();return a.jsx(As,{ref:t,variants:Ls(s),initial:!1,animate:o?"enter":"exit",...n})});Ke.displayName="PopoverTransition";var We=k(function(e,t){const{rootProps:s,motionProps:n,...o}=e,{getPopoverProps:i,getPopoverPositionerProps:l,onAnimationComplete:c}=F(),u=N(),h={position:"relative",display:"flex",flexDirection:"column",...u.content};return a.jsx(O.div,{...l(s),__css:u.popper,className:"chakra-popover__popper",children:a.jsx(Ke,{...n,...i(o,t),onAnimationComplete:as(c,o.onAnimationComplete),className:A("chakra-popover__content",e.className),__css:h})})});We.displayName="PopoverContent";class Y extends Pt{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(vt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(_t(this.geometries_[e],xt.CHANGE,this.changed,this))}clone(){const e=new Y(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,s,n){if(n<U(this.getExtent(),e,t))return n;const o=this.geometries_;for(let i=0,l=o.length;i<l;++i)n=o[i].closestPointXY(e,t,s,n);return n}containsXY(e,t){const s=this.geometries_;for(let n=0,o=s.length;n<o;++n)if(s[n].containsXY(e,t))return!0;return!1}computeExtent(e){wt(e);const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)jt(e,t[s].getExtent());return e}getGeometries(){return Oe(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)t[s].getType()===this.getType()?e=e.concat(t[s].getGeometriesArrayRecursive()):e.push(t[s]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],s=this.geometries_;let n=!1;for(let o=0,i=s.length;o<i;++o){const l=s[o],c=l.getSimplifiedGeometry(e);t.push(c),c!==l&&(n=!0)}if(n){const o=new Y(null);return o.setGeometriesArray(t),o}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)if(t[s].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const s=this.geometries_;for(let n=0,o=s.length;n<o;++n)s[n].rotate(e,t);this.changed()}scale(e,t,s){s||(s=Ft(this.getExtent()));const n=this.geometries_;for(let o=0,i=n.length;o<i;++o)n[o].scale(e,t,s);this.changed()}setGeometries(e){this.setGeometriesArray(Oe(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)t[s].applyTransform(e);this.changed()}translate(e,t){const s=this.geometries_;for(let n=0,o=s.length;n<o;++n)s[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Oe(r){const e=[];for(let t=0,s=r.length;t<s;++t)e.push(r[t].clone());return e}const Ns=Y;class X extends ue{constructor(e,t,s){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&s)this.setFlatCoordinates(t,e),this.ends_=s;else{const n=e,o=[],i=[];for(let c=0,u=n.length;c<u;++c){const h=n[c];G(o,h.getFlatCoordinates()),i.push(o.length)}const l=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(l,o),this.ends_=i}}appendLineString(e){G(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new X(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,s,n){return n<U(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Mt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),St(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,s,n))}getCoordinateAtM(e,t,s){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,s=s!==void 0?s:!1,Gt(this.flatCoordinates,0,this.ends_,this.stride,e,t,s))}getCoordinates(){return Ot(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ie(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,s=this.layout,n=[];let o=0;for(let i=0,l=t.length;i<l;++i){const c=t[i],u=new ie(e.slice(o,c),s);n.push(u),o=c}return n}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let s=0;const n=this.ends_,o=this.stride;for(let i=0,l=n.length;i<l;++i){const c=n[i],u=Et(t,s,c,o,.5);G(e,u),s=c}return e}getSimplifiedGeometryInternal(e){const t=[],s=[];return t.length=Rt(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,s),new X(t,"XY",s)}getType(){return"MultiLineString"}intersectsExtent(e){return Lt(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=de(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}}const Ts=X;class fe extends ue{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){G(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new fe(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,s,n){if(n<U(this.getExtent(),e,t))return n;const o=this.flatCoordinates,i=this.stride;for(let l=0,c=o.length;l<c;l+=i){const u=kt(e,t,o[l],o[l+1]);if(u<n){n=u;for(let h=0;h<i;++h)s[h]=o[l+h];s.length=i}}return n}getCoordinates(){return At(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new re(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,s=this.stride,n=[];for(let o=0,i=e.length;o<i;o+=s){const l=new re(e.slice(o,o+s),t);n.push(l)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,s=this.stride;for(let n=0,o=t.length;n<o;n+=s){const i=t[n],l=t[n+1];if(Nt(e,i,l))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tt(this.flatCoordinates,0,e,this.stride),this.changed()}}const Qe=fe;class J extends ue{constructor(e,t,s){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!s&&!Array.isArray(e[0])){const n=e,o=[],i=[];for(let l=0,c=n.length;l<c;++l){const u=n[l],h=o.length,g=u.getEnds();for(let p=0,P=g.length;p<P;++p)g[p]+=h;G(o,u.getFlatCoordinates()),i.push(g)}t=n.length===0?this.getLayout():n[0].getLayout(),e=o,s=i}t!==void 0&&s?(this.setFlatCoordinates(t,e),this.endss_=s):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const s=this.flatCoordinates.length;G(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let n=0,o=t.length;n<o;++n)t[n]+=s}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=this.endss_[n].slice();const s=new J(this.flatCoordinates.slice(),this.layout,t);return s.applyProperties(this),s}closestPointXY(e,t,s,n){return n<U(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(It(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Bt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,s,n))}containsXY(e,t){return Dt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Ht(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),ne(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Vt(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=zt(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=$t(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Qe(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Re(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ne(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],s=[];return t.length=Yt(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,s),new J(t,"XY",s)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const s=this.endss_[e].slice(),n=s[s.length-1];if(t!==0)for(let o=0,i=s.length;o<i;++o)s[o]-=t;return new oe(this.flatCoordinates.slice(t,n),this.layout,s)}getPolygons(){const e=this.layout,t=this.flatCoordinates,s=this.endss_,n=[];let o=0;for(let i=0,l=s.length;i<l;++i){const c=s[i].slice(),u=c[c.length-1];if(o!==0)for(let g=0,p=c.length;g<p;++g)c[g]-=o;const h=new oe(t.slice(o,u),e,c);n.push(h),o=u}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return Xt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const s=Le(this.flatCoordinates,0,e,this.stride,this.endss_);if(s.length===0)this.flatCoordinates.length=0;else{const n=s[s.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const Is=J;class Bs{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=ke,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let s=t.dataProjection?w(t.dataProjection):this.readProjection(e);t.extent&&s&&s.getUnits()==="tile-pixels"&&(s=w(s),s.setWorldExtent(t.extent)),t={dataProjection:s,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return y()}readFeature(e,t){return y()}readFeatures(e,t){return y()}readGeometry(e,t){return y()}readProjection(e){return y()}writeFeature(e,t){return y()}writeFeatures(e,t){return y()}writeGeometry(e,t){return y()}}const Ds=Bs;function ge(r,e,t){const s=t?w(t.featureProjection):null,n=t?w(t.dataProjection):null;let o=r;if(s&&n&&!Jt(s,n)){e&&(o=r.clone());const i=e?s:n,l=e?n:s;i.getUnits()==="tile-pixels"?o.transform(i,l):o.applyTransform(Ut(i,l))}if(e&&t&&t.decimals!==void 0){const i=Math.pow(10,t.decimals),l=function(c){for(let u=0,h=c.length;u<h;++u)c[u]=Math.round(c[u]*i)/i;return c};o===r&&(o=r.clone()),o.applyTransform(l)}return o}const Hs={Point:re,LineString:ie,Polygon:oe,MultiPoint:Qe,MultiLineString:Ts,MultiPolygon:Is};function Vs(r,e,t){return Array.isArray(e[0])?(Re(r,0,e,t)||(r=r.slice(),ne(r,0,e,t)),r):(Zt(r,0,e,t)||(r=r.slice(),Kt(r,0,e,t)),r)}function qe(r,e){const t=r.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>qe({...r,geometry:o})).flat();const s=t.type==="MultiPolygon"?"Polygon":t.type;if(s==="GeometryCollection"||s==="Circle")throw new Error("Unsupported geometry type: "+s);const n=t.layout.length;return ge(new Ae(s,s==="Polygon"?Vs(t.flatCoordinates,t.ends,n):t.flatCoordinates,t.ends?.flat(),n,r.properties||{},r.id).enableSimplifyTransformed(),!1,e)}function me(r,e){if(!r)return null;if(Array.isArray(r)){const s=r.map(n=>me(n,e));return new Ns(s)}const t=Hs[r.type];return ge(new t(r.flatCoordinates,r.layout,r.ends),!1,e)}class zs extends Ds{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(z(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(z(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return y()}readFeaturesFromObject(e,t){return y()}readGeometry(e,t){return this.readGeometryFromObject(z(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return y()}readProjection(e){return this.readProjectionFromObject(z(e))}readProjectionFromObject(e){return y()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return y()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return y()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return y()}}function z(r){if(typeof r=="string"){const e=JSON.parse(r);return e||null}return r!==null?r:null}const $s=zs;class Ys extends $s{constructor(e){e=e||{},super(),this.dataProjection=w(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=w(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let s=null;e.type==="Feature"?s=e:s={type:"Feature",geometry:e,properties:null};const n=pe(s.geometry);if(this.featureClass===Ae)return qe({geometry:n,id:s.id,properties:s.properties},t);const o=new ke;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in s!==void 0&&o.setGeometryName(s.geometry_name),o.setGeometry(me(n,t)),"id"in s&&o.setId(s.id),s.properties&&o.setProperties(s.properties,!0),o}readFeaturesFromObject(e,t){const s=e;let n=null;if(s.type==="FeatureCollection"){const o=e;n=[];const i=o.features;for(let l=0,c=i.length;l<c;++l){const u=this.readFeatureFromObject(i[l],t);u&&n.push(u)}}else n=[this.readFeatureFromObject(e,t)];return n.flat()}readGeometryFromObject(e,t){return Xs(e,t)}readProjectionFromObject(e){const t=e.crs;let s;if(t)if(t.type=="name")s=w(t.properties.name);else if(t.type==="EPSG")s=w("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else s=this.dataProjection;return s}writeFeatureObject(e,t){t=this.adaptOptions(t);const s={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(s.id=n),!e.hasProperties())return s;const o=e.getProperties(),i=e.getGeometry();return i&&(s.geometry=ce(i,t),delete o[e.getGeometryName()]),Wt(o)||(s.properties=o),s}writeFeaturesObject(e,t){t=this.adaptOptions(t);const s=[];for(let n=0,o=e.length;n<o;++n)s.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:s}}writeGeometryObject(e,t){return ce(e,this.adaptOptions(t))}}function pe(r,e){if(!r)return null;let t;switch(r.type){case"Point":{t=Us(r);break}case"LineString":{t=Zs(r);break}case"Polygon":{t=qs(r);break}case"MultiPoint":{t=Ws(r);break}case"MultiLineString":{t=Ks(r);break}case"MultiPolygon":{t=Qs(r);break}case"GeometryCollection":{t=Js(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return t}function Xs(r,e){const t=pe(r);return me(t,e)}function Js(r,e){return r.geometries.map(function(s){return pe(s)})}function Us(r){const e=r.coordinates;return{type:"Point",flatCoordinates:e,layout:E(e.length)}}function Zs(r){const e=r.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:E(e[0].length)}}function Ks(r){const e=r.coordinates,t=e[0][0].length,s=[],n=de(s,0,e,t);return{type:"MultiLineString",flatCoordinates:s,ends:n,layout:E(t)}}function Ws(r){const e=r.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:E(e[0].length)}}function Qs(r){const e=r.coordinates,t=[],s=e[0][0][0].length,n=Le(t,0,e,s);return{type:"MultiPolygon",flatCoordinates:t,ends:n,layout:E(s)}}function qs(r){const e=r.coordinates,t=[],s=e[0][0].length,n=de(t,0,e,s);return{type:"Polygon",flatCoordinates:t,ends:n,layout:E(s)}}function ce(r,e){r=ge(r,!0,e);const t=r.getType();let s;switch(t){case"Point":{s=or(r);break}case"LineString":{s=tr(r);break}case"Polygon":{s=ir(r,e);break}case"MultiPoint":{s=rr(r);break}case"MultiLineString":{s=sr(r);break}case"MultiPolygon":{s=nr(r,e);break}case"GeometryCollection":{s=er(r,e);break}case"Circle":{s={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return s}function er(r,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(s){return ce(s,e)})}}function tr(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function sr(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function rr(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function nr(r,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function or(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function ir(r,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}const Ar=Ys,ar="@open-pioneer/map-navigation",et=Ve.bind(void 0,ar),Nr=d.forwardRef(function(e,t){const{mapId:s}=e,{containerProps:n}=he("initial-extent",e),{map:o}=Z(s),i=et();function l(){const c=o?.initialExtent,u=o?.olMap;if(c&&u){const h=[c.xMin,c.yMin,c.xMax,c.yMax];u.getView().fit(h,{duration:200})}}return a.jsx(Be,{ref:t,label:i.formatMessage({id:"initial-extent.title"}),icon:a.jsx(ls,{}),onClick:l,...n})}),Tr=d.forwardRef(function(e,t){return a.jsx(tt,{zoomDirection:"in",ref:t,...e})}),Ir=d.forwardRef(function(e,t){return a.jsx(tt,{zoomDirection:"out",ref:t,...e})}),tt=d.forwardRef(function(e,t){const{mapId:s,zoomDirection:n}=e,{map:o}=Z(s),i=et(),{defaultClassName:l,buttonLabel:c,buttonIcon:u}=lr(i,n),{containerProps:h}=he(De("zoom",l),e);function g(){const p=o?.olMap.getView();let P=p?.getZoom();p&&P!==void 0&&(n==="in"?++P:--P,p.animate({zoom:P,duration:200}))}return a.jsx(Be,{ref:t,label:c,icon:u,onClick:g,...h})});function lr(r,e){switch(e){case"in":return{defaultClassName:"zoom-in",buttonLabel:r.formatMessage({id:"zoom-in.title"}),buttonIcon:a.jsx(us,{})};case"out":return{defaultClassName:"zoom-out",buttonLabel:r.formatMessage({id:"zoom-out.title"}),buttonIcon:a.jsx(cs,{})}}}const cr="@open-pioneer/toc",ye=Ve.bind(void 0,cr);function ur(r){const{map:e,"aria-labelledby":t}=r,s=ye(),n=pr(e);return n.length?st(n,s,{"aria-labelledby":t}):a.jsx(ae,{className:"toc-missing-layers","aria-labelledby":t,children:s.formatMessage({id:"missingLayers"})})}function st(r,e,t){const s=r.map(n=>a.jsx(dr,{layer:n,intl:e},n.id));return a.jsx(_s,{as:"ul",className:"toc-layer-list",listStyleType:"none",...t,children:s})}function dr(r){const{layer:e,intl:t}=r,s=gr(e),{isVisible:n,setVisible:o}=mr(e),i=yr(e);let l;return i?.length&&(l=st(i,t,{ml:4})),a.jsxs($,{as:"li",className:De("toc-layer-item",`layer-${Cr(e.id)}`),children:[a.jsxs(le,{className:"toc-layer-item-content",width:"100%",flexDirection:"row",align:"center",justifyContent:"space-between",gap:2,minHeight:10,children:[a.jsx(fs,{isChecked:n,onChange:c=>o(c.target.checked),children:s}),e.description&&a.jsx(hr,{layer:e,title:s,intl:t})]}),l]})}function hr(r){const{layer:e,title:t,intl:s}=r,n=s.formatMessage({id:"descriptionLabel"}),o=fr(e);return a.jsxs(Xe,{placement:"bottom-start",children:[a.jsx(Ye,{children:a.jsx(Te,{className:"toc-layer-item-details-button","aria-label":n,borderRadius:"full",iconSpacing:0,padding:0,variant:"ghost",leftIcon:a.jsx(He,{})})}),a.jsx(Ie,{children:a.jsxs(We,{className:"toc-layer-item-details",overflowY:"auto",maxHeight:"400",children:[a.jsx(Je,{}),a.jsx(Ze,{mt:1}),a.jsx($e,{children:t}),a.jsx(Ue,{children:o})]})})]})}function fr(r){const e=d.useCallback(()=>r.description,[r]),t=d.useCallback(s=>{const n=r.on("changed:description",s);return()=>n.destroy()},[r]);return d.useSyncExternalStore(t,e)}function gr(r){const e=d.useCallback(()=>r.title,[r]),t=d.useCallback(s=>{const n=r.on("changed:title",s);return()=>n.destroy()},[r]);return d.useSyncExternalStore(t,e)}function mr(r){const e=d.useCallback(()=>r.visible,[r]),t=d.useCallback(o=>{const i=r.on("changed:visible",o);return()=>i.destroy()},[r]),s=d.useSyncExternalStore(t,e),n=d.useCallback(o=>{r.setVisible(o)},[r]);return{isVisible:s,setVisible:n}}function pr(r){const e=d.useCallback(s=>{const n=r.layers.on("changed",s);return()=>n.destroy()},[r]),t=d.useCallback(()=>{let s=r.layers.getOperationalLayers({sortByDisplayOrder:!0})??[];return s=s.reverse(),s},[r]);return rt(e,t)}function yr(r){const e=d.useCallback(s=>{const n=r.sublayers?.on("changed",s);return()=>n?.destroy()},[r]),t=d.useCallback(()=>{if(!r.sublayers)return;let n=r.sublayers?.getSublayers({sortByDisplayOrder:!0});return n=n.reverse(),n},[r]);return rt(e,t)}function rt(r,e){const t=d.useRef(),s=d.useCallback(o=>{const i=r(()=>{t.current=void 0,o()});return()=>{t.current=void 0,i()}},[r]),n=d.useCallback(()=>{if(t.current)return t.current.value;const o=e();return t.current={value:o},o},[e]);return d.useSyncExternalStore(s,n)}function Cr(r){return r.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}const br=r=>{const e=ye(),{mapId:t,showHideAllLayers:s=!0}=r,{map:n}=Z(t);return!!s&&a.jsx($,{className:"toc-tools",children:a.jsxs(Cs,{placement:"bottom-start",children:[a.jsx(bs,{as:Te,className:"toc-tools-button","aria-label":e.formatMessage({id:"toolsLabel"}),borderRadius:"full",iconSpacing:0,padding:3,variant:"ghost",leftIcon:a.jsx(He,{})}),a.jsx(Ie,{children:a.jsx(Ps,{className:"tools-menu",children:a.jsx(vs,{"aria-label":e.formatMessage({id:"tools.hideAllLayers"}),onClick:()=>{Pr(n)},children:e.formatMessage({id:"tools.hideAllLayers"})})})})]})})};function Pr(r){const e=t=>{t?.getSublayers().forEach(s=>{s.setVisible(!1),e(s?.sublayers)})};r?.layers.getOperationalLayers().forEach(t=>{t.setVisible(!1),e(t?.sublayers)})}const Ee=2,Br=r=>{const e=ye(),{mapId:t,showTools:s=!1,toolsConfig:n,showBasemapSwitcher:o=!0,basemapSwitcherProps:i}=r,{containerProps:l}=he("toc",r),c=d.useId(),u=d.useId(),h=Z(t);let g;switch(h.kind){case"loading":g=null;break;case"rejected":g=a.jsx(ae,{className:"toc-error",children:e.formatMessage({id:"error"})});break;case"resolved":{const p=o&&a.jsx($,{className:"toc-basemap-switcher",children:a.jsx(Me,{title:a.jsx(Se,{id:c,size:"sm",mb:Ee,children:e.formatMessage({id:"basemapsLabel"})}),children:a.jsx(hs,{mapId:t,"aria-labelledby":c,...i})})}),P=a.jsx($,{className:"toc-operational-layers",children:a.jsx(Me,{title:a.jsx(Se,{id:u,size:"sm",mb:2,children:a.jsxs(le,{children:[a.jsx(ae,{my:3,children:e.formatMessage({id:"operationalLayerLabel"})}),a.jsx(ds,{}),s&&a.jsx(br,{mapId:t,...n})]})}),children:a.jsx(ur,{map:h.map,"aria-labelledby":u})})});g=a.jsxs(a.Fragment,{children:[p,P]});break}}return a.jsx(le,{...l,direction:"column",gap:Ee,children:g})};export{Ds as F,Ar as G,Nr as I,Qe as M,Br as T,Tr as Z,Ts as a,Is as b,Ns as c,Ir as d,ge as t};
