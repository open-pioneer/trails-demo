import{c as Pe,r as I,u as H,j as d,a as De}from"./b6f5bd660396.js";import{V as de,G as pe,a as ge,T as Ne,I as ze,Z as Fe,b as Ge}from"./558405539b38.js";import{O as Ue,C as Be,g as he,f as ee,V as te,i as me,I as h,a as We,c as Ve,b as M,d as O,e as oe,m as qe,t as $e,h as He,j as V,k as fe,l as be,n as ve,T as Ke,r as Ye,o as Xe,E as xe,u as Qe,p as Ze,S as Je,q as et,s as re,v as tt,w as C,x as _e,y as ot,z as we,A as ye,B as ne,D as rt,F as ie,G as Ie,H as nt,M as it,_ as se,J as q,K as Se,L as Ee,N as K,P as st,Q as at,R as lt,U as ct,W as ae}from"./d9e63db68ed6.js";import{a as Re,W as ut,b as dt}from"./22dad9665b19.js";import{B as D,T as le,S as ce}from"./5339f2c4de9e.js";import{T as Le}from"./eb74ed043e79.js";import{F as P}from"./f97de40d6808.js";import"./19694d692f15.js";import"./b6ddbcbe7ea5.js";import"./3f78ce40c607.js";import"./d835bee8a934.js";import"./9a51f33df1fd.js";function Te(o,e){const t=(""+o).split("."),r=(""+e).split(".");for(let n=0;n<Math.max(t.length,r.length);n++){const i=parseInt(t[n]||"0",10),s=parseInt(r[n]||"0",10);if(i>s)return 1;if(s>i)return-1}return 0}class pt extends Ue{constructor(e){e=e||{},super(e)}}const gt=pt;class ht extends Be{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,n=e.viewState,i=n.resolution,s=this.getLayer().getSource(),l=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=he(c,ee(t.extent,n.projection))),!l[te.ANIMATING]&&!l[te.INTERACTING]&&!me(c))if(s){const u=n.projection,a=s.getImage(c,i,r,u);a&&(this.loadImage(a)?this.image_=a:a.getState()===h.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),n=We(t.pixelToCoordinateTransform,e.slice()),i=r.getExtent();if(i&&!Ve(i,n))return null;const s=this.image_.getExtent(),l=this.image_.getImage(),c=M(s),u=Math.floor(l.width*((n[0]-s[0])/c));if(u<0||u>=l.width)return null;const a=O(s),p=Math.floor(l.height*((s[3]-n[1])/a));return p<0||p>=l.height?null:this.getImageData(l,u,p)}renderFrame(e,t){const r=this.image_,n=r.getExtent(),i=r.getResolution(),[s,l]=Array.isArray(i)?i:[i,i],c=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],a=e.pixelRatio,p=e.viewState,m=p.center,g=p.resolution,b=a*s/(g*c),S=a*l/(g*c),x=e.extent,E=p.resolution,w=p.rotation,v=Math.round(M(x)/E*a),L=Math.round(O(x)/E*a);oe(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,w,-v/2,-L/2),qe(this.inversePixelTransform,this.pixelTransform);const N=$e(this.pixelTransform);this.useContainer(t,N,this.getBackground(e));const f=this.context,R=f.canvas;R.width!=v||R.height!=L?(R.width=v,R.height=L):this.containerReused||f.clearRect(0,0,v,L);let z=!1,F=!0;if(u.extent){const k=ee(u.extent,p.projection);F=He(k,e.extent),z=F&&!V(k,e.extent),z&&this.clipUnrotated(f,e,k)}const T=r.getImage(),j=oe(this.tempTransform,v/2,L/2,b,S,0,c*(n[0]-m[0])/s,c*(m[1]-n[3])/l);this.renderedResolution=l*a/c;const Q=T.width*j[0],Z=T.height*j[3];if(this.getLayer().getSource().getInterpolate()||(f.imageSmoothingEnabled=!1),this.preRender(f,e),F&&Q>=.5&&Z>=.5){const k=j[4],Ce=j[5],G=u.opacity;let J;G!==1&&(J=f.globalAlpha,f.globalAlpha=G),f.drawImage(T,0,0,+T.width,+T.height,k,Ce,Q,Z),G!==1&&(f.globalAlpha=J)}return this.postRender(f,e),z&&f.restore(),f.imageSmoothingEnabled=!0,N!==R.style.transform&&(R.style.transform=N),this.container}}const mt=ht;class ft extends gt{constructor(e){super(e)}createRenderer(){return new mt(this)}getData(e){return super.getData(e)}}const bt=ft;function $(o){return Array.isArray(o)?Math.min(...o):o}class vt extends fe{constructor(e,t,r,n,i,s,l){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const a=u?he(r,u):r,p=be(a),m=ve(e,t,p,n),g=Ze,b=new Ke(e,t,a,c,m*g,n),S=b.calculateSourceExtent(),x=me(S)?null:s(S,m,i),E=x?h.IDLE:h.EMPTY,w=x?x.getPixelRatio():1;super(r,n,w,E),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=b,this.targetResolution_=n,this.targetExtent_=r,this.sourceImage_=x,this.sourcePixelRatio_=w,this.interpolate_=l,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==h.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==h.LOADED){const t=M(this.targetExtent_)/this.targetResolution_,r=O(this.targetExtent_)/this.targetResolution_;this.canvas_=Ye(t,r,this.sourcePixelRatio_,$(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=e,this.changed()}load(){if(this.state==h.IDLE){this.state=h.LOADING,this.changed();const e=this.sourceImage_.getState();e==h.LOADED||e==h.ERROR?this.reproject_():(this.sourceListenerKey_=Xe(this.sourceImage_,xe.CHANGE,function(t){const r=this.sourceImage_.getState();(r==h.LOADED||r==h.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){Qe(this.sourceListenerKey_),this.sourceListenerKey_=null}}const xt=vt,y=4,U={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class _t extends ot{constructor(e,t){super(e),this.image=t}}class wt extends Je{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=et(t,e,0);e=t[r]}return e}getImage(e,t,r,n){const i=this.getProjection();if(!i||!n||re(i,n))return i&&(n=i),this.getImageInternal(e,t,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&re(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&tt(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new xt(i,n,e,t,r,(s,l,c)=>this.getImageInternal(s,l,c,i),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,n){if(this.loader){const i=ke(e,t,r,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||(this.wantedExtent_&&V(this.wantedExtent_,i)||V(this.image.getExtent(),i))&&(this.wantedResolution_&&$(this.wantedResolution_)===s||$(this.image.getResolution())===s)))return this.image;this.wantedExtent_=i,this.wantedResolution_=s,this.image=new fe(i,s,r,this.loader),this.image.addEventListener(xe.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case h.LOADING:this.loading=!0,r=U.IMAGELOADSTART;break;case h.LOADED:this.loading=!1,r=U.IMAGELOADEND;break;case h.ERROR:this.loading=!1,r=U.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new _t(r,t))}}function yt(o,e){o.getImage().src=e}function ke(o,e,t,r){const n=e/t,i=be(o),s=C(M(o)/n,y),l=C(O(o)/n,y),c=C((r-1)*s/2,y),u=s+2*c,a=C((r-1)*l/2,y),p=l+2*a;return _e(i,n,0,[u,p])}const It=wt,Ae="1.3.0";function Me(o,e,t,r,n){n.WIDTH=t[0],n.HEIGHT=t[1];const i=r.getAxisOrientation();let s;const l=Te(n.VERSION,"1.3")>=0;return n[l?"CRS":"SRS"]=r.getCode(),l&&i.substr(0,2)=="ne"?s=[e[1],e[0],e[3],e[2]]:s=e,n.BBOX=s.join(","),Re(o,n)}function St(o,e,t,r,n,i,s){i=Object.assign({REQUEST:"GetMap"},i);const l=e/t,c=[ne(M(o)/l,y),ne(O(o)/l,y)];if(t!=1)switch(s){case"geoserver":const a=90*t+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+a:i.FORMAT_OPTIONS="dpi:"+a;break;case"mapserver":i.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":i.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return Me(n,o,c,r,i)}function Oe(o,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:Ae,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},o)}function Et(o){const e=o.hidpi===void 0?!0:o.hidpi,t=we(o.projection||"EPSG:3857"),r=o.ratio||1.5,n=o.load||ye;return(i,s,l)=>{i=ke(i,s,l,r),l!=1&&(!e||o.serverType===void 0)&&(l=1);const c=St(i,s,l,t,o.url,Oe(o.params,"GetMap"),o.serverType),u=new Image;return o.crossOrigin!==null&&(u.crossOrigin=o.crossOrigin),n(u,c).then(a=>({image:a,extent:i,pixelRatio:l}))}}const ue=[101,101];class Rt extends It{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:yt,this.params_=e.params,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getFeatureInfoUrl(e,t,r,n){if(this.url_===void 0)return;const i=we(r),s=this.getProjection();s&&s!==i&&(t=ve(s,i,e,t),e=rt(e,i,s));const l=_e(e,t,0,ue),c={QUERY_LAYERS:this.params_.LAYERS};Object.assign(c,Oe(this.params_,"GetFeatureInfo"),n);const u=ie((e[0]-l[0])/t,y),a=ie((l[3]-e[1])/t,y),p=Te(c.VERSION,"1.3")>=0;return c[p?"I":"X"]=u,c[p?"J":"Y"]=a,Me(this.url_,l,ue,s||i,c)}getLegendUrl(e,t){if(this.url_===void 0)return;const r={SERVICE:"WMS",VERSION:Ae,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;r.LAYER=n}if(e!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,i=28e-5;r.SCALE=e*n/i}return Object.assign(r,t),Re(this.url_,r)}getParams(){return this.params_}getImageInternal(e,t,r,n){return this.url_===void 0?null:(this.loader||(this.loader=Et({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(i,s)=>(this.image.setImage(i),this.imageLoadFunction_(this.image,s),ye(i))})),super.getImageInternal(e,t,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const Lt=Rt,_="main";class Tt{mapId=_;async getMapConfig(){return{initialView:{kind:"position",center:{x:404747,y:5757920},zoom:14},projection:"EPSG:25832",layers:[{id:"topplus_open",title:"TopPlus Open",isBaseLayer:!0,visible:!0,layer:B("web")},{id:"topplus_open_grau",title:"TopPlus Open (Grau)",isBaseLayer:!0,visible:!1,layer:B("web_grau")},{id:"topplus_open_light",title:"TopPlus Open (Light)",isBaseLayer:!0,visible:!1,layer:B("web_light")},{title:"OSM",visible:!1,isBaseLayer:!0,layer:new Ie({source:new nt})},{title:"Haltestellen Stadt Rostock",visible:!0,layer:kt()},{title:"Kindertagesstätten",visible:!0,layer:At()},{title:"Schulstandorte",visible:!0,layer:Mt()}]}}}function B(o){const e=[-380316598427299e-8,880590808284866e-8],t=[4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.874056570353,76.4370282851763,38.2185141425881,19.1092570712941,9.55462853564703,4.77731426782352,2.38865713391176,1.19432856695588,.59716428347794],r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=i;const n=new ut({url:`https://sgx.geodatenzentrum.de/wmts_topplus_open/tile/1.0.0/${o}/{Style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png`,layer:"web_grau",matrixSet:"EU_EPSG_25832_TOPPLUS",format:"image/png",projection:"EPSG:25832",requestEncoding:"REST",tileGrid:new dt({origin:e,resolutions:t,matrixIds:r}),style:"default",attributions:`Kartendarstellung und Präsentationsgraphiken: © Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html" target="_blank">Datenquellen</a>`});return new Ie({source:n})}function kt(){const o=new de({url:"https://geo.sv.rostock.de/download/opendata/haltestellen/haltestellen.json",format:new pe,attributions:"Haltestellen Stadt Rostock, Creative Commons CC Zero License (cc-zero)"});return new ge({source:o})}function At(){const o=new de({url:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json&limit=10000",format:new pe,attributions:'&copy; <a href="http://www.bkg.bund.de" target="_blank">Bundesamt f&uuml;r Kartographie und Geod&auml;sie</a> 2017, <a href="http://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf" target="_blank">Datenquellen</a>'});return new ge({source:o})}function Mt(){return new bt({source:new Lt({url:"https://www.wms.nrw.de/wms/wms_nw_inspire-schulen",params:{LAYERS:["US.education"]},ratio:1})})}class Ot{constructor({properties:e}){const t=e.logLevel;console.debug("Log Service created with log level",t)}destroy(){console.debug("Log Service destroyed")}log(e){console.info("LOG: "+e)}}const jt={"ol-map":{name:"ol-map",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:Tt,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{}}},ui:{references:[{name:"map-sample-logging.LogService",qualifier:void 0,all:!1},{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:it,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/coordinate-viewer":{name:"@open-pioneer/coordinate-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-viewer":{name:"@open-pioneer/scale-viewer",services:{},ui:{references:[]},properties:{}},"map-sample-logging":{name:"map-sample-logging",services:{LogService:{name:"LogService",clazz:Ot,provides:[{name:"map-sample-logging.LogService",qualifier:void 0}],references:{}}},ui:{references:[]},properties:{logLevel:{value:"INFO",required:!1}}},"map-sample-scale-component":{name:"map-sample-scale-component",services:{},ui:{references:[]},properties:{}},"@open-pioneer/measurement":{name:"@open-pioneer/measurement",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/experimental-layout-sidebar":{name:"@open-pioneer/experimental-layout-sidebar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/experimental-ol-layer-control":{name:"@open-pioneer/experimental-ol-layer-control",services:{},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/test-utils":{name:"@open-pioneer/test-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-test-utils":{name:"@open-pioneer/map-test-utils",services:{},ui:{references:[]},properties:{}}},Ct=`.layout-sidebar{z-index:99}:root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:none}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.scale-wrapper .ol-scale-line{position:relative;bottom:0;left:0;background:none}.scale-wrapper .ol-scale-line .ol-scale-line-inner{color:var(--chakra-white);border-color:var(--chakra-white)}.layout-sidebar{height:100%;position:absolute;top:0}.layout-sidebar[data-theme=light]{background-color:var(--chakra-colors-whiteAlpha-700)}.layout-sidebar[data-theme=dark]{background-color:var(--chakra-colors-blackAlpha-700)}.layout-sidebar .layout-sidebar-main{transition:width .3s ease-out 0s;border-right:1px solid var(--chakra-colors-chakra-border-color)}.layout-sidebar .layout-sidebar-content{overflow:auto;transition:width .3s ease-out 0s}.layout-sidebar .layout-sidebar-content .content-section .content-header{font-size:1.5em;background-color:var(--chakra-colors-blackAlpha-500);padding:.5rem 1rem}.layout-sidebar .layout-sidebar-content .content-section .content-body{padding:1rem}
`,Pt=["en","de"];function Dt(o){switch(o){case"en":return se(()=>import("./53c82ad6df13.js"),[],import.meta.url).then(e=>e.default);case"de":return se(()=>import("./4f18e4c10815.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${o}'`)}const Nt=Pe(Ct),zt=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:Dt,locales:Pt,packages:jt,styles:Nt},Symbol.toStringTag,{value:"Module"})),Ft=25.4/.28,Gt=39.37;function Y(o){return X(o,Ut,Bt)}function Ut(o){return o.getView()}function Bt(o,e){return o.on("change:view",e)}function je(o){return Y(o)?.getProjection()}function Wt(o){const e=Y(o);return X(e,Vt,qt)}function Vt(o){return o.getResolution()}function qt(o,e){return o.on("change:resolution",e)}function $t(o){const e=Y(o);return X(e,Ht,Kt)}function Ht(o){return o.getCenter()}function Kt(o,e){return o.on("change:center",e)}function Yt(o){const e=$t(o),t=Wt(o),r=je(o);return I.useMemo(()=>{if(r==null||t==null||e==null)return;const i=q(r,t,e);return Math.round(i*Gt*Ft)},[r,t,e])}function X(o,e,t){const r=I.useCallback(()=>o?e(o):void 0,[o,e]),n=I.useCallback(i=>{if(!o)return()=>{};const s=t(o,i);return()=>Se(s)},[o,t]);return I.useSyncExternalStore(n,r)}const Xt="@open-pioneer/coordinate-viewer",Qt=H.bind(void 0,Xt),Zt=4,Jt=o=>{const{mapId:e,precision:t}=o,{containerProps:r}=Ee("coordinate-viewer",o),{map:n}=K(e),i=n?.olMap,{coordinates:s}=to(i),l=eo(s,t),c=je(i)?.getCode()??"",u=l?l+" "+c:"";return d.jsx(D,{...r,children:d.jsx(Le,{className:"coordinate-viewer-text",children:u})})};function eo(o,e){const t=Qt();return o?oo(o,e,t):""}function to(o){const[e,t]=I.useState();return I.useEffect(()=>{if(!o)return;const r=o.on("pointermove",n=>{t(n.coordinate)});return()=>Se(r)},[o]),{coordinates:e}}function oo(o,e,t){if(o[0]==null||o[1]==null)return"";const r=e??Zt,[n,i]=o,s=t.formatNumber(n,{maximumFractionDigits:r,minimumFractionDigits:r}),l=t.formatNumber(i,{maximumFractionDigits:r,minimumFractionDigits:r});return s+" "+l}const ro="@open-pioneer/scale-viewer",no=H.bind(void 0,ro),io=o=>{const{mapId:e}=o,{containerProps:t}=Ee("scale-viewer",o),{map:r}=K(e),n=no(),i=Yt(r?.olMap),s=i?n.formatNumber(i):void 0;return d.jsx(D,{...t,children:s&&d.jsxs(Le,{children:["1:",s]})})},W="units",so=[1,2,5],A=25.4/.28;class ao extends st{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+at,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(W,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(W)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(W,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,n=this.getUnits(),i=n=="degrees"?"degrees":"m";let s=q(r,e.resolution,t,i);const l=this.minWidth_*(this.dpi_||A)/A,c=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||A)/A:void 0;let u=l*s,a="";if(n=="degrees"){const v=lt.degrees;u*=v,u<v/60?(a="″",s*=3600):u<v?(a="′",s*=60):a="°"}else if(n=="imperial")u<.9144?(a="in",s/=.0254):u<1609.344?(a="ft",s/=.3048):(a="mi",s/=1609.344);else if(n=="nautical")s/=1852,a="NM";else if(n=="metric")u<.001?(a="μm",s*=1e6):u<1?(a="mm",s*=1e3):u<1e3?a="m":(a="km",s/=1e3);else if(n=="us")u<.9144?(a="in",s*=39.37):u<1609.344?(a="ft",s/=.30480061):(a="mi",s/=1609.3472);else throw new Error("Invalid units");let p=3*Math.floor(Math.log(l*s)/Math.log(10)),m,g,b,S,x,E;for(;;){b=Math.floor(p/3);const v=Math.pow(10,b);if(m=so[(p%3+3)%3]*v,g=Math.round(m/s),isNaN(g)){this.element.style.display="none",this.renderedVisible_=!1;return}if(c!==void 0&&g>=c){m=S,g=x,b=E;break}else if(g>=l)break;S=m,x=g,E=b,++p}const w=this.scaleBar_?this.createScaleBar(g,m,a):m.toFixed(b<0?-b:0)+" "+a;this.renderedHTML_!=w&&(this.innerElement_.innerHTML=w,this.renderedHTML_=w),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const n=this.getScaleForResolution(),i=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),s=this.scaleBarSteps_,l=e/s,c=[this.createMarker("absolute")];for(let a=0;a<s;++a){const p=a%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";c.push(`<div><div class="ol-scale-singlebar ${p}" style="width: ${l}px;"></div>`+this.createMarker("relative")+(a%2===0||s===2?this.createStepText(a,e,!1,t,r):"")+"</div>")}return c.push(this.createStepText(s,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+i+"</div>":"")+c.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,n,i){const l=(e===0?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+i),c=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${c}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+l+"</div>"}getScaleForResolution(){const e=q(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||A,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const lo=ao;function co(o){const{mapId:e,...t}=o,r=I.useRef(null),{map:n}=K(e);return I.useEffect(()=>{if(r.current&&n){const i=n.olMap,s=new lo({units:"metric",target:r.current});return i.addControl(s),()=>{i.removeControl(s)}}},[n]),d.jsx("div",{className:"scale-wrapper",ref:r,...t})}const uo="ol-map",po=H.bind(void 0,uo);function go(){const o=po();return d.jsx(P,{height:"100%",direction:"column",overflow:"hidden",children:d.jsxs(le,{title:d.jsx(D,{textAlign:"center",py:1,children:d.jsx(ce,{size:"md",children:"OpenLayers Base Packages - Default Sample"})}),children:[d.jsx(P,{flex:"1",direction:"column",position:"relative",children:d.jsxs(ct,{mapId:_,children:[d.jsx(ae,{position:"top-left",horizontalGap:20,verticalGap:20,children:d.jsx(D,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",children:d.jsx(le,{title:d.jsx(ce,{size:"md",children:o.formatMessage({id:"tocTitle"})}),children:d.jsx(Ne,{mapId:_,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})})}),d.jsx(ae,{position:"bottom-right",horizontalGap:10,verticalGap:30,children:d.jsxs(P,{direction:"column",gap:1,padding:1,children:[d.jsx(ze,{mapId:_}),d.jsx(Fe,{mapId:_}),d.jsx(Ge,{mapId:_})]})})]})}),d.jsxs(P,{gap:3,alignItems:"center",justifyContent:"center",children:[d.jsx(Jt,{mapId:_,precision:2}),d.jsx(co,{mapId:_}),d.jsx(io,{mapId:_})]})]})})}const ho=De({component:go,appMetadata:zt,async resolveConfig(o){const e=o.getAttribute("forced-locale");if(e)return{locale:e}}});customElements.define("ol-map-app",ho);const mo=document.getElementsByTagName("body")[0];fo();function fo(){const o=window.location.search,t=new URLSearchParams(o).get("lang"),r=document.createElement("ol-map-app");r.classList.add("full-height"),r.setAttribute("id","test"),t&&r.setAttribute("forced-locale",t),mo.appendChild(r)}
