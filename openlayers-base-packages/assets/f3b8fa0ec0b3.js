var bn=Object.defineProperty;var Sn=(o,e,t)=>e in o?bn(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Oo=(o,e,t)=>(Sn(o,typeof e!="symbol"?e+"":e,t),t),Yt=(o,e,t)=>{if(!e.has(o))throw TypeError("Cannot "+t)};var C=(o,e,t)=>(Yt(o,e,"read from private field"),t?t.call(o):e.get(o)),R=(o,e,t)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,t)},O=(o,e,t,s)=>(Yt(o,e,"write to private field"),s?s.call(o,t):e.set(o,t),t);var $=(o,e,t)=>(Yt(o,e,"access private method"),t);import{f as yo,j as c,r as p,u as yn,c as ae,i as Ot,a as ye,g as wn,R as gs,E as oe,b as _n,A as Xt,d as Zt,F as ms,B as wo,C as xn,t as kn,e as vs,I as Cn,h as En}from"./3c75eb6dca66.js";import{t as Pn}from"./0ddaed1bda33.js";import{b as bs,B as Ss,i as Mn,g as Ln,a as Do,t as Tn,c as An,d as ys,S as Rn,e as In,f as On,h as Dn,j as jn,r as Nn,C as Fn,k as Vn,l as Bn,u as Gn,m as ws,M as _s,o as zn,n as Un,p as xs,A as Wn,T as _o,I as $n,q as Hn,s as ao,v as Se,w as qn,x as Kn,V as ks,y as xt,O as Cs,z as Je,D as Me,E as Pe,F as xo,G as $e,P as Yn,H as Xn,J as Zn,K as jo,L as Jn,N as Qn,Q as No,R as er,U as tr,W as Es,X as de,Y as or,Z as Ps,_ as we,$ as Oe,a0 as Fo,a1 as sr,a2 as $t,a3 as nr,a4 as Ms,a5 as rr,a6 as ir,a7 as Ls,a8 as ar,a9 as lr,aa as J,ab as cr,ac as Ts,ad as ur,ae as Vo,af as As,ag as dr,ah as Bo,ai as hr,aj as Jt,ak as Go,al as fr,am as pr,an as gr,ao as mr,ap as vr,aq as br,ar as zo,as as Sr,at as yr,au as wr,av as Rs,aw as Ce,ax as _r,ay as xr,az as kr,aA as Uo,aB as Cr,aC as Wo,aD as Er,aE as kt}from"./1b4899316e13.js";import{m as N,a as k,X as Is,p as B,r as D,b as Z,c as ko,d as lo,e as be,f as Pr,g as Mr,W as wt,P as Os,h as Ds,i as Lr,j as Tr,k as Ar,l as Rr,n as Ir,o as Or}from"./43ae13570e50.js";import{o as Dr,W as jr}from"./c34b412998f5.js";import{u as ne,c as _t,T as Qe,S as et,a as fe}from"./29276a06a447.js";import{G as Co,M as Nr,a as js,b as Ns,c as Fr,T as Vr}from"./391759e40adf.js";import{T as le}from"./8d3619b1618e.js";import{B as V}from"./5821444c040b.js";import{V as Br,S as Gr,I as zr,Z as Ur,a as Wr}from"./6c4a924e05a1.js";import{N as $r,W as Hr,u as He,a as qr}from"./d3d60b2a5bea.js";import{E as Fs}from"./960f2965a833.js";import{_ as $o}from"./a419295615be.js";import{u as ce,a as Ht}from"./c8563f515675.js";import{F as ie}from"./e32f2adefa8f.js";import{L as Vs}from"./a15d5a084848.js";import{S as Kr}from"./41f0f45560dd.js";import{V as co}from"./370775b767ef.js";import{I as Yr}from"./6fce88cd6d46.js";import{G as Xr,F as Zr}from"./279b8b7adcbe.js";import{L as De}from"./29d7f0536452.js";import{F as uo}from"./6e6e91405559.js";import{F as ho}from"./6f23bcec02df.js";import{H as Jr}from"./ca3f238b2931.js";import{S as Qr}from"./439c7510465c.js";import{R as ei}from"./f095637e972d.js";import{c as ti}from"./e804ae90afff.js";import{c as ue,S as fo}from"./7fb34ca20623.js";import{C as oi}from"./2450f17c5c8c.js";import{D as si}from"./57fdc3ec4cc8.js";import"./6e4b271f6c10.js";import"./d874786889e6.js";import"./729f6a123e98.js";import"./75c5289c2316.js";import"./61af2704229d.js";var po=yo(function(e,t){const{htmlWidth:s,htmlHeight:n,alt:r,...i}=e;return c.jsx("img",{width:s,height:n,ref:t,alt:r,...i})});po.displayName="NativeImage";function ni(o){const{loading:e,src:t,srcSet:s,onLoad:n,onError:r,crossOrigin:i,sizes:a,ignoreFallback:u}=o,[l,d]=p.useState("pending");p.useEffect(()=>{d(t?"loading":"pending")},[t]);const h=p.useRef(),g=p.useCallback(()=>{if(!t)return;m();const y=new Image;y.src=t,i&&(y.crossOrigin=i),s&&(y.srcset=s),a&&(y.sizes=a),e&&(y.loading=e),y.onload=w=>{m(),d("loaded"),n?.(w)},y.onerror=w=>{m(),d("failed"),r?.(w)},h.current=y},[t,i,s,a,n,r,e]),m=()=>{h.current&&(h.current.onload=null,h.current.onerror=null,h.current=null)};return yn(()=>{if(!u)return l==="loading"&&g(),()=>{m()}},[l,g,u]),u?"loaded":l}var ri=(o,e)=>o!=="loaded"&&e==="beforeLoadOrError"||o==="failed"&&e==="onError";function ii(o,e=[]){const t=Object.assign({},o);for(const s of e)s in t&&delete t[s];return t}var Bs=yo(function(e,t){const{fallbackSrc:s,fallback:n,src:r,srcSet:i,align:a,fit:u,loading:l,ignoreFallback:d,crossOrigin:h,fallbackStrategy:g="beforeLoadOrError",referrerPolicy:m,...y}=e,w=s!==void 0||n!==void 0,T=l!=null||d||!w,P=ni({...e,crossOrigin:h,ignoreFallback:T}),I=ri(P,g),L={ref:t,objectFit:u,objectPosition:a,...T?y:ii(y,["onError","onLoad"])};return I?n||c.jsx(ae.img,{as:po,className:"chakra-image__placeholder",src:s,...L}):c.jsx(ae.img,{as:po,src:r,srcSet:i,crossOrigin:h,loading:l,referrerPolicy:m,className:"chakra-image",...L})});Bs.displayName="Image";var Gs=ae("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Gs.displayName="Center";var ai={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};yo(function(e,t){const{axis:s="both",...n}=e;return c.jsx(ae.div,{ref:t,__css:ai[s],...n,position:"absolute"})});const X=[null,"http://www.opengis.net/ows/1.1"],li=N(X,{ServiceIdentification:k(Ii),ServiceProvider:k(Di),OperationsMetadata:k(Ai)});class ci extends Is{constructor(){super()}readFromNode(e){const t=B({},li,e,[]);return t||null}}const ui=N(X,{DeliveryPoint:k(D),City:k(D),AdministrativeArea:k(D),PostalCode:k(D),Country:k(D),ElectronicMailAddress:k(D)}),di=N(X,{Value:Z(ji)}),hi=N(X,{AllowedValues:k(ki)}),fi=N(X,{Phone:k(Ri),Address:k(xi)}),pi=N(X,{HTTP:k(Li)}),gi=N(X,{Get:Z(Mi),Post:void 0}),mi=N(X,{DCP:k(Pi)}),vi=N(X,{Operation:Ti}),bi=N(X,{Voice:k(D),Facsimile:k(D)}),Si=N(X,{Constraint:Z(Ci)}),yi=N(X,{IndividualName:k(D),PositionName:k(D),ContactInfo:k(Ei)}),wi=N(X,{Abstract:k(D),AccessConstraints:k(D),Fees:k(D),Title:k(D),ServiceTypeVersion:k(D),ServiceType:k(D)}),_i=N(X,{ProviderName:k(D),ProviderSite:k(ko),ServiceContact:k(Oi)});function xi(o,e){return B({},ui,o,e)}function ki(o,e){return B({},di,o,e)}function Ci(o,e){const t=o.getAttribute("name");if(t)return B({name:t},hi,o,e)}function Ei(o,e){return B({},fi,o,e)}function Pi(o,e){return B({},pi,o,e)}function Mi(o,e){const t=ko(o);if(t)return B({href:t},Si,o,e)}function Li(o,e){return B({},gi,o,e)}function Ti(o,e){const t=o.getAttribute("name"),s=B({},mi,o,e);if(!s)return;const n=e[e.length-1];n[t]=s}function Ai(o,e){return B({},vi,o,e)}function Ri(o,e){return B({},bi,o,e)}function Ii(o,e){return B({},wi,o,e)}function Oi(o,e){return B({},yi,o,e)}function Di(o,e){return B({},_i,o,e)}function ji(o,e){return D(o)}const Ni=ci,re=[null,"http://www.opengis.net/wmts/1.0"],tt=[null,"http://www.opengis.net/ows/1.1"],Fi=N(re,{Contents:k(Xi)});class Vi extends Is{constructor(){super(),this.owsParser_=new Ni}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let s=this.owsParser_.readFromNode(e);return s?(s.version=t,s=B(s,Fi,e,[]),s||null):null}}const Bi=N(re,{Layer:Z(Zi),TileMatrixSet:Z(Ji)}),Gi=N(re,{Style:Z(Qi),Format:Z(D),TileMatrixSetLink:Z(ea),Dimension:Z(ta),ResourceURL:Z(oa)},N(tt,{Title:k(D),Abstract:k(D),WGS84BoundingBox:k(zs),Identifier:k(D)})),zi=N(re,{LegendURL:Z(sa)},N(tt,{Title:k(D),Identifier:k(D)})),Ui=N(re,{TileMatrixSet:k(D),TileMatrixSetLimits:k(ra)}),Wi=N(re,{TileMatrixLimits:lo(ia)}),$i=N(re,{TileMatrix:k(D),MinTileRow:k(be),MaxTileRow:k(be),MinTileCol:k(be),MaxTileCol:k(be)}),Hi=N(re,{Default:k(D),Value:Z(D)},N(tt,{Identifier:k(D)})),qi=N(tt,{LowerCorner:lo(go),UpperCorner:lo(go)}),Ki=N(re,{WellKnownScaleSet:k(D),TileMatrix:Z(na)},N(tt,{SupportedCRS:k(D),Identifier:k(D),BoundingBox:k(zs)})),Yi=N(re,{TopLeftCorner:k(go),ScaleDenominator:k(Pr),TileWidth:k(be),TileHeight:k(be),MatrixWidth:k(be),MatrixHeight:k(be)},N(tt,{Identifier:k(D)}));function Xi(o,e){return B({},Bi,o,e)}function Zi(o,e){return B({},Gi,o,e)}function Ji(o,e){return B({},Ki,o,e)}function Qi(o,e){const t=B({},zi,o,e);if(!t)return;const s=o.getAttribute("isDefault")==="true";return t.isDefault=s,t}function ea(o,e){return B({},Ui,o,e)}function ta(o,e){return B({},Hi,o,e)}function oa(o,e){const t=o.getAttribute("format"),s=o.getAttribute("template"),n=o.getAttribute("resourceType"),r={};return t&&(r.format=t),s&&(r.template=s),n&&(r.resourceType=n),r}function zs(o,e){const t=B([],qi,o,e);if(t.length==2)return bs(t)}function sa(o,e){const t={};return t.format=o.getAttribute("format"),t.href=ko(o),t}function go(o,e){const t=D(o).split(/\s+/);if(!t||t.length!=2)return;const s=+t[0],n=+t[1];if(!(isNaN(s)||isNaN(n)))return[s,n]}function na(o,e){return B({},Yi,o,e)}function ra(o,e){return B([],Wi,o,e)}function ia(o,e){return B({},$i,o,e)}const aa=Vi,z={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},la={ERROR:"error"};class ca extends ys{constructor(e){super(la.ERROR),this.code=e.code,this.message=e.message}}let ua=class extends Ss{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=Mn,this.watchId_=void 0,this.addChangeListener(z.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(z.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=Ln(Do("EPSG:4326"),e),this.position_&&this.set(z.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(z.ACCURACY,t.accuracy),this.set(z.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(z.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(z.HEADING,t.heading===null?void 0:Tn(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const s=this.transform_(this.position_);this.set(z.POSITION,s.slice()),this.set(z.SPEED,t.speed===null?void 0:t.speed);const n=An(this.position_,t.accuracy);n.applyTransform(this.transform_),this.set(z.ACCURACY_GEOMETRY,n),this.changed()}positionError_(e){this.dispatchEvent(new ca(e))}getAccuracy(){return this.get(z.ACCURACY)}getAccuracyGeometry(){return this.get(z.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(z.ALTITUDE)}getAltitudeAccuracy(){return this.get(z.ALTITUDE_ACCURACY)}getHeading(){return this.get(z.HEADING)}getPosition(){return this.get(z.POSITION)}getProjection(){return this.get(z.PROJECTION)}getSpeed(){return this.get(z.SPEED)}getTracking(){return this.get(z.TRACKING)}getTrackingOptions(){return this.get(z.TRACKING_OPTIONS)}setProjection(e){this.set(z.PROJECTION,Do(e))}setTracking(e){this.set(z.TRACKING,e)}setTrackingOptions(e){this.set(z.TRACKING_OPTIONS,e)}};const da=ua;class qt extends Rn{constructor(e,t,s){super(),s!==void 0&&t===void 0?this.setFlatCoordinates(s,e):(t=t||0,this.setCenterAndRadius(e,t,s))}clone(){const e=new qt(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,s,n){const r=this.flatCoordinates,i=e-r[0],a=t-r[1],u=i*i+a*a;if(u<n){if(u===0)for(let l=0;l<this.stride;++l)s[l]=r[l];else{const l=this.getRadius()/Math.sqrt(u);s[0]=r[0]+l*i,s[1]=r[1]+l*a;for(let d=2;d<this.stride;++d)s[d]=r[d]}return s.length=this.stride,u}return n}containsXY(e,t){const s=this.flatCoordinates,n=e-s[0],r=t-s[1];return n*n+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,s=t[this.stride]-t[0];return In(t[0]-s,t[1]-s,t[0]+s,t[1]+s,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(On(e,t)){const s=this.getCenter();return e[0]<=s[0]&&e[2]>=s[0]||e[1]<=s[1]&&e[3]>=s[1]?!0:Dn(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,s=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+s;for(let r=1;r<t;++r)n[t+r]=e[r];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,t,s){this.setLayout(s,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let r=jn(n,0,e,this.stride);n[r++]=n[0]+t;for(let i=1,a=this.stride;i<a;++i)n[r++]=n[i];n.length=r,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const s=this.getCenter(),n=this.getStride();this.setCenter(Nn(s,0,s.length,n,e,t,s)),this.changed()}}qt.prototype.transform;const ha=qt,q={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class fa extends Ss{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+Fn,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(q.ELEMENT,this.handleElementChanged),this.addChangeListener(q.MAP,this.handleMapChanged),this.addChangeListener(q.OFFSET,this.handleOffsetChanged),this.addChangeListener(q.POSITION,this.handlePositionChanged),this.addChangeListener(q.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(q.ELEMENT)}getId(){return this.id}getMap(){return this.get(q.MAP)||null}getOffset(){return this.get(q.OFFSET)}getPosition(){return this.get(q.POSITION)}getPositioning(){return this.get(q.POSITIONING)}handleElementChanged(){Vn(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(Bn(this.element),Gn(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=ws(e,_s.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(q.ELEMENT,e)}setMap(e){this.set(q.MAP,e)}setOffset(e){this.set(q.OFFSET,e)}setPosition(e){this.set(q.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(q.POSITION))return;const s=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),r=this.getRect(n,[zn(n),Un(n)]);e=e||{};const i=e.margin===void 0?20:e.margin;if(!xs(s,r)){const a=r[0]-s[0],u=s[2]-r[2],l=r[1]-s[1],d=s[3]-r[3],h=[0,0];if(a<0?h[0]=a-i:u<0&&(h[0]=Math.abs(u)+i),l<0?h[1]=l-i:d<0&&(h[1]=Math.abs(d)+i),h[0]!==0||h[1]!==0){const g=t.getView().getCenterInternal(),m=t.getPixelFromCoordinateInternal(g);if(!m)return;const y=[m[0]+h[0],m[1]+h[1]],w=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(y),duration:w.duration,easing:w.easing})}}}getRect(e,t){const s=e.getBoundingClientRect(),n=s.left+window.pageXOffset,r=s.top+window.pageYOffset;return[n,r,n+t[0],r+t[1]]}setPositioning(e){this.set(q.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const s=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(s,n)}updateRenderedPosition(e,t){const s=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);const i=Math.round(e[0]+n[0])+"px",a=Math.round(e[1]+n[1])+"px";let u="0%",l="0%";r=="bottom-right"||r=="center-right"||r=="top-right"?u="-100%":(r=="bottom-center"||r=="center-center"||r=="top-center")&&(u="-50%"),r=="bottom-left"||r=="bottom-center"||r=="bottom-right"?l="-100%":(r=="center-left"||r=="center-center"||r=="center-right")&&(l="-50%");const d=`translate(${u}, ${l}) translate(${i}, ${a})`;this.rendered.transform_!=d&&(this.rendered.transform_=d,s.transform=d)}getOptions(){return this.options}}const Dt=fa,_e=ye("map:WMTSLayer");var je,Ne,Fe,Ve,ct,ut,dt,ht,Ft,Us,Vt,Ws;class pa extends Wn{constructor(t){const s=new _o;super({...t,olLayer:s});R(this,Ft);R(this,Vt);R(this,je,void 0);R(this,Ne,void 0);R(this,Fe,void 0);R(this,Ve,void 0);R(this,ct,void 0);R(this,ut,void 0);R(this,dt,void 0);R(this,ht,new AbortController);O(this,je,t.url),O(this,Ne,t.name),O(this,Ve,s),O(this,Fe,t.matrixSet),O(this,dt,t.sourceOptions)}destroy(){super.destroy(),C(this,ht).abort()}get legend(){return C(this,ut)}__attach(t){super.__attach(t),$(this,Ft,Us).call(this).then(s=>{const r=new aa().read(s),i=Dr(r,{layer:C(this,Ne),matrixSet:C(this,Fe)});if(!i)throw new Error("Layer was not found in capabilities");const a=new jr({...i,...C(this,dt),tileLoadFunction:(d,h)=>{$(this,Vt,Ws).call(this,d,h)}});O(this,ct,a),C(this,Ve).setSource(C(this,ct));const u=a.getStyle(),l=ma(r,this.name,u);O(this,ut,l),this.__emitChangeEvent("changed:legend")}).catch(s=>{if(Ot(s)){_e.error(`Layer ${this.name} has been destroyed before fetching the data`);return}_e.error(`Failed fetching WMTS capabilities for Layer ${this.name}`,s)})}get layer(){return C(this,Ve)}get url(){return C(this,je)}get name(){return C(this,Ne)}get matrixSet(){return C(this,Fe)}get sublayers(){}}je=new WeakMap,Ne=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,Ft=new WeakSet,Us=async function(){const t=this.map.__sharedDependencies.httpService;return Mr(C(this,je),t,C(this,ht).signal)},Vt=new WeakSet,Ws=async function(t,s){const n=this.map.__sharedDependencies.httpService;try{if(!(t instanceof $n))throw new Error("Only 'ImageTile' is supported for now.");const r=t.getImage();if(!ga(r))throw new Error("Only <img> tags are supported as tiles for now.");const i=await n.fetch(s);if(!i.ok)throw new Error(`Tile request failed with status ${i.status}.`);const a=await i.blob(),u=URL.createObjectURL(a),l=()=>{URL.revokeObjectURL(u),r.removeEventListener("load",l),r.removeEventListener("error",l)};r.addEventListener("load",l),r.addEventListener("error",l),r.src=u}catch(r){t.setState(Hn.ERROR),Ot(r)||_e.error("Failed to load tile",r)}};function ga(o){return o.tagName==="IMG"}function ma(o,e,t){const n=o?.Contents?.Layer;let r=n?.find(l=>l?.Identifier===e);if(!r&&(_e.debug("Failed to find the active layer in WMTS layer capabilities."),r=n?.[0],!r)){_e.debug("No layer in WMTS capabilities - giving up.");return}const i=r.Style;let a=i?.find(l=>l?.Identifier===t);if(!a&&(_e.debug("Failed to find active style in WMTS layer."),a=i?.[0],!a)){_e.debug("No style in WMTS layer capabilities - giving up.");return}return a.LegendURL?.[0]?.href}const Ho=pa,va=25.4/.28,ba=39.37;function Eo(o){return Po(o,Sa,ya)}function Sa(o){return o.getView()}function ya(o,e){return o.on("change:view",e)}function $s(o){return Eo(o)?.getProjection()}function wa(o){const e=Eo(o);return Po(e,_a,xa)}function _a(o){return o.getResolution()}function xa(o,e){return o.on("change:resolution",e)}function ka(o){const e=Eo(o);return Po(e,Ca,Ea)}function Ca(o){return o.getCenter()}function Ea(o,e){return o.on("change:center",e)}function Pa(o){const e=ka(o),t=wa(o),s=$s(o);return p.useMemo(()=>{if(s==null||t==null||e==null)return;const r=ao(s,t,e);return Math.round(r*ba*va)},[s,t,e])}function Po(o,e,t){const s=p.useCallback(()=>o?e(o):void 0,[o,e]),n=p.useCallback(r=>{if(!o)return()=>{};const i=t(o,r);return()=>Se(i)},[o,t]);return p.useSyncExternalStore(n,s)}const Ma=1.2;function La(o,e=Ma){Ta(o);const t=qn(o),s=Kn(o),n=t*e,r=s*e;return[o[0]-(n-t)/2,o[1]-(r-s)/2,o[2]+(n-t)/2,o[3]+(r-s)/2]}function Ta(o){if(o.length!==4)throw new Error(`Invalid extent (expected length 4, but got length ${o.length}).`)}const Aa={height:"25px",width:"25px",borderColor:"#4cb3ff",borderWidth:"3px",borderRadius:"50%",display:"inline-block "};function Ra(o){return c.jsxs(V,{children:[c.jsx(le,{children:o.layer.title}),c.jsx(V,{style:Aa})]})}const U="main";class Ia{mapId=U;vectorSourceFactory;constructor(e){this.vectorSourceFactory=e.references.vectorSourceFactory}async getMapConfig(){const e={Component:Ra};return{advanced:{view:new ks({center:[404747,5757920],zoom:13,constrainResolution:!0,projection:"EPSG:25832"})},layers:[new wt({title:"Linfos",visible:!0,url:"https://www.wms.nrw.de/umwelt/linfos",sublayers:[{name:"SonstigeSchutzgebiete",title:"SonstigeSchutzgebiete"},{name:"SCH_GSG",title:"SCH_GSG"}]}),new Ho({isBaseLayer:!0,title:"Topplus grau",url:"https://www.wmts.nrw.de/topplus_open/1.0.0/WMTSCapabilities.xml",name:"topplus_grau",matrixSet:"EPSG_25832_14",visible:!1,sourceOptions:{attributions:`Kartendarstellung und Präsentationsgraphiken: &copy; Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a title="Datenquellen öffnen" aria-label="Datenquellen öffnen" href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html " target="_blank">Datenquellen</a>`}}),new Ho({isBaseLayer:!0,title:"Topplus farbig",url:"https://www.wmts.nrw.de/topplus_open/1.0.0/WMTSCapabilities.xml",name:"topplus_col",matrixSet:"EPSG_25832_14",visible:!1,sourceOptions:{attributions:`Kartendarstellung und Präsentationsgraphiken: &copy; Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a title="Datenquellen öffnen" aria-label="Datenquellen öffnen" href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html " target="_blank">Datenquellen</a>`}}),new xt({title:"OSM",visible:!1,isBaseLayer:!0,olLayer:new _o({source:new Cs})}),new xt({title:"Haltestellen Stadt Rostock",visible:!0,description:"Haltestellen des öffentlichen Personenverkehrs in der Hanse- und Universitätsstadt Rostock.",olLayer:Oa(),attributes:{legend:e}}),new xt({id:"ogc_kitas",title:"Kindertagesstätten",visible:!0,olLayer:Da(),attributes:{legend:e,resultListMetadata:[{id:"id",displayName:"ID",width:100,getPropertyValue(t){return t.id}},{propertyName:"pointOfContact.address.postCode",displayName:"PLZ",width:120},{propertyName:"name",displayName:"Name"},{propertyName:"inspireId",displayName:"inspireID"},{propertyName:"gefoerdert",displayName:"Gefördert",width:160}]}}),new xt({id:"ogc_kataster",title:"Liegenschaftskatasterbezirke in NRW (viele Daten)",visible:!1,olLayer:ja(this.vectorSourceFactory),attributes:{resultListMetadata:[{propertyName:"id",displayName:"ID",width:600,getPropertyValue(t){return t.id}},{propertyName:"aktualit",displayName:"Aktualit",width:600}]}}),Va(),Ba(),Na(),Fa()]}}}function Oa(){const o=new Je({url:"https://geo.sv.rostock.de/download/opendata/haltestellen/haltestellen.json",format:new Co,attributions:"Haltestellen Stadt Rostock, Creative Commons CC Zero License (cc-zero)"});return new Me({source:o})}function Da(){const o=new Je({url:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json&limit=10000",format:new Co,attributions:'&copy; <a href="http://www.bkg.bund.de" target="_blank">Bundesamt f&uuml;r Kartographie und Geod&auml;sie</a> 2017, <a href="http://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf" target="_blank">Datenquellen</a>'});return new Me({source:o,style:new Pe({image:new xo({fill:new $e({color:"blue"}),radius:4})})})}function ja(o){const e=o.createVectorSource({baseUrl:"https://ogc-api.nrw.de/lika/v1",collectionId:"katasterbezirk",limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/25832",attributions:"<a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>"});return new Me({source:e})}function Na(){return new wt({title:"Verwaltungsgebiete",visible:!0,url:"https://www.wms.nrw.de/geobasis/wms_nw_dvg",sublayers:[{name:"nw_dvg_bld",title:"NRW"}]})}function Fa(){return new wt({title:"Bodenkarte zur Landwirtschaftlichen Standorterkundung",visible:!0,url:"https://www.wms.nrw.de/gd/bk05l",sublayers:[{name:"Versickerung_und_Stofftransport",title:"Versickerung und Stofftransport",sublayers:[{name:"Sickerwasserrate",title:"Sickerwasserrate",sublayers:[{name:"Szenario_Wald",title:"Szenario Wald",sublayers:[{name:"Sickerwasserrate_Wald",title:"Sickerwasserrate Wald"},{name:"Direktabfluss_Wald",title:"Direktabfluss Wald"}]},{name:"Szenario_Gruenland",title:"Szenario Grünland",sublayers:[{name:"Sickerwasserrate_Gruenland",title:"Sickerwasserrate Grünland"},{name:"Direktabfluss_Gruenland",title:"Direktabfluss Grünland"}]}]}]},{name:"Wasserhaushalt",title:"Wasserhaushalt",sublayers:[{name:"Kapillaraufstieg_von_Grundwasser",title:"Kapillaraufstieg von Grundwasser",attributes:{legend:{imageUrl:"https://www.wms.nrw.de/gd/bk05l?request=GetLegendGraphic%26version=1.3.0%26format=image/png%26layer=Kapillaraufstieg_von_Grundwasser"}}},{name:"Luftkapazitaet_We",title:"Luftkapazitaet (We)",attributes:{legend:{}}}]}]})}function Va(){return new wt({title:"Schulstandorte",description:"Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.",visible:!0,url:"https://www.wms.nrw.de/wms/wms_nw_inspire-schulen",sublayers:[{name:"US.education",title:"INSPIRE - WMS Schulstandorte NRW",attributes:{legend:{}}}],sourceOptions:{ratio:1}})}function Ba(){return new wt({title:"Straßennetz Landesbetrieb Straßenbau NRW",url:"https://www.wms.nrw.de/wms/strassen_nrw_wms",visible:!0,sublayers:[{name:"1",title:"Verwaltungen",attributes:{legend:{imageUrl:"https://www.wms.nrw.de/legends/wms/strassen_nrw_wms/1.png"}}},{name:"4",title:"Abschnitte und Äste"},{name:"6",title:"Unfälle"}]})}const Ga=Symbol(),Mo=Symbol(),ot="a",It="w";let za=(o,e)=>new Proxy(o,e);const mo=Object.getPrototypeOf,vo=new WeakMap,Hs=o=>o&&(vo.has(o)?vo.get(o):mo(o)===Object.prototype||mo(o)===Array.prototype),qo=o=>typeof o=="object"&&o!==null,Ua=o=>{if(Array.isArray(o))return Array.from(o);const e=Object.getOwnPropertyDescriptors(o);return Object.values(e).forEach(t=>{t.configurable=!0}),Object.create(mo(o),e)},qs=o=>o[Mo]||o,Ks=(o,e,t,s)=>{if(!Hs(o))return o;let n=s&&s.get(o);if(!n){const u=qs(o);n=(l=>Object.values(Object.getOwnPropertyDescriptors(l)).some(d=>!d.configurable&&!d.writable))(u)?[u,Ua(u)]:[u],s?.set(o,n)}const[r,i]=n;let a=t&&t.get(r);return a&&a[1].f===!!i||(a=((u,l)=>{const d={f:l};let h=!1;const g=(y,w)=>{if(!h){let T=d[ot].get(u);if(T||(T={},d[ot].set(u,T)),y===It)T[It]=!0;else{let P=T[y];P||(P=new Set,T[y]=P),P.add(w)}}},m={get:(y,w)=>w===Mo?u:(g("k",w),Ks(Reflect.get(y,w),d[ot],d.c,d.t)),has:(y,w)=>w===Ga?(h=!0,d[ot].delete(u),!0):(g("h",w),Reflect.has(y,w)),getOwnPropertyDescriptor:(y,w)=>(g("o",w),Reflect.getOwnPropertyDescriptor(y,w)),ownKeys:y=>(g(It),Reflect.ownKeys(y))};return l&&(m.set=m.deleteProperty=()=>!1),[m,d]})(r,!!i),a[1].p=za(i||r,a[0]),t&&t.set(r,a)),a[1][ot]=e,a[1].c=t,a[1].t=s,a[1].p},Ys=(o,e,t,s)=>{if(Object.is(o,e))return!1;if(!qo(o)||!qo(e))return!0;const n=t.get(qs(o));if(!n)return!0;if(s){const i=s.get(o);if(i&&i.n===e)return i.g;s.set(o,{n:e,g:!1})}let r=null;try{for(const i of n.h||[])if(r=Reflect.has(o,i)!==Reflect.has(e,i),r)return r;if(n[It]===!0){if(r=((i,a)=>{const u=Reflect.ownKeys(i),l=Reflect.ownKeys(a);return u.length!==l.length||u.some((d,h)=>d!==l[h])})(o,e),r)return r}else for(const i of n.o||[])if(r=!!Reflect.getOwnPropertyDescriptor(o,i)!=!!Reflect.getOwnPropertyDescriptor(e,i),r)return r;for(const i of n.k||[])if(r=Ys(o[i],e[i],t,s),r)return r;return r===null&&(r=!0),r}finally{s&&s.set(o,{n:e,g:r})}},Wa=o=>Hs(o)&&o[Mo]||null,Ko=(o,e=!0)=>{vo.set(o,e)};const Qt=o=>typeof o=="object"&&o!==null,pe=new WeakMap,at=new WeakSet,$a=(o=Object.is,e=(l,d)=>new Proxy(l,d),t=l=>Qt(l)&&!at.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),s=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},n=new WeakMap,r=(l,d,h=s)=>{const g=n.get(l);if(g?.[0]===d)return g[1];const m=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return Ko(m,!0),n.set(l,[d,m]),Reflect.ownKeys(l).forEach(y=>{if(Object.getOwnPropertyDescriptor(m,y))return;const w=Reflect.get(l,y),{enumerable:T}=Reflect.getOwnPropertyDescriptor(l,y),P={value:w,enumerable:T,configurable:!0};if(at.has(w))Ko(w,!1);else if(w instanceof Promise)delete P.value,P.get=()=>h(w);else if(pe.has(w)){const[I,L]=pe.get(w);P.value=r(I,L(),h)}Object.defineProperty(m,y,P)}),Object.preventExtensions(m)},i=new WeakMap,a=[1,1],u=l=>{if(!Qt(l))throw new Error("object required");const d=i.get(l);if(d)return d;let h=a[0];const g=new Set,m=(b,S=++a[0])=>{h!==S&&(h=S,g.forEach(f=>f(b,S)))};let y=a[1];const w=(b=++a[1])=>(y!==b&&!g.size&&(y=b,P.forEach(([S])=>{const f=S[1](b);f>h&&(h=f)})),h),T=b=>(S,f)=>{const _=[...S];_[1]=[b,..._[1]],m(_,f)},P=new Map,I=(b,S)=>{if(g.size){const f=S[3](T(b));P.set(b,[S,f])}else P.set(b,[S])},L=b=>{var S;const f=P.get(b);f&&(P.delete(b),(S=f[1])==null||S.call(f))},K=b=>(g.add(b),g.size===1&&P.forEach(([f,_],M)=>{const x=f[3](T(M));P.set(M,[f,x])}),()=>{g.delete(b),g.size===0&&P.forEach(([f,_],M)=>{_&&(_(),P.set(M,[f]))})}),Y=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),W=e(Y,{deleteProperty(b,S){const f=Reflect.get(b,S);L(S);const _=Reflect.deleteProperty(b,S);return _&&m(["delete",[S],f]),_},set(b,S,f,_){const M=Reflect.has(b,S),x=Reflect.get(b,S,_);if(M&&(o(x,f)||i.has(f)&&o(x,i.get(f))))return!0;L(S),Qt(f)&&(f=Wa(f)||f);let E=f;if(f instanceof Promise)f.then(F=>{f.status="fulfilled",f.value=F,m(["resolve",[S],F])}).catch(F=>{f.status="rejected",f.reason=F,m(["reject",[S],F])});else{!pe.has(f)&&t(f)&&(E=u(f));const F=!at.has(E)&&pe.get(E);F&&I(S,F)}return Reflect.set(b,S,E,_),m(["set",[S],f,x]),!0}});i.set(l,W);const v=[Y,w,r,K];return pe.set(W,v),Reflect.ownKeys(l).forEach(b=>{const S=Object.getOwnPropertyDescriptor(l,b);"value"in S&&(W[b]=l[b],delete S.value,delete S.writable),Object.defineProperty(Y,b,S)}),W})=>[u,pe,at,o,e,t,s,n,r,i,a],[Ha]=$a();function Xs(o={}){return Ha(o)}function qa(o,e,t){const s=pe.get(o);let n;const r=[],i=s[3];let a=!1;const l=i(d=>{if(r.push(d),t){e(r.splice(0));return}n||(n=Promise.resolve().then(()=>{n=void 0,a&&e(r.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Yo(o,e){const t=pe.get(o),[s,n,r]=t;return r(s,n(),e)}function st(o){return at.add(o),o}var Zs={exports:{}},Js={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qe=p;function Ka(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var Ya=typeof Object.is=="function"?Object.is:Ka,Xa=qe.useState,Za=qe.useEffect,Ja=qe.useLayoutEffect,Qa=qe.useDebugValue;function el(o,e){var t=e(),s=Xa({inst:{value:t,getSnapshot:e}}),n=s[0].inst,r=s[1];return Ja(function(){n.value=t,n.getSnapshot=e,eo(n)&&r({inst:n})},[o,t,e]),Za(function(){return eo(n)&&r({inst:n}),o(function(){eo(n)&&r({inst:n})})},[o]),Qa(t),t}function eo(o){var e=o.getSnapshot;o=o.value;try{var t=e();return!Ya(o,t)}catch{return!0}}function tl(o,e){return e()}var ol=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tl:el;Js.useSyncExternalStore=qe.useSyncExternalStore!==void 0?qe.useSyncExternalStore:ol;Zs.exports=Js;var sl=Zs.exports;const nl=wn(sl),{use:Xo}=gs,{useSyncExternalStore:rl}=nl;const il=new WeakMap;function Ke(o,e){const t=e?.sync,s=p.useRef(),n=p.useRef();let r=!0;const i=rl(p.useCallback(l=>{const d=qa(o,l,t);return l(),d},[o,t]),()=>{const l=Yo(o,Xo);try{if(!r&&s.current&&n.current&&!Ys(s.current,l,n.current,new WeakMap))return s.current}catch{}return l},()=>Yo(o,Xo));r=!1;const a=new WeakMap;p.useEffect(()=>{s.current=i,n.current=a});const u=p.useMemo(()=>new WeakMap,[]);return Ks(i,a,u,il)}function al(o){const e=Xs({data:Array.from(o||[]),has(t){return this.data.some(s=>s[0]===t)},set(t,s){const n=this.data.find(r=>r[0]===t);return n?n[1]=s:this.data.push([t,s]),this},get(t){var s;return(s=this.data.find(n=>n[0]===t))==null?void 0:s[1]},delete(t){const s=this.data.findIndex(n=>n[0]===t);return s===-1?!1:(this.data.splice(s,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(t){this.data.forEach(s=>{t(s[1],s[0],this)})},keys(){return this.data.map(t=>t[0]).values()},values(){return this.data.map(t=>t[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}class ll{label;filteredTypes;httpService;constructor(e,t,s){this.label=e,this.filteredTypes=t,this.httpService=s}async search(e,{mapProjection:t,signal:s}){const n=await this.request(e,100,s),r=new Co({dataProjection:"EPSG:4326",featureProjection:t});return n.features.filter(i=>this.filteredTypes.includes(i.properties.type)).map((i,a)=>{const u=r.readGeometry(i.geometry);return{id:i.properties.osm_id||a,label:this.createLabel(i),geometry:u,properties:i.properties}})}async request(e,t,s){const n=new URL("https://photon.komoot.io/api?");n.searchParams.set("q",e),n.searchParams.set("lang","de"),n.searchParams.set("lat","51.961563"),n.searchParams.set("lon","7.628202"),n.searchParams.set("limit",t.toString());const r=await this.httpService.fetch(n,{signal:s});if(!r.ok)throw new Error("Request failed: "+r.status);return await r.json()}createLabel(e){return`${e.properties.name} (${e.properties.osm_value?e.properties.osm_value+", ":""}${e.properties.postcode?e.properties.postcode+", ":""}${e.properties.city?e.properties.city+", ":""}${e.properties.country?e.properties.country+")":")"}`}}const cl=ye("ol-app:AppModel");class ul{_intl;_mapRegistry;_ogcSearchSourceFactory;_vectorSelectionSourceFactory;_httpService;_state;_resources=[];constructor({references:e,intl:t}){this._mapRegistry=e.mapRegistry,this._intl=t,this._ogcSearchSourceFactory=e.ogcSearchSourceFactory,this._vectorSelectionSourceFactory=e.vectorSelectionSourceFactory,this._httpService=e.httpService,this._state=Xs({searchSources:[],selectionSources:[],sourceMetadata:al(),resultListState:{input:void 0,open:!1,key:0}}),this.initSearchSources(),this.initSelectionSources().catch(s=>{cl.error("Failed to initialize selection sources",s)})}destroy(){this._resources.forEach(e=>e.destroy())}get state(){return this._state}setResultListInput(e){const t=this._state.resultListState.key;this._state.resultListState={open:!0,key:t+1,input:e}}setResultListVisibility(e){this._state.resultListState.open=e}initSearchSources(){const e=this._ogcSearchSourceFactory.createSearchSource({label:this._intl.formatMessage({id:"searchSources.lika"}),baseUrl:"https://ogc-api.nrw.de/lika/v1",collectionId:"flurstueck",searchProperty:"flurstid",labelProperty:"objid"}),t=this._ogcSearchSourceFactory.createSearchSource({label:this._intl.formatMessage({id:"searchSources.miningPermissions"}),baseUrl:"https://ogc-api.nrw.de/inspire-am-bergbauberechtigungen/v1",collectionId:"managementrestrictionorregulationzone",searchProperty:"thematicId",labelProperty:"name",renderLabel(n){const r=n?.properties?.name,i=n?.id;return typeof r=="string"?r+" ("+i+")":String(i)},rewriteUrl(n){return n.searchParams.set("properties","name"),n}}),s=new ll("Photon Geocoder",["city","street"],this._httpService);this._state.searchSources=[st(e),st(t),st(s)]}async initSelectionSources(){const e=["ogc_kitas","ogc_kataster"],t=await this._mapRegistry.expectMapModel(U),s=t.layers.getOperationalLayers({sortByDisplayOrder:!0});for(const n of s){if(!e.includes(n.id)||!dl(n.olLayer))continue;const r=this._vectorSelectionSourceFactory.createSelectionSource({vectorLayer:n.olLayer,label:n.title}),i=r.on("changed:status",()=>{r.status!=="available"&&(r.status==="unavailable"||r.status?.kind==="unavailable")&&t.removeHighlight()});this._resources.push(i,r),this._state.selectionSources.unshift(st(r)),this._state.sourceMetadata.set(st(r),n.attributes.resultListMetadata)}}}function dl(o){return o instanceof Me&&o.getSource()instanceof Je}const Ct={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Et extends ys{constructor(e,t){super(e),this.feature=t}}function hl(o,e){const t=[];for(let s=0;s<e.length;++s){const r=e[s].getGeometry();Qs(o,r,t)}return t}function Pt(o,e){return Ms(o[0],o[1],e[0],e[1])}function Re(o,e){const t=o.length;return e<0?o[e+t]:e>=t?o[e-t]:o[e]}function Mt(o,e,t){let s,n;e<t?(s=e,n=t):(s=t,n=e);const r=Math.ceil(s),i=Math.floor(n);if(r>i){const u=Ie(o,s),l=Ie(o,n);return Pt(u,l)}let a=0;if(s<r){const u=Ie(o,s),l=Re(o,r);a+=Pt(u,l)}if(i<n){const u=Re(o,i),l=Ie(o,n);a+=Pt(u,l)}for(let u=r;u<i-1;++u){const l=Re(o,u),d=Re(o,u+1);a+=Pt(l,d)}return a}function Qs(o,e,t){if(e instanceof De){Lt(o,e.getCoordinates(),!1,t);return}if(e instanceof js){const s=e.getCoordinates();for(let n=0,r=s.length;n<r;++n)Lt(o,s[n],!1,t);return}if(e instanceof $t){const s=e.getCoordinates();for(let n=0,r=s.length;n<r;++n)Lt(o,s[n],!0,t);return}if(e instanceof Ns){const s=e.getCoordinates();for(let n=0,r=s.length;n<r;++n){const i=s[n];for(let a=0,u=i.length;a<u;++a)Lt(o,i[a],!0,t)}return}if(e instanceof Fr){const s=e.getGeometries();for(let n=0;n<s.length;++n)Qs(o,s[n],t);return}}const to={index:-1,endIndex:NaN};function fl(o,e,t,s){const n=o[0],r=o[1];let i=1/0,a=-1,u=NaN;for(let h=0;h<e.targets.length;++h){const g=e.targets[h],m=g.coordinates;let y=1/0,w;for(let T=0;T<m.length-1;++T){const P=m[T],I=m[T+1],L=en(n,r,P,I);L.squaredDistance<y&&(y=L.squaredDistance,w=T+L.along)}y<i&&(i=y,g.ring&&e.targetIndex===h&&(g.endIndex>g.startIndex?w<g.startIndex&&(w+=m.length):g.endIndex<g.startIndex&&w>g.startIndex&&(w-=m.length)),u=w,a=h)}const l=e.targets[a];let d=l.ring;if(e.targetIndex===a&&d){const h=Ie(l.coordinates,u),g=t.getPixelFromCoordinate(h);Ps(g,e.startPx)>s&&(d=!1)}if(d){const h=l.coordinates,g=h.length,m=l.startIndex,y=u;if(m<y){const w=Mt(h,m,y);Mt(h,m,y-g)<w&&(u-=g)}else{const w=Mt(h,m,y);Mt(h,m,y+g)<w&&(u+=g)}}return to.index=a,to.endIndex=u,to}function Lt(o,e,t,s){const n=o[0],r=o[1];for(let i=0,a=e.length-1;i<a;++i){const u=e[i],l=e[i+1],d=en(n,r,u,l);if(d.squaredDistance===0){const h=i+d.along;s.push({coordinates:e,ring:t,startIndex:h,endIndex:h});return}}}const oo={along:0,squaredDistance:0};function en(o,e,t,s){const n=t[0],r=t[1],i=s[0],a=s[1],u=i-n,l=a-r;let d=0,h=n,g=r;return(u!==0||l!==0)&&(d=ir(((o-n)*u+(e-r)*l)/(u*u+l*l),0,1),h+=u*d,g+=l*d),oo.along=d,oo.squaredDistance=nr(Ms(o,e,h,g),10),oo}function Ie(o,e){const t=o.length;let s=Math.floor(e);const n=e-s;s>=t?s-=t:s<0&&(s+=t);let r=s+1;r>=t&&(r-=t);const i=o[s],a=i[0],u=i[1],l=o[r],d=l[0]-a,h=l[1]-u;return[a+d*n,u+h*n]}class pl extends Yn{constructor(e){const t=e;t.stopDown||(t.stopDown=Xn),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=ml(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Zn,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let s=e.geometryFunction;if(!s){const n=this.mode_;if(n==="Circle")s=function(r,i,a){const u=i||new ha([NaN,NaN]),l=jo(r[0]),d=Jn(l,jo(r[r.length-1]));return u.setCenterAndRadius(l,Math.sqrt(d),this.geometryLayout_),u};else{let r;n==="Point"?r=Oe:n==="LineString"?r=De:n==="Polygon"&&(r=$t),s=function(i,a,u){return a?n==="Polygon"?i[0].length?a.setCoordinates([i[0].concat([i[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(i,this.geometryLayout_):a=new r(i,this.geometryLayout_),a}}}this.geometryFunction_=s,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Me({source:new Je({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:gl(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Qn,this.freehandCondition_,e.freehand?this.freehandCondition_=No:this.freehandCondition_=e.freehandCondition?e.freehandCondition:er,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(tr.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=No:t=e:t=rr,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===Es.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===de.POINTERMOVE,s=!0;return!this.freehand_&&this.lastDragTime_&&e.type===de.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===de.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),s=!1):this.freehand_&&e.type===de.POINTERDOWN?s=!1:t&&this.getPointerCount()<2?(s=e.type===de.POINTERMOVE,s&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===de.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===de.DBLCLICK&&(s=!1),super.handleEvent(e)&&s}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new or(de.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),s=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),n=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),r=bs([s,n]),i=this.traceSource_.getFeaturesInExtent(r);if(i.length===0)return;const a=hl(e.coordinate,i);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const s=e.startIndex<=e.endIndex,n=e.startIndex<=t;s===n?s&&t>e.endIndex||!s&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(s&&t<e.endIndex||!s&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let s=0;if(e<t){const n=Math.ceil(e);let r=Math.floor(t);r===t&&(r-=1),s=r-n+1}else{const n=Math.floor(e);let r=Math.ceil(t);r===t&&(r+=1),s=n-r+1}s>0&&this.removeLastPoints_(s)}addTracedCoordinates_(e,t,s){if(t===s)return;const n=[];if(t<s){const r=Math.ceil(t);let i=Math.floor(s);i===s&&(i-=1);for(let a=r;a<=i;++a)n.push(Re(e.coordinates,a))}else{const r=Math.floor(t);let i=Math.ceil(s);i===s&&(i+=1);for(let a=r;a>=i;--a)n.push(Re(e.coordinates,a))}n.length&&this.appendCoordinates(n)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Ps(t.startPx,e.pixel)<this.snapTolerance_)return;const s=fl(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==s.index){if(t.targetIndex!==-1){const u=t.targets[t.targetIndex];this.removeTracedCoordinates_(u.startIndex,u.endIndex)}const a=t.targets[s.index];this.addTracedCoordinates_(a,a.startIndex,s.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,s.endIndex)}t.targetIndex=s.index;const n=t.targets[t.targetIndex];n.endIndex=s.endIndex;const r=Ie(n.coordinates,n.endIndex),i=this.getMap().getPixelFromCoordinate(r);e.coordinate=r,e.pixel=[Math.round(i[0]),Math.round(i[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const s=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(e.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||this.mode_==="Point")&&(this.atFinish_(e.pixel,s)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,s=e.pixel,n=t[0]-s[0],r=t[1]-s[1],i=n*n+r*r;if(this.shouldHandle_=this.freehand_?i>this.squaredClickTolerance_:i<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let s=!1;if(this.sketchFeature_){let n=!1,r=[this.finishCoordinate_];const i=this.mode_;if(i==="Point")s=!0;else if(i==="Circle")s=this.sketchCoords_.length===2;else if(i==="LineString")n=!t&&this.sketchCoords_.length>this.minPoints_;else if(i==="Polygon"){const a=this.sketchCoords_;n=a[0].length>this.minPoints_,r=[a[0][0],a[0][a[0].length-2]],t?r=[a[0][0]]:r=[a[0][0],a[0][a[0].length-2]]}if(n){const a=this.getMap();for(let u=0,l=r.length;u<l;u++){const d=r[u],h=a.getPixelFromCoordinate(d),g=e[0]-h[0],m=e[1]-h[1],y=this.freehand_?1:this.snapTolerance_;if(s=Math.sqrt(g*g+m*m)<=y,s){this.finishCoordinate_=d;break}}}}return s}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new we(new Oe(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new we);const t=e.getLinearRing(0);let s=this.sketchLine_.getGeometry();s?(s.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),s.changed()):(s=new De(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(s))}startDrawing_(e){const t=this.getMap().getView().getProjection(),s=Fo(this.geometryLayout_);for(;e.length<s;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new we(new De(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new we,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Et(Ct.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),s=this.sketchFeature_.getGeometry(),n=t.getView().getProjection(),r=Fo(this.geometryLayout_);let i,a;for(;e.length<r;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(i=this.sketchCoords_[0],a=i[i.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(i=this.sketchCoords_,a=i[i.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,s,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),s.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(s):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),s=this.getMap().getView().getProjection();let n,r;const i=this.mode_;i==="LineString"||i==="Circle"?(this.finishCoordinate_=e.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(e.slice()),this.geometryFunction_(r,t,s)):i==="Polygon"&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(e.slice()),n&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,t,s)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),n&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),s=this.getMap().getView().getProjection(),n=this.mode_;for(let r=0;r<e;++r){let i;if(n==="LineString"||n==="Circle"){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();const a=this.finishCoordinate_.slice();i[i.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(i,t,s),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(n==="Polygon"){i=this.sketchCoords_[0],i.splice(-2,1);const a=this.sketchLine_.getGeometry();if(i.length>=2){const u=i[i.length-2].slice();i[i.length-1]=u,this.createOrUpdateSketchPoint_(u)}a.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,s)}if(i.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const s=e.getGeometry(),n=this.getMap().getView().getProjection();this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,s,n)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,s,n),t=s.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Nr([t])):this.type_==="MultiLineString"?e.setGeometry(new js([t])):this.type_==="MultiPolygon"&&e.setGeometry(new Ns([t])),this.dispatchEvent(new Et(Ct.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new Et(Ct.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,s=!this.sketchFeature_;s&&this.startDrawing_(e[0]);let n;if(t==="LineString"||t==="Circle")n=this.sketchCoords_;else if(t==="Polygon")n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;s&&n.shift(),n.pop();for(let i=0;i<e.length;i++)this.addToDrawing_(e[i]);const r=e[e.length-1];this.addToDrawing_(r),this.modifyDrawing_(r)}extend(e){const s=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=s.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new we(new Oe(n)),this.updateSketchFeatures_(),this.dispatchEvent(new Et(Ct.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function gl(){const o=sr();return function(e,t){return o[e.getGeometry().getType()]}}function ml(o){switch(o){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+o)}}const vl=pl;new Oe([407354,5754673]),new Oe([404740,5757893]);var xe,ge,ft,pt,gt,bo;class bl extends Fs{constructor(t,s,n){super();R(this,gt);Oo(this,"label");R(this,xe,{kind:"available"});R(this,ge,void 0);R(this,ft,void 0);R(this,pt,void 0);this.label=s,O(this,ge,t),O(this,pt,n),$(this,gt,bo).call(this),O(this,ft,C(this,ge).on("change:visible",()=>{$(this,gt,bo).call(this)}))}destroy(){Se(C(this,ft))}get status(){return C(this,xe)}async select(t,s){if(t.type!=="extent")throw new Error(`Unsupported selection kind: ${t.type}`);if(C(this,xe).kind!=="available"||C(this,ge).getSource()===null)return[];const n=[];C(this,ge).getSource().forEachFeatureIntersectingExtent(t.extent,a=>{if(!a.getGeometry())return;const u={...a.getProperties()};delete u.geometries;const l={id:a.getId()?.toString()||Ls(),geometry:a.getGeometry(),properties:u};n.push(l)});const r=n.filter(a=>a!=null);return r.length>s.maxResults?r.slice(0,s.maxResults):r}}xe=new WeakMap,ge=new WeakMap,ft=new WeakMap,pt=new WeakMap,gt=new WeakSet,bo=function(){const s=C(this,ge).getVisible()?{kind:"available"}:{kind:"unavailable",reason:C(this,pt)};s.kind!==C(this,xe).kind&&(O(this,xe,s),this.emit("changed:status"))};var mt;class Sl{constructor({intl:e}){R(this,mt,void 0);O(this,mt,e)}createSelectionSource(e){return new bl(e.vectorLayer,e.label,C(this,mt).formatMessage({id:"layerNotVisibleReason"}))}}mt=new WeakMap;const Ee=ye("local-storage"),yl=0,se={CORRUPTED_DATA:"local-storage:corrupted-data",INVALID_PATH:"local-storage:invalid-path",INVALID_VALUE:"local-storage:invalid-value",NOT_SUPPORTED:"local-storage:not-supported",INTERNAL:"local-storage:internal-error"};var Be,Q,me,Ge,ee,Bt,tn,Gt,on,ke,lt,ve,Ae,zt,sn;class wl{constructor(e){R(this,Bt);R(this,Gt);R(this,ke);R(this,ve);R(this,zt);R(this,Be,void 0);R(this,Q,{});R(this,me,void 0);R(this,Ge,void 0);R(this,ee,void 0);O(this,Be,Cl(e.properties)),O(this,me,El()),C(this,me)&&($(this,Gt,on).call(this),O(this,Ge,$(this,zt,sn).call(this)))}destroy(){C(this,ee)&&(clearTimeout(C(this,ee)),O(this,ee,void 0)),C(this,me)&&$(this,ke,lt).call(this)}get isSupported(){return!!C(this,Ge)}get(e){return $(this,ve,Ae).call(this).get(e)}set(e,t){return $(this,ve,Ae).call(this).set(e,t)}remove(e){return $(this,ve,Ae).call(this).remove(e)}removeAll(){return $(this,ve,Ae).call(this).removeAll()}getNamespace(e){return $(this,ve,Ae).call(this).getNamespace(e)}}Be=new WeakMap,Q=new WeakMap,me=new WeakMap,Ge=new WeakMap,ee=new WeakMap,Bt=new WeakSet,tn=function(){C(this,ee)&&clearTimeout(C(this,ee)),O(this,ee,setTimeout(()=>{O(this,ee,void 0),$(this,ke,lt).call(this)},yl))},Gt=new WeakSet,on=function(){try{const e=C(this,me);if(!e)throw new oe(se.INTERNAL,"Local storage is not available.");const t=e.getItem(C(this,Be));if(t==null){O(this,Q,{}),$(this,ke,lt).call(this);return}try{const s=JSON.parse(t);if(!Ye(s))throw new oe(se.CORRUPTED_DATA,"Persisted value should be an object.");O(this,Q,s)}catch(s){Ee.warn("Invalid persisted data, reverting to default.",s),O(this,Q,{}),$(this,ke,lt).call(this)}}catch(e){Ee.error("Failed to load from local storage",e)}},ke=new WeakSet,lt=function(){try{const e=C(this,me);if(!e)throw new oe(se.INTERNAL,"Local storage is not available.");const t=JSON.stringify(C(this,Q));e.setItem(C(this,Be),t)}catch(e){Ee.error("Failed to save to local storage",e)}},ve=new WeakSet,Ae=function(){const e=C(this,Ge);if(!e)throw new oe(se.NOT_SUPPORTED,"Local storage is not supported by this browser.");return e},zt=new WeakSet,sn=function(){const e={getByPath:t=>Jo(_l(C(this,Q),t)),setByPath:(t,s)=>{if(!kl(s))throw new oe(se.INVALID_VALUE,"The value is not supported by local storage.");if(s=Jo(s),t.length===0){if(!Ye(s))throw new oe(se.INVALID_VALUE,"The root value must be a plain object.");O(this,Q,s)}else xl(C(this,Q),t,s);$(this,Bt,tn).call(this)}};return new Lo([],e)};class Lo{path;access;constructor(e,t){this.path=e,this.access=t}get(e){return this.access.getByPath([...this.path,e])}set(e,t){this.access.setByPath([...this.path,e],t)}remove(e){this.access.setByPath([...this.path,e],void 0)}removeAll(){this.access.setByPath(this.path,{})}getNamespace(e){const t=this.get(e);if(t===void 0)this.set(e,{});else if(!Ye(t))throw new oe(se.INVALID_PATH,`Cannot use '${e}' as a namespace because it is not associated with an object.`);return new Lo(this.path.concat([e]),this.access)}}const Zo="trails-state";function _l(o,e){let t=o;for(const s of e){if(!Ye(t))throw new oe(se.INVALID_PATH,`Cannot get nested property '${s}' because the parent is no object.`);t=t[s]}return t}function xl(o,e,t){if(!e.length)throw new oe(se.INTERNAL,"Path must not be empty.");let s=o;for(let r=0,i=e.length-1;r<i;++r){const a=e[r],u=s[a];if(!Ye(u))throw new oe(se.INVALID_PATH,`Cannot set property on '${a}' because it is no object.`);s=u}const n=e[e.length-1];s[n]=t}function Ye(o){return!!(o&&typeof o=="object"&&!Array.isArray(o))}function kl(o){const e=typeof o;return e==="boolean"||e==="number"||e==="string"||e==="undefined"||o===null||Array.isArray(o)||Ye(o)}function Cl(o){const e=o.storageId;return!e||typeof e!="string"?(Ee.warn(`The 'storageId' property of the 'local-storage' package should be set to a valid string to avoid collisions with other applications. Defaulting to '${Zo}'.`),Zo):e}function El(){if(typeof Storage>"u"){Ee.warn("Local storage is not supported by this browser.");return}try{const o=globalThis.localStorage;if(!o){Ee.warn("Local storage is not supported by this browser.");return}return o}catch(o){Ee.warn("Local storage is not supported by this browser.",o);return}}function Jo(o){return o!=null&&(o=JSON.parse(JSON.stringify(o))),o}const Pl={"ol-map":{name:"ol-map",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:Ia,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{vectorSourceFactory:{name:"ogc-features.VectorSourceFactory",qualifier:void 0,all:!1}}},AppModel:{name:"AppModel",clazz:ul,provides:[{name:"ol-app.AppModel",qualifier:void 0}],references:{ogcSearchSourceFactory:{name:"ogc-features.SearchSourceFactory",qualifier:void 0,all:!1},vectorSelectionSourceFactory:{name:"selection.VectorSelectionSourceFactory",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1},mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1},{name:"ol-app.AppModel",qualifier:void 0,all:!1},{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:ar,provides:[{name:"http.HttpService",qualifier:"http.HttpService"}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:lr,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/theme":{name:"@open-pioneer/theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/ogc-features":{name:"@open-pioneer/ogc-features",services:{VectorSourceFactory:{name:"VectorSourceFactory",clazz:Br,provides:[{name:"ogc-features.VectorSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}},SearchSourceFactory:{name:"SearchSourceFactory",clazz:Gr,provides:[{name:"ogc-features.SearchSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}},"@open-pioneer/coordinate-viewer":{name:"@open-pioneer/coordinate-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/notifier":{name:"@open-pioneer/notifier",services:{NotificationServiceImpl:{name:"NotificationServiceImpl",clazz:$r,provides:[{name:"notifier.NotificationService",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/overview-map":{name:"@open-pioneer/overview-map",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-bar":{name:"@open-pioneer/scale-bar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-viewer":{name:"@open-pioneer/scale-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/result-list":{name:"@open-pioneer/result-list",services:{},ui:{references:[]},properties:{}},"@open-pioneer/experimental-layout-sidebar":{name:"@open-pioneer/experimental-layout-sidebar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/legend":{name:"@open-pioneer/legend",services:{},ui:{references:[]},properties:{}},"@open-pioneer/geolocation":{name:"@open-pioneer/geolocation",services:{},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/measurement":{name:"@open-pioneer/measurement",services:{},ui:{references:[]},properties:{}},"@open-pioneer/selection":{name:"@open-pioneer/selection",services:{VectorSelectionSourceFactory:{name:"VectorSelectionSourceFactory",clazz:Sl,provides:[{name:"selection.VectorSelectionSourceFactory",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/spatial-bookmarks":{name:"@open-pioneer/spatial-bookmarks",services:{},ui:{references:[{name:"local-storage.LocalStorageService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/search":{name:"@open-pioneer/search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/local-storage":{name:"@open-pioneer/local-storage",services:{LocalStorageServiceImpl:{name:"LocalStorageServiceImpl",clazz:wl,provides:[{name:"local-storage.LocalStorageService",qualifier:void 0}],references:{}}},ui:{references:[]},properties:{storageId:{value:null,required:!1}}}},Ml=`.search-box{position:absolute;width:500px;max-width:100%;z-index:1}.spatial-bookmarks{max-height:300px}:root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.measurement-tooltip{position:relative;background:rgba(255,255,255,.8);border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.measurement-active-tooltip{background:rgba(0,0,0,.9);border-radius:4px;border-color:#000000e6;opacity:.9;color:#fff}.measurement-finished-tooltip{background-color:#4cb3ffe6;color:#000;border:1px solid white}.measurement-active-tooltip:before,.measurement-finished-tooltip:before{border-top:6px solid rgba(0,0,0,.9);border-right:6px solid transparent;border-left:6px solid transparent;content:"";position:absolute;bottom:-6px;margin-left:-7px;left:50%}.measurement-finished-tooltip:before{border-top-color:#4cb3ff}.selection-drag-box{background-color:#ffffff4d!important;border:3px solid var(--chakra-colors-background_primary)!important}.selection-tooltip{position:relative;background:rgba(255,255,255,.8);border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.selection .react-select{cursor:default}.map-container .selection-active{cursor:crosshair}.map-container .selection-inactive{cursor:no-drop}.selection-source-value.selection-source-value--disabled{opacity:.4}.selection-source-value.selection-source-value--disabled span{margin:0 6px 0 0}.search-component .chakra-divider{display:none}.search-component .search-highlighted-match{font-weight:700}.search-component .search-value-container{cursor:text;padding-left:30px!important}.search-component .search-invisible{display:none}.overview-map .ol-overviewmap{position:relative;height:100%;width:100%}.overview-map .ol-overviewmap:not(.ol-collapsed){border:1px solid black}.overview-map .ol-overviewmap .ol-overviewmap-map{border:none;width:100%;height:100%}.overview-map .ol-overviewmap .ol-overviewmap-box{border:2px solid red}.scale-bar .ol-scale-bar{margin-bottom:8px;margin-right:8px}.scale-bar .ol-scale-bar,.scale-bar .ol-scale-line{position:relative;bottom:0;left:0;background:none}.scale-bar .ol-scale-bar .ol-scale-bar-inner,.scale-bar .ol-scale-bar .ol-scale-line-inner,.scale-bar .ol-scale-line .ol-scale-bar-inner,.scale-bar .ol-scale-line .ol-scale-line-inner{color:var(--chakra-white);border-color:var(--chakra-white)}.result-list-no-data-message{text-align:center;margin-top:50px;font-weight:700;font-size:larger}.result-list-table th,.result-list-table td{overflow-wrap:break-word}.result-list-table.result-list-table--is-resizing *{cursor:col-resize}.result-list-table thead{position:sticky;top:0;z-index:1;background:var(--chakra-colors-background_body)}.result-list-table th{position:relative;border-right-width:thin}.result-list-table tbody tr:hover{background:var(--chakra-colors-background_light)}.result-list-table .result-list-resizer{position:absolute;top:0;height:100%;right:0;width:8px;background:var(--chakra-colors-trails-100);transform:scaleX(.25);cursor:col-resize;-webkit-user-select:none;user-select:none;touch-action:none;padding-left:0}.result-list-table th:last-child .result-list-resizer{width:8px;transform:translate(50%) scaleX(.25)}.result-list-table th .result-list-resizer.result-list-resizer--is-resizing{background:var(--chakra-colors-trails-500);transform:scale(1)}.result-list-table th .result-list-resizer:hover{transform:scale(1)}.layout-sidebar{height:100%;position:absolute;top:0}.layout-sidebar[data-theme=light]{background-color:var(--chakra-colors-whiteAlpha-700)}.layout-sidebar[data-theme=dark]{background-color:var(--chakra-colors-blackAlpha-700)}.layout-sidebar .layout-sidebar-main{transition:width .3s ease-out 0s;border-right:1px solid var(--chakra-colors-chakra-border-color)}.layout-sidebar .layout-sidebar-content{overflow:auto;transition:width .3s ease-out 0s}.layout-sidebar .layout-sidebar-content .content-section .content-header{font-size:1.5em;background-color:var(--chakra-colors-blackAlpha-500);padding:.5rem 1rem}.layout-sidebar .layout-sidebar-content .content-section .content-body{padding:1rem}
`,Ll=["en","de"];function Tl(o){switch(o){case"en":return $o(()=>import("./2a3510378182.js"),[],import.meta.url).then(e=>e.default);case"de":return $o(()=>import("./5a2b2c06caaa.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${o}'`)}const Al=_n(Ml),Rl=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:Tl,locales:Ll,packages:Pl,styles:Al},Symbol.toStringTag,{value:"Module"})),Il="@open-pioneer/coordinate-viewer",Ol=ce.bind(void 0,Il),Dl=4,jl=o=>{const{mapId:e,precision:t,displayProjectionCode:s}=o,{containerProps:n}=ne("coordinate-viewer",o),{map:r}=J(e),i=r?.olMap,a=$s(i)?.getCode()??"";let{coordinates:u}=Fl(i);u=u&&s?Bl(u,a,s):u;const l=Nl(u,t),d=s||a,h=l?l+" "+d:"";return c.jsx(V,{...n,children:c.jsx(le,{className:"coordinate-viewer-text",children:h})})};function Nl(o,e){const t=Ol();return o?Vl(o,e,t):""}function Fl(o){const[e,t]=p.useState();return p.useEffect(()=>{if(!o)return;const s=o.on("pointermove",n=>{t(n.coordinate)});return()=>Se(s)},[o]),{coordinates:e}}function Vl(o,e,t){if(o[0]==null||o[1]==null)return"";const s=e??Dl,[n,r]=o,i=t.formatNumber(n,{maximumFractionDigits:s,minimumFractionDigits:s}),a=t.formatNumber(r,{maximumFractionDigits:s,minimumFractionDigits:s});return i+" "+a}function Bl(o,e,t){return cr(o,e,t)}var Gl=ti({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"});const so=.75,Tt=.1;let zl=class extends Ts{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",s=e.tipLabel!==void 0?e.tipLabel:"Overview map",n=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof n=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;const r=e.label!==void 0?e.label:"›";typeof r=="string"?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const i=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=s,a.appendChild(i),a.addEventListener(Es.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const u=new ur({view:e.view,controls:new Vo,interactions:new Vo});this.ovmap_=u,e.layers&&e.layers.forEach(function(I){u.addLayer(I)});const l=document.createElement("div");l.className="ol-overviewmap-box",l.style.boxSizing="border-box",this.boxOverlay_=new Dt({position:[0,0],positioning:"center-center",element:l}),this.ovmap_.addOverlay(this.boxOverlay_);const d=t+" "+As+" "+dr+(this.collapsed_&&this.collapsible_?" "+Bo:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=d,h.appendChild(this.ovmapDiv_),h.appendChild(a);const g=this,m=this.boxOverlay_,y=this.boxOverlay_.getElement(),w=function(I){return{clientX:I.clientX,clientY:I.clientY}},T=function(I){const L=w(I),K=u.getEventCoordinateInternal(L);m.setPosition(K)},P=function(I){const L=u.getEventCoordinateInternal(I);g.getMap().getView().setCenterInternal(L),window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",P)};y.addEventListener("mousedown",function(){window.addEventListener("mousemove",T),window.addEventListener("mouseup",P)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const s=t.getView();s&&this.unbindView_(s),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(ws(e,hr.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const s=e.getView();s&&(this.bindView_(s),s.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===Jt.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const s=this.getMap().getView();this.bindView_(s)}else!this.ovmap_.isRendered()&&(e.key===Jt.TARGET||e.key===Jt.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new ks({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(Go.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(Go.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const s=e.getSize(),r=e.getView().calculateExtentInternal(s);if(this.viewExtent_&&fr(r,this.viewExtent_))return;this.viewExtent_=r;const i=t.getSize(),u=t.getView().calculateExtentInternal(i),l=t.getPixelFromCoordinateInternal(pr(r)),d=t.getPixelFromCoordinateInternal(gr(r)),h=Math.abs(l[0]-d[0]),g=Math.abs(l[1]-d[1]),m=i[0],y=i[1];h<m*Tt||g<y*Tt||h>m*so||g>y*so?this.resetExtent_():xs(u,r)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,s=e.getSize(),r=e.getView().calculateExtentInternal(s),i=t.getView(),a=Math.log(so/Tt)/Math.LN2,u=1/(Math.pow(2,a/2)*Tt);mr(r,u),i.fitInternal(vr(r))}recenter_(){const e=this.getMap(),t=this.ovmap_,s=e.getView();t.getView().setCenterInternal(s.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const s=e.getSize(),n=e.getView(),r=t.getView(),i=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,u=this.boxOverlay_.getElement(),l=n.getCenterInternal(),d=n.getResolution(),h=r.getResolution(),g=s[0]*d/h,m=s[1]*d/h;if(a.setPosition(l),u){u.style.width=g+"px",u.style.height=m+"px";const y="rotate("+i+"rad)";u.style.transform=y}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=br(this.ovmap_,_s.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(Bo),this.collapsed_?zo(this.collapseLabel_,this.label_):zo(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}};const Ul=zl,no="units",Wl=[1,2,5],nt=25.4/.28;class $l extends Ts{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const s=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=s+"-inner",this.element.className=s+" "+As,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(no,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(no)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(no,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,s=e.projection,n=this.getUnits(),r=n=="degrees"?"degrees":"m";let i=ao(s,e.resolution,t,r);const a=this.minWidth_*(this.dpi_||nt)/nt,u=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||nt)/nt:void 0;let l=a*i,d="";if(n=="degrees"){const L=Sr.degrees;l*=L,l<L/60?(d="″",i*=3600):l<L?(d="′",i*=60):d="°"}else if(n=="imperial")l<.9144?(d="in",i/=.0254):l<1609.344?(d="ft",i/=.3048):(d="mi",i/=1609.344);else if(n=="nautical")i/=1852,d="NM";else if(n=="metric")l<.001?(d="μm",i*=1e6):l<1?(d="mm",i*=1e3):l<1e3?d="m":(d="km",i/=1e3);else if(n=="us")l<.9144?(d="in",i*=39.37):l<1609.344?(d="ft",i/=.30480061):(d="mi",i/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*i)/Math.log(10)),g,m,y,w,T,P;for(;;){y=Math.floor(h/3);const L=Math.pow(10,y);if(g=Wl[(h%3+3)%3]*L,m=Math.round(g/i),isNaN(m)){this.element.style.display="none",this.renderedVisible_=!1;return}if(u!==void 0&&m>=u){g=w,m=T,y=P;break}else if(m>=a)break;w=g,T=m,P=y,++h}const I=this.scaleBar_?this.createScaleBar(m,g,d):g.toFixed(y<0?-y:0)+" "+d;this.renderedHTML_!=I&&(this.innerElement_.innerHTML=I,this.renderedHTML_=I),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,s){const n=this.getScaleForResolution(),r=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),i=this.scaleBarSteps_,a=e/i,u=[this.createMarker("absolute")];for(let d=0;d<i;++d){const h=d%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";u.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(d%2===0||i===2?this.createStepText(d,e,!1,t,s):"")+"</div>")}return u.push(this.createStepText(i,e,!0,t,s)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+r+"</div>":"")+u.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,s,n,r){const a=(e===0?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+r),u=e===0?-3:t/this.scaleBarSteps_*-1,l=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${u}px;text-align: ${e===0?"left":"center"};min-width: ${l}px;left: ${s?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=ao(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||nt,s=1e3/25.4;return e*s*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const Hl=$l,ql=o=>{const{mapId:e,displayMode:t="line"}=o,{containerProps:s}=ne("scale-bar",o),{map:n}=J(e),r=p.useRef(null);return p.useEffect(()=>{if(r.current&&n){const i=n.olMap,a=new Hl({units:"metric",target:r.current,bar:t==="bar"});return i.addControl(a),()=>{i.removeControl(a)}}},[t,n]),c.jsx(V,{...s,ref:r})},Kl="@open-pioneer/scale-viewer",Yl=ce.bind(void 0,Kl),Xl=o=>{const{mapId:e}=o,{containerProps:t}=ne("scale-viewer",o),{map:s}=J(e),n=Yl(),r=Pa(s?.olMap),i=r?n.formatNumber(r):void 0;return c.jsx(V,{...t,children:i&&c.jsxs(le,{children:["1:",i]})})},nn="ol-map",Xe=Ht.bind(void 0,nn),Le=ce.bind(void 0,nn);let Zl=0;function Jl(o,e){const t=`atom${++Zl}`,s={toString:()=>t};return typeof o=="function"?s.read=o:(s.init=o,s.read=function(n){return n(this)},s.write=function(n,r,i){return r(this,typeof i=="function"?i(n(this)):i)}),e&&(s.write=e),s}const Qo=o=>"init"in o,es=o=>!!o.write,jt=new WeakMap,Ql=(o,e)=>{jt.set(o,e),o.catch(()=>{}).finally(()=>jt.delete(o))},ts=(o,e)=>{const t=jt.get(o);t&&(jt.delete(o),t(e))},os=(o,e)=>{o.status="fulfilled",o.value=e},ss=(o,e)=>{o.status="rejected",o.reason=e},ec=o=>typeof o?.then=="function",rt=(o,e)=>!!o&&"v"in o&&"v"in e&&Object.is(o.v,e.v),ns=(o,e)=>!!o&&"e"in o&&"e"in e&&Object.is(o.e,e.e),Te=o=>!!o&&"v"in o&&o.v instanceof Promise,tc=(o,e)=>"v"in o&&"v"in e&&o.v.orig&&o.v.orig===e.v.orig,At=o=>{if("e"in o)throw o.e;return o.v},To=()=>{const o=new WeakMap,e=new WeakMap,t=new Map;let s,n;const r=v=>o.get(v),i=(v,b)=>{const S=o.get(v);if(o.set(v,b),t.has(v)||t.set(v,S),Te(S)){const f="v"in b?b.v instanceof Promise?b.v:Promise.resolve(b.v):Promise.reject(b.e);S.v!==f&&ts(S.v,f)}},a=(v,b,S)=>{const f=new Map;let _=!1;S.forEach((M,x)=>{!M&&x===v&&(M=b),M&&(f.set(x,M),b.d.get(x)!==M&&(_=!0))}),(_||b.d.size!==f.size)&&(b.d=f)},u=(v,b,S)=>{const f=r(v),_={d:f?.d||new Map,v:b};if(S&&a(v,_,S),rt(f,_)&&f.d===_.d)return f;if(Te(f)&&Te(_)&&tc(f,_)){if(f.d===_.d)return f;_.v=f.v}return i(v,_),_},l=(v,b,S,f)=>{if(ec(b)){let _;const M=()=>{const E=r(v);if(!Te(E)||E.v!==x)return;const F=u(v,x,S);e.has(v)&&E.d!==F.d&&Y(v,F,E.d)},x=new Promise((E,F)=>{let j=!1;b.then(G=>{j||(j=!0,os(x,G),E(G),M())},G=>{j||(j=!0,ss(x,G),F(G),M())}),_=G=>{j||(j=!0,G.then(H=>os(x,H),H=>ss(x,H)),E(G))}});return x.orig=b,x.status="pending",Ql(x,E=>{E&&_(E),f?.()}),u(v,x,S)}return u(v,b,S)},d=(v,b,S)=>{const f=r(v),_={d:f?.d||new Map,e:b};return S&&a(v,_,S),ns(f,_)&&f.d===_.d?f:(i(v,_),_)},h=(v,b)=>{const S=r(v);if(!b&&S&&(e.has(v)||Array.from(S.d).every(([j,G])=>{if(j===v)return!0;const H=h(j);return H===G||rt(H,G)})))return S;const f=new Map;let _=!0;const M=j=>{if(j===v){const H=r(j);if(H)return f.set(j,H),At(H);if(Qo(j))return f.set(j,void 0),j.init;throw new Error("no atom init")}const G=h(j);return f.set(j,G),At(G)};let x,E;const F={get signal(){return x||(x=new AbortController),x.signal},get setSelf(){return!E&&es(v)&&(E=(...j)=>{if(!_)return I(v,...j)}),E}};try{const j=v.read(M,F);return l(v,j,f,()=>x?.abort())}catch(j){return d(v,j,f)}finally{_=!1}},g=v=>At(h(v)),m=v=>{let b=e.get(v);return b||(b=L(v)),b},y=(v,b)=>!b.l.size&&(!b.t.size||b.t.size===1&&b.t.has(v)),w=v=>{const b=e.get(v);b&&y(v,b)&&K(v)},T=v=>{const b=new Map,S=new WeakMap,f=x=>{var E;const F=new Set((E=e.get(x))==null?void 0:E.t);return t.forEach((j,G)=>{var H;(H=r(G))!=null&&H.d.has(x)&&F.add(G)}),F},_=x=>{f(x).forEach(E=>{E!==x&&(b.set(E,(b.get(E)||new Set).add(x)),S.set(E,(S.get(E)||0)+1),_(E))})};_(v);const M=x=>{f(x).forEach(E=>{var F;if(E!==x){let j=S.get(E);if(j&&S.set(E,--j),!j){let G=!!((F=b.get(E))!=null&&F.size);if(G){const H=r(E),vn=h(E,!0);G=!rt(H,vn)}G||b.forEach(H=>H.delete(E))}M(E)}})};M(v)},P=(v,...b)=>{let S=!0;const f=x=>At(h(x)),_=(x,...E)=>{let F;if(x===v){if(!Qo(x))throw new Error("atom not writable");const j=r(x),G=l(x,E[0]);rt(j,G)||T(x)}else F=P(x,...E);if(!S){const j=A()}return F},M=v.write(f,_,...b);return S=!1,M},I=(v,...b)=>{const S=P(v,...b),f=A();return S},L=(v,b,S)=>{var f;const _=S||[];(f=r(v))==null||f.d.forEach((x,E)=>{const F=e.get(E);F?F.t.add(v):E!==v&&L(E,v,_)}),h(v);const M={t:new Set(b&&[b]),l:new Set};if(e.set(v,M),es(v)&&v.onMount){const{onMount:x}=v;_.push(()=>{const E=x((...F)=>I(v,...F));E&&(M.u=E)})}return S||_.forEach(x=>x()),M},K=v=>{var b;const S=(b=e.get(v))==null?void 0:b.u;S&&S(),e.delete(v);const f=r(v);f&&(Te(f)&&ts(f.v),f.d.forEach((_,M)=>{if(M!==v){const x=e.get(M);x&&(x.t.delete(v),y(M,x)&&K(M))}}))},Y=(v,b,S)=>{const f=new Set(b.d.keys());S?.forEach((_,M)=>{if(f.has(M)){f.delete(M);return}const x=e.get(M);x&&(x.t.delete(v),y(M,x)&&K(M))}),f.forEach(_=>{const M=e.get(_);M?M.t.add(v):e.has(v)&&L(_,v)})},A=()=>{let v;for(;t.size;){const b=Array.from(t);t.clear(),b.forEach(([S,f])=>{const _=r(S);if(_){const M=e.get(S);M&&_.d!==f?.d&&Y(S,_,f?.d),M&&!(!Te(f)&&(rt(f,_)||ns(f,_)))&&M.l.forEach(x=>x())}})}};return{get:g,set:I,sub:(v,b)=>{const S=m(v),f=A(),_=S.l;return _.add(b),()=>{_.delete(b),w(v)}}}};let ro;const oc=()=>(ro||(ro=To()),ro),rn=p.createContext(void 0),sc=o=>{const e=p.useContext(rn);return o?.store||e||oc()},nc=({children:o,store:e})=>{const t=p.useRef();return!e&&!t.current&&(t.current=To()),p.createElement(rn.Provider,{value:e||t.current},o)},rc=o=>typeof o?.then=="function",ic=gs.use||(o=>{if(o.status==="pending")throw o;if(o.status==="fulfilled")return o.value;throw o.status==="rejected"?o.reason:(o.status="pending",o.then(e=>{o.status="fulfilled",o.value=e},e=>{o.status="rejected",o.reason=e}),o)});function ac(o,e){const t=sc(e),[[s,n,r],i]=p.useReducer(l=>{const d=t.get(o);return Object.is(l[0],d)&&l[1]===t&&l[2]===o?l:[d,t,o]},void 0,()=>[t.get(o),t,o]);let a=s;(n!==t||r!==o)&&(i(),a=t.get(o));const u=e?.delay;return p.useEffect(()=>{const l=t.sub(o,()=>{if(typeof u=="number"){setTimeout(i,u);return}i()});return i(),l},[t,o,u]),p.useDebugValue(a),rc(a)?ic(a):a}const an="@open-pioneer/spatial-bookmarks",lc=Ht.bind(void 0,an),cc=ce.bind(void 0,an),he=ye("spatial-bookmark:SpatialBookmarkViewModel");class uc{map;packageNamespace;writableBookmarks=Jl([]);stopBookmarksListener;store;get bookmarks(){return this.writableBookmarks}constructor(e,t){this.map=e,this.packageNamespace=t.getNamespace("spatial-bookmarks"),this.store=To(),this.loadState(),this.stopBookmarksListener=this.store.sub(this.bookmarks,()=>{this.saveState()})}destroy(){this.stopBookmarksListener()}createBookmark(e){const t=this.map.olMap,s=t.getView().calculateExtent(),n=t.getView().getProjection().getCode(),r={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3]},i={id:Ls(),title:e,extent:r,projection:n};he.debug("Created a new bookmark",i);const a=this.writableBookmarks;this.store.set(a,[...this.store.get(a),i])}activateBookmark(e){he.debug("Activating bookmark",e);const t=this.getBookmarkExtent(e);he.debug("Attempting to apply extent",t),this.applyExtent(t)}deleteBookmark(e){he.debug("Deleting bookmark",e);const t=this.writableBookmarks;this.store.set(t,[...this.store.get(t).filter(s=>s.id!==e)])}deleteAllBookmarks(){he.debug("Deleting all bookmarks"),this.store.set(this.writableBookmarks,[])}loadState(){he.debug("Restoring bookmarks from local storage");const e=this.packageNamespace.get("bookmarks")??[];try{dc(e),this.store.set(this.writableBookmarks,e)}catch(t){he.error("Bookmarks data in local storage is invalid, resetting to default value.",t),this.store.set(this.writableBookmarks,[]),this.saveState()}}saveState(){he.debug("Saving bookmarks to local storage"),this.packageNamespace.set("bookmarks",this.store.get(this.bookmarks))}getBookmarkExtent(e){const s=this.map.olMap.getView(),n=e.extent,r=[n.minX,n.minY,n.maxX,n.maxY],i=s.getProjection(),a=e.projection;return yr(r,a,i)}applyExtent(e){const s=this.map.olMap.getView(),n=wr(e),r=s.getResolutionForExtent(e);s.setCenter(n),s.setResolution(r)}}function dc(o){if(!Array.isArray(o))throw new Error("Expected bookmarks from local storage to be an array.");for(const e of o)hc(e)}function hc(o){if(!o||typeof o!="object")throw new Error("Expected bookmark from local storage to be an object.");const e=o;if(typeof e.id!="string")throw new Error("Bookmark does not have a valid id.");if(typeof e.title!="string")throw new Error("Bookmark does not have a valid title.");if(fc(e.extent),typeof e.projection!="string")throw new Error("Bookmark does not have a valid projection value.")}function fc(o){if(!o||typeof o!="object")throw new Error("Expected bookmark extent from local storage to be an object.");const e=o;if(typeof e.minX!="number"||typeof e.minY!="number"||typeof e.maxX!="number"||typeof e.maxY!="number")throw new Error("Expected bookmark extent from local storage to have valid coordinates.")}const pc=o=>{const{map:e}=J(o.mapId),t=lc("local-storage.LocalStorageService"),s=wc(e,t);return s&&c.jsx(nc,{store:s.store,children:c.jsx(gc,{...o,viewModel:s})})};function gc(o){const{viewModel:e}=o,t=cc(),s=p.useRef([]),[n,r]=p.useState(!1),i=ac(e.bookmarks),[a,u]=p.useState(""),l=a.trim().length>0,{containerProps:d}=ne("spatial-bookmarks",o),[h,g]=p.useState("list"),m=()=>{e.deleteAllBookmarks(),g("list")},y=()=>{l&&(e.createBookmark(a),g("list"),u(""),r(!0))};p.useEffect(()=>{if(n){const L=s.current;L&&L[i.length-1]?.scrollIntoView?.(),r(!1)}},[i,n]);const w=()=>c.jsxs(co,{children:[c.jsxs(Xt,{rounded:"md",status:"warning",children:[c.jsx(Zt,{}),t.formatMessage({id:"bookmark.alert.delete"})]}),c.jsx(Sc,{intl:t,onClear:m,onCancel:()=>g("list")})]}),T=()=>c.jsxs(co,{children:[c.jsxs(Xt,{rounded:"md",status:"info",children:[c.jsx(Zt,{}),t.formatMessage({id:"bookmark.alert.create"})]}),c.jsx(Yr,{"aria-label":t.formatMessage({id:"bookmark.input.label"}),placeholder:t.formatMessage({id:"bookmark.input.placeholder"}),value:a,onChange:L=>{u(L.target.value)},onKeyDown:L=>{L.key==="Enter"&&y()},isRequired:!0,isInvalid:!l,autoFocus:!0}),c.jsx(yc,{intl:t,isInvalid:!l,onCancel:()=>{u(""),g("list")},onSave:y})]}),P=()=>c.jsxs(c.Fragment,{children:[i.length?mc(i,e,t,s):c.jsxs(Xt,{rounded:"md",status:"info",children:[c.jsx(Zt,{}),t.formatMessage({id:"bookmark.alert.noSaved"})]}),c.jsx(bc,{intl:t,bookmarks:i,showCreate:()=>g("create"),showDelete:()=>g("delete")})]}),I=c.jsxs(c.Fragment,{children:[h==="list"&&P(),h==="create"&&T(),h==="delete"&&w()]});return c.jsx(ie,{flexDirection:"column",...d,children:I})}function mc(o,e,t,s){const n=t.formatMessage({id:"bookmark.button.deleteOne"}),r=o.map((i,a)=>c.jsx(vc,{index:a,listItemNodes:s,bookmark:i,onActivate:()=>e.activateBookmark(i),onDelete:()=>e.deleteBookmark(i.id),deleteBtnLabel:n},i.id));return c.jsx(Vs,{as:"ul",className:"spatial-bookmark-list",role:"listbox","aria-label":t.formatMessage({id:"bookmark.list.label"}),flexShrink:1,flexGrow:1,p:1,spacing:1,overflowY:"auto",listStyleType:"none",children:r})}const rs={ArrowDown:1,ArrowUp:-1};function vc(o){const{index:e,listItemNodes:t,bookmark:s,onDelete:n,onActivate:r,deleteBtnLabel:i}=o,a=s.title,u=l=>{const d=l.key;if(d==="Enter"){l.target===l.currentTarget&&r();return}if(rs[d]!=null){const h=t.current?.length;if(!h)return;let g=(e+rs[d])%h;g<0&&(g=h-1),t.current[g]?.focus()}};return c.jsx(V,{as:"li",p:1,ref:l=>{if(!l){t.current.splice(e,1);return}t.current[e]=l},className:_t("spatial-bookmarks-item"),tabIndex:0,rounded:"md",role:"option",cursor:"pointer",outline:0,_hover:{background:"trails.50"},_focusVisible:{boxShadow:"outline"},onKeyDown:u,onClick:r,children:c.jsxs(ie,{width:"100%",flexDirection:"row",align:"center",gap:1,children:[c.jsx(Gs,{children:c.jsx(Os,{})}),c.jsx(le,{ps:2,noOfLines:1,children:a}),c.jsx(Kr,{}),c.jsx(ms,{hasArrow:!0,label:i,placement:"right",children:c.jsx(wo,{className:"spatial-bookmarks-item-delete","aria-label":i,borderRadius:"full",iconSpacing:0,padding:0,colorScheme:"red",variant:"ghost",leftIcon:c.jsx(Ds,{}),onClick:l=>{n(),l.stopPropagation()}})},e)]})})}function bc(o){const{intl:e,bookmarks:t,showCreate:s,showDelete:n}=o;return c.jsxs(Ao,{children:[c.jsx(Ze,{isDisabled:t.length===0,colorScheme:"red",width:void 0,iconSpacing:0,leftIcon:c.jsx(Ds,{}),onClick:n,"aria-label":e.formatMessage({id:"bookmark.button.deleteAll"}),variant:"outline"}),c.jsx(Ze,{onClick:s,width:"100%",children:e.formatMessage({id:"bookmark.button.create"})})]})}function Sc(o){const{intl:e,onCancel:t,onClear:s}=o;return c.jsxs(Ao,{children:[c.jsx(Ze,{variant:"outline",onClick:t,children:e.formatMessage({id:"bookmark.button.cancelDelete"})}),c.jsx(Ze,{onClick:s,children:e.formatMessage({id:"bookmark.button.confirmDelete"})})]})}function yc(o){const{intl:e,onCancel:t,onSave:s,isInvalid:n}=o;return c.jsxs(Ao,{children:[c.jsx(Ze,{variant:"outline",onClick:()=>t(),children:e.formatMessage({id:"bookmark.button.cancel"})}),c.jsx(Ze,{isDisabled:n,onClick:()=>s(),children:e.formatMessage({id:"bookmark.button.save"})})]})}function Ao(o){return c.jsx(ie,{width:"100%",flexDirection:"row",mt:2,gap:1,flexGrow:0,flexShrink:0,children:o.children})}function Ze(o){return c.jsx(wo,{width:"100%",...o})}function wc(o,e){const[t,s]=p.useState();return p.useEffect(()=>{let n;return o?n=new uc(o,e):n=void 0,s(n),()=>n?.destroy()},[o,e]),t}function _c(){const o=p.useId(),e=Le();return c.jsx(V,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",role:"dialog",width:350,children:c.jsx(V,{role:"dialog","aria-labelledby":o,children:c.jsx(Qe,{title:c.jsx(et,{id:o,size:"md",mb:2,children:e.formatMessage({id:"spatialBookmarkTitle"})}),children:c.jsx(pc,{mapId:U})})})})}const xc="@open-pioneer/legend",ln=ce.bind(void 0,xc),kc=o=>{const{mapId:e,showBaseLayers:t=!1}=o,{containerProps:s}=ne("legend",o),{map:n}=J(e);return c.jsx(V,{...s,children:n?c.jsx(Cc,{map:n,showBaseLayers:t}):null})};function Cc(o){const{map:e,showBaseLayers:t}=o,n=Mc(e).map(r=>c.jsx(cn,{layer:r,showBaseLayers:t},r.id));return c.jsx(Vs,{as:"ul",className:"legend-layer-list",listStyleType:"none",spacing:2,children:n})}function cn(o){const{layer:e,showBaseLayers:t}=o,{isVisible:s}=Tc(e),n=Lc(e);if(!s||!t&&!("parentLayer"in e)&&e.isBaseLayer)return;const r=[];return n?.length&&n.forEach(i=>{r.push(c.jsx(cn,{layer:i,showBaseLayers:t},i.id))}),c.jsxs(c.Fragment,{children:[c.jsx(Ec,{layer:e,showBaseLayers:t}),r]})}function Ec(o){const e=ln(),{layer:t,showBaseLayers:s}=o,n=Ac(t),r=Pc(t);let i;n?.Component?i=c.jsx(n.Component,{layer:t}):n?.imageUrl?i=c.jsx(is,{layer:t,imageUrl:n.imageUrl}):r&&(i=c.jsx(is,{layer:t,imageUrl:r}));const a=!("parentLayer"in t)&&t.isBaseLayer;return i?c.jsxs(V,{as:"li",className:_t("legend-item",`layer-${Rc(t.id)}`),children:[s&&a?c.jsx(le,{as:"b",children:e.formatMessage({id:"basemapLabel"})}):null,i]}):void 0}function is(o){const e=ln(),{layer:t,imageUrl:s}=o;return c.jsxs(V,{children:[c.jsx(le,{children:t.title}),c.jsx(Bs,{maxW:"none",maxH:"none",src:s,alt:e.formatMessage({id:"altLabel"},{layerName:t.title}),className:"legend-item__image",fallbackStrategy:"onError",fallback:c.jsx(V,{children:c.jsxs(le,{children:[c.jsx(Hr,{me:2}),e.formatMessage({id:"fallbackLabel"})]})})})]})}function Pc(o){const e=p.useCallback(()=>o.legend,[o]),t=p.useCallback(s=>{const n=o.on("changed:legend",s);return()=>n.destroy()},[o]);return p.useSyncExternalStore(t,e)}function Mc(o){const e=p.useCallback(s=>{const n=o.layers.on("changed",s);return()=>n.destroy()},[o]),t=p.useCallback(()=>{let s=o.layers.getAllLayers({sortByDisplayOrder:!0})??[];return s=s.reverse(),s},[o]);return un(e,t)}function Lc(o){const e=p.useCallback(s=>{const n=o.sublayers?.on("changed",s);return()=>n?.destroy()},[o]),t=p.useCallback(()=>{if(!o.sublayers)return;let n=o.sublayers?.getSublayers({sortByDisplayOrder:!0});return n=n.reverse(),n},[o]);return un(e,t)}function un(o,e){const t=p.useRef(),s=p.useCallback(r=>{const i=o(()=>{t.current=void 0,r()});return()=>{t.current=void 0,i()}},[o]),n=p.useCallback(()=>{if(t.current)return t.current.value;const r=e();return t.current={value:r},r},[e]);return p.useSyncExternalStore(s,n)}function Tc(o){const e=p.useCallback(()=>o.visible,[o]),t=p.useCallback(n=>{const r=o.on("changed:visible",n);return()=>r.destroy()},[o]);return{isVisible:p.useSyncExternalStore(t,e)}}function Ac(o){const[e,t]=p.useState(void 0);return p.useEffect(()=>{t(o.attributes.legend);const s=o.on("changed:attributes",()=>{t(o.attributes.legend)});return()=>s.destroy()},[o]),e}function Rc(o){return o.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function Ic(){const o=p.useId(),e=Le();return c.jsx(V,{role:"dialog","aria-labelledby":o,children:c.jsx(Qe,{title:c.jsx(et,{id:o,size:"md",mb:2,children:e.formatMessage({id:"legendTitle"})}),children:c.jsx(V,{overflowY:"auto",maxHeight:300,children:c.jsx(kc,{mapId:U,showBaseLayers:!0})})})})}const dn="@open-pioneer/geolocation",Oc=Ht.bind(void 0,dn),Dc=ce.bind(void 0,dn);function jc(o){return Xr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0013 3.06V1h-2v2.06A8.994 8.994 0 003.06 11H1v2h2.06A8.994 8.994 0 0011 20.94V23h2v-2.06A8.994 8.994 0 0020.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}}]})(o)}const as=ye("geolocation:GeolocationController"),ls=17;class Nc extends Fs{olMap;positionHighlightLayer;geolocation;maxZoom=ls;accuracyFeature;positionFeature;changeHandlers=[];isCurrentlyActive=!1;setMapToPosition=!0;trackingOptions={};isInitialZoom=!0;constructor(e,t){super(),this.olMap=e,this.isInitialZoom=!0,this.accuracyFeature=new we,this.accuracyFeature.setStyle(us()),this.positionFeature=new we,this.positionFeature.setStyle(cs()),this.positionHighlightLayer=new Me({source:new Je({features:[this.accuracyFeature,this.positionFeature]})}),this.positionHighlightLayer.setZIndex(Rs);const s=t||Fc();this.geolocation=new da({tracking:!1,trackingOptions:s,projection:e.getView()?.getProjection()}),this.trackingOptions=s,this.geolocation.on("error",n=>this.handleGeolocationError(n))}destroy(){this.stopGeolocation(),this.geolocation?.setTracking(!1),this.geolocation.dispose(),this.accuracyFeature=void 0,this.positionFeature=void 0,this.positionHighlightLayer.dispose()}startGeolocation(){if(this.isCurrentlyActive)return Promise.resolve();const e=this.olMap;return new Promise(s=>{this.isCurrentlyActive=!0,this.geolocation?.setProjection(e.getView()?.getProjection()),this.geolocation?.setTracking(!0);const n=this.geolocation.on("change:accuracyGeometry",()=>{const u=this.geolocation.getAccuracyGeometry()||void 0;if(this.accuracyFeature?.setGeometry(u),this.accuracyFeature?.getGeometry()!==void 0&&s(),this.isInitialZoom){const l=this?.accuracyFeature?.getGeometry()?.getExtent();if(l){const d=La(l);if(!d)return;e.getView().fit(d,{maxZoom:this.maxZoom}),this.isInitialZoom=!1}}}),r=this.geolocation.on("change:position",()=>{const u=this.geolocation.getPosition();u&&(u[0]||u[1])!==void 0&&(this.positionFeature?.setGeometry(new Oe(u)),this.setMapToPosition&&e.getView().setCenter(u),this.positionFeature?.getGeometry()!==void 0&&s())}),i=e.getView().on("change:resolution",()=>{this.setMapToPosition=this.isInitialZoom}),a=e.on("pointermove",u=>{u.dragging&&(this.setMapToPosition=!1)});this.changeHandlers.push(n,r,i,a),e.addLayer(this.positionHighlightLayer)}).catch(s=>{as.error("Failed to determine location",s)})}stopGeolocation(){this.geolocation?.setTracking(!1),this.isCurrentlyActive=!1,this.trackingOptions={},this.setMapToPosition=!0,this.isInitialZoom=!0,this.changeHandlers.forEach(e=>{Se(e)}),this.changeHandlers=[],this.accuracyFeature?.setGeometry(void 0),this.positionFeature?.setGeometry(void 0),this.olMap.removeLayer(this.positionHighlightLayer)}setPositionFeatureStyle(e){this.positionFeature?.setStyle(e??cs())}setAccuracyFeatureStyle(e){this.accuracyFeature?.setStyle(e??us())}setMaxZoom(e){this.maxZoom=e??ls}getMaxZoom(){return this.maxZoom}getPositionFeature(){return this.positionFeature}getAccuracyFeature(){return this.accuracyFeature}getTrackingOptions(){return this.trackingOptions}getGeolocation(){return this.geolocation}handleGeolocationError(e){as.error("Error from geolocation API:",e.message);const t=(()=>{switch(e.code){case 1:return"permission-denied";case 2:return"position-unavailable";case 3:return"timeout";default:return"unknown"}})();this.emit("error",t)}}const cs=()=>new Pe({image:new xo({radius:6,fill:new $e({color:"#3399CC"}),stroke:new Ce({color:"#fff",width:2})})}),us=()=>new Pe({stroke:new Ce({color:"#3399CC",width:3}),fill:new $e({color:"rgba(0, 0, 255, 0.05)"})}),Fc=()=>({enableHighAccuracy:!0,timeout:6e4,maximumAge:6e5}),Vc=p.forwardRef(function(e,t){const{mapId:s,maxZoom:n,positionFeatureStyle:r,accuracyFeatureStyle:i,trackingOptions:a}=e,{containerProps:u}=ne("geolocation",e),l=!!navigator.geolocation,[d,h]=p.useState(!1),[g,m]=p.useState(!1),{map:y}=J(s),w=Dc(),T=Oc("notifier.NotificationService"),P=Bc(y,n,a,r,i),I=(()=>l?d?w.formatMessage({id:"locateMeEnd"}):w.formatMessage({id:"locateMeStart"}):w.formatMessage({id:"locateNotSupported"}))();p.useEffect(()=>{if(P===void 0)return;const K=P.on("error",function(Y){const A=w.formatMessage({id:"error"}),W=(()=>{switch(Y){case"permission-denied":return w.formatMessage({id:"permissionDenied"});case"position-unavailable":return w.formatMessage({id:"positionUnavailable"});case"timeout":return w.formatMessage({id:"timeout"});case"unknown":return w.formatMessage({id:"unknownError"})}})();m(!1),h(!1),T.notify({level:"error",title:A,message:W})});return()=>{K.destroy()}},[P,w,T]),p.useEffect(()=>{if(!P){m(!1);return}return d&&(m(!0),P.startGeolocation().then(()=>{m(!1)})),()=>{P?.stopGeolocation(),m(!1)}},[P,d]);const L=()=>{y&&h(!d)};return c.jsx(fe,{ref:t,label:I,icon:c.jsx(jc,{}),onClick:()=>L(),isActive:d,isLoading:g,isDisabled:!l,...u})});function Bc(o,e,t,s,n){const[r,i]=p.useState();return p.useEffect(()=>{if(!o)return;const a=new Nc(o.olMap,t);return i(a),()=>{a.destroy(),i(void 0)}},[o,t]),p.useEffect(()=>{r?.setPositionFeatureStyle(s)},[r,s]),p.useEffect(()=>{r?.setAccuracyFeatureStyle(n)},[r,n]),p.useEffect(()=>{r?.setMaxZoom(e)},[r,e]),r}function Gc(o){const{toolState:e,onToolStateChange:t}=o,s=Le(),n=Xe("ol-app.AppModel"),r=Ke(n.state).resultListState,i=r.open,a=u=>{t(u,!e[u])};return c.jsxs(ie,{role:"toolbar","aria-label":s.formatMessage({id:"ariaLabel.toolbar"}),direction:"column",gap:1,padding:1,children:[r.input&&c.jsx(fe,{label:s.formatMessage({id:"resultListTitle"}),icon:c.jsx(Lr,{}),isActive:r.open,onClick:()=>n.setResultListVisibility(!i)}),c.jsx(fe,{label:s.formatMessage({id:"spatialBookmarkTitle"}),icon:c.jsx(Tr,{}),isActive:e.bookmarksActive,onClick:()=>a("bookmarksActive")}),c.jsx(Vc,{mapId:U}),c.jsx(fe,{label:s.formatMessage({id:"tocTitle"}),icon:c.jsx(Ar,{}),isActive:e.tocActive,onClick:()=>a("tocActive")}),c.jsx(fe,{label:s.formatMessage({id:"legendTitle"}),icon:c.jsx(Rr,{}),isActive:e.legendActive,onClick:()=>a("legendActive")}),c.jsx(fe,{label:s.formatMessage({id:"measurementTitle"}),icon:c.jsx(Ir,{}),isActive:e.measurementActive,onClick:()=>a("measurementActive")}),c.jsx(fe,{label:s.formatMessage({id:"selectionTitle"}),icon:c.jsx(Or,{}),isActive:e.selectionActive,onClick:()=>a("selectionActive")}),c.jsx(fe,{label:s.formatMessage({id:"overviewMapTitle"}),icon:c.jsx(Os,{}),isActive:e.overviewMapActive,onClick:()=>a("overviewMapActive")}),c.jsx(zr,{mapId:U}),c.jsx(Ur,{mapId:U}),c.jsx(Wr,{mapId:U})]})}const zc="@open-pioneer/measurement",Uc=ce.bind(void 0,zc);class Wc{olMap;messages;activeFeatureStyle;layer;source;draw=void 0;sketch=void 0;helpTooltip;measureTooltip;overlayTooltips=[];resources=[];constructor(e,t){this.olMap=e,this.messages=t;const s=this.source=new Je;this.layer=new Me({source:s}),this.layer.setZIndex(Rs),e.addLayer(this.layer);const n=e.on("pointermove",this.handlePointerMove.bind(this));this.resources.push({destroy(){Se(n)}});const r=()=>{this.helpTooltip.element.classList.add("hidden")};e.getViewport().addEventListener("mouseout",r),this.resources.push({destroy(){e.getViewport().removeEventListener("mouseout",r)}}),this.helpTooltip=this.createHelpTooltip()}destroy(){this.stopMeasurement();for(const e of this.resources)e.destroy();this.resources=[],this.helpTooltip.destroy(),this.measureTooltip?.destroy();for(const e of this.overlayTooltips)e.destroy();this.overlayTooltips=[],this.olMap.removeLayer(this.layer),this.layer.dispose(),this.source.dispose()}getVectorLayer(){return this.layer}setFinishedFeatureStyle(e){this.layer.setStyle(e)}setActiveFeatureStyle(e){const t=_r(e);this.activeFeatureStyle=(s,...n)=>{const r=s?.getGeometry()?.getType();if(r==="Polygon"||r==="LineString"||r==="Point")return t(s,...n)},this.draw?.getOverlay().setStyle(this.activeFeatureStyle)}clearMeasurements(){this.source.clear();for(const e of this.overlayTooltips)e.destroy();this.overlayTooltips=[]}startMeasurement(e){if(this.draw)throw new Error("Internal error: another measurement interaction is still active.");const t=e==="area"?"Polygon":"LineString",s=this.draw=new vl({source:this.source,type:t,style:this.activeFeatureStyle});this.olMap.addInteraction(s);let n,r;s.on("drawstart",i=>{n=this.measureTooltip=this.createMeasureTooltip();const a=this.sketch=i.feature;if(!a)return;let u;r=a.getGeometry()?.on("change",l=>{const d=l.target,h=this.olMap.getView().getProjection();let g="";d instanceof $t?(g=Hc(d,h,this.messages),u=d.getInteriorPoint().getCoordinates()||null):d instanceof De&&(g=qc(d,h,this.messages),u=d.getLastCoordinate()||null),n&&(n.element.innerHTML=g,u&&n?.overlay.setPosition(u))})}),s.on("drawend",()=>{if(n){const i=n.element.classList;i.remove("measurement-active-tooltip"),i.add("measurement-finished-tooltip"),n.overlay.setOffset([0,-7]),this.overlayTooltips.push(n),this.measureTooltip=n=void 0}this.sketch=void 0,r&&Se(r)}),s.on("drawabort",()=>{n&&(n.destroy(),this.measureTooltip=n=void 0),this.sketch=void 0,r&&Se(r)})}stopMeasurement(){this.draw&&(this.olMap.removeInteraction(this.draw),this.draw.abortDrawing(),this.draw.dispose(),this.draw=void 0),this.sketch=void 0,this.measureTooltip?.destroy(),this.measureTooltip=void 0}createMeasureTooltip(){const e=document.createElement("div");e.className="measurement-tooltip measurement-active-tooltip";const t=new Dt({element:e,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),s=this.olMap;return s.addOverlay(t),{overlay:t,element:e,destroy(){s.removeOverlay(t)}}}createHelpTooltip(){const e=document.createElement("div");e.className="measurement-tooltip hidden";const t=new Dt({element:e,offset:[15,0],positioning:"center-left"}),s=this.olMap;return s.addOverlay(t),{overlay:t,element:e,destroy(){s.removeOverlay(t)}}}handlePointerMove(e){if(e.dragging)return;const t=this.helpTooltip,s=$c(this.messages,this.sketch);t.element.textContent=s,t.overlay.setPosition(e.coordinate),t.element.classList.remove("hidden")}}function $c(o,e){if(e){const t=e.getGeometry();if(t instanceof $t||t instanceof De)return o.getContinueMessage()}return o.getHelpMessage()}function Hc(o,e,t){const s=xr(o,{projection:e});let n;return s>=1e6?n=`${t.formatNumber(s/1e6)} km<sup>2</sup>`:n=`${t.formatNumber(s)} m<sup>2</sup>`,n}function qc(o,e,t){const s=kr(o,{projection:e});let n;return s>=1e3?n=`${t.formatNumber(s/1e3)} km`:n=`${t.formatNumber(s)} m`,n}const Kc=o=>{const e=Uc(),{mapId:t,activeFeatureStyle:s,finishedFeatureStyle:n}=o,{containerProps:r}=ne("measurement",o),[i,a]=p.useState("distance"),u=m=>e.formatMessage({id:m}),l=J(t),d=Yc(l.map,e);p.useEffect(()=>{d?.setActiveFeatureStyle(s??Xc())},[d,s]),p.useEffect(()=>{d?.setFinishedFeatureStyle(n??Zc())},[d,n]),p.useEffect(()=>{if(d)return d.startMeasurement(i),()=>{d.stopMeasurement()}},[d,i]);function h(m){if(m==="distance"||m==="area")a(m);else throw new Error(`Unexpected measurement type: '${m}'.`)}function g(){d?.clearMeasurements()}return c.jsxs(V,{...r,children:[c.jsx(le,{mb:3,children:e.formatMessage({id:"measurementInfoText"})}),c.jsx(uo,{mb:4,alignItems:"center",children:c.jsxs(Jr,{mb:2,children:[c.jsx(ho,{mb:1,children:u("measurementLabel")}),c.jsxs(Qr,{value:i,onChange:m=>h(m.target.value),className:"measurement-select",children:[c.jsx("option",{value:"distance",children:u("distance")}),c.jsx("option",{value:"area",children:u("area")})]})]})}),c.jsx(wo,{padding:2,className:"measurement-delete-button",onClick:g,width:"100%",children:u("deleteMeasurementLabel")})]})};function Yc(o,e){const[t,s]=p.useState(void 0);return p.useEffect(()=>{if(!o)return;const n=new Wc(o.olMap,{getContinueMessage(){return e.formatMessage({id:"tooltips.continue"})},getHelpMessage(){return e.formatMessage({id:"tooltips.help"})},formatNumber(r){return e.formatNumber(r,{maximumFractionDigits:2})}});return s(n),()=>{n.destroy(),s(void 0)}},[o,e]),t}function Xc(){return[new Pe({stroke:new Ce({color:"#fff",lineDash:[10,10],width:5})}),new Pe({fill:new $e({color:"rgba(0,0,0,0.15)"}),stroke:new Ce({color:"rgba(0, 0, 0, 0.7)",lineDash:[10,10],width:3}),image:new xo({radius:5,stroke:new Ce({color:"rgba(0, 0, 0, 0.7)",width:2}),fill:new $e({color:"rgba(255, 255, 255, 0.2)"})})})]}function Zc(){return[new Pe({stroke:new Ce({color:"#fff",width:5})}),new Pe({stroke:new Ce({color:"#0b96fc",width:3}),fill:new $e({color:"rgba(11,150,252,0.15)"})})]}function Jc(){const o=p.useId(),e=Le();return c.jsx(V,{role:"dialog","aria-labelledby":o,children:c.jsx(Qe,{title:c.jsx(et,{id:o,size:"md",mb:2,children:e.formatMessage({id:"measurementTitle"})}),children:c.jsx(Kc,{mapId:U})})})}const Qc="200px",eu="300px",tu=o=>{const{mapId:e,olLayer:t,height:s=Qc,width:n=eu}=o,{containerProps:r}=ne("overview-map",o),i=p.useRef(null),{map:a}=J(e);return p.useEffect(()=>{if(i.current&&a&&t){const u=a.olMap,l=new Ul({className:"ol-overviewmap",layers:[t],collapsible:!1,collapsed:!1,target:i.current});return u.addControl(l),()=>{u.removeControl(l)}}},[a,t]),c.jsx(V,{height:s,width:n,ref:i,...r})};function ou(){const o=p.useMemo(()=>new _o({source:new Cs}),[]);return c.jsx(V,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",maxWidth:325,children:c.jsx(V,{role:"dialog",children:c.jsx(tu,{mapId:U,olLayer:o})})})}function su(){const o=Xe("ol-app.AppModel"),e=Ke(o.state).resultListState;return e.input&&c.jsx(V,{className:"result-list-container",position:"absolute",visibility:e.open?"visible":"hidden",bottom:"0",backgroundColor:"white",width:"100%",height:"400px",zIndex:1,borderTop:"2px solid",borderBottom:"2px solid",borderColor:"trails.100",children:c.jsx(ei,{input:e.input,mapId:U},e.key)})}const nu="@open-pioneer/search",Kt=ce.bind(void 0,nu);function ru(o){const e=o.selectProps.inputValue.length>0,t={...o,className:_t(o.className,{"search-invisible":!e})};return c.jsx(ue.Menu,{...t,children:o.children})}function iu(o){const t=Kt().formatMessage({id:"noOptionsText"});return c.jsx(ue.NoOptionsMessage,{...o,children:c.jsx(ae.span,{className:"search-no-match",children:t})})}function au(o){const t=Kt().formatMessage({id:"loadingText"});return c.jsx(ue.LoadingMessage,{...o,children:c.jsx(ae.span,{className:"search-loading-text",children:t})})}function lu({children:o,...e}){const t={...e,className:_t(e.className,"search-value-container")};return c.jsxs(ue.ValueContainer,{...t,children:[!!o&&c.jsx(Gl,{style:{position:"absolute",left:8}}),o]})}function cu(o){const e={...o,isHidden:!1};return c.jsx(ue.Input,{...e})}function uu(o){return null}function du(o){return c.jsxs(ue.IndicatorsContainer,{...o,children:[o.children,!o.selectProps.isLoading&&o.selectProps.inputValue&&c.jsx(hu,{selectProps:o.selectProps,clearValue:o.clearValue})]})}function hu(o){const t=Kt().formatMessage({id:"ariaLabel.clearButton"}),s=n=>{n.preventDefault(),n.stopPropagation(),o.clearValue()};return c.jsx(xn,{role:"button",size:"md",mr:1,"aria-label":t,onClick:s,onTouchEnd:s,onMouseDown:n=>n.preventDefault()})}function fu(o){return null}function pu(o){const e=o.selectProps.inputValue,t=o.data.label,s={...o,className:_t(o.className,"search-option")};return c.jsx(ue.Option,{...s,children:c.jsx(ae.div,{className:"search-option-label",children:e.trim().length>0?gu(t,e):t})})}function gu(o,e){const t=o.toLowerCase().indexOf(e.toLowerCase());return t>=0?c.jsxs(c.Fragment,{children:[o.substring(0,t),c.jsx(ae.span,{className:"search-highlighted-match",children:o.substring(t,t+e.length)},"highlighted"),o.substring(t+e.length)]}):o}const ds=ye("search:SearchController"),hs=200,fs=5;var vt,ze,Ue,We,te,Ut,hn;class mu{constructor(e,t){R(this,Ut);R(this,vt,void 0);R(this,ze,[]);R(this,Ue,fs);R(this,We,hs);R(this,te,void 0);O(this,vt,e),O(this,ze,t)}destroy(){C(this,te)?.abort(),O(this,te,void 0)}async search(e){if(C(this,te)?.abort(),O(this,te,void 0),!e)return[];const t=O(this,te,new AbortController);try{return await vu(t.signal,C(this,We)),t.signal.aborted&&(ds.debug(`search canceled with ${e}`),kn()),(await Promise.all(C(this,ze).map(n=>$(this,Ut,hn).call(this,n,e,t.signal)))).filter(n=>n!=null)}finally{C(this,te)===t&&O(this,te,void 0)}}get searchTypingDelay(){return C(this,We)}set searchTypingDelay(e){O(this,We,e??hs)}get maxResultsPerSource(){return C(this,Ue)}set maxResultsPerSource(e){O(this,Ue,e??fs)}get sources(){return C(this,ze)}}vt=new WeakMap,ze=new WeakMap,Ue=new WeakMap,We=new WeakMap,te=new WeakMap,Ut=new WeakSet,hn=async function(e,t,s){const n=e.label,r=C(this,vt).olMap.getView().getProjection();try{const i=C(this,Ue);let a=await e.search(t,{maxResults:i,signal:s,mapProjection:r});return a.length>i&&(a=a.slice(0,i)),{label:n,source:e,results:a}}catch(i){Ot(i)||ds.error(`search for source ${n} failed`,i);return}};async function vu(o,e){o.aborted||await new Promise(t=>{const s=()=>{o.removeEventListener("abort",s),clearTimeout(n),t()};o.addEventListener("abort",s);const n=setTimeout(s,e)})}const Nt=ye("search:Search"),bu=o=>{const{mapId:e,sources:t,searchTypingDelay:s,maxResultsPerGroup:n,onSelect:r,onClear:i}=o,{containerProps:a}=ne("search",o),{map:u}=J(e),l=Kt(),d=_u(t,s,n,u),{input:h,search:g,selectedOption:m,onInputChanged:y,onResultConfirmed:w}=xu(d),T=wu(),P=Su(l),I=yu(),L=He((A,W)=>{W.action==="input-change"&&y(A)}),K=He((A,W)=>{switch(W.action){case"select-option":A&&(w(A),r?.({source:A.source,result:A.result}));break;case"clear":y(""),Y.current?.blur(),Y.current?.focus(),i?.();break;default:Nt.debug(`Unhandled action type '${W.action}'.`);break}}),Y=p.useRef(null);return c.jsx(V,{...a,children:c.jsx(fo,{className:"search-component",classNamePrefix:"react-select",ref:Y,inputValue:h,onInputChange:L,"aria-label":l.formatMessage({id:"ariaLabel.search"}),ariaLiveMessages:P,colorScheme:"trails",selectedOptionStyle:"color",selectedOptionColorScheme:"trails",chakraStyles:T,isClearable:!0,placeholder:l.formatMessage({id:"searchPlaceholder"}),closeMenuOnSelect:!0,isLoading:g.kind==="loading",options:g.kind==="ready"?g.results:void 0,filterOption:()=>!0,tabSelectsValue:!1,components:I,onChange:K,value:m,menuPosition:"fixed"})})};function Su(o){return p.useMemo(()=>({onFocus:({focused:r})=>`${r.label} ${o.formatMessage({id:"ariaLabel.searchFocus"})}.`,onChange:({action:r,label:i})=>{let a="";switch(r){case"select-option":a=`${i} ${o.formatMessage({id:"ariaLabel.searchSelect"})}.`;break;case"clear":a=`${i} ${o.formatMessage({id:"ariaLabel.searchClear"})}.`;break}return a},guidance:()=>`${o.formatMessage({id:"ariaLabel.instructions"})}`,onFilter:()=>""}),[o])}function yu(){return p.useMemo(()=>({Menu:ru,Input:cu,SingleValue:uu,Option:pu,NoOptionsMessage:iu,LoadingMessage:au,ValueContainer:lu,IndicatorsContainer:du,ClearIndicator:fu}),[])}function wu(){const[o,e]=vs("colors",["trails.100","trails.50"],["#d5e5ec","#eaf2f5"]);return p.useMemo(()=>({groupHeading:s=>({...s,backgroundColor:o,padding:"8px 12px",fontSize:"inherit",fontWeight:"inherit"}),option:s=>({...s,backgroundColor:"inherit",_focus:{backgroundColor:e}}),dropdownIndicator:s=>({...s,display:"none"})}),[o,e])}function _u(o,e,t,s){const[n,r]=p.useState(void 0);return p.useEffect(()=>{if(!s)return;const i=new mu(s,o);return r(i),()=>{i.destroy(),r(void 0)}},[s,o]),p.useEffect(()=>{n&&(n.searchTypingDelay=e)},[n,e]),p.useEffect(()=>{n&&(n.maxResultsPerSource=t)},[n,t]),n}function xu(o){const[e,t]=p.useReducer((a,u)=>{switch(u.kind){case"input":return{...a,query:u.query,selectedOption:null};case"select-option":return{...a,selectedOption:u.option,query:u.option.label};case"load-results":return{...a,search:{kind:"loading"}};case"accept-results":return{...a,search:{kind:"ready",results:u.results}}}},void 0,()=>({query:"",selectedOption:null,search:{kind:"ready",results:[]}})),s=p.useRef(),n=He(a=>{if(!o){s.current=void 0,t({kind:"accept-results",results:[]});return}Nt.isDebug()&&Nt.debug(`Starting new search for query ${JSON.stringify(a)}.`),t({kind:"load-results"});const u=s.current=ku(o,a).then(l=>{s.current===u&&t({kind:"accept-results",results:l})})}),r=p.useCallback(a=>{t({kind:"select-option",option:a})},[]),i=p.useCallback(a=>{t({kind:"input",query:a}),n(a)},[n]);return{input:e.query,search:e.search,selectedOption:e.selectedOption,onResultConfirmed:r,onInputChanged:i}}async function ku(o,e){let t;try{t=await o.search(e)}catch(s){Ot(s)||Nt.error("Search failed",s),t=[]}return Cu(t)}function Cu(o){return o.map((t,s)=>({label:t.label,options:t.results.map(n=>({value:`${s}-${n.id}`,label:n.label,source:t.source,result:n}))}))}function fn(o,e){const t=o.olMap.getViewport();o.highlightAndZoom(e,{viewPadding:t&&t.offsetWidth<1e3?{top:150,right:75,bottom:50,left:75}:{top:150,right:400,bottom:50,left:400}})}function Eu(){const{map:o}=J(U),e=Xe("ol-app.AppModel"),t=Ke(e.state).searchSources;function s(r){if(console.debug("The user selected the following item: ",r.result),!o)return;const i=r.result.geometry;i&&fn(o,[i])}function n(){console.debug("The user cleared the search"),o?.removeHighlight()}return c.jsx(V,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",mt:5,className:"search-box",children:c.jsx(bu,{mapId:U,sources:t,maxResultsPerGroup:10,onSelect:s,onClear:n})})}const pn="@open-pioneer/selection",Pu=Ht.bind(void 0,pn),Ro=ce.bind(void 0,pn),it="selection-active",Rt="selection-inactive";class Mu{tooltip;interactionResources=[];olMap;isActive=!0;tooltipMessage;tooltipDisabledMessage;constructor(e,t,s,n,r){let i;switch(t){case Io.extent:default:i=this.initViewport(e),this.interactionResources.push(this.createDragBox(e,r,i,this.interactionResources)),this.interactionResources.push(this.createDrag(e,i,this.interactionResources));break}this.tooltip=this.createHelpTooltip(e,s),this.olMap=e,this.tooltipMessage=s,this.tooltipDisabledMessage=n}initViewport(e){const t=e.getViewport();return t.classList.add(it),t.oncontextmenu=s=>(s.preventDefault(),!1),t}destroy(){this.tooltip.destroy(),this.interactionResources.forEach(e=>{e.destroy()})}setActive(e){if(this.isActive===e)return;const t=this.olMap.getViewport();e?(this.interactionResources.forEach(s=>this.olMap.addInteraction(s.interaction)),this.tooltip.element.textContent=this.tooltipMessage,t.classList.remove(Rt),t.classList.add(it),this.isActive=!0):(this.interactionResources.forEach(s=>this.olMap.removeInteraction(s.interaction)),this.tooltip.element.textContent=this.tooltipDisabledMessage,t.classList.remove(it),t.classList.add(Rt),this.isActive=!1)}createDragBox(e,t,s,n){const r=new Uo({className:"selection-drag-box",condition:Cr});return e.addInteraction(r),r.on("boxend",function(){t(r.getGeometry())}),{interaction:r,destroy(){e.removeInteraction(r),n.splice(n.indexOf(this)),r.dispose(),s.classList.remove(it),s.classList.remove(Rt),s.oncontextmenu=null}}}createDrag(e,t,s){const n=function(a){return a.originalEvent.button==2},r=new Wo({condition:n});return e.addInteraction(r),{interaction:r,destroy(){e.removeInteraction(r),s.splice(s.indexOf(this)),r.dispose(),t.classList.remove(it),t.classList.remove(Rt),t.oncontextmenu=null}}}createHelpTooltip(e,t){const s=document.createElement("div");s.className="selection-tooltip",s.textContent=t;const n=new Dt({element:s,offset:[15,0],positioning:"center-left"}),r=e.on("pointermove",i=>{n.setPosition(i.coordinate)});return e.addOverlay(n),{overlay:n,element:s,destroy(){e.removeOverlay(n),n.dispose(),Se(r)}}}getDragboxInteraction(){return this.interactionResources.find(e=>e.interaction instanceof Uo)}getDragPanInteraction(){return this.interactionResources.find(e=>e.interaction instanceof Wo)}}const io=ye("selection:SelectionController"),Lu=1e4;var bt,St,yt,Wt,gn;class Tu{constructor(e){R(this,Wt);R(this,bt,void 0);R(this,St,void 0);R(this,yt,void 0);const{mapModel:t,onError:s,maxResults:n=Lu}=e;O(this,bt,t),O(this,St,n),O(this,yt,s)}destroy(){}async select(e,t){if(t)return await $(this,Wt,gn).call(this,e,t)}}bt=new WeakMap,St=new WeakMap,yt=new WeakMap,Wt=new WeakSet,gn=async function(e,t){const s=C(this,bt).olMap.getView().getProjection();try{io.debug(`Starting selection on source '${e.label}'`);const n=C(this,St);let r=await e.select({type:"extent",extent:t},{maxResults:n,mapProjection:s,signal:new AbortController().signal});return r.length>n&&(r=r.slice(0,n)),io.debug(`Found ${r.length} results on source '${e.label}'`),{source:e,results:r}}catch(n){io.error(`selection from source ${e.label} failed`,n),C(this,yt).call(this);return}};var Io=(o=>(o.extent="EXTENT",o.polygon="POLYGON",o.free="FREEPOLYGON",o.circle="CIRCLE",o))(Io||{});const ps={classNamePrefix:"react-select",menuPosition:"fixed",isSearchable:!1,isClearable:!1},Au=o=>{const e=Ro(),{mapId:t,sources:s,onSelectionComplete:n,onSelectionSourceChanged:r}=o,{containerProps:i}=ne("selection",o),[a,u]=p.useState(()=>s.find(A=>(A.status??"available")==="available")),l=J(t),{onExtentSelected:d}=Ou(l.map,s,a,n),h=Nu(),m=p.useCallback(A=>{const W=[];if(A||(A=["EXTENT"]),A.forEach(v=>{Object.values(Io).includes(v)&&W.push({label:e.formatMessage({id:v}),value:v})}),W.length===0)throw new Error("methods does not contain valid values");return W},[e])(void 0),[y,w]=p.useState(m[0]),T=He(A=>{w(A)}),[P,I]=p.useState(!0);ju(l.map,y,e,d,P);const L=p.useMemo(()=>s.map(A=>({label:A.label,value:A})),[s]),K=p.useMemo(()=>L.find(A=>A.value===a),[L,a]),Y=He(A=>{u(A?.value),r&&r({source:A?.value})});return p.useEffect(()=>{if(!a){I(!1);return}const A=e.formatMessage({id:"sourceNotAvailable"}),W=()=>a&&So(a,A).kind==="available";I(W());const v=a.on("changed:status",()=>{I(W())});return()=>v.destroy()},[a,I,e]),c.jsxs(co,{...i,spacing:2,children:[m.length>1&&c.jsxs(uo,{children:[c.jsx(ho,{children:e.formatMessage({id:"selectMethod"})}),c.jsx(fo,{className:"selection-method react-select",...ps,options:m,onChange:T,value:y,chakraStyles:h})]}),c.jsxs(uo,{children:[c.jsx(ho,{children:e.formatMessage({id:"selectSource"})}),c.jsx(fo,{className:"selection-source react-select",...ps,options:L,placeholder:e.formatMessage({id:"selectionPlaceholder"}),value:K,onChange:Y,components:{Option:Ru,SingleValue:Iu},isOptionDisabled:A=>A.value===void 0||A.value.status==="unavailable",getOptionLabel:A=>A.label+(A.value===void 0||A.value.status==="unavailable"?" "+e.formatMessage({id:"sourceNotAvailable"}):""),chakraStyles:h})]})]})};function Ru(o){const{value:e}=o.data,{isAvailable:t,content:s}=mn(e,!1);return c.jsx(ue.Option,{...o,isDisabled:!t,className:"selection-source-option",children:s})}function Iu(o){const{value:e}=o.data,{isAvailable:t,content:s}=mn(e,!0),n=t?"selection-source-value":"selection-source-value selection-source-value--disabled";return c.jsx(ue.SingleValue,{...o,isDisabled:!t,className:n,children:s})}function mn(o,e){const t=o?.label,s=Du(o);return{isAvailable:s.kind==="available",content:c.jsxs(ie,{direction:"row",alignItems:"center",grow:1,children:[!e&&c.jsx(ie,{grow:1,children:t}),s.kind==="unavailable"&&c.jsx(V,{ml:2,children:c.jsx(ms,{label:s.reason,placement:"right",openDelay:500,children:c.jsx(ae.span,{children:c.jsx(Cn,{as:Zr,color:"red",className:"warning-icon","aria-label":s.reason})})})}),e&&t]})}}function Ou(o,e,t,s){const n=Pu("notifier.NotificationService"),r=Ro(),[i,a]=p.useState(void 0);p.useEffect(()=>{if(!o)return;const l=new Tu({mapModel:o,onError(){n.notify({level:"error",message:r.formatMessage({id:"selectionFailed"})})}});return a(l),()=>{l.destroy()}},[o,n,e,r]);const u=He(async l=>{if(!i||!t)return;const d=await i.select(t,l.getExtent());d&&s?.(d)});return{controller:i,onExtentSelected:u}}function So(o,e){const t=o.status??"available",s=typeof t=="string"?{kind:t}:t;return s.kind==="available"?s:{kind:"unavailable",reason:s.reason??e}}function Du(o){const e=Ro(),[t,s]=p.useState(()=>({kind:"available"}));return p.useEffect(()=>{if(!o){s({kind:"available"});return}const n=e.formatMessage({id:"sourceNotAvailable"});s(So(o,n));const r=o.on?.("changed:status",()=>{s(So(o,n))});return()=>r?.destroy()},[o,e]),t}function ju(o,e,t,s,n){p.useEffect(()=>{if(!o)return;const r=new Mu(o.olMap,e.value,t.formatMessage({id:"tooltip"}),t.formatMessage({id:"disabledTooltip"}),s);return r.setActive(n),()=>{r?.destroy()}},[o,e,t,s,n])}function Nu(){const[o,e]=vs("colors",["background_body","border"],["#ffffff","#ffffff"]);return p.useMemo(()=>({control:s=>({...s,cursor:"pointer"}),indicatorSeparator:s=>({...s,borderColor:e}),dropdownIndicator:s=>({...s,backgroundColor:o})}),[o,e])}function Fu(){const o=Le(),e=Xe("notifier.NotificationService"),t=p.useId(),{map:s}=J(U),n=Xe("ol-app.AppModel"),r=Ke(n.state).selectionSources,i=Ke(n.state).sourceMetadata;function a(l){const{source:d,results:h}=l;if(!s){console.debug("Map not ready");return}s?.removeHighlight();const g=h.map(y=>y.geometry);g.length>0&&fn(s,g);const m=i.get(d);if(!m){console.warn("Can not show results because no metadata could be found");return}n.setResultListInput({columns:m,data:h}),e.notify({level:"info",message:o.formatMessage({id:"foundResults"},{resultsCount:h.length}),displayDuration:4e3})}function u(l){s?.removeHighlight()}return c.jsx(V,{role:"dialog","aria-labelledby":t,children:c.jsx(Qe,{title:c.jsx(et,{id:t,size:"md",mb:2,children:o.formatMessage({id:"selectionTitle"})}),children:c.jsx(Au,{mapId:U,sources:r,onSelectionComplete:a,onSelectionSourceChanged:u})})})}function Vu(o){const e=p.useId(),t=Le();return c.jsx(V,{role:"dialog","aria-labelledby":e,children:c.jsx(Qe,{title:c.jsx(et,{id:e,size:"md",mb:2,children:c.jsx(le,{children:t.formatMessage({id:"tocTitle"})})}),children:c.jsx(V,{overflowY:"auto",maxHeight:o.maxHeight,children:c.jsx(Vr,{mapId:U,showTools:!0,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})})})}const Bu={bookmarksActive:!1,legendActive:!0,overviewMapActive:!0,tocActive:!0};function Gu(){const o=Le(),{map:e}=J(U),[t,s]=p.useState(),[n,r]=p.useState(Bu),i={...n,measurementActive:t==="measurement",selectionActive:t==="selection"},a=(g,m)=>{if(g==="selectionActive"||g==="measurementActive"){const y=g==="selectionActive"?"selection":"measurement";y!==t&&m?(s(y),e?.removeHighlight()):y===t&&!m&&(s(void 0),e?.removeHighlight())}else r({...n,[g]:m})},u=Xe("ol-app.AppModel"),l=Ke(u.state).resultListState,d=l.input&&l.open,h=[i.tocActive&&c.jsx(Vu,{maxHeight:i.legendActive||t?"300px":"75vh"},"toc"),i.legendActive&&c.jsx(Ic,{},"legend"),t==="selection"?c.jsx(Fu,{},"selection"):t==="measurement"?c.jsx(Jc,{},"measurement"):void 0];return c.jsxs(ie,{height:"100%",direction:"column",overflow:"hidden",children:[c.jsx(qr,{position:"top-right"}),c.jsxs(Qe,{title:c.jsx(V,{role:"region","aria-label":o.formatMessage({id:"ariaLabel.header"}),textAlign:"center",py:1,children:c.jsx(et,{size:"md",children:"OpenLayers Base Packages - Default Sample"})}),children:[c.jsx(ie,{flex:"1",direction:"column",position:"relative",children:c.jsxs(Er,{mapId:U,role:"main","aria-label":o.formatMessage({id:"ariaLabel.map"}),viewPadding:d?{bottom:400}:void 0,children:[c.jsx(oi,{centerContent:!0,children:c.jsx(Eu,{})}),c.jsx(kt,{position:"top-left",horizontalGap:20,verticalGap:20,children:c.jsx(zu,{children:h})}),c.jsx(kt,{position:"top-right",horizontalGap:20,verticalGap:20,children:i.overviewMapActive&&c.jsx(ou,{})}),c.jsx(kt,{horizontalGap:20,position:"bottom-left",children:i.bookmarksActive&&c.jsx(_c,{})}),c.jsx(kt,{position:"bottom-right",horizontalGap:10,verticalGap:45,children:c.jsx(Gc,{toolState:i,onToolStateChange:a})}),c.jsx(su,{})]})}),c.jsxs(ie,{role:"region","aria-label":o.formatMessage({id:"ariaLabel.footer"}),gap:3,alignItems:"center",justifyContent:"center",children:[c.jsx(jl,{mapId:U,precision:2,displayProjectionCode:"EPSG:4326"}),c.jsx(ql,{mapId:U}),c.jsx(Xl,{mapId:U})]})]})]})}function zu(o){const e=o.children,t=[];for(const s of e)s&&(t.length&&t.push(c.jsx(si,{mt:4,mb:4},t.length)),t.push(s));if(t.length!==0)return c.jsx(V,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",width:350,maxWidth:350,children:t})}const Uu=En({component:Gu,theme:Pn,appMetadata:Rl,config:{properties:{"@open-pioneer/local-storage":{storageId:"ol-app-state"}}},async resolveConfig(o){const e=o.getAttribute("forced-locale");if(e)return{locale:e}}});customElements.define("ol-map-app",Uu);const Wu=document.getElementsByTagName("body")[0];$u();function $u(){const o=window.location.search,t=new URLSearchParams(o).get("lang"),s=document.createElement("ol-map-app");s.classList.add("full-height"),s.classList.add("app"),s.setAttribute("id","test"),t&&s.setAttribute("forced-locale",t),Wu.appendChild(s)}
