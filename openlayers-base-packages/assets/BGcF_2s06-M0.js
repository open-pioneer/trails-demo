var Ft=Object.defineProperty;var Xe=o=>{throw TypeError(o)};var Bt=(o,e,t)=>e in o?Ft(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var w=(o,e,t)=>Bt(o,typeof e!="symbol"?e+"":e,t),Ne=(o,e,t)=>e.has(o)||Xe("Cannot "+t);var a=(o,e,t)=>(Ne(o,e,"read from private field"),t?t.call(o):e.get(o)),u=(o,e,t)=>e.has(o)?Xe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),h=(o,e,t,i)=>(Ne(o,e,"write to private field"),i?i.call(o,t):e.set(o,t),t),x=(o,e,t)=>(Ne(o,e,"access private method"),t);import{f as ft,h as Gt,j as r,r as b,c as we,B as Y,F as Ht,A as Ve,k as Oe,l as Ut,E as j,a as Wt,e as qt}from"./Bh0CuZ3gy5tC.js";import{aJ as $t,aK as Kt,X as Yt,W as Je,aL as Zt,aM as Xt,at as Jt,aN as Qt,aO as eo,aP as to,I as oo,ax as io,aQ as Qe,aR as ro,aS as so,aT as et,aU as ao,aV as no,aW as ze,V as lo,aX as tt,a1 as co,a7 as po,aY as uo,a5 as ho,aZ as mo,a_ as go,a$ as fo,b0 as vo,b1 as ot,B as R,S as Ue,T as vt,O as bt,a as We,b as wt,b2 as je,i as Te,f as qe,u as Pe,r as re,b3 as it,b4 as bo,as as wo,j as Be,c as yt,C as yo,F as xt,aC as kt,b5 as xo,d as ko,w as $e,b6 as So,b7 as Mo,b8 as _o,k as F,b9 as Io,g as Se,h as Ge,ba as Eo,bb as Co,H as Lo,M as Ao,D as jo,l as To,m as rt}from"./X05UpbM2-kuA.js";import{W as Po,i as Ro,j as St}from"./hZ_qDWqEeK8H.js";import{O as Mt,W as Do,c as No,u as Vo,I as Oo,C as zo,b as Fo,a as Bo,M as Go,P as Ho,L as Uo,d as Wo,S as qo,E as $o,V as Ko,e as _t,N as Yo}from"./D3C3E9U7FbGv.js";import{G as It,T as Zo,e as Xo}from"./ZoLJd0R5aSwV.js";import{T as Re,V as He,L as Jo}from"./Tz2xttM4F6S2.js";import{u as $}from"./CoIg-_MEOQ7q.js";import{G as Qo}from"./CL_VRsbiqLzM.js";import{Z as ei,a as ti,H as oi,b as ii,I as ri,V as si,S as ai}from"./vRIhKsfHsw5T.js";import{c as ni}from"./D03oE8cEQPSj.js";import{M as li,a as ci,b as di}from"./BeFcF3Ti4kY-.js";import{M as pi}from"./DUys4rac0YQP.js";import{S as ui}from"./CjjyePfBQlZ7.js";import{R as hi}from"./Mq2qEzZgqUsS.js";import{N as mi,P as gi}from"./BbDtNgXSWzWZ.js";import{_ as st}from"./CmsKOCeNyeyo.js";import{F as fi}from"./BO_q12Vdyug-.js";import{H as vi}from"./L25RkWOQSN8A.js";import{F as bi}from"./CreVQ-qFRzOc.js";import"./O4mrD0KJSF-Q.js";import"./ixdUxu1X4zfV.js";import"./Cq1ZpfgEg4XJ.js";import"./2d5-QpxJNHTD.js";var Et=ft("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Et.displayName="Center";var wi={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Gt(function(e,t){const{axis:i="both",...s}=e;return r.jsx(ft.div,{ref:t,__css:wi[i],...s,position:"absolute"})});const f={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},yi={ERROR:"error"};class xi extends Jt{constructor(e){super(yi.ERROR),this.code=e.code,this.message=e.message}}let ki=class extends $t{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=Kt,this.watchId_=void 0,this.addChangeListener(f.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(f.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=Yt(Je("EPSG:4326"),e),this.position_&&this.set(f.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(f.ACCURACY,t.accuracy),this.set(f.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(f.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(f.HEADING,t.heading===null?void 0:Zt(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const i=this.transform_(this.position_);this.set(f.POSITION,i.slice()),this.set(f.SPEED,t.speed===null?void 0:t.speed);const s=Xt(this.position_,t.accuracy);s.applyTransform(this.transform_),this.set(f.ACCURACY_GEOMETRY,s),this.changed()}positionError_(e){this.dispatchEvent(new xi(e))}getAccuracy(){return this.get(f.ACCURACY)}getAccuracyGeometry(){return this.get(f.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(f.ALTITUDE)}getAltitudeAccuracy(){return this.get(f.ALTITUDE_ACCURACY)}getHeading(){return this.get(f.HEADING)}getPosition(){return this.get(f.POSITION)}getProjection(){return this.get(f.PROJECTION)}getSpeed(){return this.get(f.SPEED)}getTracking(){return this.get(f.TRACKING)}getTrackingOptions(){return this.get(f.TRACKING_OPTIONS)}setProjection(e){this.set(f.PROJECTION,Je(e))}setTracking(e){this.set(f.TRACKING,e)}setTrackingOptions(e){this.set(f.TRACKING_OPTIONS,e)}};const Si=1.2;function Mi(o,e=Si){_i(o);const t=Qt(o),i=eo(o),s=t*e,n=i*e;return[o[0]-(s-t)/2,o[1]-(n-i)/2,o[2]+(s-t)/2,o[3]+(n-i)/2]}function _i(o){if(o.length!==4)throw new Error(`Invalid extent (expected length 4, but got length ${o.length}).`)}const Fe=.75,ke=.1;let Ii=class extends to{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",i=e.tipLabel!==void 0?e.tipLabel:"Overview map",s=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;const n=e.label!==void 0?e.label:"›";typeof n=="string"?(this.label_=document.createElement("span"),this.label_.textContent=n):this.label_=n;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=i,c.appendChild(l),c.addEventListener(oo.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const d=new io({view:e.view,controls:new Qe,interactions:new Qe});this.ovmap_=d,e.layers&&e.layers.forEach(function(I){d.addLayer(I)});const p=document.createElement("div");p.className="ol-overviewmap-box",p.style.boxSizing="border-box",this.boxOverlay_=new Mt({position:[0,0],positioning:"center-center",element:p}),this.ovmap_.addOverlay(this.boxOverlay_);const g=t+" "+ro+" "+so+(this.collapsed_&&this.collapsible_?" "+et:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=g,m.appendChild(this.ovmapDiv_),m.appendChild(c);const v=this,S=this.boxOverlay_,M=this.boxOverlay_.getElement(),ce=function(I){return{clientX:I.clientX,clientY:I.clientY}},ye=function(I){const E=ce(I),Ze=d.getEventCoordinateInternal(E);S.setPosition(Ze)},xe=function(I){const E=d.getEventCoordinateInternal(I);v.getMap().getView().setCenterInternal(E),window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",xe)};M.addEventListener("mousedown",function(){window.addEventListener("mousemove",ye),window.addEventListener("mouseup",xe)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const i=t.getView();i&&this.unbindView_(i),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(ao(e,no.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===ze.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const i=this.getMap().getView();this.bindView_(i)}else!this.ovmap_.isRendered()&&(e.key===ze.TARGET||e.key===ze.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new lo({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(tt.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(tt.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),n=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&co(n,this.viewExtent_))return;this.viewExtent_=n;const l=t.getSize(),d=t.getView().calculateExtentInternal(l),p=t.getPixelFromCoordinateInternal(po(n)),g=t.getPixelFromCoordinateInternal(uo(n)),m=Math.abs(p[0]-g[0]),v=Math.abs(p[1]-g[1]),S=l[0],M=l[1];m<S*ke||v<M*ke||m>S*Fe||v>M*Fe?this.resetExtent_():ho(d,n)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,i=e.getSize(),n=e.getView().calculateExtentInternal(i),l=t.getView(),c=Math.log(Fe/ke)/Math.LN2,d=1/(Math.pow(2,c/2)*ke);mo(n,d),l.fitInternal(go(n))}recenter_(){const e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),s=e.getView(),n=t.getView(),l=this.rotateWithView_?0:-s.getRotation(),c=this.boxOverlay_,d=this.boxOverlay_.getElement(),p=s.getCenterInternal(),g=s.getResolution(),m=n.getResolution(),v=i[0]*g/m,S=i[1]*g/m;if(c.setPosition(p),d){d.style.width=v+"px",d.style.height=S+"px";const M="rotate("+l+"rad)";d.style.transform=M}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=fo(this.ovmap_,vo.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(et),this.collapsed_?ot(this.collapseLabel_,this.label_):ot(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}};const Ei=ni({d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z",displayName:"ChevronUpIcon"}),Ci={height:"25px",width:"25px",borderColor:"#4cb3ff",borderWidth:"3px",borderRadius:"50%",display:"inline-block "};function Li(o){return r.jsxs(R,{children:[r.jsx(Re,{children:o.layer.title}),r.jsx(R,{style:Ci})]})}const De="main";class Ai{mapId=De;vectorSourceFactory;constructor(e){this.vectorSourceFactory=e.references.vectorSourceFactory}async getMapConfig(){return{initialView:{kind:"position",center:{x:823091,y:6724521},zoom:8},layers:[new Ue({title:"OSM",id:"osm",isBaseLayer:!0,olLayer:new vt({source:new bt})}),new Do({isBaseLayer:!0,title:"Orthofotos NRW",url:"https://www.wmts.nrw.de/geobasis/wmts_nw_dop/1.0.0/WMTSCapabilities.xml",name:"nw_dop",matrixSet:"EPSG_3857_16",sourceOptions:{attributions:'Die Geobasisdaten des amtlichen Vermessungswesens werden als öffentliche Aufgabe gem. VermKatG NRW und gebührenfrei nach Open Data-Prinzipien über online-Verfahren bereitgestellt. Nutzungsbedingungen: siehe <a href="https://www.bezreg-koeln.nrw.de/system/files/media/document/file/lizenzbedingungen_geobasis_nrw.pdf"</a>'}}),Pi(),Ti(),ji(this.vectorSourceFactory)]}}}function ji(o){const e="https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1",t="governmentalservice",i=o.createVectorSource({baseUrl:e,collectionId:t,limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/3857",attributions:`Land NRW (${new Date().getFullYear()}), <a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>, <a href='https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1'>Datenquelle</a>`}),s=new We({source:i});return new Ue({id:"krankenhaus",title:"Krankenhäuser-Demo-Dienst",visible:!1,olLayer:s,attributes:{collectionURL:e+"/collections/"+t}})}function Ti(){const o=new wt({url:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json&limit=10000",format:new It,attributions:'&copy; <a href="http://www.bkg.bund.de" target="_blank">Bundesamt f&uuml;r Kartographie und Geod&auml;sie</a> 2017, <a href="http://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf" target="_blank">Datenquellen</a>'}),e=new We({source:o}),t={Component:Li};return new Ue({id:"ogc_kitas",title:"Kindertagesstätten",visible:!0,olLayer:e,attributes:{legend:t}})}function Pi(){return new Po({title:"Verwaltungsgebiete",id:"verwaltungsgebiete",visible:!1,url:"https://www.wms.nrw.de/geobasis/wms_nw_dvg",sublayers:[{name:"nw_dvg_krs",title:"Kreise und kreisfreie Städte"}]})}const Ri="200px",Di="300px",Ni=o=>{const{olLayer:e,height:t=Ri,width:i=Di}=o,{containerProps:s}=je("overview-map",o),n=b.useRef(null),{map:l}=Te(o);return b.useEffect(()=>{if(n.current&&l&&e){const c=l.olMap,d=new Ii({className:"ol-overviewmap",layers:[e],collapsible:!1,collapsed:!1,target:n.current});return c.addControl(d),()=>{c.removeControl(d)}}},[l,e]),r.jsx(R,{height:t,width:i,ref:n,...s})};function Vi({intl:o}){return{id:"overviewMap",title:o.formatMessage({id:"demos.overviewMap.title"}),createModel(){const e=new vt({source:new bt});return{description:o.formatMessage({id:"demos.overviewMap.description"}),mainWidget:r.jsx(Ni,{olLayer:e}),destroy(){e.dispose()}}}}}class Oi{label;filteredTypes;httpService;constructor(e,t,i){this.label=e,this.filteredTypes=t,this.httpService=i}async search(e,{mapProjection:t,signal:i}){const s=await this.request(e,100,i),n=new It({dataProjection:"EPSG:4326",featureProjection:t});return s.features.filter(l=>this.filteredTypes.includes(l.properties.type)).map((l,c)=>{const d=n.readGeometry(l.geometry);return{id:l.properties.osm_id||c,label:this.createLabel(l),geometry:d,properties:l.properties}})}async request(e,t,i){const s=new URL("https://photon.komoot.io/api?");s.searchParams.set("q",e),s.searchParams.set("lang","de"),s.searchParams.set("lat","51.961563"),s.searchParams.set("lon","7.628202"),s.searchParams.set("limit",t.toString());const n=await this.httpService.fetch(s,{signal:i});if(!n.ok)throw new Error("Request failed: "+n.status);return await n.json()}createLabel(e){return`${e.properties.name} (${e.properties.osm_value?e.properties.osm_value+", ":""}${e.properties.postcode?e.properties.postcode+", ":""}${e.properties.city?e.properties.city+", ":""}${e.properties.country?e.properties.country+")":")"}`}}function zi({intl:o,httpService:e,mapModel:t}){return{id:"searchAndHighlight",title:o.formatMessage({id:"demos.searchAndHighlight.title"}),createModel(){return new Fi(o,t,e)}}}var pe,ue,Z,Me,X,mt;let Fi=(mt=class{constructor(e,t,i){u(this,pe);u(this,ue);u(this,Z);w(this,"description");w(this,"mainWidget");u(this,Me,e=>{const t=e.result.geometry;t&&(a(this,X).call(this),h(this,Z,Bi(a(this,ue),[t])))});u(this,X,()=>{a(this,Z)?.destroy(),h(this,Z,void 0)});h(this,pe,new Oi("Photon Geocoder",["city","street"],i)),h(this,ue,t),this.description=e.formatMessage({id:"demos.searchAndHighlight.description"}),this.mainWidget=r.jsx(No,{sources:[a(this,pe)],onSelect:a(this,Me),onClear:a(this,X)})}destroy(){a(this,X).call(this)}},pe=new WeakMap,ue=new WeakMap,Z=new WeakMap,Me=new WeakMap,X=new WeakMap,mt);function Bi(o,e){const t=o.olMap.getViewport();return o.highlightAndZoom(e,{viewPadding:t&&t.offsetWidth<1e3?{top:150,right:75,bottom:50,left:75}:{top:150,right:400,bottom:50,left:400}})}const Ct="@open-pioneer/geolocation",Gi=qe.bind(void 0,Ct),Lt=Pe.bind(void 0,Ct);function Hi(o){return Qo({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"},child:[]}]})(o)}const at=we("geolocation:GeolocationController"),nt=17;var B,G;class Ui{constructor(e,t,i){w(this,"supported",!!navigator.geolocation);w(this,"olMap");w(this,"positionHighlightLayer");w(this,"geolocation");w(this,"onError");w(this,"maxZoom",nt);w(this,"accuracyFeature");w(this,"positionFeature");w(this,"changeHandlers",[]);w(this,"setMapToPosition",!0);w(this,"trackingOptions",{});w(this,"isInitialZoom",!0);u(this,B,re(!1));u(this,G,re(!1));this.olMap=e,this.onError=t,this.isInitialZoom=!0,this.accuracyFeature=new it,this.accuracyFeature.setStyle(ct()),this.positionFeature=new it,this.positionFeature.setStyle(lt()),this.positionHighlightLayer=new We({source:new wt({features:[this.accuracyFeature,this.positionFeature]})}),this.positionHighlightLayer.setZIndex(bo);const s=i||Wi();this.geolocation=new ki({tracking:!1,trackingOptions:s,projection:e.getView()?.getProjection()}),this.trackingOptions=s,this.geolocation.on("error",n=>this.handleGeolocationError(n))}destroy(){this.stopGeolocation(),this.geolocation?.setTracking(!1),this.geolocation.dispose(),this.accuracyFeature=void 0,this.positionFeature=void 0,this.positionHighlightLayer.dispose()}startGeolocation(){if(a(this,G).value)return;const e=this.olMap;new Promise(i=>{a(this,G).value=!0,a(this,B).value=!0,this.geolocation?.setProjection(e.getView()?.getProjection()),this.geolocation?.setTracking(!0);const s=this.geolocation.on("change:accuracyGeometry",()=>{const d=this.geolocation.getAccuracyGeometry()||void 0;if(this.accuracyFeature?.setGeometry(d),this.accuracyFeature?.getGeometry()!==void 0&&i(),this.isInitialZoom){const p=this?.accuracyFeature?.getGeometry()?.getExtent();if(p){const g=Mi(p);if(!g)return;e.getView().fit(g,{maxZoom:this.maxZoom}),this.isInitialZoom=!1}}}),n=this.geolocation.on("change:position",()=>{const d=this.geolocation.getPosition();d&&(d[0]||d[1])!==void 0&&(this.positionFeature?.setGeometry(new wo(d)),this.setMapToPosition&&e.getView().setCenter(d),this.positionFeature?.getGeometry()!==void 0&&i())}),l=e.getView().on("change:resolution",()=>{this.setMapToPosition=this.isInitialZoom}),c=e.on("pointermove",d=>{d.dragging&&(this.setMapToPosition=!1)});this.changeHandlers.push(s,n,l,c),e.addLayer(this.positionHighlightLayer)}).then(()=>{a(this,B).value=!1}).catch(i=>{at.error("Failed to determine location",i)})}stopGeolocation(){this.geolocation?.setTracking(!1),a(this,G).value=!1,a(this,B).value=!1,this.trackingOptions={},this.setMapToPosition=!0,this.isInitialZoom=!0,this.changeHandlers.forEach(e=>{Be(e)}),this.changeHandlers=[],this.accuracyFeature?.setGeometry(void 0),this.positionFeature?.setGeometry(void 0),this.olMap.removeLayer(this.positionHighlightLayer)}get active(){return a(this,G).value}get loading(){return a(this,B).value}setPositionFeatureStyle(e){this.positionFeature?.setStyle(e??lt())}setAccuracyFeatureStyle(e){this.accuracyFeature?.setStyle(e??ct())}setMaxZoom(e){this.maxZoom=e??nt}getMaxZoom(){return this.maxZoom}getPositionFeature(){return this.positionFeature}getAccuracyFeature(){return this.accuracyFeature}getTrackingOptions(){return this.trackingOptions}getGeolocation(){return this.geolocation}handleGeolocationError(e){at.error("Error from geolocation API:",e.message),this.stopGeolocation();const t=(()=>{switch(e.code){case 1:return"permission-denied";case 2:return"position-unavailable";case 3:return"timeout";default:return"unknown"}})();this.onError(t)}}B=new WeakMap,G=new WeakMap;const lt=()=>new yt({image:new yo({radius:6,fill:new xt({color:"#3399CC"}),stroke:new kt({color:"#fff",width:2})})}),ct=()=>new yt({stroke:new kt({color:"#3399CC",width:3}),fill:new xt({color:"rgba(0, 0, 255, 0.05)"})}),Wi=()=>({enableHighAccuracy:!0,timeout:6e4,maximumAge:6e5}),qi=b.forwardRef(function(e,t){const{maxZoom:i,positionFeatureStyle:s,accuracyFeatureStyle:n,trackingOptions:l}=e,{map:c}=Te(e),d=Ki(c,i,l,s,n);return d&&r.jsx($i,{...e,controller:d,ref:t})}),$i=b.forwardRef(function(e,t){const{controller:i}=e,{containerProps:s}=je("geolocation",e),{isLoading:n,isActive:l}=$(()=>({isLoading:i.loading,isActive:i.active}),[i]),c=Lt(),d=i.supported?l?c.formatMessage({id:"locateMeEnd"}):c.formatMessage({id:"locateMeStart"}):c.formatMessage({id:"locateNotSupported"}),p=()=>{i.active?i.stopGeolocation():i.startGeolocation()};return r.jsx(Zo,{ref:t,label:d,icon:r.jsx(Hi,{}),onClick:()=>p(),isActive:l,isLoading:n,isDisabled:!i.supported,...s})});function Ki(o,e,t,i,s){const n=Lt(),l=Gi("notifier.NotificationService"),[c,d]=b.useState();return b.useEffect(()=>{if(!o)return;const p=m=>{const v=n.formatMessage({id:"error"}),S=(()=>{switch(m){case"permission-denied":return n.formatMessage({id:"permissionDenied"});case"position-unavailable":return n.formatMessage({id:"positionUnavailable"});case"timeout":return n.formatMessage({id:"timeout"});case"unknown":return n.formatMessage({id:"unknownError"})}})();l.notify({level:"error",title:v,message:S})},g=new Ui(o.olMap,p,t);return d(g),()=>{g.destroy(),d(void 0)}},[o,t,n,l]),b.useEffect(()=>{c?.setPositionFeatureStyle(i)},[c,i]),b.useEffect(()=>{c?.setAccuracyFeatureStyle(s)},[c,s]),b.useEffect(()=>{c?.setMaxZoom(e)},[c,e]),c}const Yi="@open-pioneer/scale-setter",Zi=Pe.bind(void 0,Yi),Xi=25.4/.28,Ji=39.37,Qi=[17471320,8735660,4367830,2183915,1091957,545978,272989,136494,68247,34123,17061,8530,4265,2132],er=o=>{const{scales:e=Qi}=o,{containerProps:t}=je("scale-setter",o),{map:i}=Te(o),s=Zi(),n=Vo(i?.olMap)??1;function l(p){if(!i)return;const g=i.olMap.getView(),m=i.olMap.getView().getProjection(),v=m.getMetersPerUnit()??1,S=Ji*Xi*v,M=i.olMap.getView().getCenter();if(!M)return;const ce=p/xo(m,S,M);g.setResolution(ce)}const c=e.map(p=>r.jsx(li,{value:p,onClick:()=>l(p),onFocus:g=>{g.target?.scrollIntoView?.({block:"nearest"})},className:"scale-setter-option",children:dt(s,p)},p)),d=dt(s,n);return r.jsx(R,{...t,children:r.jsxs(pi,{isLazy:!0,children:[r.jsx(ci,{as:Y,rightIcon:r.jsx(Ei,{}),className:"scale-setter-menubutton","aria-label":s.formatMessage({id:"button.ariaLabel"},{scale:d}),"aria-description":s.formatMessage({id:"button.ariaDescription"}),children:d}),r.jsx(Ht,{children:r.jsx(di,{className:"scale-setter-menuoptions",maxHeight:"20em",overflowY:"auto",children:c})})]})})};function dt(o,e){return"1 : "+o.formatNumber(e)}const At="@open-pioneer/spatial-bookmarks",tr=qe.bind(void 0,At),or=Pe.bind(void 0,At),D=we("spatial-bookmark:SpatialBookmarkViewModel");class ir{map;packageNamespace;writableBookmarks=ko([]);watchBookmarksHandle;get bookmarks(){return this.writableBookmarks.getItems()}constructor(e,t){this.map=e,this.packageNamespace=t.getNamespace("spatial-bookmarks"),this.loadState(),this.watchBookmarksHandle=$e(()=>[this.writableBookmarks.getItems()],([i])=>this.saveState(i),{immediate:!1})}destroy(){this.watchBookmarksHandle.destroy()}createBookmark(e){const t=this.map.olMap,i=t.getView().calculateExtent(),s=t.getView().getProjection().getCode(),n={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]},l={id:So(),title:e,extent:n,projection:s};D.debug("Created a new bookmark",l),this.writableBookmarks.push(l)}activateBookmark(e){D.debug("Activating bookmark",e);const t=this.getBookmarkExtent(e);D.debug("Attempting to apply extent",t),this.applyExtent(t)}deleteBookmark(e){D.debug("Deleting bookmark",e);const t=this.writableBookmarks.findIndex(i=>i.id===e);t>-1&&this.writableBookmarks.splice(t,1)}deleteAllBookmarks(){D.debug("Deleting all bookmarks"),this.writableBookmarks.splice(0)}loadState(){D.debug("Restoring bookmarks from local storage");const e=this.packageNamespace.get("bookmarks")??[];try{rr(e),this.writableBookmarks.push(...e)}catch(t){D.error("Bookmarks data in local storage is invalid, resetting to default value.",t),this.writableBookmarks.splice(0),this.saveState([])}}saveState(e){D.debug("Saving bookmarks to local storage"),this.packageNamespace.set("bookmarks",e)}getBookmarkExtent(e){const i=this.map.olMap.getView(),s=e.extent,n=[s.minX,s.minY,s.maxX,s.maxY],l=i.getProjection(),c=e.projection;return Mo(n,c,l)}applyExtent(e){const i=this.map.olMap.getView(),s=_o(e),n=i.getResolutionForExtent(e);i.setCenter(s),i.setResolution(n)}}function rr(o){if(!Array.isArray(o))throw new Error("Expected bookmarks from local storage to be an array.");for(const e of o)sr(e)}function sr(o){if(!o||typeof o!="object")throw new Error("Expected bookmark from local storage to be an object.");const e=o;if(typeof e.id!="string")throw new Error("Bookmark does not have a valid id.");if(typeof e.title!="string")throw new Error("Bookmark does not have a valid title.");if(ar(e.extent),typeof e.projection!="string")throw new Error("Bookmark does not have a valid projection value.")}function ar(o){if(!o||typeof o!="object")throw new Error("Expected bookmark extent from local storage to be an object.");const e=o;if(typeof e.minX!="number"||typeof e.minY!="number"||typeof e.maxX!="number"||typeof e.maxY!="number")throw new Error("Expected bookmark extent from local storage to have valid coordinates.")}const nr=o=>{const{map:e}=Te(o),t=tr("local-storage.LocalStorageService"),i=mr(e,t);return i&&r.jsx(lr,{...o,viewModel:i})};function lr(o){const{viewModel:e}=o,t=or(),i=b.useRef([]),[s,n]=b.useState(!1),l=$(()=>e.bookmarks,[e]),[c,d]=b.useState(""),p=c.trim().length>0,{containerProps:g}=je("spatial-bookmarks",o),[m,v]=b.useState("list"),S=()=>{e.deleteAllBookmarks(),v("list")},M=()=>{p&&(e.createBookmark(c),v("list"),d(""),n(!0))};b.useEffect(()=>{if(s){const E=i.current;E&&E[l.length-1]?.scrollIntoView?.(),n(!1)}},[l,s]);const ce=()=>r.jsxs(He,{children:[r.jsxs(Ve,{rounded:"md",status:"warning",children:[r.jsx(Oe,{}),t.formatMessage({id:"bookmark.alert.delete"})]}),r.jsx(ur,{intl:t,onClear:S,onCancel:()=>v("list")})]}),ye=()=>r.jsxs(He,{children:[r.jsxs(Ve,{rounded:"md",status:"info",children:[r.jsx(Oe,{}),t.formatMessage({id:"bookmark.alert.create"})]}),r.jsx(Oo,{"aria-label":t.formatMessage({id:"bookmark.input.label"}),placeholder:t.formatMessage({id:"bookmark.input.placeholder"}),value:c,onChange:E=>{d(E.target.value)},onKeyDown:E=>{E.key==="Enter"&&M()},isRequired:!0,isInvalid:!p,autoFocus:!0}),r.jsx(hr,{intl:t,isInvalid:!p,onCancel:()=>{d(""),v("list")},onSave:M})]}),xe=()=>r.jsxs(r.Fragment,{children:[l.length?cr(l,e,t,i):r.jsxs(Ve,{rounded:"md",status:"info",children:[r.jsx(Oe,{}),t.formatMessage({id:"bookmark.alert.noSaved"})]}),r.jsx(pr,{intl:t,bookmarks:l,showCreate:()=>v("create"),showDelete:()=>v("delete")})]}),I=r.jsxs(r.Fragment,{children:[m==="list"&&xe(),m==="create"&&ye(),m==="delete"&&ce()]});return r.jsx(F,{flexDirection:"column",...g,children:I})}function cr(o,e,t,i){const s=t.formatMessage({id:"bookmark.button.deleteOne"}),n=o.map((l,c)=>r.jsx(dr,{index:c,listItemNodes:i,bookmark:l,onActivate:()=>e.activateBookmark(l),onDelete:()=>e.deleteBookmark(l.id),deleteBtnLabel:s},l.id));return r.jsx(Jo,{as:"ul",className:"spatial-bookmark-list",role:"listbox","aria-label":t.formatMessage({id:"bookmark.list.label"}),flexShrink:1,flexGrow:1,p:1,spacing:1,overflowY:"auto",listStyleType:"none",children:n})}const pt={ArrowDown:1,ArrowUp:-1};function dr(o){const{index:e,listItemNodes:t,bookmark:i,onDelete:s,onActivate:n,deleteBtnLabel:l}=o,c=i.title,d=p=>{const g=p.key;if(g==="Enter"){p.target===p.currentTarget&&n();return}if(pt[g]!=null){const m=t.current?.length;if(!m)return;let v=(e+pt[g])%m;v<0&&(v=m-1),t.current[v]?.focus()}};return r.jsx(R,{as:"li",p:1,ref:p=>{if(!p){t.current.splice(e,1);return}t.current[e]=p},className:Io("spatial-bookmarks-item"),tabIndex:0,rounded:"md",role:"option",cursor:"pointer",outline:0,_hover:{background:"trails.50"},_focusVisible:{boxShadow:"outline"},onKeyDown:d,onClick:n,children:r.jsxs(F,{width:"100%",flexDirection:"row",align:"center",gap:1,children:[r.jsx(Et,{children:r.jsx(Ro,{})}),r.jsx(Re,{ps:2,noOfLines:1,children:c}),r.jsx(ui,{}),r.jsx(Ut,{hasArrow:!0,label:l,placement:"right",children:r.jsx(Y,{className:"spatial-bookmarks-item-delete","aria-label":l,borderRadius:"full",iconSpacing:0,padding:0,colorScheme:"red",variant:"ghost",leftIcon:r.jsx(St,{}),onClick:p=>{s(),p.stopPropagation()}})},e)]})})}function pr(o){const{intl:e,bookmarks:t,showCreate:i,showDelete:s}=o;return r.jsxs(Ke,{children:[r.jsx(se,{isDisabled:t.length===0,colorScheme:"red",width:void 0,iconSpacing:0,leftIcon:r.jsx(St,{}),onClick:s,"aria-label":e.formatMessage({id:"bookmark.button.deleteAll"}),variant:"outline"}),r.jsx(se,{onClick:i,width:"100%",children:e.formatMessage({id:"bookmark.button.create"})})]})}function ur(o){const{intl:e,onCancel:t,onClear:i}=o;return r.jsxs(Ke,{children:[r.jsx(se,{variant:"outline",onClick:t,children:e.formatMessage({id:"bookmark.button.cancelDelete"})}),r.jsx(se,{onClick:i,children:e.formatMessage({id:"bookmark.button.confirmDelete"})})]})}function hr(o){const{intl:e,onCancel:t,onSave:i,isInvalid:s}=o;return r.jsxs(Ke,{children:[r.jsx(se,{variant:"outline",onClick:()=>t(),children:e.formatMessage({id:"bookmark.button.cancel"})}),r.jsx(se,{isDisabled:s,onClick:()=>i(),children:e.formatMessage({id:"bookmark.button.save"})})]})}function Ke(o){return r.jsx(F,{width:"100%",flexDirection:"row",mt:2,gap:1,flexGrow:0,flexShrink:0,children:o.children})}function se(o){return r.jsx(Y,{width:"100%",...o})}function mr(o,e){const[t,i]=b.useState();return b.useEffect(()=>{let s;return o?s=new ir(o,e):s=void 0,i(s),()=>s?.destroy()},[o,e]),t}function gr({intl:o}){return{id:"coordinateViewer",title:o.formatMessage({id:"demos.coordinateViewer.title"}),createModel(){return{description:o.formatMessage({id:"demos.coordinateViewer.description"}),mainWidget:r.jsx(zo,{})}}}}function fr({intl:o}){return{id:"scaleViewer",title:o.formatMessage({id:"demos.scaleViewer.title"}),createModel(){return{description:o.formatMessage({id:"demos.scaleViewer.description"}),mainWidget:r.jsx(Fo,{})}}}}function vr({intl:o}){return{id:"scaleSetter",title:o.formatMessage({id:"demos.scaleSetter.title"}),createModel(){return{description:o.formatMessage({id:"demos.scaleSetter.description"}),mainWidget:r.jsx(er,{})}}}}function br({intl:o}){return{id:"scaleBar",title:o.formatMessage({id:"demos.scaleBar.title"}),createModel(){return{description:o.formatMessage({id:"demos.scaleBar.description"}),tools:r.jsx(Bo,{})}}}}function wr({intl:o}){return{id:"measurement",title:o.formatMessage({id:"demos.measurement.title"}),createModel(){return{description:o.formatMessage({id:"demos.measurement.description"}),mainWidget:r.jsx(Go,{})}}}}function yr({intl:o}){return{id:"mapNavigation",title:o.formatMessage({id:"demos.mapNavigation.title"}),createModel(){return{description:o.formatMessage({id:"demos.mapNavigation.description"}),tools:r.jsxs(r.Fragment,{children:[r.jsx(ei,{}),r.jsx(ti,{}),r.jsx(oi,{}),r.jsx(ii,{}),r.jsx(ri,{})]})}}}}function xr({intl:o}){return{id:"geolocation",title:o.formatMessage({id:"demos.geolocation.title"}),createModel(){return{description:o.formatMessage({id:"demos.geolocation.description"}),tools:r.jsx(qi,{})}}}}function kr({intl:o}){return{id:"spatialBookmarks",title:o.formatMessage({id:"demos.spatialBookmarks.title"}),createModel(){return{description:o.formatMessage({id:"demos.spatialBookmarks.description"}),mainWidget:r.jsx(nr,{})}}}}function Sr({intl:o}){return{id:"printing",title:o.formatMessage({id:"demos.printing.title"}),createModel(){return{description:o.formatMessage({id:"demos.printing.description"}),mainWidget:r.jsx(Ho,{})}}}}const jt="showcase-app",Tt=qe.bind(void 0,jt),le=Pe.bind(void 0,jt);function Mr({intl:o,mapModel:e}){return{id:"tocLegend",title:o.formatMessage({id:"demos.tocLegend.title"}),createModel(){function t(s=!0){e.layers.getLayerById("verwaltungsgebiete").setVisible(s),e.layers.getLayerById("krankenhaus").setVisible(s),e.layers.getLayerById("ogc_kitas").setVisible(s)}function i(){t(!1),e?.layers.activateBaseLayer("osm")}return{description:o.formatMessage({id:"demos.tocLegend.description"}),mainWidget:r.jsx(_r,{}),destroy:i}}}}function _r(){const o=b.useId(),e=b.useId(),t=le();return r.jsxs(r.Fragment,{children:[r.jsx(R,{role:"dialog","aria-labelledby":o,children:r.jsx(Se,{title:r.jsx(Ge,{id:o,size:"md",mb:2,children:r.jsx(Re,{children:t.formatMessage({id:"demos.tocLegend.tocTitle"})})}),children:r.jsx(Xo,{showTools:!0,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})}),r.jsx(R,{pt:2,role:"dialog","aria-labelledby":e,children:r.jsx(Se,{title:r.jsx(Ge,{id:e,size:"md",mb:2,children:t.formatMessage({id:"demos.tocLegend.legendTitle"})}),children:r.jsx(Uo,{showBaseLayers:!0})})})]})}function Ir(o){return{id:"selectionResultList",title:o.intl.formatMessage({id:"demos.selectionResultList.title"}),createModel(){return new Er(o)}}}var he,J,Q,_e,Ie,gt;let Er=(gt=class{constructor(e){u(this,he);u(this,J);u(this,Q,re({key:0,input:void 0,open:!1}));w(this,"description");w(this,"mainWidget");u(this,_e,e=>{const{results:t}=e,n={columns:[{id:"id",displayName:"ID",width:100,getPropertyValue(c){return c.id}},{propertyName:"pointOfContact.address.postCode",displayName:"PLZ",width:120},{propertyName:"name",displayName:"Name"},{propertyName:"inspireId",displayName:"inspireID"},{displayName:"Gefördert",width:160,getPropertyValue(c){switch(c.properties?.gefoerdert){case"ja":return!0;case"nein":return!1;default:return c.properties?.gefoerdert}}}],data:t,formatOptions:{numberOptions:{maximumFractionDigits:3},dateOptions:{dateStyle:"medium",timeStyle:"medium",timeZone:"UTC"}}},l=a(this,Q).value.key;a(this,Q).value={open:!0,key:l+1,input:n}});u(this,Ie,e=>{console.log("Selected features: ",e.features)});const{mapModel:t,vectorSelectionSourceFactory:i,intl:s}=e;h(this,he,t),h(this,J,Cr(t,i)),this.description=s.formatMessage({id:"demos.selectionResultList.description"}),this.mainWidget=r.jsx(Wo,{sources:[a(this,J)],onSelectionComplete:a(this,_e)}),t.layers.getLayerById("ogc_kitas").setVisible(!0)}destroy(){a(this,J).destroy(),a(this,he).layers.getLayerById("ogc_kitas").setVisible(!1)}get listContainer(){const e=a(this,Q).value;if(!(!e.open||!e.input))return r.jsx(hi,{input:e.input,onSelectionChange:a(this,Ie)},e.key)}},he=new WeakMap,J=new WeakMap,Q=new WeakMap,_e=new WeakMap,Ie=new WeakMap,gt);function Cr(o,e){const t=o.layers.getLayerById("ogc_kitas");return e.createSelectionSource({vectorLayer:t.olLayer,label:t.title})}const Lr="krankenhaus";function Ar(o){return{id:"editing",title:o.intl.formatMessage({id:"demos.editing.title"}),createModel(){return new jr(o)}}}var me,ee;class jr{constructor(e){w(this,"description");w(this,"mainWidget");u(this,me);u(this,ee);const{mapModel:t,intl:i,editingService:s,notificationService:n}=e;h(this,me,t),this.description=i.formatMessage({id:"demos.editing.description"}),h(this,ee,new Tr(t,s,n,i)),this.mainWidget=r.jsx(Pr,{editingController:a(this,ee)}),this._setEditLayerVisible(!0)}destroy(){this._setEditLayerVisible(!1),a(this,ee).stopEditing()}_setEditLayerVisible(e=!0){a(this,me).layers.getLayerById(Lr).setVisible(e)}}me=new WeakMap,ee=new WeakMap;var k,_,H,U,N,P,W,V;class Tr{constructor(e,t,i,s){u(this,k);u(this,_);u(this,H);u(this,U);u(this,N);u(this,P);u(this,W);u(this,V);h(this,k,re(!1)),h(this,_,e),h(this,H,t),h(this,U,i),h(this,N,s)}editingActive(){return a(this,k).value}startCreateWorkflow(){if(!a(this,k).value)try{a(this,k).value=!0;const e=a(this,_).layers.getLayerById("krankenhaus"),t=new URL(e.attributes.collectionURL+"/items"),i=a(this,H).createFeature(a(this,_),t);this._watchState(i),i.whenComplete().then(s=>{if(!s)return;a(this,U).notify({level:"info",message:a(this,N).formatMessage({id:"demos.editing.create.featureCreated"},{featureId:s.featureId})}),(e?.olLayer).getSource()?.refresh()}).catch(s=>{console.error(s)}).finally(()=>{a(this,k).value=!1})}catch(e){a(this,k).value=!1,console.error(e)}}startUpdateWorkflow(){if(!a(this,k).value)try{a(this,k).value=!0,h(this,V,this._createEditingSelectTooltip());const e=a(this,_).layers.getLayerById("krankenhaus"),t=e?.olLayer;h(this,P,new qo({layers:[t]})),a(this,_).olMap.addInteraction(a(this,P)),a(this,V).element.classList.remove("editing-tooltip-hidden"),h(this,W,a(this,P).on("select",i=>{const s=i.selected,n=i.deselected;if(s.length!==1||n.length!==0)return;this._stopUpdateSelection();const l=s[0];if(!l)throw Error("feature is undefined");const c=new URL(e.attributes.collectionURL+"/items"),d=a(this,H).updateFeature(a(this,_),c,l);this._watchState(d),d.whenComplete().then(p=>{p&&(a(this,U).notify({level:"info",message:a(this,N).formatMessage({id:"demos.editing.update.featureModified"},{featureId:p.featureId})}),t.getSource()?.refresh())}).catch(p=>{console.error(p)}).finally(()=>{a(this,k).value=!1})}))}catch(e){a(this,k).value=!1,console.error(e)}}_watchState(e){const t=$e(()=>[e.getState()],i=>{i[0]==="active:saving"&&a(this,U).notify({level:"info",message:a(this,N).formatMessage({id:"demos.editing.update.savingStared"})}),i[0]==="destroyed"&&(t.destroy(),console.log("destroyed"))})}_createEditingSelectTooltip(){const e=document.createElement("div");e.className="editing-tooltip editing-tooltip-hidden",e.textContent=a(this,N).formatMessage({id:"demos.editing.update.tooltip.select"});const t=new Mt({element:e,offset:[15,0],positioning:"center-left"}),i=a(this,_).olMap,s=i.on("pointermove",n=>{n.dragging||t.setPosition(n.coordinate)});return i.addOverlay(t),{overlay:t,element:e,destroy(){Be(s),i.removeOverlay(t)}}}_stopUpdateSelection(){a(this,P)&&a(this,_).olMap.removeInteraction(a(this,P)),a(this,W)&&Be(a(this,W)),a(this,V)&&a(this,V).destroy(),h(this,P,void 0),h(this,W,void 0),h(this,V,void 0)}stopEditing(){a(this,H).stop(De),this._stopUpdateSelection(),a(this,k).value=!1}}k=new WeakMap,_=new WeakMap,H=new WeakMap,U=new WeakMap,N=new WeakMap,P=new WeakMap,W=new WeakMap,V=new WeakMap;function Pr({editingController:o}){const e=le(),t=$(()=>o.editingActive(),[o]),i=t?e.formatMessage({id:"demos.editing.activeInfo"}):e.formatMessage({id:"demos.editing.inactiveInfo"});return r.jsxs(r.Fragment,{children:[r.jsxs(F,{px:1,py:1,children:[r.jsx(Y,{mr:2,isDisabled:t,onClick:()=>{o.startCreateWorkflow()},children:e.formatMessage({id:"demos.editing.startCreateButton"})}),r.jsx(Y,{mr:2,isDisabled:t,onClick:()=>{o.startUpdateWorkflow()},children:e.formatMessage({id:"demos.editing.startUpdateButton"})}),r.jsx(Y,{isDisabled:!t,onClick:()=>{o.stopEditing()},children:e.formatMessage({id:"demos.editing.stopButton"})})]}),r.jsx(F,{px:1,py:1,children:i})]})}function Rr(o){return[Mr(o),gr(o),fr(o),vr(o),br(o),wr(o),Ar(o),yr(o),xr(o),kr(o),Vi(o),Sr(o),Ir(o),zi(o)]}const Dr=we("app::AppModel");var Ee,ge,fe,O,C,Ce,Le,ne,Pt,Rt;class Nr{constructor(e,t,i,s){u(this,ne);u(this,Ee);u(this,ge);u(this,fe);u(this,O);u(this,C);u(this,Ce,Eo(()=>Array.from(a(this,O).values())));u(this,Le,[]);if(h(this,Ee,e),h(this,ge,t),h(this,fe,i),h(this,O,new Map(s.map(l=>[l.id,l]))),a(this,O).size===0)throw new Error("No demos defined.");const n=s[0];h(this,C,re([n,n.createModel()])),x(this,ne,Pt).call(this),a(this,Le).push(x(this,ne,Rt).call(this))}destroy(){a(this,C).value[1].destroy?.()}get currentDemo(){return a(this,C).value[0]}get currentDemoModel(){return a(this,C).value[1]}get allDemoInfos(){return a(this,Ce).value}selectDemo(e){const t=a(this,O).get(e);if(!t)throw new Error(`Demo '${e}' does not exist.`);Co(()=>{const[,i]=a(this,C).value;i.destroy?.(),a(this,C).value=[t,t.createModel()]})}}Ee=new WeakMap,ge=new WeakMap,fe=new WeakMap,O=new WeakMap,C=new WeakMap,Ce=new WeakMap,Le=new WeakMap,ne=new WeakSet,Pt=function(){const t=new URL(window.location.href).searchParams.get("demo");if(t){if(!a(this,O).has(t)){a(this,ge).notify({title:a(this,fe).formatMessage({id:"demoSelection.notFound"},{demoId:t})});return}try{this.selectDemo(t)}catch(i){Dr.error("Failed to select demo from URL",i)}}},Rt=function(){return $e(()=>[a(this,C).value[0].id],([e])=>{const t=new URL(window.location.href);t.searchParams.set("demo",e),window.history.replaceState(null,"",t.toString())},{immediate:!0})};var te,ve,be,Ae,Dt;class Vr{constructor(e){u(this,Ae);u(this,te,re({kind:"loading"}));u(this,ve,[]);u(this,be,!1);const{mapRegistry:t,httpService:i,notifier:s,vectorSelectionSourceFactory:n,editingService:l,notificationService:c}=e.references,d=e.intl;x(this,Ae,Dt).call(this,{mapRegistry:t,httpService:i,notifier:s,vectorSelectionSourceFactory:n,editingService:l,intl:d,notificationService:c}).catch(p=>{a(this,te).value={kind:"error",message:p.message||"Unknown error"}})}destroy(){h(this,be,!0);for(const e of a(this,ve))e.destroy()}get appState(){return a(this,te).value}}te=new WeakMap,ve=new WeakMap,be=new WeakMap,Ae=new WeakSet,Dt=async function(e){const{mapRegistry:t,httpService:i,notifier:s,vectorSelectionSourceFactory:n,editingService:l,intl:c,notificationService:d}=e,p=await t.getMapModel(De);if(!p)throw new Error("No mapModel found.");const g=Rr({intl:c,httpService:i,mapModel:p,vectorSelectionSourceFactory:n,editingService:l,notificationService:d}),m={kind:"ready",appModel:new Nr(p,s,c,g),destroy(){this.appModel.destroy()}};if(a(this,be)){m.destroy();return}a(this,te).value=m,a(this,ve).push(m)};const q=we("local-storage"),Or=0,T={CORRUPTED_DATA:"local-storage:corrupted-data",INVALID_PATH:"local-storage:invalid-path",INVALID_VALUE:"local-storage:invalid-value",NOT_SUPPORTED:"local-storage:not-supported",INTERNAL:"local-storage:internal-error"};var oe,L,z,ie,A,y,Nt,Vt,de,K,Ot;class zr{constructor(e){u(this,y);u(this,oe);u(this,L,{});u(this,z);u(this,ie);u(this,A);h(this,oe,Hr(e.properties)),h(this,z,Ur()),a(this,z)&&(x(this,y,Vt).call(this),h(this,ie,x(this,y,Ot).call(this)))}destroy(){a(this,A)&&(clearTimeout(a(this,A)),h(this,A,void 0)),a(this,z)&&x(this,y,de).call(this)}get isSupported(){return!!a(this,ie)}get(e){return x(this,y,K).call(this).get(e)}set(e,t){return x(this,y,K).call(this).set(e,t)}remove(e){return x(this,y,K).call(this).remove(e)}removeAll(){return x(this,y,K).call(this).removeAll()}getNamespace(e){return x(this,y,K).call(this).getNamespace(e)}}oe=new WeakMap,L=new WeakMap,z=new WeakMap,ie=new WeakMap,A=new WeakMap,y=new WeakSet,Nt=function(){a(this,A)&&clearTimeout(a(this,A)),h(this,A,setTimeout(()=>{h(this,A,void 0),x(this,y,de).call(this)},Or))},Vt=function(){try{const e=a(this,z);if(!e)throw new j(T.INTERNAL,"Local storage is not available.");const t=e.getItem(a(this,oe));if(t==null){h(this,L,{}),x(this,y,de).call(this);return}try{const i=JSON.parse(t);if(!ae(i))throw new j(T.CORRUPTED_DATA,"Persisted value should be an object.");h(this,L,i)}catch(i){q.warn("Invalid persisted data, reverting to default.",i),h(this,L,{}),x(this,y,de).call(this)}}catch(e){q.error("Failed to load from local storage",e)}},de=function(){try{const e=a(this,z);if(!e)throw new j(T.INTERNAL,"Local storage is not available.");const t=JSON.stringify(a(this,L));e.setItem(a(this,oe),t)}catch(e){q.error("Failed to save to local storage",e)}},K=function(){const e=a(this,ie);if(!e)throw new j(T.NOT_SUPPORTED,"Local storage is not supported by this browser.");return e},Ot=function(){const e={getByPath:t=>ht(Fr(a(this,L),t)),setByPath:(t,i)=>{if(!Gr(i))throw new j(T.INVALID_VALUE,"The value is not supported by local storage.");if(i=ht(i),t.length===0){if(!ae(i))throw new j(T.INVALID_VALUE,"The root value must be a plain object.");h(this,L,i)}else Br(a(this,L),t,i);x(this,y,Nt).call(this)}};return new Ye([],e)};class Ye{path;access;constructor(e,t){this.path=e,this.access=t}get(e){return this.access.getByPath([...this.path,e])}set(e,t){this.access.setByPath([...this.path,e],t)}remove(e){this.access.setByPath([...this.path,e],void 0)}removeAll(){this.access.setByPath(this.path,{})}getNamespace(e){const t=this.get(e);if(t===void 0)this.set(e,{});else if(!ae(t))throw new j(T.INVALID_PATH,`Cannot use '${e}' as a namespace because it is not associated with an object.`);return new Ye(this.path.concat([e]),this.access)}}const ut="trails-state";function Fr(o,e){let t=o;for(const i of e){if(!ae(t))throw new j(T.INVALID_PATH,`Cannot get nested property '${i}' because the parent is no object.`);t=t[i]}return t}function Br(o,e,t){if(!e.length)throw new j(T.INTERNAL,"Path must not be empty.");let i=o;for(let n=0,l=e.length-1;n<l;++n){const c=e[n],d=i[c];if(!ae(d))throw new j(T.INVALID_PATH,`Cannot set property on '${c}' because it is no object.`);i=d}const s=e[e.length-1];i[s]=t}function ae(o){return!!(o&&typeof o=="object"&&!Array.isArray(o))}function Gr(o){const e=typeof o;return e==="boolean"||e==="number"||e==="string"||e==="undefined"||o===null||Array.isArray(o)||ae(o)}function Hr(o){const e=o.storageId;return!e||typeof e!="string"?(q.warn(`The 'storageId' property of the 'local-storage' package should be set to a valid string to avoid collisions with other applications. Defaulting to '${ut}'.`),ut):e}function Ur(){if(typeof Storage>"u"){q.warn("Local storage is not supported by this browser.");return}try{const o=globalThis.localStorage;if(!o){q.warn("Local storage is not supported by this browser.");return}return o}catch(o){q.warn("Local storage is not supported by this browser.",o);return}}function ht(o){return o!=null&&(o=JSON.parse(JSON.stringify(o))),o}const Wr={"showcase-app":{name:"showcase-app",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:Ai,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{vectorSourceFactory:{name:"ogc-features.VectorSourceFactory",qualifier:void 0,all:!1}}},AppInitModel:{name:"AppInitModel",clazz:Vr,provides:[{name:"app.AppInitModel",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1},mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1},notifier:{name:"notifier.NotificationService",qualifier:void 0,all:!1},vectorSelectionSourceFactory:{name:"selection.VectorSelectionSourceFactory",qualifier:void 0,all:!1},editingService:{name:"editing.EditingService",qualifier:void 0,all:!1},notificationService:{name:"notifier.NotificationService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"app.AppInitModel",qualifier:void 0,all:!1},{name:"runtime.ApplicationContext",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:Lo,provides:[{name:"http.HttpService",qualifier:"http.HttpService"}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/notifier":{name:"@open-pioneer/notifier",services:{NotificationServiceImpl:{name:"NotificationServiceImpl",clazz:mi,provides:[{name:"notifier.NotificationService",qualifier:"notifier.NotificationService"}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/reactivity":{name:"@open-pioneer/reactivity",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:Ao,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/coordinate-viewer":{name:"@open-pioneer/coordinate-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/ogc-features":{name:"@open-pioneer/ogc-features",services:{VectorSourceFactory:{name:"VectorSourceFactory",clazz:si,provides:[{name:"ogc-features.VectorSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}},SearchSourceFactory:{name:"SearchSourceFactory",clazz:ai,provides:[{name:"ogc-features.SearchSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}},"@open-pioneer/scale-bar":{name:"@open-pioneer/scale-bar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-viewer":{name:"@open-pioneer/scale-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/overview-map":{name:"@open-pioneer/overview-map",services:{},ui:{references:[]},properties:{}},"@open-pioneer/result-list":{name:"@open-pioneer/result-list",services:{},ui:{references:[]},properties:{}},"@open-pioneer/editing":{name:"@open-pioneer/editing",services:{EditingServiceImpl:{name:"EditingServiceImpl",clazz:$o,provides:[{name:"editing.EditingService",qualifier:void 0}],references:{mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{polygonStyle:{value:{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"red","stroke-width":1.25,"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1},vertexStyle:{value:{"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1}}},"@open-pioneer/legend":{name:"@open-pioneer/legend",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/measurement":{name:"@open-pioneer/measurement",services:{},ui:{references:[]},properties:{}},"@open-pioneer/printing":{name:"@open-pioneer/printing",services:{PrintingServiceImpl:{name:"PrintingServiceImpl",clazz:gi,provides:[{name:"printing.PrintingService",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1},{name:"printing.PrintingService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/selection":{name:"@open-pioneer/selection",services:{VectorSelectionSourceFactory:{name:"VectorSelectionSourceFactory",clazz:Ko,provides:[{name:"selection.VectorSelectionSourceFactory",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/search":{name:"@open-pioneer/search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/geolocation":{name:"@open-pioneer/geolocation",services:{},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/scale-setter":{name:"@open-pioneer/scale-setter",services:{},ui:{references:[]},properties:{}},"@open-pioneer/spatial-bookmarks":{name:"@open-pioneer/spatial-bookmarks",services:{},ui:{references:[{name:"local-storage.LocalStorageService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-ui-components":{name:"@open-pioneer/map-ui-components",services:{},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/local-storage":{name:"@open-pioneer/local-storage",services:{LocalStorageServiceImpl:{name:"LocalStorageServiceImpl",clazz:zr,provides:[{name:"local-storage.LocalStorageService",qualifier:"local-storage.LocalStorageService"}],references:{}}},ui:{references:[]},properties:{storageId:{value:null,required:!1}}}},qr=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.map-container .ol-viewport .ol-attribution{bottom:var(--map-padding-bottom);right:var(--map-padding-right)}.editing-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.editing-tooltip-hidden{visibility:hidden}.measurement-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.measurement-active-tooltip{background:#000000e6;border-radius:4px;border-color:#000000e6;opacity:.9;color:#fff}.measurement-finished-tooltip{background-color:#4cb3ffe6;color:#000;border:1px solid white}.measurement-active-tooltip:before,.measurement-finished-tooltip:before{border-top:6px solid rgba(0,0,0,.9);border-right:6px solid transparent;border-left:6px solid transparent;content:"";position:absolute;bottom:-6px;margin-left:-7px;left:50%}.measurement-finished-tooltip:before{border-top-color:#4cb3ff}.printing-overlay{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10000;-webkit-user-select:none;user-select:none;pointer-events:all;cursor:wait;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#b4b4b4cc}.printing-overlay-status{flex:1 1 auto;font-size:1.5em;text-align:center}.printing-scale-bar.ol-scale-bar{left:var(--printing-scale-bar-left);bottom:var(--printing-scale-bar-bottom)}.selection-drag-box{background-color:#ffffff4d!important;border:3px solid var(--chakra-colors-background_primary)!important}.selection-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.selection .react-select{cursor:default}.map-container .selection-active{cursor:crosshair}.map-container .selection-inactive{cursor:no-drop}.selection-source-value.selection-source-value--disabled{opacity:.4}.selection-source-value.selection-source-value--disabled span{margin:0 6px 0 0}.search-component .chakra-divider{display:none}.search-component .search-highlighted-match{font-weight:700}.search-component .search-value-container{cursor:text;padding-left:30px!important}.search-component .search-invisible{display:none}.map-anchor.main-map-anchor{overflow-x:hidden;overflow-y:auto}.map-container:focus-visible{outline:none}.map-container:focus-visible:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;border:3px solid var(--chakra-colors-trails-500)}@media screen and (max-width: 48em){.map-anchor.main-map-anchor{max-height:45%}}.scale-bar .ol-scale-bar{margin-bottom:8px;margin-right:8px}.scale-bar .ol-scale-bar,.scale-bar .ol-scale-line{position:relative;bottom:0;left:0;background:none}.scale-bar .ol-scale-bar .ol-scale-bar-inner,.scale-bar .ol-scale-bar .ol-scale-line-inner,.scale-bar .ol-scale-line .ol-scale-bar-inner,.scale-bar .ol-scale-line .ol-scale-line-inner{color:var(--chakra-white);border-color:var(--chakra-white)}.overview-map .ol-overviewmap{position:relative;height:100%;width:100%}.overview-map .ol-overviewmap:not(.ol-collapsed){border:1px solid black}.overview-map .ol-overviewmap .ol-overviewmap-map{border:none;width:100%;height:100%}.overview-map .ol-overviewmap .ol-overviewmap-box{border:2px solid red}.result-list-no-data-message{text-align:center;margin-top:50px;font-weight:700;font-size:larger}.result-list-table th,.result-list-table td{overflow-wrap:break-word}.result-list-table.result-list-table--is-resizing *{cursor:col-resize}.result-list-table thead{position:sticky;top:0;z-index:1;background:var(--chakra-colors-background_body)}.result-list-table th{position:relative;border-right-width:thin}.result-list-table tbody tr:hover{background:var(--chakra-colors-background_light)}.result-list-table .result-list-resizer{position:absolute;top:0;height:100%;right:0;width:8px;background:var(--chakra-colors-trails-100);transform:scaleX(.25);cursor:col-resize;-webkit-user-select:none;user-select:none;touch-action:none;padding-left:0}.result-list-table th:last-child .result-list-resizer{width:8px;transform:translate(50%) scaleX(.25)}.result-list-table th .result-list-resizer.result-list-resizer--is-resizing{background:var(--chakra-colors-trails-500);transform:scale(1)}.result-list-table th .result-list-resizer:hover{transform:scale(1)}',$r=["en","de"];function Kr(o){switch(o){case"en":return st(()=>import("./DEc3M1w42gc3.js"),[],import.meta.url).then(e=>e.default);case"de":return st(()=>import("./BaIyqT_8vxnW.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${o}'`)}const Yr=Wt(qr),Zr=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:Kr,locales:$r,packages:Wr,styles:Yr},Symbol.toStringTag,{value:"Module"}));function zt({label:o,children:e}){return r.jsxs(fi,{as:vi,maxWidth:{base:"none",md:"20em"},width:{base:"100%",sm:"47%",md:void 0},children:[r.jsx(bi,{flexBasis:{base:"8em",sm:"auto"},m:0,children:o}),e]})}const Xr=we("app::DemoSelection");function Jr({appModel:o}){const e=le(),{allDemos:t,currentDemo:i}=$(()=>({allDemos:o.allDemoInfos,currentDemo:o.currentDemo}),[o]),s=b.useMemo(()=>t.map(n=>r.jsx("option",{value:n.id,children:n.title},n.id)),[t]);return r.jsx(zt,{label:e.formatMessage({id:"demoSelection.label"}),children:r.jsx(_t,{value:i.id,onChange:n=>{const l=n.target.value;try{o.selectDemo(l)}catch(c){Xr.error("Failed to select demo",c)}},children:s})})}function Qr(){const o=le(),e=Tt("runtime.ApplicationContext"),t=es(e.getLocale()),i=s=>{switch(s){case"en":e.setLocale("en-GB");break;case"de":e.setLocale("de-DE");break}};return r.jsx(zt,{label:o.formatMessage({id:"localeSwitcher.label"}),children:r.jsxs(_t,{value:t,onChange:s=>i(s.target.value),children:[r.jsx("option",{value:"de",children:o.formatMessage({id:"localeSwitcher.locale.de"})}),r.jsx("option",{value:"en",children:o.formatMessage({id:"localeSwitcher.locale.en"})})]})})}function es(o){const e=o.match(/^[a-z]+/i)?.[0];if(e==="en"||e=="de")return e;throw new Error("unexpected locale prefix: "+e)}function ts({appModel:o}){const e=le();return r.jsxs(F,{as:"header",px:2,py:3,flexWrap:{base:"wrap",md:"nowrap"},alignItems:"baseline",gap:2,boxShadow:"1px 0px 3px rgba(0, 0, 0, 0.5)",bgColor:"white",zIndex:100,children:[r.jsx(Ge,{size:"md",flexShrink:0,flexGrow:1,textAlign:{base:"center",md:"left"},width:{base:"100%",md:"auto"},mb:{base:2,md:0},children:e.formatMessage({id:"header.title"})}),r.jsx(Jr,{appModel:o}),r.jsx(Qr,{})]})}function os(){const o=Tt("app.AppInitModel"),e=$(()=>o.appState,[o]);let t;switch(e.kind){case"loading":t="Loading...";break;case"error":t="Error: "+e.message;break;case"ready":t=r.jsx(is,{state:e})}return t}function is(o){const e=le(),t=o.state.appModel,{currentDemo:i,currentDemoModel:s}=$(()=>({currentDemo:t.currentDemo,currentDemoModel:t.currentDemoModel}),[t]),n=$(()=>s.listContainer,[s]),l=b.useMemo(()=>({left:0,right:0,bottom:n!=null?400:0,top:0}),[n]);return r.jsxs(r.Fragment,{children:[r.jsx(Yo,{position:"top-right"}),r.jsx(F,{height:"100%",direction:"column",children:r.jsx(Se,{title:r.jsx(ts,{appModel:t}),children:r.jsx(F,{flex:"1",direction:"column",position:"relative",children:r.jsx(jo,{mapId:De,children:r.jsxs(To,{viewPadding:l,role:"main","aria-label":e.formatMessage({id:"ariaLabels.map"}),children:[r.jsx(rt,{className:"main-map-anchor",position:"top-left",horizontalGap:10,verticalGap:10,children:r.jsx(R,{bgColor:"white",borderRadius:10,p:2,maxW:"500px",children:r.jsxs(Se,{title:i.title,sectionHeadingProps:{size:"lg"},children:[r.jsx(Re,{py:4,dangerouslySetInnerHTML:{__html:s.description}}),s.mainWidget]})})}),r.jsx(rt,{position:"bottom-right",horizontalGap:6,children:r.jsx(He,{p:1,children:s.tools})}),n&&r.jsx(R,{className:"list-container",position:"absolute",bottom:"0",backgroundColor:"white",width:"100%",height:"400px",zIndex:1,borderTop:"2px solid",borderColor:"trails.100",children:n})]})})})})})]})}const rs=new URLSearchParams(window.location.search),ss=rs.get("lang")||void 0,as=qt({component:os,appMetadata:Zr,config:{properties:{"@open-pioneer/local-storage":{storageId:"ol-showcase-state"}},locale:ss}});customElements.define("showcase-app",as);
