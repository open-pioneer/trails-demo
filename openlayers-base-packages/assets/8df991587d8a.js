import{a5 as b,a3 as v,a6 as A,r as c,a4 as m,M as h,a7 as S}from"./4536b7b97685.js";var p=e=>e.hasAttribute("tabindex"),x=e=>p(e)&&e.tabIndex===-1;function g(e){return!!e.getAttribute("disabled")||!!e.getAttribute("aria-disabled")}function E(e){return e.parentElement&&E(e.parentElement)?!0:e.hidden}function O(e){const t=e.getAttribute("contenteditable");return t!=="false"&&t!=null}function F(e){if(!b(e)||E(e)||g(e))return!1;const{localName:t}=e;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;const r={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return t in r?r[t]():O(e)?!0:p(e)}function w(e){return e?b(e)&&F(e)&&!x(e):!1}var R=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],T=R.join(),q=e=>e.offsetWidth>0&&e.offsetHeight>0;function y(e){const t=Array.from(e.querySelectorAll(T));return t.unshift(e),t.filter(n=>F(n)&&q(n))}function C(e){const t=e.current;if(!t)return!1;const n=A(t);return!n||t.contains(n)?!1:!!w(n)}function M(e,t){const{shouldFocus:n,visible:r,focusRef:u}=t,s=n&&!r;v(()=>{if(!s||C(e))return;const o=u?.current||e.current;let a;if(o)return a=requestAnimationFrame(()=>{o.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(a)}},[s,e,u])}var H={preventScroll:!0,shouldFocus:!1};function j(e,t=H){const{focusRef:n,preventScroll:r,shouldFocus:u,visible:s}=t,o=I(e)?e.current:e,a=u&&s,i=c.useRef(a),d=c.useRef(s);m(()=>{!d.current&&s&&(i.current=a),d.current=s},[s,a]);const l=c.useCallback(()=>{if(!(!s||!o||!i.current)&&(i.current=!1,!o.contains(document.activeElement)))if(n?.current)requestAnimationFrame(()=>{var f;(f=n.current)==null||f.focus({preventScroll:r})});else{const f=y(o);f.length>0&&requestAnimationFrame(()=>{f[0].focus({preventScroll:r})})}},[s,r,o,n]);v(()=>{l()},[l]),h(o,"transitionend",l)}function I(e){return"current"in e}function V(e){const{isOpen:t,ref:n}=e,[r,u]=c.useState(t),[s,o]=c.useState(!1);return c.useEffect(()=>{s||(u(t),o(!0))},[t,s,r]),h(()=>n.current,"animationend",()=>{u(t)}),{present:!(t?!1:!r),onComplete(){var i;const d=S(n.current),l=new d.CustomEvent("animationend",{bubbles:!0});(i=n.current)==null||i.dispatchEvent(l)}}}function k(e){const{wasSelected:t,enabled:n,isSelected:r,mode:u="unmount"}=e;return!!(!n||r||u==="keepMounted"&&t)}export{M as a,j as b,k as l,V as u};
