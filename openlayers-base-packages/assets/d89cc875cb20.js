import{b as T,f as y,d as v,o as j,j as o,g as L,I,u as E,r as h}from"./734e1b10cfd4.js";import{g as M}from"./a0583afdcf38.js";import{bf as C,bg as P,bh as w,bi as S,b7 as B,b8 as F}from"./b52e6ef04f6c.js";import{B as O}from"./18c42094afdc.js";import{S as q}from"./b535f9b894f4.js";var[z,p]=T({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),_=y(function(e,t){const i=v("List",e),{children:r,styleType:a="none",stylePosition:n,spacing:l,...m}=j(e),c=M(r),g=l?{["& > *:not(style) ~ *:not(style)"]:{mt:l}}:{};return o.jsx(z,{value:i,children:o.jsx(L.ul,{ref:t,listStyleType:a,listStylePosition:n,role:"list",__css:{...i.container,...g},...m,children:c})})});_.displayName="List";var G=y((s,e)=>{const{as:t,...i}=s;return o.jsx(_,{ref:e,as:"ol",styleType:"decimal",marginStart:"1em",...i})});G.displayName="OrderedList";var K=y(function(e,t){const{as:i,...r}=e;return o.jsx(_,{ref:t,as:"ul",styleType:"initial",marginStart:"1em",...r})});K.displayName="UnorderedList";var N=y(function(e,t){const i=p();return o.jsx(L.li,{ref:t,...e,__css:i.item})});N.displayName="ListItem";var R=y(function(e,t){const i=p();return o.jsx(I,{ref:t,role:"presentation",...e,__css:i.icon})});R.displayName="ListIcon";function x(s,e){const t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});const i=t.join("&");return s=s.replace(/[?&]$/,""),s+=s.includes("?")?"&":"?",s+i}class U extends C{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}const Z=U;class W extends P{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",i=e.tileGrid;let r=e.urls;r===void 0&&e.url!==void 0&&(r=w(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=S(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(S(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?x(e,i):e.replace(/\{(\w+?)\}/g,function(n,l){return l.toLowerCase()in i?i[l.toLowerCase()]:n});const r=this.tileGrid,a=this.dimensions_;return function(n,l,m){if(!n)return;const c={TileMatrix:r.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]};Object.assign(c,a);let u=e;return t=="KVP"?u=x(u,c):u=u.replace(/\{(\w+?)\}/g,function(g,f){return c[f]}),u}}}const ee=W,D="@open-pioneer/basemap-switcher",A=E.bind(void 0,D),b="___NO_BASEMAP___",te=s=>{const e=A(),{mapId:t,allowSelectingEmptyBasemap:i,"aria-label":r,"aria-labelledby":a}=s,{containerProps:n}=B("basemap-switcher",s),l=e.formatMessage({id:"emptyBasemapLabel"}),{map:m}=F(t),c=V(m),{selectOptions:u,selectedId:g}=h.useMemo(()=>k({baseLayers:c,allowSelectingEmptyBasemap:i,emptyBasemapLabel:l}),[c,i,l]),f=d=>{m?.layers.activateBaseLayer(d===b?void 0:d)};return o.jsx(O,{...n,children:m?o.jsx(q,{"aria-label":r,"aria-labelledby":a,className:"basemap-switcher-select",value:g,onChange:d=>f(d.target.value),children:u.map(d=>o.jsx("option",{value:d.id,children:d.label},d.id))}):""})};function V(s){const e=h.useRef(),t=h.useCallback(r=>{if(e.current=void 0,!s)return()=>{};const a=s.layers.on("changed",()=>{e.current=void 0,r()});return()=>a.destroy()},[s]),i=h.useCallback(()=>e.current?e.current:e.current=s?.layers.getBaseLayers()??[],[s]);return h.useSyncExternalStore(t,i)}function k(s){const{baseLayers:e=[],allowSelectingEmptyBasemap:t=!1,emptyBasemapLabel:i}=s,r=e.map(n=>({id:n.id,label:n.title}));let a=e.find(n=>n.visible)?.id;return(t||a==null)&&r.push(X(i)),a==null&&(a=b),{selectOptions:r,selectedId:a}}function X(s){return{id:b,label:s}}export{te as B,_ as L,K as U,ee as W,Z as a,N as b};
