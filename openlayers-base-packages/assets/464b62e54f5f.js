var Us=Object.defineProperty;var Ws=(o,e,t)=>e in o?Us(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var $=(o,e,t)=>(Ws(o,typeof e!="symbol"?e+"":e,t),t),lo=(o,e,t)=>{if(!e.has(o))throw TypeError("Cannot "+t)};var _=(o,e,t)=>(lo(o,e,"read from private field"),t?t.call(o):e.get(o)),A=(o,e,t)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,t)},I=(o,e,t,n)=>(lo(o,e,"write to private field"),n?n.call(o,t):e.set(o,t),t);var W=(o,e,t)=>(lo(o,e,"access private method"),t);import{u as Hs,a as $s,r as p,c as qs,f as it,j as l,b as Ks,d as ee,e as In,o as Rn,g as On,h as Ys,l as Xs,i as Wt,k as de,m as Zs,R as Dn,n as jn,E as ae,p as Js,A as co,q as uo,F as Nn,B as oo,C as Qs,t as ei,s as Fn,I as ti,v as oi}from"./4a2b71d7880f.js";import{t as ni}from"./848f03e9a62e.js";import{b as Vn,B as Gn,i as si,g as ii,a as Xo,t as ri,c as ai,d as Bn,S as li,e as ci,f as di,h as ui,j as hi,r as pi,C as fi,k as gi,l as mi,u as vi,m as zn,M as Un,o as bi,n as yi,p as Wn,A as wi,T as Do,I as Si,q as _i,s as _o,v as ce,w as xi,x as ki,y as N,V as Hn,z as ft,O as $n,D as De,E as ge,F as Re,G as jo,H as et,P as Ci,J as Ei,K as Pi,L as Zo,N as Mi,Q as Li,R as Jo,U as Ai,W as Ti,X as qn,Y as ve,Z as Ii,_ as Kn,$ as Pe,a0 as ze,a1 as Qo,a2 as Ri,a3 as no,a4 as Oi,a5 as Yn,a6 as Di,a7 as ji,a8 as No,a9 as Fo,aa as Xn,ab as Ni,ac as Fi,ad as ue,ae as oe,af as Y,ag as Vi,ah as rt,ai as Zn,aj as Gi,ak as en,al as Jn,am as Bi,an as tn,ao as zi,ap as ho,aq as on,ar as Ui,as as Wi,at as Hi,au as $i,av as qi,aw as Ki,ax as nn,ay as Yi,az as Xi,aA as Zi,aB as pe,aC as Rt,aD as je,aE as Ne,aF as Te,aG as te,aH as Ji,aI as Qi,aJ as er,aK as sn,aL as tr,aM as rn,aN as or,aO as lt}from"./39284370b430.js";import{m as F,a as C,X as Qn,p as B,r as D,b as Q,c as Vo,d as xo,e as ke,f as nr,g as sr,W as Ot,P as es,h as ts,i as ir,j as rr,k as ar,l as lr,n as cr,o as dr,q as ur,s as hr,t as pr,u as fr}from"./d120340df080.js";import{o as gr,W as mr}from"./05b8c5e0e87c.js";import{G as so,M as vr,a as os,b as ns,c as br,T as yr}from"./01a67a5ecbe0.js";import{T as fe,V as ko,L as ss}from"./12553b373d3d.js";import{V as wr,S as Sr,I as _r,Z as xr,a as kr}from"./cf4e31a6e9c4.js";import{L as Ue}from"./d0d59a9edbe6.js";import{_ as Ht}from"./a419295615be.js";import{c as is}from"./20bfdcc464b7.js";import{S as Cr}from"./e95b8e4fa01f.js";import{u as rs,F as $t}from"./c3dd43fe6cb8.js";import{F as vt}from"./db074d7a1538.js";import{H as Co,C as Er}from"./e1d278c03cea.js";import{G as Pr,F as Mr}from"./d99ee97b3bdc.js";import{u as Oe,R as Lr}from"./1fc563cd288a.js";import{c as me,S as Eo,D as Ar}from"./75a84f2be53e.js";import"./8067ba7f14cf.js";import"./19e5f0fcaf8a.js";import"./a1b8b346c1fe.js";function Tr(o){const{theme:e}=Hs(),t=$s();return p.useMemo(()=>qs(e.direction,{...t,...o}),[o,e.direction,t])}var Po=it(function(e,t){const{htmlWidth:n,htmlHeight:s,alt:i,...r}=e;return l.jsx("img",{width:n,height:s,ref:t,alt:i,...r})});Po.displayName="NativeImage";function Ir(o){const{loading:e,src:t,srcSet:n,onLoad:s,onError:i,crossOrigin:r,sizes:a,ignoreFallback:c}=o,[d,u]=p.useState("pending");p.useEffect(()=>{u(t?"loading":"pending")},[t]);const h=p.useRef(),f=p.useCallback(()=>{if(!t)return;g();const v=new Image;v.src=t,r&&(v.crossOrigin=r),n&&(v.srcset=n),a&&(v.sizes=a),e&&(v.loading=e),v.onload=S=>{g(),u("loaded"),s?.(S)},v.onerror=S=>{g(),u("failed"),i?.(S)},h.current=v},[t,r,n,a,s,i,e]),g=()=>{h.current&&(h.current.onload=null,h.current.onerror=null,h.current=null)};return Ks(()=>{if(!c)return d==="loading"&&f(),()=>{g()}},[d,f,c]),c?"loaded":d}var Rr=(o,e)=>o!=="loaded"&&e==="beforeLoadOrError"||o==="failed"&&e==="onError";function Or(o,e=[]){const t=Object.assign({},o);for(const n of e)n in t&&delete t[n];return t}var as=it(function(e,t){const{fallbackSrc:n,fallback:s,src:i,srcSet:r,align:a,fit:c,loading:d,ignoreFallback:u,crossOrigin:h,fallbackStrategy:f="beforeLoadOrError",referrerPolicy:g,...v}=e,S=n!==void 0||s!==void 0,L=d!=null||u||!S,E=Ir({...e,crossOrigin:h,ignoreFallback:L}),O=Rr(E,f),T={ref:t,objectFit:c,objectPosition:a,...L?v:Or(v,["onError","onLoad"])};return O?s||l.jsx(ee.img,{as:Po,className:"chakra-image__placeholder",src:n,...T}):l.jsx(ee.img,{as:Po,src:i,srcSet:r,crossOrigin:h,loading:d,referrerPolicy:g,className:"chakra-image",...T})});as.displayName="Image";var io=it(function(e,t){const{htmlSize:n,...s}=e,i=In("Input",s),r=Rn(s),a=rs(r),c=On("chakra-input",e.className);return l.jsx(ee.input,{size:n,...a,__css:i.field,ref:t,className:c})});io.displayName="Input";io.id="Input";var ls=ee("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});ls.displayName="Center";var Dr={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};it(function(e,t){const{axis:n="both",...s}=e;return l.jsx(ee.div,{ref:t,__css:Dr[n],...s,position:"absolute"})});var cs=it(function(e,t){const{children:n,placeholder:s,className:i,...r}=e;return l.jsxs(ee.select,{...r,ref:t,className:On("chakra-select",i),children:[s&&l.jsx("option",{value:"",children:s}),n]})});cs.displayName="SelectField";function jr(o,e){const t={},n={};for(const[s,i]of Object.entries(o))e.includes(s)?t[s]=i:n[s]=i;return[t,n]}var Go=it((o,e)=>{var t;const n=In("Select",o),{rootProps:s,placeholder:i,icon:r,color:a,height:c,h:d,minH:u,minHeight:h,iconColor:f,iconSize:g,...v}=Rn(o),[S,L]=jr(v,Xs),E=rs(L),O={width:"100%",height:"fit-content",position:"relative",color:a},T={paddingEnd:"2rem",...n.field,_focus:{zIndex:"unset",...(t=n.field)==null?void 0:t._focus}};return l.jsxs(ee.div,{className:"chakra-select__wrapper",__css:O,...S,...s,children:[l.jsx(cs,{ref:e,height:d??c,minH:u??h,placeholder:i,...E,__css:T,children:o.children}),l.jsx(ds,{"data-disabled":Ys(E.disabled),...(f||a)&&{color:f||a},__css:n.icon,...g&&{fontSize:g},children:r})]})});Go.displayName="Select";var Nr=o=>l.jsx("svg",{viewBox:"0 0 24 24",...o,children:l.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),Fr=ee("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),ds=o=>{const{children:e=l.jsx(Nr,{}),...t}=o,n=p.cloneElement(e,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return l.jsx(Fr,{...t,className:"chakra-select__icon-wrapper",children:p.isValidElement(e)?n:null})};ds.displayName="SelectIcon";const J=[null,"http://www.opengis.net/ows/1.1"],Vr=F(J,{ServiceIdentification:C(da),ServiceProvider:C(ha),OperationsMetadata:C(la)});class Gr extends Qn{constructor(){super()}readFromNode(e){const t=B({},Vr,e,[]);return t||null}}const Br=F(J,{DeliveryPoint:C(D),City:C(D),AdministrativeArea:C(D),PostalCode:C(D),Country:C(D),ElectronicMailAddress:C(D)}),zr=F(J,{Value:Q(pa)}),Ur=F(J,{AllowedValues:C(ta)}),Wr=F(J,{Phone:C(ca),Address:C(ea)}),Hr=F(J,{HTTP:C(ra)}),$r=F(J,{Get:Q(ia),Post:void 0}),qr=F(J,{DCP:C(sa)}),Kr=F(J,{Operation:aa}),Yr=F(J,{Voice:C(D),Facsimile:C(D)}),Xr=F(J,{Constraint:Q(oa)}),Zr=F(J,{IndividualName:C(D),PositionName:C(D),ContactInfo:C(na)}),Jr=F(J,{Abstract:C(D),AccessConstraints:C(D),Fees:C(D),Title:C(D),ServiceTypeVersion:C(D),ServiceType:C(D)}),Qr=F(J,{ProviderName:C(D),ProviderSite:C(Vo),ServiceContact:C(ua)});function ea(o,e){return B({},Br,o,e)}function ta(o,e){return B({},zr,o,e)}function oa(o,e){const t=o.getAttribute("name");if(t)return B({name:t},Ur,o,e)}function na(o,e){return B({},Wr,o,e)}function sa(o,e){return B({},Hr,o,e)}function ia(o,e){const t=Vo(o);if(t)return B({href:t},Xr,o,e)}function ra(o,e){return B({},$r,o,e)}function aa(o,e){const t=o.getAttribute("name"),n=B({},qr,o,e);if(!n)return;const s=e[e.length-1];s[t]=n}function la(o,e){return B({},Kr,o,e)}function ca(o,e){return B({},Yr,o,e)}function da(o,e){return B({},Jr,o,e)}function ua(o,e){return B({},Zr,o,e)}function ha(o,e){return B({},Qr,o,e)}function pa(o,e){return D(o)}const fa=Gr,he=[null,"http://www.opengis.net/wmts/1.0"],at=[null,"http://www.opengis.net/ows/1.1"],ga=F(he,{Contents:C(Pa)});class ma extends Qn{constructor(){super(),this.owsParser_=new fa}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let n=this.owsParser_.readFromNode(e);return n?(n.version=t,n=B(n,ga,e,[]),n||null):null}}const va=F(he,{Layer:Q(Ma),TileMatrixSet:Q(La)}),ba=F(he,{Style:Q(Aa),Format:Q(D),TileMatrixSetLink:Q(Ta),Dimension:Q(Ia),ResourceURL:Q(Ra)},F(at,{Title:C(D),Abstract:C(D),WGS84BoundingBox:C(us),Identifier:C(D)})),ya=F(he,{LegendURL:Q(Oa)},F(at,{Title:C(D),Identifier:C(D)})),wa=F(he,{TileMatrixSet:C(D),TileMatrixSetLimits:C(ja)}),Sa=F(he,{TileMatrixLimits:xo(Na)}),_a=F(he,{TileMatrix:C(D),MinTileRow:C(ke),MaxTileRow:C(ke),MinTileCol:C(ke),MaxTileCol:C(ke)}),xa=F(he,{Default:C(D),Value:Q(D)},F(at,{Identifier:C(D)})),ka=F(at,{LowerCorner:xo(Mo),UpperCorner:xo(Mo)}),Ca=F(he,{WellKnownScaleSet:C(D),TileMatrix:Q(Da)},F(at,{SupportedCRS:C(D),Identifier:C(D),BoundingBox:C(us)})),Ea=F(he,{TopLeftCorner:C(Mo),ScaleDenominator:C(nr),TileWidth:C(ke),TileHeight:C(ke),MatrixWidth:C(ke),MatrixHeight:C(ke)},F(at,{Identifier:C(D)}));function Pa(o,e){return B({},va,o,e)}function Ma(o,e){return B({},ba,o,e)}function La(o,e){return B({},Ca,o,e)}function Aa(o,e){const t=B({},ya,o,e);if(!t)return;const n=o.getAttribute("isDefault")==="true";return t.isDefault=n,t}function Ta(o,e){return B({},wa,o,e)}function Ia(o,e){return B({},xa,o,e)}function Ra(o,e){const t=o.getAttribute("format"),n=o.getAttribute("template"),s=o.getAttribute("resourceType"),i={};return t&&(i.format=t),n&&(i.template=n),s&&(i.resourceType=s),i}function us(o,e){const t=B([],ka,o,e);if(t.length==2)return Vn(t)}function Oa(o,e){const t={};return t.format=o.getAttribute("format"),t.href=Vo(o),t}function Mo(o,e){const t=D(o).split(/\s+/);if(!t||t.length!=2)return;const n=+t[0],s=+t[1];if(!(isNaN(n)||isNaN(s)))return[n,s]}function Da(o,e){return B({},Ea,o,e)}function ja(o,e){return B([],Sa,o,e)}function Na(o,e){return B({},_a,o,e)}const Fa=ma,U={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Va={ERROR:"error"};class Ga extends Bn{constructor(e){super(Va.ERROR),this.code=e.code,this.message=e.message}}let Ba=class extends Gn{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=si,this.watchId_=void 0,this.addChangeListener(U.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(U.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=ii(Xo("EPSG:4326"),e),this.position_&&this.set(U.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(U.ACCURACY,t.accuracy),this.set(U.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(U.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(U.HEADING,t.heading===null?void 0:ri(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const n=this.transform_(this.position_);this.set(U.POSITION,n.slice()),this.set(U.SPEED,t.speed===null?void 0:t.speed);const s=ai(this.position_,t.accuracy);s.applyTransform(this.transform_),this.set(U.ACCURACY_GEOMETRY,s),this.changed()}positionError_(e){this.dispatchEvent(new Ga(e))}getAccuracy(){return this.get(U.ACCURACY)}getAccuracyGeometry(){return this.get(U.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(U.ALTITUDE)}getAltitudeAccuracy(){return this.get(U.ALTITUDE_ACCURACY)}getHeading(){return this.get(U.HEADING)}getPosition(){return this.get(U.POSITION)}getProjection(){return this.get(U.PROJECTION)}getSpeed(){return this.get(U.SPEED)}getTracking(){return this.get(U.TRACKING)}getTrackingOptions(){return this.get(U.TRACKING_OPTIONS)}setProjection(e){this.set(U.PROJECTION,Xo(e))}setTracking(e){this.set(U.TRACKING,e)}setTrackingOptions(e){this.set(U.TRACKING_OPTIONS,e)}};const za=Ba;class ro extends li{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new ro(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const i=this.flatCoordinates,r=e-i[0],a=t-i[1],c=r*r+a*a;if(c<s){if(c===0)for(let d=0;d<this.stride;++d)n[d]=i[d];else{const d=this.getRadius()/Math.sqrt(c);n[0]=i[0]+d*r,n[1]=i[1]+d*a;for(let u=2;u<this.stride;++u)n[u]=i[u]}return n.length=this.stride,c}return s}containsXY(e,t){const n=this.flatCoordinates,s=e-n[0],i=t-n[1];return s*s+i*i<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return ci(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(di(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:ui(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],s=e.slice();s[t]=s[0]+n;for(let i=1;i<t;++i)s[t+i]=e[i];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let i=hi(s,0,e,this.stride);s[i++]=s[0]+t;for(let r=1,a=this.stride;r<a;++r)s[i++]=s[r];s.length=i,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),s=this.getStride();this.setCenter(pi(n,0,n.length,s,e,t,n)),this.changed()}}ro.prototype.transform;const Ua=ro,K={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Wa extends Gn{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+fi,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(K.ELEMENT,this.handleElementChanged),this.addChangeListener(K.MAP,this.handleMapChanged),this.addChangeListener(K.OFFSET,this.handleOffsetChanged),this.addChangeListener(K.POSITION,this.handlePositionChanged),this.addChangeListener(K.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(K.ELEMENT)}getId(){return this.id}getMap(){return this.get(K.MAP)||null}getOffset(){return this.get(K.OFFSET)}getPosition(){return this.get(K.POSITION)}getPositioning(){return this.get(K.POSITIONING)}handleElementChanged(){gi(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(mi(this.element),vi(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=zn(e,Un.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(K.ELEMENT,e)}setMap(e){this.set(K.MAP,e)}setOffset(e){this.set(K.OFFSET,e)}setPosition(e){this.set(K.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(K.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),s=this.getElement(),i=this.getRect(s,[bi(s),yi(s)]);e=e||{};const r=e.margin===void 0?20:e.margin;if(!Wn(n,i)){const a=i[0]-n[0],c=n[2]-i[2],d=i[1]-n[1],u=n[3]-i[3],h=[0,0];if(a<0?h[0]=a-r:c<0&&(h[0]=Math.abs(c)+r),d<0?h[1]=d-r:u<0&&(h[1]=Math.abs(u)+r),h[0]!==0||h[1]!==0){const f=t.getView().getCenterInternal(),g=t.getPixelFromCoordinateInternal(f);if(!g)return;const v=[g[0]+h[0],g[1]+h[1]],S=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(v),duration:S.duration,easing:S.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),s=n.left+window.pageXOffset,i=n.top+window.pageYOffset;return[s,i,s+t[0],i+t[1]]}setPositioning(e){this.set(K.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),s=e.getSize();this.updateRenderedPosition(n,s)}updateRenderedPosition(e,t){const n=this.element.style,s=this.getOffset(),i=this.getPositioning();this.setVisible(!0);const r=Math.round(e[0]+s[0])+"px",a=Math.round(e[1]+s[1])+"px";let c="0%",d="0%";i=="bottom-right"||i=="center-right"||i=="top-right"?c="-100%":(i=="bottom-center"||i=="center-center"||i=="top-center")&&(c="-50%"),i=="bottom-left"||i=="bottom-center"||i=="bottom-right"?d="-100%":(i=="center-left"||i=="center-center"||i=="center-right")&&(d="-50%");const u=`translate(${c}, ${d}) translate(${r}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,n.transform=u)}getOptions(){return this.options}}const bt=Wa,Me=de("map:WMTSLayer");var We,He,$e,qe,yt,wt,St,_t,Yt,hs,Xt,ps;class Ha extends wi{constructor(t){const n=new Do;super({...t,olLayer:n});A(this,Yt);A(this,Xt);A(this,We,void 0);A(this,He,void 0);A(this,$e,void 0);A(this,qe,void 0);A(this,yt,void 0);A(this,wt,void 0);A(this,St,void 0);A(this,_t,new AbortController);I(this,We,t.url),I(this,He,t.name),I(this,qe,n),I(this,$e,t.matrixSet),I(this,St,t.sourceOptions)}destroy(){super.destroy(),_(this,_t).abort()}get legend(){return _(this,wt)}__attach(t){super.__attach(t),W(this,Yt,hs).call(this).then(n=>{const i=new Fa().read(n),r=gr(i,{layer:_(this,He),matrixSet:_(this,$e)});if(!r)throw new Error("Layer was not found in capabilities");const a=new mr({...r,..._(this,St),tileLoadFunction:(u,h)=>{W(this,Xt,ps).call(this,u,h)}});I(this,yt,a),_(this,qe).setSource(_(this,yt));const c=a.getStyle(),d=qa(i,this.name,c);I(this,wt,d),this.__emitChangeEvent("changed:legend")}).catch(n=>{if(Wt(n)){Me.error(`Layer ${this.name} has been destroyed before fetching the data`);return}Me.error(`Failed fetching WMTS capabilities for Layer ${this.name}`,n)})}get layer(){return _(this,qe)}get url(){return _(this,We)}get name(){return _(this,He)}get matrixSet(){return _(this,$e)}get sublayers(){}}We=new WeakMap,He=new WeakMap,$e=new WeakMap,qe=new WeakMap,yt=new WeakMap,wt=new WeakMap,St=new WeakMap,_t=new WeakMap,Yt=new WeakSet,hs=async function(){const t=this.map.__sharedDependencies.httpService;return sr(_(this,We),t,_(this,_t).signal)},Xt=new WeakSet,ps=async function(t,n){const s=this.map.__sharedDependencies.httpService;try{if(!(t instanceof Si))throw new Error("Only 'ImageTile' is supported for now.");const i=t.getImage();if(!$a(i))throw new Error("Only <img> tags are supported as tiles for now.");const r=await s.fetch(n);if(!r.ok)throw new Error(`Tile request failed with status ${r.status}.`);const a=await r.blob(),c=URL.createObjectURL(a),d=()=>{URL.revokeObjectURL(c),i.removeEventListener("load",d),i.removeEventListener("error",d)};i.addEventListener("load",d),i.addEventListener("error",d),i.src=c}catch(i){t.setState(_i.ERROR),Wt(i)||Me.error("Failed to load tile",i)}};function $a(o){return o.tagName==="IMG"}function qa(o,e,t){const s=o?.Contents?.Layer;let i=s?.find(d=>d?.Identifier===e);if(!i&&(Me.debug("Failed to find the active layer in WMTS layer capabilities."),i=s?.[0],!i)){Me.debug("No layer in WMTS capabilities - giving up.");return}const r=i.Style;let a=r?.find(d=>d?.Identifier===t);if(!a&&(Me.debug("Failed to find active style in WMTS layer."),a=r?.[0],!a)){Me.debug("No style in WMTS layer capabilities - giving up.");return}return a.LegendURL?.[0]?.href}const an=Ha,Ka=25.4/.28,Ya=39.37;function Bo(o){return zo(o,Xa,Za)}function Xa(o){return o.getView()}function Za(o,e){return o.on("change:view",e)}function fs(o){return Bo(o)?.getProjection()}function Ja(o){const e=Bo(o);return zo(e,Qa,el)}function Qa(o){return o.getResolution()}function el(o,e){return o.on("change:resolution",e)}function tl(o){const e=Bo(o);return zo(e,ol,nl)}function ol(o){return o.getCenter()}function nl(o,e){return o.on("change:center",e)}function sl(o){const e=tl(o),t=Ja(o),n=fs(o);return p.useMemo(()=>{if(n==null||t==null||e==null)return;const i=_o(n,t,e);return Math.round(i*Ya*Ka)},[n,t,e])}function zo(o,e,t){const n=p.useCallback(()=>o?e(o):void 0,[o,e]),s=p.useCallback(i=>{if(!o)return()=>{};const r=t(o,i);return()=>ce(r)},[o,t]);return p.useSyncExternalStore(s,n)}const il=1.2;function rl(o,e=il){al(o);const t=xi(o),n=ki(o),s=t*e,i=n*e;return[o[0]-(s-t)/2,o[1]-(i-n)/2,o[2]+(s-t)/2,o[3]+(i-n)/2]}function al(o){if(o.length!==4)throw new Error(`Invalid extent (expected length 4, but got length ${o.length}).`)}const ll={height:"25px",width:"25px",borderColor:"#4cb3ff",borderWidth:"3px",borderRadius:"50%",display:"inline-block "};function cl(o){return l.jsxs(N,{children:[l.jsx(fe,{children:o.layer.title}),l.jsx(N,{style:ll})]})}const G="main";class dl{mapId=G;vectorSourceFactory;constructor(e){this.vectorSourceFactory=e.references.vectorSourceFactory}async getMapConfig(){const e={Component:cl};return{advanced:{view:new Hn({center:[404747,5757920],zoom:13,constrainResolution:!0,projection:"EPSG:25832"})},layers:[new Ot({title:"Linfos",visible:!0,url:"https://www.wms.nrw.de/umwelt/linfos",sublayers:[{name:"SonstigeSchutzgebiete",title:"SonstigeSchutzgebiete"},{name:"SCH_GSG",title:"SCH_GSG"}]}),new an({isBaseLayer:!0,title:"Topplus grau",url:"https://www.wmts.nrw.de/topplus_open/1.0.0/WMTSCapabilities.xml",name:"topplus_grau",matrixSet:"EPSG_25832_14",visible:!1,sourceOptions:{attributions:`Kartendarstellung und Präsentationsgraphiken: &copy; Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a title="Datenquellen öffnen" aria-label="Datenquellen öffnen" href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html " target="_blank">Datenquellen</a>`}}),new an({isBaseLayer:!0,title:"Topplus farbig",url:"https://www.wmts.nrw.de/topplus_open/1.0.0/WMTSCapabilities.xml",name:"topplus_col",matrixSet:"EPSG_25832_14",visible:!1,sourceOptions:{attributions:`Kartendarstellung und Präsentationsgraphiken: &copy; Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a title="Datenquellen öffnen" aria-label="Datenquellen öffnen" href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html " target="_blank">Datenquellen</a>`}}),new ft({title:"OSM",visible:!1,isBaseLayer:!0,olLayer:new Do({source:new $n})}),new ft({title:"Haltestellen Stadt Rostock",visible:!0,description:"Haltestellen des öffentlichen Personenverkehrs in der Hanse- und Universitätsstadt Rostock.",olLayer:ul(),attributes:{legend:e}}),new ft({id:"ogc_kitas",title:"Kindertagesstätten",visible:!0,olLayer:hl(),attributes:{legend:e,resultListMetadata:[{id:"id",displayName:"ID",width:100,getPropertyValue(t){return t.id}},{propertyName:"pointOfContact.address.postCode",displayName:"PLZ",width:120},{propertyName:"name",displayName:"Name"},{propertyName:"inspireId",displayName:"inspireID"},{displayName:"Gefördert",width:160,getPropertyValue(t){switch(t.properties?.gefoerdert){case"ja":return!0;case"nein":return!1;default:return t.properties?.gefoerdert}}}]}}),new ft({id:"ogc_kataster",title:"Liegenschaftskatasterbezirke in NRW (viele Daten)",visible:!1,olLayer:pl(this.vectorSourceFactory),attributes:{resultListMetadata:[{propertyName:"id",displayName:"ID",width:600,getPropertyValue(t){return t.id}},{displayName:"Aktualit",width:600,getPropertyValue(t){const n=t.properties?.aktualit;return typeof n=="string"&&!isNaN(Date.parse(n))?new Date(n):n}}]}}),ml(this.vectorSourceFactory),vl(),bl(),fl(),gl()]}}}function ul(){const o=new De({url:"https://geo.sv.rostock.de/download/opendata/haltestellen/haltestellen.json",format:new so,attributions:"Haltestellen Stadt Rostock, Creative Commons CC Zero License (cc-zero)"});return new ge({source:o})}function hl(){const o=new De({url:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json&limit=10000",format:new so,attributions:'&copy; <a href="http://www.bkg.bund.de" target="_blank">Bundesamt f&uuml;r Kartographie und Geod&auml;sie</a> 2017, <a href="http://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf" target="_blank">Datenquellen</a>'});return new ge({source:o,style:new Re({image:new jo({fill:new et({color:"blue"}),radius:4})})})}function pl(o){const e=o.createVectorSource({baseUrl:"https://ogc-api.nrw.de/lika/v1",collectionId:"katasterbezirk",limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/25832",attributions:`Land NRW (${new Date().getFullYear()}), <a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>, <a href='https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1'>Datenquelle</a>`});return new ge({source:e})}function fl(){return new Ot({title:"Verwaltungsgebiete",visible:!0,url:"https://www.wms.nrw.de/geobasis/wms_nw_dvg",sublayers:[{name:"nw_dvg_bld",title:"NRW"}]})}function gl(){return new Ot({title:"Bodenkarte zur Landwirtschaftlichen Standorterkundung",visible:!0,url:"https://www.wms.nrw.de/gd/bk05l",sublayers:[{name:"Versickerung_und_Stofftransport",title:"Versickerung und Stofftransport",sublayers:[{name:"Sickerwasserrate",title:"Sickerwasserrate",sublayers:[{name:"Szenario_Wald",title:"Szenario Wald",sublayers:[{name:"Sickerwasserrate_Wald",title:"Sickerwasserrate Wald"},{name:"Direktabfluss_Wald",title:"Direktabfluss Wald"}]},{name:"Szenario_Gruenland",title:"Szenario Grünland",sublayers:[{name:"Sickerwasserrate_Gruenland",title:"Sickerwasserrate Grünland"},{name:"Direktabfluss_Gruenland",title:"Direktabfluss Grünland"}]}]}]},{name:"Wasserhaushalt",title:"Wasserhaushalt",sublayers:[{name:"Kapillaraufstieg_von_Grundwasser",title:"Kapillaraufstieg von Grundwasser",attributes:{legend:{imageUrl:"https://www.wms.nrw.de/gd/bk05l?request=GetLegendGraphic%26version=1.3.0%26format=image/png%26layer=Kapillaraufstieg_von_Grundwasser"}}},{name:"Luftkapazitaet_We",title:"Luftkapazitaet (We)",attributes:{legend:{}}}]}]})}function ml(o){const e="https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1",t="governmentalservice",n=o.createVectorSource({baseUrl:e,collectionId:t,limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/25832",attributions:`Land NRW (${new Date().getFullYear()}), <a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>, <a href='https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1'>Datenquelle</a>`}),s=new ge({source:n});return new ft({id:"krankenhaus",title:"Krankenhäuser",visible:!0,olLayer:s,attributes:{collectionURL:e+"/collections/"+t}})}function vl(){return new Ot({title:"Schulstandorte",description:"Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.",visible:!0,url:"https://www.wms.nrw.de/wms/wms_nw_inspire-schulen",sublayers:[{name:"US.education",title:"INSPIRE - WMS Schulstandorte NRW",attributes:{legend:{}}}],sourceOptions:{ratio:1}})}function bl(){return new Ot({title:"Straßennetz Landesbetrieb Straßenbau NRW",url:"https://www.wms.nrw.de/wms/strassen_nrw_wms",visible:!0,sublayers:[{name:"1",title:"Verwaltungen",attributes:{legend:{imageUrl:"https://www.wms.nrw.de/legends/wms/strassen_nrw_wms/1.png"}}},{name:"4",title:"Abschnitte und Äste"},{name:"6",title:"Unfälle"}]})}const yl=Symbol(),Uo=Symbol(),ct="a",Ut="w";let wl=(o,e)=>new Proxy(o,e);const Lo=Object.getPrototypeOf,Ao=new WeakMap,gs=o=>o&&(Ao.has(o)?Ao.get(o):Lo(o)===Object.prototype||Lo(o)===Array.prototype),ln=o=>typeof o=="object"&&o!==null,Sl=o=>{if(Array.isArray(o))return Array.from(o);const e=Object.getOwnPropertyDescriptors(o);return Object.values(e).forEach(t=>{t.configurable=!0}),Object.create(Lo(o),e)},ms=o=>o[Uo]||o,vs=(o,e,t,n)=>{if(!gs(o))return o;let s=n&&n.get(o);if(!s){const c=ms(o);s=(d=>Object.values(Object.getOwnPropertyDescriptors(d)).some(u=>!u.configurable&&!u.writable))(c)?[c,Sl(c)]:[c],n?.set(o,s)}const[i,r]=s;let a=t&&t.get(i);return a&&a[1].f===!!r||(a=((c,d)=>{const u={f:d};let h=!1;const f=(v,S)=>{if(!h){let L=u[ct].get(c);if(L||(L={},u[ct].set(c,L)),v===Ut)L[Ut]=!0;else{let E=L[v];E||(E=new Set,L[v]=E),E.add(S)}}},g={get:(v,S)=>S===Uo?c:(f("k",S),vs(Reflect.get(v,S),u[ct],u.c,u.t)),has:(v,S)=>S===yl?(h=!0,u[ct].delete(c),!0):(f("h",S),Reflect.has(v,S)),getOwnPropertyDescriptor:(v,S)=>(f("o",S),Reflect.getOwnPropertyDescriptor(v,S)),ownKeys:v=>(f(Ut),Reflect.ownKeys(v))};return d&&(g.set=g.deleteProperty=()=>!1),[g,u]})(i,!!r),a[1].p=wl(r||i,a[0]),t&&t.set(i,a)),a[1][ct]=e,a[1].c=t,a[1].t=n,a[1].p},bs=(o,e,t,n)=>{if(Object.is(o,e))return!1;if(!ln(o)||!ln(e))return!0;const s=t.get(ms(o));if(!s)return!0;if(n){const r=n.get(o);if(r&&r.n===e)return r.g;n.set(o,{n:e,g:!1})}let i=null;try{for(const r of s.h||[])if(i=Reflect.has(o,r)!==Reflect.has(e,r),i)return i;if(s[Ut]===!0){if(i=((r,a)=>{const c=Reflect.ownKeys(r),d=Reflect.ownKeys(a);return c.length!==d.length||c.some((u,h)=>u!==d[h])})(o,e),i)return i}else for(const r of s.o||[])if(i=!!Reflect.getOwnPropertyDescriptor(o,r)!=!!Reflect.getOwnPropertyDescriptor(e,r),i)return i;for(const r of s.k||[])if(i=bs(o[r],e[r],t,n),i)return i;return i===null&&(i=!0),i}finally{n&&n.set(o,{n:e,g:i})}},_l=o=>gs(o)&&o[Uo]||null,cn=(o,e=!0)=>{Ao.set(o,e)};const po=o=>typeof o=="object"&&o!==null,ye=new WeakMap,gt=new WeakSet,xl=(o=Object.is,e=(d,u)=>new Proxy(d,u),t=d=>po(d)&&!gt.has(d)&&(Array.isArray(d)||!(Symbol.iterator in d))&&!(d instanceof WeakMap)&&!(d instanceof WeakSet)&&!(d instanceof Error)&&!(d instanceof Number)&&!(d instanceof Date)&&!(d instanceof String)&&!(d instanceof RegExp)&&!(d instanceof ArrayBuffer),n=d=>{switch(d.status){case"fulfilled":return d.value;case"rejected":throw d.reason;default:throw d}},s=new WeakMap,i=(d,u,h=n)=>{const f=s.get(d);if(f?.[0]===u)return f[1];const g=Array.isArray(d)?[]:Object.create(Object.getPrototypeOf(d));return cn(g,!0),s.set(d,[u,g]),Reflect.ownKeys(d).forEach(v=>{if(Object.getOwnPropertyDescriptor(g,v))return;const S=Reflect.get(d,v),{enumerable:L}=Reflect.getOwnPropertyDescriptor(d,v),E={value:S,enumerable:L,configurable:!0};if(gt.has(S))cn(S,!1);else if(S instanceof Promise)delete E.value,E.get=()=>h(S);else if(ye.has(S)){const[O,T]=ye.get(S);E.value=i(O,T(),h)}Object.defineProperty(g,v,E)}),Object.preventExtensions(g)},r=new WeakMap,a=[1,1],c=d=>{if(!po(d))throw new Error("object required");const u=r.get(d);if(u)return u;let h=a[0];const f=new Set,g=(y,w=++a[0])=>{h!==w&&(h=w,f.forEach(m=>m(y,w)))};let v=a[1];const S=(y=++a[1])=>(v!==y&&!f.size&&(v=y,E.forEach(([w])=>{const m=w[1](y);m>h&&(h=m)})),h),L=y=>(w,m)=>{const x=[...w];x[1]=[y,...x[1]],g(x,m)},E=new Map,O=(y,w)=>{if(f.size){const m=w[3](L(y));E.set(y,[w,m])}else E.set(y,[w])},T=y=>{var w;const m=E.get(y);m&&(E.delete(y),(w=m[1])==null||w.call(m))},X=y=>(f.add(y),f.size===1&&E.forEach(([m,x],M)=>{const k=m[3](L(M));E.set(M,[m,k])}),()=>{f.delete(y),f.size===0&&E.forEach(([m,x],M)=>{x&&(x(),E.set(M,[m]))})}),Z=Array.isArray(d)?[]:Object.create(Object.getPrototypeOf(d)),H=e(Z,{deleteProperty(y,w){const m=Reflect.get(y,w);T(w);const x=Reflect.deleteProperty(y,w);return x&&g(["delete",[w],m]),x},set(y,w,m,x){const M=Reflect.has(y,w),k=Reflect.get(y,w,x);if(M&&(o(k,m)||r.has(m)&&o(k,r.get(m))))return!0;T(w),po(m)&&(m=_l(m)||m);let P=m;if(m instanceof Promise)m.then(V=>{m.status="fulfilled",m.value=V,g(["resolve",[w],V])}).catch(V=>{m.status="rejected",m.reason=V,g(["reject",[w],V])});else{!ye.has(m)&&t(m)&&(P=c(m));const V=!gt.has(P)&&ye.get(P);V&&O(w,V)}return Reflect.set(y,w,P,x),g(["set",[w],m,k]),!0}});r.set(d,H);const b=[Z,S,i,X];return ye.set(H,b),Reflect.ownKeys(d).forEach(y=>{const w=Object.getOwnPropertyDescriptor(d,y);"value"in w&&(H[y]=d[y],delete w.value,delete w.writable),Object.defineProperty(Z,y,w)}),H})=>[c,ye,gt,o,e,t,n,s,i,r,a],[kl]=xl();function ys(o={}){return kl(o)}function Cl(o,e,t){const n=ye.get(o);let s;const i=[],r=n[3];let a=!1;const d=r(u=>{if(i.push(u),t){e(i.splice(0));return}s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,d()}}function dn(o,e){const t=ye.get(o),[n,s,i]=t;return i(n,s(),e)}function dt(o){return gt.add(o),o}var ws={exports:{}},Ss={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tt=p;function El(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var Pl=typeof Object.is=="function"?Object.is:El,Ml=tt.useState,Ll=tt.useEffect,Al=tt.useLayoutEffect,Tl=tt.useDebugValue;function Il(o,e){var t=e(),n=Ml({inst:{value:t,getSnapshot:e}}),s=n[0].inst,i=n[1];return Al(function(){s.value=t,s.getSnapshot=e,fo(s)&&i({inst:s})},[o,t,e]),Ll(function(){return fo(s)&&i({inst:s}),o(function(){fo(s)&&i({inst:s})})},[o]),Tl(t),t}function fo(o){var e=o.getSnapshot;o=o.value;try{var t=e();return!Pl(o,t)}catch{return!0}}function Rl(o,e){return e()}var Ol=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rl:Il;Ss.useSyncExternalStore=tt.useSyncExternalStore!==void 0?tt.useSyncExternalStore:Ol;ws.exports=Ss;var Dl=ws.exports;const jl=Zs(Dl),{use:un}=Dn,{useSyncExternalStore:Nl}=jl;const Fl=new WeakMap;function ot(o,e){const t=e?.sync,n=p.useRef(),s=p.useRef();let i=!0;const r=Nl(p.useCallback(d=>{const u=Cl(o,d,t);return d(),u},[o,t]),()=>{const d=dn(o,un);try{if(!i&&n.current&&s.current&&!bs(n.current,d,s.current,new WeakMap))return n.current}catch{}return d},()=>dn(o,un));i=!1;const a=new WeakMap;p.useEffect(()=>{n.current=r,s.current=a});const c=p.useMemo(()=>new WeakMap,[]);return vs(r,a,c,Fl)}function Vl(o){const e=ys({data:Array.from(o||[]),has(t){return this.data.some(n=>n[0]===t)},set(t,n){const s=this.data.find(i=>i[0]===t);return s?s[1]=n:this.data.push([t,n]),this},get(t){var n;return(n=this.data.find(s=>s[0]===t))==null?void 0:n[1]},delete(t){const n=this.data.findIndex(s=>s[0]===t);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(t){this.data.forEach(n=>{t(n[1],n[0],this)})},keys(){return this.data.map(t=>t[0]).values()},values(){return this.data.map(t=>t[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}class Gl{label;filteredTypes;httpService;constructor(e,t,n){this.label=e,this.filteredTypes=t,this.httpService=n}async search(e,{mapProjection:t,signal:n}){const s=await this.request(e,100,n),i=new so({dataProjection:"EPSG:4326",featureProjection:t});return s.features.filter(r=>this.filteredTypes.includes(r.properties.type)).map((r,a)=>{const c=i.readGeometry(r.geometry);return{id:r.properties.osm_id||a,label:this.createLabel(r),geometry:c,properties:r.properties}})}async request(e,t,n){const s=new URL("https://photon.komoot.io/api?");s.searchParams.set("q",e),s.searchParams.set("lang","de"),s.searchParams.set("lat","51.961563"),s.searchParams.set("lon","7.628202"),s.searchParams.set("limit",t.toString());const i=await this.httpService.fetch(s,{signal:n});if(!i.ok)throw new Error("Request failed: "+i.status);return await i.json()}createLabel(e){return`${e.properties.name} (${e.properties.osm_value?e.properties.osm_value+", ":""}${e.properties.postcode?e.properties.postcode+", ":""}${e.properties.city?e.properties.city+", ":""}${e.properties.country?e.properties.country+")":")"}`}}const Bl=de("ol-app:AppModel");class zl{_intl;_mapRegistry;_ogcSearchSourceFactory;_vectorSelectionSourceFactory;_httpService;_state;_resources=[];constructor({references:e,intl:t}){this._mapRegistry=e.mapRegistry,this._intl=t,this._ogcSearchSourceFactory=e.ogcSearchSourceFactory,this._vectorSelectionSourceFactory=e.vectorSelectionSourceFactory,this._httpService=e.httpService,this._state=ys({searchSources:[],selectionSources:[],sourceMetadata:Vl(),resultListState:{input:void 0,open:!1,key:0}}),this.initSearchSources(),this.initSelectionSources().catch(n=>{Bl.error("Failed to initialize selection sources",n)})}destroy(){this._resources.forEach(e=>e.destroy())}get state(){return this._state}setResultListInput(e){const t=this._state.resultListState.key;this._state.resultListState={open:!0,key:t+1,input:e}}setResultListVisibility(e){this._state.resultListState.open=e}initSearchSources(){const e=this._ogcSearchSourceFactory.createSearchSource({label:this._intl.formatMessage({id:"searchSources.lika"}),baseUrl:"https://ogc-api.nrw.de/lika/v1",collectionId:"flurstueck",searchProperty:"flurstid",labelProperty:"objid"}),t=this._ogcSearchSourceFactory.createSearchSource({label:this._intl.formatMessage({id:"searchSources.miningPermissions"}),baseUrl:"https://ogc-api.nrw.de/inspire-am-bergbauberechtigungen/v1",collectionId:"managementrestrictionorregulationzone",searchProperty:"thematicId",labelProperty:"name",renderLabel(s){const i=s?.properties?.name,r=s?.id;return typeof i=="string"?i+" ("+r+")":String(r)},rewriteUrl(s){return s.searchParams.set("properties","name"),s}}),n=new Gl("Photon Geocoder",["city","street"],this._httpService);this._state.searchSources=[dt(e),dt(t),dt(n)]}async initSelectionSources(){const e=["ogc_kitas","ogc_kataster"],t=await this._mapRegistry.expectMapModel(G),n=t.layers.getOperationalLayers({sortByDisplayOrder:!0});for(const s of n){if(!e.includes(s.id)||!Ul(s.olLayer))continue;const i=this._vectorSelectionSourceFactory.createSelectionSource({vectorLayer:s.olLayer,label:s.title}),r=i.on("changed:status",()=>{i.status!=="available"&&(i.status==="unavailable"||i.status?.kind==="unavailable")&&t.removeHighlight()});this._resources.push(r,i),this._state.selectionSources.unshift(dt(i)),this._state.sourceMetadata.set(dt(i),s.attributes.resultListMetadata)}}}function Ul(o){return o instanceof ge&&o.getSource()instanceof De}const go=de("notifier:NotificationService");var ne,Ke,xt,kt,To,Oo,Hl;class Wl{constructor(){A(this,kt);A(this,Oo);A(this,ne,void 0);A(this,Ke,void 0);A(this,xt,void 0)}destroy(){clearTimeout(_(this,xt)),I(this,xt,void 0)}notify(e){W(this,kt,To).call(this,"showNotification",{title:e.title??void 0,message:e.message??void 0,level:e.level??"info",displayDuration:e.displayDuration})}closeAll(){W(this,kt,To).call(this,"closeAll")}registerHandler(e){if(_(this,ne))return go.warn(`A notification handler has already been registered; this new handler will be ignored.
The <Notifier /> component has likely been used twice in your application.`),{destroy(){}};I(this,ne,e);const t=_(this,Ke);if(I(this,Ke,void 0),t)for(const[s,...i]of t)e[s](...i);let n=!1;return{destroy:()=>{n||(n=!0,_(this,ne)===e&&I(this,ne,void 0))}}}}ne=new WeakMap,Ke=new WeakMap,xt=new WeakMap,kt=new WeakSet,To=function(e,...t){if(_(this,ne))_(this,ne)[e](...t);else{const n=_(this,Ke)??I(this,Ke,[]);if(n.length>=1024){go.error(`Internal notification buffer overflow: this event will be dropped to prevent a memory leak.
Make sure that the UI is configured to display notifications (use <Notifier />).`,{method:e,args:t});return}n.push([e,...t])}},Oo=new WeakSet,Hl=function(){_(this,ne)||go.warn(`No notification handler has been registered: notifications will not be visible.
Make sure that your app contains the <Notifier /> component.`)};const Dt={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class jt extends Bn{constructor(e,t){super(e),this.feature=t}}function $l(o,e){const t=[];for(let n=0;n<e.length;++n){const i=e[n].getGeometry();_s(o,i,t)}return t}function Nt(o,e){return Yn(o[0],o[1],e[0],e[1])}function Ge(o,e){const t=o.length;return e<0?o[e+t]:e>=t?o[e-t]:o[e]}function Ft(o,e,t){let n,s;e<t?(n=e,s=t):(n=t,s=e);const i=Math.ceil(n),r=Math.floor(s);if(i>r){const c=Be(o,n),d=Be(o,s);return Nt(c,d)}let a=0;if(n<i){const c=Be(o,n),d=Ge(o,i);a+=Nt(c,d)}if(r<s){const c=Ge(o,r),d=Be(o,s);a+=Nt(c,d)}for(let c=i;c<r-1;++c){const d=Ge(o,c),u=Ge(o,c+1);a+=Nt(d,u)}return a}function _s(o,e,t){if(e instanceof Ue){Vt(o,e.getCoordinates(),!1,t);return}if(e instanceof os){const n=e.getCoordinates();for(let s=0,i=n.length;s<i;++s)Vt(o,n[s],!1,t);return}if(e instanceof no){const n=e.getCoordinates();for(let s=0,i=n.length;s<i;++s)Vt(o,n[s],!0,t);return}if(e instanceof ns){const n=e.getCoordinates();for(let s=0,i=n.length;s<i;++s){const r=n[s];for(let a=0,c=r.length;a<c;++a)Vt(o,r[a],!0,t)}return}if(e instanceof br){const n=e.getGeometries();for(let s=0;s<n.length;++s)_s(o,n[s],t);return}}const mo={index:-1,endIndex:NaN};function ql(o,e,t,n){const s=o[0],i=o[1];let r=1/0,a=-1,c=NaN;for(let h=0;h<e.targets.length;++h){const f=e.targets[h],g=f.coordinates;let v=1/0,S;for(let L=0;L<g.length-1;++L){const E=g[L],O=g[L+1],T=xs(s,i,E,O);T.squaredDistance<v&&(v=T.squaredDistance,S=L+T.along)}v<r&&(r=v,f.ring&&e.targetIndex===h&&(f.endIndex>f.startIndex?S<f.startIndex&&(S+=g.length):f.endIndex<f.startIndex&&S>f.startIndex&&(S-=g.length)),c=S,a=h)}const d=e.targets[a];let u=d.ring;if(e.targetIndex===a&&u){const h=Be(d.coordinates,c),f=t.getPixelFromCoordinate(h);Kn(f,e.startPx)>n&&(u=!1)}if(u){const h=d.coordinates,f=h.length,g=d.startIndex,v=c;if(g<v){const S=Ft(h,g,v);Ft(h,g,v-f)<S&&(c-=f)}else{const S=Ft(h,g,v);Ft(h,g,v+f)<S&&(c+=f)}}return mo.index=a,mo.endIndex=c,mo}function Vt(o,e,t,n){const s=o[0],i=o[1];for(let r=0,a=e.length-1;r<a;++r){const c=e[r],d=e[r+1],u=xs(s,i,c,d);if(u.squaredDistance===0){const h=r+u.along;n.push({coordinates:e,ring:t,startIndex:h,endIndex:h});return}}}const vo={along:0,squaredDistance:0};function xs(o,e,t,n){const s=t[0],i=t[1],r=n[0],a=n[1],c=r-s,d=a-i;let u=0,h=s,f=i;return(c!==0||d!==0)&&(u=ji(((o-s)*c+(e-i)*d)/(c*c+d*d),0,1),h+=c*u,f+=d*u),vo.along=u,vo.squaredDistance=Oi(Yn(o,e,h,f),10),vo}function Be(o,e){const t=o.length;let n=Math.floor(e);const s=e-n;n>=t?n-=t:n<0&&(n+=t);let i=n+1;i>=t&&(i-=t);const r=o[n],a=r[0],c=r[1],d=o[i],u=d[0]-a,h=d[1]-c;return[a+u*s,c+h*s]}class Kl extends Ci{constructor(e){const t=e;t.stopDown||(t.stopDown=Ei),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=Xl(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Pi,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const s=this.mode_;if(s==="Circle")n=function(i,r,a){const c=r||new Ua([NaN,NaN]),d=Zo(i[0]),u=Mi(d,Zo(i[i.length-1]));return c.setCenterAndRadius(d,Math.sqrt(u),this.geometryLayout_),c};else{let i;s==="Point"?i=ze:s==="LineString"?i=Ue:s==="Polygon"&&(i=no),n=function(r,a,c){return a?s==="Polygon"?r[0].length?a.setCoordinates([r[0].concat([r[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(r,this.geometryLayout_):a=new i(r,this.geometryLayout_),a}}}this.geometryFunction_=n,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new ge({source:new De({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:Yl(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Li,this.freehandCondition_,e.freehand?this.freehandCondition_=Jo:this.freehandCondition_=e.freehandCondition?e.freehandCondition:Ai,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(Ti.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Jo:t=e:t=Di,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===qn.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===ve.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===ve.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===ve.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===ve.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===ve.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===ve.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===ve.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Ii(ve.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),n=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),s=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),i=Vn([n,s]),r=this.traceSource_.getFeaturesInExtent(i);if(r.length===0)return;const a=$l(e.coordinate,r);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,s=e.startIndex<=t;n===s?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const s=Math.ceil(e);let i=Math.floor(t);i===t&&(i-=1),n=i-s+1}else{const s=Math.floor(e);let i=Math.ceil(t);i===t&&(i+=1),n=s-i+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const s=[];if(t<n){const i=Math.ceil(t);let r=Math.floor(n);r===n&&(r-=1);for(let a=i;a<=r;++a)s.push(Ge(e.coordinates,a))}else{const i=Math.floor(t);let r=Math.ceil(n);r===n&&(r+=1);for(let a=i;a>=r;--a)s.push(Ge(e.coordinates,a))}s.length&&this.appendCoordinates(s)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Kn(t.startPx,e.pixel)<this.snapTolerance_)return;const n=ql(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const c=t.targets[t.targetIndex];this.removeTracedCoordinates_(c.startIndex,c.endIndex)}const a=t.targets[n.index];this.addTracedCoordinates_(a,a.startIndex,n.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,n.endIndex)}t.targetIndex=n.index;const s=t.targets[t.targetIndex];s.endIndex=n.endIndex;const i=Be(s.coordinates,s.endIndex),r=this.getMap().getPixelFromCoordinate(i);e.coordinate=i,e.pixel=[Math.round(r[0]),Math.round(r[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(e.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||this.mode_==="Point")&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,s=t[0]-n[0],i=t[1]-n[1],r=s*s+i*i;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let s=!1,i=[this.finishCoordinate_];const r=this.mode_;if(r==="Point")n=!0;else if(r==="Circle")n=this.sketchCoords_.length===2;else if(r==="LineString")s=!t&&this.sketchCoords_.length>this.minPoints_;else if(r==="Polygon"){const a=this.sketchCoords_;s=a[0].length>this.minPoints_,i=[a[0][0],a[0][a[0].length-2]],t?i=[a[0][0]]:i=[a[0][0],a[0][a[0].length-2]]}if(s){const a=this.getMap();for(let c=0,d=i.length;c<d;c++){const u=i[c],h=a.getPixelFromCoordinate(u),f=e[0]-h[0],g=e[1]-h[1],v=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(f*f+g*g)<=v,n){this.finishCoordinate_=u;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Pe(new ze(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Pe);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new Ue(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=Qo(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Pe(new Ue(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Pe,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new jt(Dt.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),s=t.getView().getProjection(),i=Qo(this.geometryLayout_);let r,a;for(;e.length<i;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(r=this.sketchCoords_[0],a=r[r.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(r=this.sketchCoords_,a=r[r.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let s,i;const r=this.mode_;r==="LineString"||r==="Circle"?(this.finishCoordinate_=e.slice(),i=this.sketchCoords_,i.length>=this.maxPoints_&&(this.freehand_?i.pop():s=!0),i.push(e.slice()),this.geometryFunction_(i,t,n)):r==="Polygon"&&(i=this.sketchCoords_[0],i.length>=this.maxPoints_&&(this.freehand_?i.pop():s=!0),i.push(e.slice()),s&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),s&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),s=this.mode_;for(let i=0;i<e;++i){let r;if(s==="LineString"||s==="Circle"){if(r=this.sketchCoords_,r.splice(-2,1),r.length>=2){this.finishCoordinate_=r[r.length-2].slice();const a=this.finishCoordinate_.slice();r[r.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(r,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(s==="Polygon"){r=this.sketchCoords_[0],r.splice(-2,1);const a=this.sketchLine_.getGeometry();if(r.length>=2){const c=r[r.length-2].slice();r[r.length-1]=c,this.createOrUpdateSketchPoint_(c)}a.setCoordinates(r),this.geometryFunction_(this.sketchCoords_,t,n)}if(r.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const n=e.getGeometry(),s=this.getMap().getView().getProjection();this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,n,s)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,n,s),t=n.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new vr([t])):this.type_==="MultiLineString"?e.setGeometry(new os([t])):this.type_==="MultiPolygon"&&e.setGeometry(new ns([t])),this.dispatchEvent(new jt(Dt.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new jt(Dt.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(e[0]);let s;if(t==="LineString"||t==="Circle")s=this.sketchCoords_;else if(t==="Polygon")s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&s.shift(),s.pop();for(let r=0;r<e.length;r++)this.addToDrawing_(e[r]);const i=e[e.length-1];this.addToDrawing_(i),this.modifyDrawing_(i)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new Pe(new ze(s)),this.updateSketchFeatures_(),this.dispatchEvent(new jt(Dt.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function Yl(){const o=Ri();return function(e,t){return o[e.getGeometry().getType()]}}function Xl(o){switch(o){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+o)}}const Wo=Kl;async function Zl(o,e,t,n){const i=n.getCode().replace("EPSG:","http://www.opengis.net/def/crs/EPSG/0/"),r=await o.fetch(e,{method:"POST",body:JSON.stringify({type:"Feature",properties:{},geometry:t}),headers:{"Content-Type":"application/geo+json; charset=utf-8","Content-Crs":`<${i}>`}});if(!r||!r.ok||r.status!==201)return Promise.reject(new Error("Request failed: "+r.status));const a=r.headers.get("location");if(!a)return Promise.reject(new Error("Request failed: no Location response header"));const c=a.substring(a.lastIndexOf("/")+1);return Promise.resolve(c)}var we;class Jl extends No{constructor(t){super();A(this,we,void 0);$(this,"_httpService");$(this,"_intl");$(this,"_map");$(this,"_polygonDrawStyle");$(this,"_state");$(this,"_editLayerURL");$(this,"_drawSource");$(this,"_drawLayer");$(this,"_drawInteraction");$(this,"_olMap");$(this,"_mapContainer");$(this,"_tooltip");$(this,"_enterHandler");$(this,"_escapeHandler");$(this,"_interactionListener");$(this,"_mapListener");this._httpService=t.httpService,this._intl=t.intl,this._polygonDrawStyle=t.polygonDrawStyle,this._map=t.map,this._olMap=t.map.olMap,this._state="active:initialized",this._editLayerURL=t.ogcApiFeatureLayerUrl,this._drawSource=new De,this._drawLayer=new ge({source:this._drawSource,zIndex:Fo,properties:{name:"editing-layer"}}),this._drawInteraction=new Wo({source:this._drawSource,type:"Polygon",style:this._polygonDrawStyle}),this._tooltip=this._createTooltip(this._olMap),this._enterHandler=n=>{if(n.code==="Enter"&&n.target===this._olMap.getTargetElement()){const s=this._drawInteraction.getOverlay().getSource().getFeatures();s[0]&&s[0].getGeometry().getCoordinates()[0].length>4&&this._drawInteraction.finishDrawing()}},this._escapeHandler=n=>{n.code==="Escape"&&n.target===this._olMap.getTargetElement()&&this.reset()},this._interactionListener=[],this._mapListener=[],this._start()}getDrawInteraction(){return this._drawInteraction}getState(){return this._state}_setState(t){this._state=t,this.emit(t)}_start(){this._olMap.addLayer(this._drawLayer),this._olMap.addInteraction(this._drawInteraction),this._mapContainer=this._olMap.getTargetElement()??void 0,this._mapContainer&&(this._mapContainer.addEventListener("keydown",this._enterHandler,!1),this._mapContainer.addEventListener("keydown",this._escapeHandler,!1)),this._tooltip.element.classList.remove("editing-tooltip-hidden");const t=this._drawInteraction.on("drawstart",()=>{this._setState("active:drawing"),this._tooltip.element.textContent=this._intl.formatMessage({id:"tooltip.continue"})}),n=this._drawInteraction.on("drawend",i=>{this._setState("active:saving");const r=this._editLayerURL,a=i.feature.getGeometry();if(!a){this._destroy(),_(this,we)?.reject(new Error("no geometry available"));return}const c=this._olMap.getView().getProjection(),u=new so({dataProjection:c}).writeGeometryObject(a,{rightHanded:!0,decimals:10});Zl(this._httpService,r,u,c).then(h=>{this._destroy(),_(this,we)?.resolve(h)}).catch(h=>{console.log(h),this._destroy(),_(this,we)?.reject(h)})}),s=this._map.on("changed:container",()=>{this._mapContainer?.removeEventListener("keydown",this._enterHandler),this._mapContainer?.removeEventListener("keydown",this._escapeHandler),this._mapContainer=this._olMap.getTargetElement()??void 0,this._mapContainer&&(this._mapContainer.addEventListener("keydown",this._enterHandler,!1),this._mapContainer.addEventListener("keydown",this._escapeHandler,!1))});this._interactionListener.push(t,n),this._mapListener.push(s)}reset(){this._drawInteraction.abortDrawing(),this._tooltip.element.textContent=this._intl.formatMessage({id:"tooltip.begin"}),this._setState("active:initialized")}stop(){this._destroy(),_(this,we)?.resolve(void 0)}_destroy(){this._olMap.removeLayer(this._drawLayer),this._olMap.removeInteraction(this._drawInteraction),this._tooltip.destroy(),this._interactionListener.map(t=>{ce(t)}),this._mapListener.map(t=>{t.destroy()}),this._mapContainer?.removeEventListener("keydown",this._enterHandler),this._mapContainer?.removeEventListener("keydown",this._escapeHandler),this._state="inactive"}whenComplete(){return(_(this,we)??I(this,we,jn())).promise}_createTooltip(t){const n=document.createElement("div");n.className="editing-tooltip editing-tooltip-hidden",n.textContent=this._intl.formatMessage({id:"tooltip.begin"});const s=new bt({element:n,offset:[15,0],positioning:"center-left"}),i=t.on("pointermove",r=>{r.dragging||s.setPosition(r.coordinate)});return t.addOverlay(s),{overlay:s,element:n,destroy(){ce(i),t.removeOverlay(s)}}}}we=new WeakMap;class Ql{_serviceOptions;_workflows;constructor(e){this._serviceOptions=e,this._workflows=new Map}start(e,t){if(!t||!e||!e.id)throw new Error("Map, mapId or url is undefined.");const n=e.id;let s=this._workflows.get(n);if(s)throw new Error("EditingWorkflow could not be started. EditingWorkflow already in progress for this map.");return s=new Jl({map:e,ogcApiFeatureLayerUrl:t,polygonDrawStyle:this._serviceOptions.properties.polygonDrawStyle,httpService:this._serviceOptions.references.httpService,intl:this._serviceOptions.intl}),this._workflows.set(n,s),this._connectToWorkflowComplete(s,n),s}stop(e){const t=this._workflows.get(e);if(t)t.stop();else return new Error("No workflow found for mapId: "+e)}reset(e){const t=this._workflows.get(e);if(t)t.reset();else return new Error("No workflow found for mapId: "+e)}_connectToWorkflowComplete(e,t){e.whenComplete().finally(()=>{this._workflows.delete(t)})}}new ze([407354,5754673]),new ze([404740,5757893]);var Le,Se,Ct,Et,Pt,Io;class ec extends No{constructor(t,n,s){super();A(this,Pt);$(this,"label");A(this,Le,{kind:"available"});A(this,Se,void 0);A(this,Ct,void 0);A(this,Et,void 0);this.label=n,I(this,Se,t),I(this,Et,s),W(this,Pt,Io).call(this),I(this,Ct,_(this,Se).on("change:visible",()=>{W(this,Pt,Io).call(this)}))}destroy(){ce(_(this,Ct))}get status(){return _(this,Le)}async select(t,n){if(t.type!=="extent")throw new Error(`Unsupported selection kind: ${t.type}`);if(_(this,Le).kind!=="available"||_(this,Se).getSource()===null)return[];const s=[];_(this,Se).getSource().forEachFeatureIntersectingExtent(t.extent,a=>{if(!a.getGeometry())return;const c={...a.getProperties()};delete c.geometries;const d={id:a.getId()?.toString()||Xn(),geometry:a.getGeometry(),properties:c};s.push(d)});const i=s.filter(a=>a!=null);return i.length>n.maxResults?i.slice(0,n.maxResults):i}}Le=new WeakMap,Se=new WeakMap,Ct=new WeakMap,Et=new WeakMap,Pt=new WeakSet,Io=function(){const n=_(this,Se).getVisible()?{kind:"available"}:{kind:"unavailable",reason:_(this,Et)};n.kind!==_(this,Le).kind&&(I(this,Le,n),this.emit("changed:status"))};var Mt;class tc{constructor({intl:e}){A(this,Mt,void 0);I(this,Mt,e)}createSelectionSource(e){return new ec(e.vectorLayer,e.label,_(this,Mt).formatMessage({id:"layerNotVisibleReason"}))}}Mt=new WeakMap;const Ie=de("local-storage"),oc=0,le={CORRUPTED_DATA:"local-storage:corrupted-data",INVALID_PATH:"local-storage:invalid-path",INVALID_VALUE:"local-storage:invalid-value",NOT_SUPPORTED:"local-storage:not-supported",INTERNAL:"local-storage:internal-error"};var Ye,se,_e,Xe,ie,Zt,ks,Jt,Cs,Ae,mt,xe,Ve,Qt,Es;class nc{constructor(e){A(this,Zt);A(this,Jt);A(this,Ae);A(this,xe);A(this,Qt);A(this,Ye,void 0);A(this,se,{});A(this,_e,void 0);A(this,Xe,void 0);A(this,ie,void 0);I(this,Ye,ac(e.properties)),I(this,_e,lc()),_(this,_e)&&(W(this,Jt,Cs).call(this),I(this,Xe,W(this,Qt,Es).call(this)))}destroy(){_(this,ie)&&(clearTimeout(_(this,ie)),I(this,ie,void 0)),_(this,_e)&&W(this,Ae,mt).call(this)}get isSupported(){return!!_(this,Xe)}get(e){return W(this,xe,Ve).call(this).get(e)}set(e,t){return W(this,xe,Ve).call(this).set(e,t)}remove(e){return W(this,xe,Ve).call(this).remove(e)}removeAll(){return W(this,xe,Ve).call(this).removeAll()}getNamespace(e){return W(this,xe,Ve).call(this).getNamespace(e)}}Ye=new WeakMap,se=new WeakMap,_e=new WeakMap,Xe=new WeakMap,ie=new WeakMap,Zt=new WeakSet,ks=function(){_(this,ie)&&clearTimeout(_(this,ie)),I(this,ie,setTimeout(()=>{I(this,ie,void 0),W(this,Ae,mt).call(this)},oc))},Jt=new WeakSet,Cs=function(){try{const e=_(this,_e);if(!e)throw new ae(le.INTERNAL,"Local storage is not available.");const t=e.getItem(_(this,Ye));if(t==null){I(this,se,{}),W(this,Ae,mt).call(this);return}try{const n=JSON.parse(t);if(!nt(n))throw new ae(le.CORRUPTED_DATA,"Persisted value should be an object.");I(this,se,n)}catch(n){Ie.warn("Invalid persisted data, reverting to default.",n),I(this,se,{}),W(this,Ae,mt).call(this)}}catch(e){Ie.error("Failed to load from local storage",e)}},Ae=new WeakSet,mt=function(){try{const e=_(this,_e);if(!e)throw new ae(le.INTERNAL,"Local storage is not available.");const t=JSON.stringify(_(this,se));e.setItem(_(this,Ye),t)}catch(e){Ie.error("Failed to save to local storage",e)}},xe=new WeakSet,Ve=function(){const e=_(this,Xe);if(!e)throw new ae(le.NOT_SUPPORTED,"Local storage is not supported by this browser.");return e},Qt=new WeakSet,Es=function(){const e={getByPath:t=>pn(sc(_(this,se),t)),setByPath:(t,n)=>{if(!rc(n))throw new ae(le.INVALID_VALUE,"The value is not supported by local storage.");if(n=pn(n),t.length===0){if(!nt(n))throw new ae(le.INVALID_VALUE,"The root value must be a plain object.");I(this,se,n)}else ic(_(this,se),t,n);W(this,Zt,ks).call(this)}};return new Ho([],e)};class Ho{path;access;constructor(e,t){this.path=e,this.access=t}get(e){return this.access.getByPath([...this.path,e])}set(e,t){this.access.setByPath([...this.path,e],t)}remove(e){this.access.setByPath([...this.path,e],void 0)}removeAll(){this.access.setByPath(this.path,{})}getNamespace(e){const t=this.get(e);if(t===void 0)this.set(e,{});else if(!nt(t))throw new ae(le.INVALID_PATH,`Cannot use '${e}' as a namespace because it is not associated with an object.`);return new Ho(this.path.concat([e]),this.access)}}const hn="trails-state";function sc(o,e){let t=o;for(const n of e){if(!nt(t))throw new ae(le.INVALID_PATH,`Cannot get nested property '${n}' because the parent is no object.`);t=t[n]}return t}function ic(o,e,t){if(!e.length)throw new ae(le.INTERNAL,"Path must not be empty.");let n=o;for(let i=0,r=e.length-1;i<r;++i){const a=e[i],c=n[a];if(!nt(c))throw new ae(le.INVALID_PATH,`Cannot set property on '${a}' because it is no object.`);n=c}const s=e[e.length-1];n[s]=t}function nt(o){return!!(o&&typeof o=="object"&&!Array.isArray(o))}function rc(o){const e=typeof o;return e==="boolean"||e==="number"||e==="string"||e==="undefined"||o===null||Array.isArray(o)||nt(o)}function ac(o){const e=o.storageId;return!e||typeof e!="string"?(Ie.warn(`The 'storageId' property of the 'local-storage' package should be set to a valid string to avoid collisions with other applications. Defaulting to '${hn}'.`),hn):e}function lc(){if(typeof Storage>"u"){Ie.warn("Local storage is not supported by this browser.");return}try{const o=globalThis.localStorage;if(!o){Ie.warn("Local storage is not supported by this browser.");return}return o}catch(o){Ie.warn("Local storage is not supported by this browser.",o);return}}function pn(o){return o!=null&&(o=JSON.parse(JSON.stringify(o))),o}const cc={"ol-map":{name:"ol-map",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:dl,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{vectorSourceFactory:{name:"ogc-features.VectorSourceFactory",qualifier:void 0,all:!1}}},AppModel:{name:"AppModel",clazz:zl,provides:[{name:"ol-app.AppModel",qualifier:void 0}],references:{ogcSearchSourceFactory:{name:"ogc-features.SearchSourceFactory",qualifier:void 0,all:!1},vectorSelectionSourceFactory:{name:"selection.VectorSelectionSourceFactory",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1},mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1},{name:"ol-app.AppModel",qualifier:void 0,all:!1},{name:"notifier.NotificationService",qualifier:void 0,all:!1},{name:"editing.EditingService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:Ni,provides:[{name:"http.HttpService",qualifier:"http.HttpService"}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/notifier":{name:"@open-pioneer/notifier",services:{NotificationServiceImpl:{name:"NotificationServiceImpl",clazz:Wl,provides:[{name:"notifier.NotificationService",qualifier:"notifier.NotificationService"}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:Fi,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/theme":{name:"@open-pioneer/theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/ogc-features":{name:"@open-pioneer/ogc-features",services:{VectorSourceFactory:{name:"VectorSourceFactory",clazz:wr,provides:[{name:"ogc-features.VectorSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}},SearchSourceFactory:{name:"SearchSourceFactory",clazz:Sr,provides:[{name:"ogc-features.SearchSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/experimental-layout-sidebar":{name:"@open-pioneer/experimental-layout-sidebar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/coordinate-viewer":{name:"@open-pioneer/coordinate-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/overview-map":{name:"@open-pioneer/overview-map",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-bar":{name:"@open-pioneer/scale-bar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-viewer":{name:"@open-pioneer/scale-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/result-list":{name:"@open-pioneer/result-list",services:{},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/editing":{name:"@open-pioneer/editing",services:{EditingServiceImpl:{name:"EditingServiceImpl",clazz:Ql,provides:[{name:"editing.EditingService",qualifier:void 0}],references:{mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{polygonDrawStyle:{value:{"stroke-color":"yellow","stroke-width":2,"fill-color":"rgba(0, 0, 0, 0.1)","circle-radius":5,"circle-fill-color":"rgba(0, 0, 255, 0.2)","circle-stroke-color":"rgba(0, 0, 255, 0.7)","circle-stroke-width":2},required:!1}}},"@open-pioneer/geolocation":{name:"@open-pioneer/geolocation",services:{},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/legend":{name:"@open-pioneer/legend",services:{},ui:{references:[]},properties:{}},"@open-pioneer/measurement":{name:"@open-pioneer/measurement",services:{},ui:{references:[]},properties:{}},"@open-pioneer/printing":{name:"@open-pioneer/printing",services:{},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/selection":{name:"@open-pioneer/selection",services:{VectorSelectionSourceFactory:{name:"VectorSelectionSourceFactory",clazz:tc,provides:[{name:"selection.VectorSelectionSourceFactory",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/search":{name:"@open-pioneer/search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/spatial-bookmarks":{name:"@open-pioneer/spatial-bookmarks",services:{},ui:{references:[{name:"local-storage.LocalStorageService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/local-storage":{name:"@open-pioneer/local-storage",services:{LocalStorageServiceImpl:{name:"LocalStorageServiceImpl",clazz:nc,provides:[{name:"local-storage.LocalStorageService",qualifier:"local-storage.LocalStorageService"}],references:{}}},ui:{references:[]},properties:{storageId:{value:null,required:!1}}}},dc=`.search-box{position:absolute;width:500px;max-width:100%;z-index:1}.spatial-bookmarks{max-height:300px}:root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.editing-tooltip{position:relative;background:rgba(255,255,255,.8);border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.editing-tooltip-hidden{visibility:hidden}.measurement-tooltip{position:relative;background:rgba(255,255,255,.8);border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.measurement-active-tooltip{background:rgba(0,0,0,.9);border-radius:4px;border-color:#000000e6;opacity:.9;color:#fff}.measurement-finished-tooltip{background-color:#4cb3ffe6;color:#000;border:1px solid white}.measurement-active-tooltip:before,.measurement-finished-tooltip:before{border-top:6px solid rgba(0,0,0,.9);border-right:6px solid transparent;border-left:6px solid transparent;content:"";position:absolute;bottom:-6px;margin-left:-7px;left:50%}.measurement-finished-tooltip:before{border-top-color:#4cb3ff}.printing-overlay{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10000;-webkit-user-select:none;user-select:none;pointer-events:all;cursor:wait;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#b4b4b4cc}.printing-overlay-status{flex:1 1 auto;font-size:1.5em;text-align:center}.selection-drag-box{background-color:#ffffff4d!important;border:3px solid var(--chakra-colors-background_primary)!important}.selection-tooltip{position:relative;background:rgba(255,255,255,.8);border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.selection .react-select{cursor:default}.map-container .selection-active{cursor:crosshair}.map-container .selection-inactive{cursor:no-drop}.selection-source-value.selection-source-value--disabled{opacity:.4}.selection-source-value.selection-source-value--disabled span{margin:0 6px 0 0}.search-component .chakra-divider{display:none}.search-component .search-highlighted-match{font-weight:700}.search-component .search-value-container{cursor:text;padding-left:30px!important}.search-component .search-invisible{display:none}.layout-sidebar{height:100%;position:absolute;top:0}.layout-sidebar[data-theme=light]{background-color:var(--chakra-colors-whiteAlpha-700)}.layout-sidebar[data-theme=dark]{background-color:var(--chakra-colors-blackAlpha-700)}.layout-sidebar .layout-sidebar-main{transition:width .3s ease-out 0s;border-right:1px solid var(--chakra-colors-chakra-border-color)}.layout-sidebar .layout-sidebar-content{overflow:auto;transition:width .3s ease-out 0s}.layout-sidebar .layout-sidebar-content .content-section .content-header{font-size:1.5em;background-color:var(--chakra-colors-blackAlpha-500);padding:.5rem 1rem}.layout-sidebar .layout-sidebar-content .content-section .content-body{padding:1rem}.overview-map .ol-overviewmap{position:relative;height:100%;width:100%}.overview-map .ol-overviewmap:not(.ol-collapsed){border:1px solid black}.overview-map .ol-overviewmap .ol-overviewmap-map{border:none;width:100%;height:100%}.overview-map .ol-overviewmap .ol-overviewmap-box{border:2px solid red}.scale-bar .ol-scale-bar{margin-bottom:8px;margin-right:8px}.scale-bar .ol-scale-bar,.scale-bar .ol-scale-line{position:relative;bottom:0;left:0;background:none}.scale-bar .ol-scale-bar .ol-scale-bar-inner,.scale-bar .ol-scale-bar .ol-scale-line-inner,.scale-bar .ol-scale-line .ol-scale-bar-inner,.scale-bar .ol-scale-line .ol-scale-line-inner{color:var(--chakra-white);border-color:var(--chakra-white)}.result-list-no-data-message{text-align:center;margin-top:50px;font-weight:700;font-size:larger}.result-list-table th,.result-list-table td{overflow-wrap:break-word}.result-list-table.result-list-table--is-resizing *{cursor:col-resize}.result-list-table thead{position:sticky;top:0;z-index:1;background:var(--chakra-colors-background_body)}.result-list-table th{position:relative;border-right-width:thin}.result-list-table tbody tr:hover{background:var(--chakra-colors-background_light)}.result-list-table .result-list-resizer{position:absolute;top:0;height:100%;right:0;width:8px;background:var(--chakra-colors-trails-100);transform:scaleX(.25);cursor:col-resize;-webkit-user-select:none;user-select:none;touch-action:none;padding-left:0}.result-list-table th:last-child .result-list-resizer{width:8px;transform:translate(50%) scaleX(.25)}.result-list-table th .result-list-resizer.result-list-resizer--is-resizing{background:var(--chakra-colors-trails-500);transform:scale(1)}.result-list-table th .result-list-resizer:hover{transform:scale(1)}
`,uc=["en","de"];function hc(o){switch(o){case"en":return Ht(()=>import("./191659d8c3d0.js"),[],import.meta.url).then(e=>e.default);case"de":return Ht(()=>import("./a33ba72542c2.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${o}'`)}const pc=Js(dc),fc=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:hc,locales:uc,packages:cc,styles:pc},Symbol.toStringTag,{value:"Module"})),gc="@open-pioneer/coordinate-viewer",mc=ue.bind(void 0,gc),vc=4,bc=o=>{const{mapId:e,precision:t,displayProjectionCode:n}=o,{containerProps:s}=oe("coordinate-viewer",o),{map:i}=Y(e),r=i?.olMap,a=fs(r)?.getCode()??"";let{coordinates:c}=wc(r);c=c&&n?_c(c,a,n):c;const d=yc(c,t),u=n||a,h=d?d+" "+u:"";return l.jsx(N,{...s,children:l.jsx(fe,{className:"coordinate-viewer-text",children:h})})};function yc(o,e){const t=mc();return o?Sc(o,e,t):""}function wc(o){const[e,t]=p.useState();return p.useEffect(()=>{if(!o)return;const n=o.on("pointermove",s=>{t(s.coordinate)});return()=>ce(n)},[o]),{coordinates:e}}function Sc(o,e,t){if(o[0]==null||o[1]==null)return"";const n=e??vc,[s,i]=o,r=t.formatNumber(s,{maximumFractionDigits:n,minimumFractionDigits:n}),a=t.formatNumber(i,{maximumFractionDigits:n,minimumFractionDigits:n});return r+" "+a}function _c(o,e,t){return Vi(o,e,t)}function fn(o){const e=p.useRef(null);return p.useLayoutEffect(()=>{e.current=o}),p.useCallback((...n)=>{const s=e.current;return s(...n)},[])}const xc="@open-pioneer/notifier",kc=rt.bind(void 0,xc);var Ps=is({displayName:"WarningTwoIcon",d:"M23.119,20,13.772,2.15h0a2,2,0,0,0-3.543,0L.881,20a2,2,0,0,0,1.772,2.928H21.347A2,2,0,0,0,23.119,20ZM11,8.423a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Zm1.05,11.51h-.028a1.528,1.528,0,0,1-1.522-1.47,1.476,1.476,0,0,1,1.448-1.53h.028A1.527,1.527,0,0,1,13.5,18.4,1.475,1.475,0,0,1,12.05,19.933Z"}),Cc=is({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"});const Ec=!1;function Pc(o){const{position:e="top-right"}=o,t=Tr(),n=kc("notifier.NotificationService"),[s,i]=p.useState(!Ec),r=fn(c=>{const d=c.level==="error"?l.jsx(Ps,{h:"100%",w:"100%"}):void 0;t({position:e,title:c.title,description:c.message||null,status:c.level,isClosable:!0,duration:c.displayDuration??null,icon:d})}),a=fn(()=>{t.closeAll()});return p.useEffect(()=>{const c=n.registerHandler({showNotification:r,closeAll:a});return()=>c.destroy()},[s,n,r,a]),l.jsx(l.Fragment,{})}const bo=.75,Gt=.1;let Mc=class extends Zn{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",n=e.tipLabel!==void 0?e.tipLabel:"Overview map",s=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;const i=e.label!==void 0?e.label:"›";typeof i=="string"?(this.label_=document.createElement("span"),this.label_.textContent=i):this.label_=i;const r=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=n,a.appendChild(r),a.addEventListener(qn.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const c=new Gi({view:e.view,controls:new en,interactions:new en});this.ovmap_=c,e.layers&&e.layers.forEach(function(O){c.addLayer(O)});const d=document.createElement("div");d.className="ol-overviewmap-box",d.style.boxSizing="border-box",this.boxOverlay_=new bt({position:[0,0],positioning:"center-center",element:d}),this.ovmap_.addOverlay(this.boxOverlay_);const u=t+" "+Jn+" "+Bi+(this.collapsed_&&this.collapsible_?" "+tn:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.ovmapDiv_),h.appendChild(a);const f=this,g=this.boxOverlay_,v=this.boxOverlay_.getElement(),S=function(O){return{clientX:O.clientX,clientY:O.clientY}},L=function(O){const T=S(O),X=c.getEventCoordinateInternal(T);g.setPosition(X)},E=function(O){const T=c.getEventCoordinateInternal(O);f.getMap().getView().setCenterInternal(T),window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",E)};v.addEventListener("mousedown",function(){window.addEventListener("mousemove",L),window.addEventListener("mouseup",E)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const n=t.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(zn(e,zi.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const n=e.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===ho.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const n=this.getMap().getView();this.bindView_(n)}else!this.ovmap_.isRendered()&&(e.key===ho.TARGET||e.key===ho.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new Hn({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(on.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(on.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const n=e.getSize(),i=e.getView().calculateExtentInternal(n);if(this.viewExtent_&&Ui(i,this.viewExtent_))return;this.viewExtent_=i;const r=t.getSize(),c=t.getView().calculateExtentInternal(r),d=t.getPixelFromCoordinateInternal(Wi(i)),u=t.getPixelFromCoordinateInternal(Hi(i)),h=Math.abs(d[0]-u[0]),f=Math.abs(d[1]-u[1]),g=r[0],v=r[1];h<g*Gt||f<v*Gt||h>g*bo||f>v*bo?this.resetExtent_():Wn(c,i)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,n=e.getSize(),i=e.getView().calculateExtentInternal(n),r=t.getView(),a=Math.log(bo/Gt)/Math.LN2,c=1/(Math.pow(2,a/2)*Gt);$i(i,c),r.fitInternal(qi(i))}recenter_(){const e=this.getMap(),t=this.ovmap_,n=e.getView();t.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const n=e.getSize(),s=e.getView(),i=t.getView(),r=this.rotateWithView_?0:-s.getRotation(),a=this.boxOverlay_,c=this.boxOverlay_.getElement(),d=s.getCenterInternal(),u=s.getResolution(),h=i.getResolution(),f=n[0]*u/h,g=n[1]*u/h;if(a.setPosition(d),c){c.style.width=f+"px",c.style.height=g+"px";const v="rotate("+r+"rad)";c.style.transform=v}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Ki(this.ovmap_,Un.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(tn),this.collapsed_?nn(this.collapseLabel_,this.label_):nn(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}};const Lc=Mc,yo="units",Ac=[1,2,5],ut=25.4/.28;class Tc extends Zn{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const n=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+Jn,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(yo,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(yo)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(yo,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,n=e.projection,s=this.getUnits(),i=s=="degrees"?"degrees":"m";let r=_o(n,e.resolution,t,i);const a=this.minWidth_*(this.dpi_||ut)/ut,c=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||ut)/ut:void 0;let d=a*r,u="";if(s=="degrees"){const T=Yi.degrees;d*=T,d<T/60?(u="″",r*=3600):d<T?(u="′",r*=60):u="°"}else if(s=="imperial")d<.9144?(u="in",r/=.0254):d<1609.344?(u="ft",r/=.3048):(u="mi",r/=1609.344);else if(s=="nautical")r/=1852,u="NM";else if(s=="metric")d<.001?(u="μm",r*=1e6):d<1?(u="mm",r*=1e3):d<1e3?u="m":(u="km",r/=1e3);else if(s=="us")d<.9144?(u="in",r*=39.37):d<1609.344?(u="ft",r/=.30480061):(u="mi",r/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*r)/Math.log(10)),f,g,v,S,L,E;for(;;){v=Math.floor(h/3);const T=Math.pow(10,v);if(f=Ac[(h%3+3)%3]*T,g=Math.round(f/r),isNaN(g)){this.element.style.display="none",this.renderedVisible_=!1;return}if(c!==void 0&&g>=c){f=S,g=L,v=E;break}else if(g>=a)break;S=f,L=g,E=v,++h}const O=this.scaleBar_?this.createScaleBar(g,f,u):f.toFixed(v<0?-v:0)+" "+u;this.renderedHTML_!=O&&(this.innerElement_.innerHTML=O,this.renderedHTML_=O),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,n){const s=this.getScaleForResolution(),i=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),r=this.scaleBarSteps_,a=e/r,c=[this.createMarker("absolute")];for(let u=0;u<r;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";c.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||r===2?this.createStepText(u,e,!1,t,n):"")+"</div>")}return c.push(this.createStepText(r,e,!0,t,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+i+"</div>":"")+c.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,n,s,i){const a=(e===0?0:Math.round(s/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+i),c=e===0?-3:t/this.scaleBarSteps_*-1,d=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${c}px;text-align: ${e===0?"left":"center"};min-width: ${d}px;left: ${n?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=_o(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||ut,n=1e3/25.4;return e*n*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const Ms=Tc,Ic=o=>{const{mapId:e,displayMode:t="line"}=o,{containerProps:n}=oe("scale-bar",o),{map:s}=Y(e),i=p.useRef(null);return p.useEffect(()=>{if(i.current&&s){const r=s.olMap,a=new Ms({units:"metric",target:i.current,bar:t==="bar"});return r.addControl(a),()=>{r.removeControl(a)}}},[t,s]),l.jsx(N,{...n,ref:i})},Rc="@open-pioneer/scale-viewer",Oc=ue.bind(void 0,Rc),Dc=o=>{const{mapId:e}=o,{containerProps:t}=oe("scale-viewer",o),{map:n}=Y(e),s=Oc(),i=sl(n?.olMap),r=i?s.formatNumber(i):void 0;return l.jsx(N,{...t,children:r&&l.jsxs(fe,{children:["1:",r]})})},Ls="ol-map",Ce=rt.bind(void 0,Ls),Ee=ue.bind(void 0,Ls);let jc=0;function Nc(o,e){const t=`atom${++jc}`,n={toString:()=>t};return typeof o=="function"?n.read=o:(n.init=o,n.read=function(s){return s(this)},n.write=function(s,i,r){return i(this,typeof r=="function"?r(s(this)):r)}),e&&(n.write=e),n}const gn=o=>"init"in o,mn=o=>!!o.write,qt=new WeakMap,Fc=(o,e)=>{qt.set(o,e),o.catch(()=>{}).finally(()=>qt.delete(o))},vn=(o,e)=>{const t=qt.get(o);t&&(qt.delete(o),t(e))},bn=(o,e)=>{o.status="fulfilled",o.value=e},yn=(o,e)=>{o.status="rejected",o.reason=e},Vc=o=>typeof o?.then=="function",ht=(o,e)=>!!o&&"v"in o&&"v"in e&&Object.is(o.v,e.v),wn=(o,e)=>!!o&&"e"in o&&"e"in e&&Object.is(o.e,e.e),Fe=o=>!!o&&"v"in o&&o.v instanceof Promise,Gc=(o,e)=>"v"in o&&"v"in e&&o.v.orig&&o.v.orig===e.v.orig,Bt=o=>{if("e"in o)throw o.e;return o.v},$o=()=>{const o=new WeakMap,e=new WeakMap,t=new Map;let n,s;const i=b=>o.get(b),r=(b,y)=>{const w=o.get(b);if(o.set(b,y),t.has(b)||t.set(b,w),Fe(w)){const m="v"in y?y.v instanceof Promise?y.v:Promise.resolve(y.v):Promise.reject(y.e);w.v!==m&&vn(w.v,m)}},a=(b,y,w)=>{const m=new Map;let x=!1;w.forEach((M,k)=>{!M&&k===b&&(M=y),M&&(m.set(k,M),y.d.get(k)!==M&&(x=!0))}),(x||y.d.size!==m.size)&&(y.d=m)},c=(b,y,w)=>{const m=i(b),x={d:m?.d||new Map,v:y};if(w&&a(b,x,w),ht(m,x)&&m.d===x.d)return m;if(Fe(m)&&Fe(x)&&Gc(m,x)){if(m.d===x.d)return m;x.v=m.v}return r(b,x),x},d=(b,y,w,m)=>{if(Vc(y)){let x;const M=()=>{const P=i(b);if(!Fe(P)||P.v!==k)return;const V=c(b,k,w);e.has(b)&&P.d!==V.d&&Z(b,V,P.d)},k=new Promise((P,V)=>{let j=!1;y.then(z=>{j||(j=!0,bn(k,z),P(z),M())},z=>{j||(j=!0,yn(k,z),V(z),M())}),x=z=>{j||(j=!0,z.then(q=>bn(k,q),q=>yn(k,q)),P(z))}});return k.orig=y,k.status="pending",Fc(k,P=>{P&&x(P),m?.()}),c(b,k,w)}return c(b,y,w)},u=(b,y,w)=>{const m=i(b),x={d:m?.d||new Map,e:y};return w&&a(b,x,w),wn(m,x)&&m.d===x.d?m:(r(b,x),x)},h=(b,y)=>{const w=i(b);if(!y&&w&&(e.has(b)||Array.from(w.d).every(([j,z])=>{if(j===b)return!0;const q=h(j);return q===z||ht(q,z)})))return w;const m=new Map;let x=!0;const M=j=>{if(j===b){const q=i(j);if(q)return m.set(j,q),Bt(q);if(gn(j))return m.set(j,void 0),j.init;throw new Error("no atom init")}const z=h(j);return m.set(j,z),Bt(z)};let k,P;const V={get signal(){return k||(k=new AbortController),k.signal},get setSelf(){return!P&&mn(b)&&(P=(...j)=>{if(!x)return O(b,...j)}),P}};try{const j=b.read(M,V);return d(b,j,m,()=>k?.abort())}catch(j){return u(b,j,m)}finally{x=!1}},f=b=>Bt(h(b)),g=b=>{let y=e.get(b);return y||(y=T(b)),y},v=(b,y)=>!y.l.size&&(!y.t.size||y.t.size===1&&y.t.has(b)),S=b=>{const y=e.get(b);y&&v(b,y)&&X(b)},L=b=>{const y=new Map,w=new WeakMap,m=k=>{var P;const V=new Set((P=e.get(k))==null?void 0:P.t);return t.forEach((j,z)=>{var q;(q=i(z))!=null&&q.d.has(k)&&V.add(z)}),V},x=k=>{m(k).forEach(P=>{P!==k&&(y.set(P,(y.get(P)||new Set).add(k)),w.set(P,(w.get(P)||0)+1),x(P))})};x(b);const M=k=>{m(k).forEach(P=>{var V;if(P!==k){let j=w.get(P);if(j&&w.set(P,--j),!j){let z=!!((V=y.get(P))!=null&&V.size);if(z){const q=i(P),zs=h(P,!0);z=!ht(q,zs)}z||y.forEach(q=>q.delete(P))}M(P)}})};M(b)},E=(b,...y)=>{let w=!0;const m=k=>Bt(h(k)),x=(k,...P)=>{let V;if(k===b){if(!gn(k))throw new Error("atom not writable");const j=i(k),z=d(k,P[0]);ht(j,z)||L(k)}else V=E(k,...P);if(!w){const j=R()}return V},M=b.write(m,x,...y);return w=!1,M},O=(b,...y)=>{const w=E(b,...y),m=R();return w},T=(b,y,w)=>{var m;const x=w||[];(m=i(b))==null||m.d.forEach((k,P)=>{const V=e.get(P);V?V.t.add(b):P!==b&&T(P,b,x)}),h(b);const M={t:new Set(y&&[y]),l:new Set};if(e.set(b,M),mn(b)&&b.onMount){const{onMount:k}=b;x.push(()=>{const P=k((...V)=>O(b,...V));P&&(M.u=P)})}return w||x.forEach(k=>k()),M},X=b=>{var y;const w=(y=e.get(b))==null?void 0:y.u;w&&w(),e.delete(b);const m=i(b);m&&(Fe(m)&&vn(m.v),m.d.forEach((x,M)=>{if(M!==b){const k=e.get(M);k&&(k.t.delete(b),v(M,k)&&X(M))}}))},Z=(b,y,w)=>{const m=new Set(y.d.keys());w?.forEach((x,M)=>{if(m.has(M)){m.delete(M);return}const k=e.get(M);k&&(k.t.delete(b),v(M,k)&&X(M))}),m.forEach(x=>{const M=e.get(x);M?M.t.add(b):e.has(b)&&T(x,b)})},R=()=>{let b;for(;t.size;){const y=Array.from(t);t.clear(),y.forEach(([w,m])=>{const x=i(w);if(x){const M=e.get(w);M&&x.d!==m?.d&&Z(w,x,m?.d),M&&!(!Fe(m)&&(ht(m,x)||wn(m,x)))&&M.l.forEach(k=>k())}})}};return{get:f,set:O,sub:(b,y)=>{const w=g(b),m=R(),x=w.l;return x.add(y),()=>{x.delete(y),S(b)}}}};let wo;const Bc=()=>(wo||(wo=$o()),wo),As=p.createContext(void 0),zc=o=>{const e=p.useContext(As);return o?.store||e||Bc()},Uc=({children:o,store:e})=>{const t=p.useRef();return!e&&!t.current&&(t.current=$o()),p.createElement(As.Provider,{value:e||t.current},o)},Wc=o=>typeof o?.then=="function",Hc=Dn.use||(o=>{if(o.status==="pending")throw o;if(o.status==="fulfilled")return o.value;throw o.status==="rejected"?o.reason:(o.status="pending",o.then(e=>{o.status="fulfilled",o.value=e},e=>{o.status="rejected",o.reason=e}),o)});function $c(o,e){const t=zc(e),[[n,s,i],r]=p.useReducer(d=>{const u=t.get(o);return Object.is(d[0],u)&&d[1]===t&&d[2]===o?d:[u,t,o]},void 0,()=>[t.get(o),t,o]);let a=n;(s!==t||i!==o)&&(r(),a=t.get(o));const c=e?.delay;return p.useEffect(()=>{const d=t.sub(o,()=>{if(typeof c=="number"){setTimeout(r,c);return}r()});return r(),d},[t,o,c]),p.useDebugValue(a),Wc(a)?Hc(a):a}const Ts="@open-pioneer/spatial-bookmarks",qc=rt.bind(void 0,Ts),Kc=ue.bind(void 0,Ts),be=de("spatial-bookmark:SpatialBookmarkViewModel");class Yc{map;packageNamespace;writableBookmarks=Nc([]);stopBookmarksListener;store;get bookmarks(){return this.writableBookmarks}constructor(e,t){this.map=e,this.packageNamespace=t.getNamespace("spatial-bookmarks"),this.store=$o(),this.loadState(),this.stopBookmarksListener=this.store.sub(this.bookmarks,()=>{this.saveState()})}destroy(){this.stopBookmarksListener()}createBookmark(e){const t=this.map.olMap,n=t.getView().calculateExtent(),s=t.getView().getProjection().getCode(),i={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]},r={id:Xn(),title:e,extent:i,projection:s};be.debug("Created a new bookmark",r);const a=this.writableBookmarks;this.store.set(a,[...this.store.get(a),r])}activateBookmark(e){be.debug("Activating bookmark",e);const t=this.getBookmarkExtent(e);be.debug("Attempting to apply extent",t),this.applyExtent(t)}deleteBookmark(e){be.debug("Deleting bookmark",e);const t=this.writableBookmarks;this.store.set(t,[...this.store.get(t).filter(n=>n.id!==e)])}deleteAllBookmarks(){be.debug("Deleting all bookmarks"),this.store.set(this.writableBookmarks,[])}loadState(){be.debug("Restoring bookmarks from local storage");const e=this.packageNamespace.get("bookmarks")??[];try{Xc(e),this.store.set(this.writableBookmarks,e)}catch(t){be.error("Bookmarks data in local storage is invalid, resetting to default value.",t),this.store.set(this.writableBookmarks,[]),this.saveState()}}saveState(){be.debug("Saving bookmarks to local storage"),this.packageNamespace.set("bookmarks",this.store.get(this.bookmarks))}getBookmarkExtent(e){const n=this.map.olMap.getView(),s=e.extent,i=[s.minX,s.minY,s.maxX,s.maxY],r=n.getProjection(),a=e.projection;return Xi(i,a,r)}applyExtent(e){const n=this.map.olMap.getView(),s=Zi(e),i=n.getResolutionForExtent(e);n.setCenter(s),n.setResolution(i)}}function Xc(o){if(!Array.isArray(o))throw new Error("Expected bookmarks from local storage to be an array.");for(const e of o)Zc(e)}function Zc(o){if(!o||typeof o!="object")throw new Error("Expected bookmark from local storage to be an object.");const e=o;if(typeof e.id!="string")throw new Error("Bookmark does not have a valid id.");if(typeof e.title!="string")throw new Error("Bookmark does not have a valid title.");if(Jc(e.extent),typeof e.projection!="string")throw new Error("Bookmark does not have a valid projection value.")}function Jc(o){if(!o||typeof o!="object")throw new Error("Expected bookmark extent from local storage to be an object.");const e=o;if(typeof e.minX!="number"||typeof e.minY!="number"||typeof e.maxX!="number"||typeof e.maxY!="number")throw new Error("Expected bookmark extent from local storage to have valid coordinates.")}const Qc=o=>{const{map:e}=Y(o.mapId),t=qc("local-storage.LocalStorageService"),n=rd(e,t);return n&&l.jsx(Uc,{store:n.store,children:l.jsx(ed,{...o,viewModel:n})})};function ed(o){const{viewModel:e}=o,t=Kc(),n=p.useRef([]),[s,i]=p.useState(!1),r=$c(e.bookmarks),[a,c]=p.useState(""),d=a.trim().length>0,{containerProps:u}=oe("spatial-bookmarks",o),[h,f]=p.useState("list"),g=()=>{e.deleteAllBookmarks(),f("list")},v=()=>{d&&(e.createBookmark(a),f("list"),c(""),i(!0))};p.useEffect(()=>{if(s){const T=n.current;T&&T[r.length-1]?.scrollIntoView?.(),i(!1)}},[r,s]);const S=()=>l.jsxs(ko,{children:[l.jsxs(co,{rounded:"md",status:"warning",children:[l.jsx(uo,{}),t.formatMessage({id:"bookmark.alert.delete"})]}),l.jsx(sd,{intl:t,onClear:g,onCancel:()=>f("list")})]}),L=()=>l.jsxs(ko,{children:[l.jsxs(co,{rounded:"md",status:"info",children:[l.jsx(uo,{}),t.formatMessage({id:"bookmark.alert.create"})]}),l.jsx(io,{"aria-label":t.formatMessage({id:"bookmark.input.label"}),placeholder:t.formatMessage({id:"bookmark.input.placeholder"}),value:a,onChange:T=>{c(T.target.value)},onKeyDown:T=>{T.key==="Enter"&&v()},isRequired:!0,isInvalid:!d,autoFocus:!0}),l.jsx(id,{intl:t,isInvalid:!d,onCancel:()=>{c(""),f("list")},onSave:v})]}),E=()=>l.jsxs(l.Fragment,{children:[r.length?td(r,e,t,n):l.jsxs(co,{rounded:"md",status:"info",children:[l.jsx(uo,{}),t.formatMessage({id:"bookmark.alert.noSaved"})]}),l.jsx(nd,{intl:t,bookmarks:r,showCreate:()=>f("create"),showDelete:()=>f("delete")})]}),O=l.jsxs(l.Fragment,{children:[h==="list"&&E(),h==="create"&&L(),h==="delete"&&S()]});return l.jsx(pe,{flexDirection:"column",...u,children:O})}function td(o,e,t,n){const s=t.formatMessage({id:"bookmark.button.deleteOne"}),i=o.map((r,a)=>l.jsx(od,{index:a,listItemNodes:n,bookmark:r,onActivate:()=>e.activateBookmark(r),onDelete:()=>e.deleteBookmark(r.id),deleteBtnLabel:s},r.id));return l.jsx(ss,{as:"ul",className:"spatial-bookmark-list",role:"listbox","aria-label":t.formatMessage({id:"bookmark.list.label"}),flexShrink:1,flexGrow:1,p:1,spacing:1,overflowY:"auto",listStyleType:"none",children:i})}const Sn={ArrowDown:1,ArrowUp:-1};function od(o){const{index:e,listItemNodes:t,bookmark:n,onDelete:s,onActivate:i,deleteBtnLabel:r}=o,a=n.title,c=d=>{const u=d.key;if(u==="Enter"){d.target===d.currentTarget&&i();return}if(Sn[u]!=null){const h=t.current?.length;if(!h)return;let f=(e+Sn[u])%h;f<0&&(f=h-1),t.current[f]?.focus()}};return l.jsx(N,{as:"li",p:1,ref:d=>{if(!d){t.current.splice(e,1);return}t.current[e]=d},className:Rt("spatial-bookmarks-item"),tabIndex:0,rounded:"md",role:"option",cursor:"pointer",outline:0,_hover:{background:"trails.50"},_focusVisible:{boxShadow:"outline"},onKeyDown:c,onClick:i,children:l.jsxs(pe,{width:"100%",flexDirection:"row",align:"center",gap:1,children:[l.jsx(ls,{children:l.jsx(es,{})}),l.jsx(fe,{ps:2,noOfLines:1,children:a}),l.jsx(Cr,{}),l.jsx(Nn,{hasArrow:!0,label:r,placement:"right",children:l.jsx(oo,{className:"spatial-bookmarks-item-delete","aria-label":r,borderRadius:"full",iconSpacing:0,padding:0,colorScheme:"red",variant:"ghost",leftIcon:l.jsx(ts,{}),onClick:d=>{s(),d.stopPropagation()}})},e)]})})}function nd(o){const{intl:e,bookmarks:t,showCreate:n,showDelete:s}=o;return l.jsxs(qo,{children:[l.jsx(st,{isDisabled:t.length===0,colorScheme:"red",width:void 0,iconSpacing:0,leftIcon:l.jsx(ts,{}),onClick:s,"aria-label":e.formatMessage({id:"bookmark.button.deleteAll"}),variant:"outline"}),l.jsx(st,{onClick:n,width:"100%",children:e.formatMessage({id:"bookmark.button.create"})})]})}function sd(o){const{intl:e,onCancel:t,onClear:n}=o;return l.jsxs(qo,{children:[l.jsx(st,{variant:"outline",onClick:t,children:e.formatMessage({id:"bookmark.button.cancelDelete"})}),l.jsx(st,{onClick:n,children:e.formatMessage({id:"bookmark.button.confirmDelete"})})]})}function id(o){const{intl:e,onCancel:t,onSave:n,isInvalid:s}=o;return l.jsxs(qo,{children:[l.jsx(st,{variant:"outline",onClick:()=>t(),children:e.formatMessage({id:"bookmark.button.cancel"})}),l.jsx(st,{isDisabled:s,onClick:()=>n(),children:e.formatMessage({id:"bookmark.button.save"})})]})}function qo(o){return l.jsx(pe,{width:"100%",flexDirection:"row",mt:2,gap:1,flexGrow:0,flexShrink:0,children:o.children})}function st(o){return l.jsx(oo,{width:"100%",...o})}function rd(o,e){const[t,n]=p.useState();return p.useEffect(()=>{let s;return o?s=new Yc(o,e):s=void 0,n(s),()=>s?.destroy()},[o,e]),t}function ad(){const o=p.useId(),e=Ee();return l.jsx(N,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",role:"dialog",width:350,children:l.jsx(N,{role:"dialog","aria-labelledby":o,children:l.jsx(je,{title:l.jsx(Ne,{id:o,size:"md",mb:2,children:e.formatMessage({id:"spatialBookmarkTitle"})}),children:l.jsx(Qc,{mapId:G})})})})}const Is="@open-pioneer/printing",ld=rt.bind(void 0,Is),cd=ue.bind(void 0,Is),dd="map",_n="printing-hide";class ud{olMap;title="";fileFormat="pdf";running=!1;i18n;drawInformation=[];scaleLine=void 0;overlay=void 0;constructor(e,t){this.olMap=e,this.i18n=t}destroy(){this.reset()}setTitle(e){this.title=e}setFileFormat(e){this.fileFormat=e}async handleMapExport(){if(!(!this.olMap||!this.fileFormat)){if(this.running)throw new Error("Printing already running.");try{await this.beginExport();const e=await this.exportToCanvas(this.olMap.getViewport());if(e)this.fileFormat=="png"?await this.exportMapInPNG(e):await this.exportMapInPDF(e);else throw new Error("Canvas export failed")}finally{this.reset()}}}async exportToCanvas(e){const t={useCORS:!0,ignoreElements:function(i){if(i.classList&&typeof i.classList=="object"){const r=i.classList;return r.contains("map-anchors")||r.contains(_n)}return!1}},n=(await Ht(()=>import("./f16e60ff8734.js"),[],import.meta.url)).default;return await n(e,t)}async beginExport(){this.running=!0;const e=this.olMap.getInteractions().getArray().filter(t=>t.getActive()&&t instanceof Wo);this.drawInformation=[],e?.forEach(t=>{const n=t,s=n.getOverlay().getStyle();n.getOverlay().setStyle(null),this.drawInformation?.push({draw:n,style:s})}),this.addOverlay(),await this.addScaleLine()}reset(){this.removeScaleLine(),this.removeOverlay(),this.running=!1,this.drawInformation?.length&&this.drawInformation.forEach(e=>{e.draw.getOverlay().setStyle(e.style)})}async addScaleLine(){this.scaleLine=new Ms({className:"printing-scale-bar ol-scale-bar",bar:!0,text:!0,minWidth:125});const e=jn(),t=this.scaleLine.render;this.scaleLine.render=(...n)=>{t.apply(this.scaleLine,n),e.resolve()},this.olMap.addControl(this.scaleLine),await e.promise,await new Promise(n=>{requestAnimationFrame(n)})}removeScaleLine(){this.scaleLine&&(this.olMap.removeControl(this.scaleLine),this.scaleLine=void 0)}addOverlay(){const e=this.olMap.getTargetElement(),t=this.overlay=document.createElement("div");t.classList.add("printing-overlay",_n),e.appendChild(t);const n=document.createElement("div");n.classList.add("printing-overlay-status"),n.textContent=this.i18n.overlayText,t.appendChild(n)}removeOverlay(){this.overlay?.remove(),this.overlay=void 0}getTitleAndFileName(){const e=this.title||"",t=this.title||dd;return{title:e,fileName:t}}async exportMapInPNG(e){const t=document.createElement("canvas");t.width=e.width,t.height=e.height+50,t.style.backgroundColor="#fff";const n=t.getContext("2d");if(!n)throw new Error("2d canvas rendering context not available");const{title:s,fileName:i}=this.getTitleAndFileName();n.fillStyle="#fff",n.fillRect(0,0,t.width,t.height),n.font="20px bold sans-serif",n.textAlign="center",n.fillStyle="#000";const r=t.width/2;n.fillText(s,r,20),n.drawImage(e,0,50);const a=document.createElement("a");a.setAttribute("download",i+".png"),a.href=t.toDataURL("image/png",.8),a.click()}async exportMapInPDF(e){const{jsPDF:t}=await Ht(()=>import("./897ddd196142.js"),["./897ddd196142.js","./a419295615be.js","./75a84f2be53e.js","./4a2b71d7880f.js","./39284370b430.js","./d99ee97b3bdc.js","./c3dd43fe6cb8.js","./12553b373d3d.js","./8067ba7f14cf.js"],import.meta.url),n=new t({orientation:"landscape",unit:"mm",format:"a4"}),s=n.internal.pageSize.getWidth(),i=n.internal.pageSize.getHeight(),r=15,a=20,c=i-a;n.setFontSize(20);const{title:d,fileName:u}=this.getTitleAndFileName();n.text(d,s/2,r,{align:"center"});const h=e.width/e.height;let f=c,g=f*h;g>=s&&(g=s,f=g/h);const v=(s-g)/2,S=a+(c-f)/2;n.addImage(e,"",v,S,g,f),n.save(u+".pdf")}}const hd=de("printing"),pd=o=>{const e=cd(),{mapId:t}=o,{containerProps:n}=oe("printing",o),[s,i]=p.useState("pdf"),[r,a]=p.useState(""),[c,d]=p.useState(!1),u=ld("notifier.NotificationService"),{map:h}=Y(t),f=fd(h,e);p.useEffect(()=>{f?.setFileFormat(s)},[f,s]),p.useEffect(()=>{f?.setTitle(r)},[f,r]);function g(S){(S==="png"||S==="pdf")&&i(S)}function v(){c||!f||(d(!0),f.handleMapExport().catch(S=>{const L=e.formatMessage({id:"printingFailed"});u.notify({level:"error",message:L}),hd.error("Failed to print the map",S)}).finally(()=>d(!1)))}return l.jsxs(N,{...n,children:[l.jsxs($t,{mb:4,alignItems:"center",children:[l.jsxs(Co,{mb:2,children:[l.jsx(vt,{minWidth:"82",mb:1,children:e.formatMessage({id:"title"})}),l.jsx(io,{placeholder:e.formatMessage({id:"input.placeholder"}),value:r,onChange:S=>{a(S.target.value)},isRequired:!0,autoFocus:!0})]}),l.jsxs(Co,{mb:2,children:[l.jsx(vt,{minWidth:"82",mb:1,children:e.formatMessage({id:"fileFormat"})}),l.jsxs(Go,{value:s,onChange:S=>g(S.target.value),className:"printing-select",children:[l.jsx("option",{value:"png",children:"PNG"}),l.jsx("option",{value:"pdf",children:"PDF"})]})]})]}),l.jsx(oo,{isLoading:c,loadingText:e.formatMessage({id:"printingMap"}),disabled:c,padding:2,className:"printing-export-button",onClick:v,width:"100%",children:e.formatMessage({id:"export"})})]})};function fd(o,e){const[t,n]=p.useState(void 0);return p.useEffect(()=>{if(!o)return;const s=new ud(o.olMap,{overlayText:e.formatMessage({id:"printingMap"})});return n(s),()=>{s.destroy(),n(void 0)}},[o,e]),t}function gd(){const o=p.useId(),e=Ee();return l.jsx(N,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",role:"dialog",width:350,children:l.jsx(N,{role:"dialog","aria-labelledby":o,children:l.jsx(je,{title:l.jsx(Ne,{id:o,size:"md",mb:2,children:e.formatMessage({id:"printingTitle"})}),children:l.jsx(pd,{mapId:G})})})})}const md="@open-pioneer/legend",Rs=ue.bind(void 0,md),vd=o=>{const{mapId:e,showBaseLayers:t=!1}=o,{containerProps:n}=oe("legend",o),{map:s}=Y(e);return l.jsx(N,{...n,children:s?l.jsx(bd,{map:s,showBaseLayers:t}):null})};function bd(o){const{map:e,showBaseLayers:t}=o,s=Sd(e).map(i=>l.jsx(Os,{layer:i,showBaseLayers:t},i.id));return l.jsx(ss,{as:"ul",className:"legend-layer-list",listStyleType:"none",spacing:2,children:s})}function Os(o){const{layer:e,showBaseLayers:t}=o,{isVisible:n}=xd(e),s=_d(e);if(!n||!t&&!("parentLayer"in e)&&e.isBaseLayer)return;const i=[];return s?.length&&s.forEach(r=>{i.push(l.jsx(Os,{layer:r,showBaseLayers:t},r.id))}),l.jsxs(l.Fragment,{children:[l.jsx(yd,{layer:e,showBaseLayers:t}),i]})}function yd(o){const e=Rs(),{layer:t,showBaseLayers:n}=o,s=kd(t),i=wd(t);let r;s?.Component?r=l.jsx(s.Component,{layer:t}):s?.imageUrl?r=l.jsx(xn,{layer:t,imageUrl:s.imageUrl}):i&&(r=l.jsx(xn,{layer:t,imageUrl:i}));const a=!("parentLayer"in t)&&t.isBaseLayer;return r?l.jsxs(N,{as:"li",className:Rt("legend-item",`layer-${Cd(t.id)}`),children:[n&&a?l.jsx(fe,{as:"b",children:e.formatMessage({id:"basemapLabel"})}):null,r]}):void 0}function xn(o){const e=Rs(),{layer:t,imageUrl:n}=o;return l.jsxs(N,{children:[l.jsx(fe,{children:t.title}),l.jsx(as,{maxW:"none",maxH:"none",src:n,alt:e.formatMessage({id:"altLabel"},{layerName:t.title}),className:"legend-item__image",fallbackStrategy:"onError",fallback:l.jsx(N,{children:l.jsxs(fe,{children:[l.jsx(Ps,{me:2}),e.formatMessage({id:"fallbackLabel"})]})})})]})}function wd(o){const e=p.useCallback(()=>o.legend,[o]),t=p.useCallback(n=>{const s=o.on("changed:legend",n);return()=>s.destroy()},[o]);return p.useSyncExternalStore(t,e)}function Sd(o){const e=p.useCallback(n=>{const s=o.layers.on("changed",n);return()=>s.destroy()},[o]),t=p.useCallback(()=>{let n=o.layers.getAllLayers({sortByDisplayOrder:!0})??[];return n=n.reverse(),n},[o]);return Ds(e,t)}function _d(o){const e=p.useCallback(n=>{const s=o.sublayers?.on("changed",n);return()=>s?.destroy()},[o]),t=p.useCallback(()=>{if(!o.sublayers)return;let s=o.sublayers?.getSublayers({sortByDisplayOrder:!0});return s=s.reverse(),s},[o]);return Ds(e,t)}function Ds(o,e){const t=p.useRef(),n=p.useCallback(i=>{const r=o(()=>{t.current=void 0,i()});return()=>{t.current=void 0,r()}},[o]),s=p.useCallback(()=>{if(t.current)return t.current.value;const i=e();return t.current={value:i},i},[e]);return p.useSyncExternalStore(n,s)}function xd(o){const e=p.useCallback(()=>o.visible,[o]),t=p.useCallback(s=>{const i=o.on("changed:visible",s);return()=>i.destroy()},[o]);return{isVisible:p.useSyncExternalStore(t,e)}}function kd(o){const[e,t]=p.useState(void 0);return p.useEffect(()=>{t(o.attributes.legend);const n=o.on("changed:attributes",()=>{t(o.attributes.legend)});return()=>n.destroy()},[o]),e}function Cd(o){return o.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function Ed(){const o=p.useId(),e=Ee();return l.jsx(N,{role:"dialog","aria-labelledby":o,children:l.jsx(je,{title:l.jsx(Ne,{id:o,size:"md",mb:2,children:e.formatMessage({id:"legendTitle"})}),children:l.jsx(N,{overflowY:"auto",maxHeight:300,children:l.jsx(vd,{mapId:G,showBaseLayers:!0})})})})}const js="@open-pioneer/geolocation",Pd=rt.bind(void 0,js),Md=ue.bind(void 0,js);function Ld(o){return Pr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0013 3.06V1h-2v2.06A8.994 8.994 0 003.06 11H1v2h2.06A8.994 8.994 0 0011 20.94V23h2v-2.06A8.994 8.994 0 0020.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}}]})(o)}const kn=de("geolocation:GeolocationController"),Cn=17;class Ad extends No{olMap;positionHighlightLayer;geolocation;maxZoom=Cn;accuracyFeature;positionFeature;changeHandlers=[];isCurrentlyActive=!1;setMapToPosition=!0;trackingOptions={};isInitialZoom=!0;constructor(e,t){super(),this.olMap=e,this.isInitialZoom=!0,this.accuracyFeature=new Pe,this.accuracyFeature.setStyle(Pn()),this.positionFeature=new Pe,this.positionFeature.setStyle(En()),this.positionHighlightLayer=new ge({source:new De({features:[this.accuracyFeature,this.positionFeature]})}),this.positionHighlightLayer.setZIndex(Fo);const n=t||Td();this.geolocation=new za({tracking:!1,trackingOptions:n,projection:e.getView()?.getProjection()}),this.trackingOptions=n,this.geolocation.on("error",s=>this.handleGeolocationError(s))}destroy(){this.stopGeolocation(),this.geolocation?.setTracking(!1),this.geolocation.dispose(),this.accuracyFeature=void 0,this.positionFeature=void 0,this.positionHighlightLayer.dispose()}startGeolocation(){if(this.isCurrentlyActive)return Promise.resolve();const e=this.olMap;return new Promise(n=>{this.isCurrentlyActive=!0,this.geolocation?.setProjection(e.getView()?.getProjection()),this.geolocation?.setTracking(!0);const s=this.geolocation.on("change:accuracyGeometry",()=>{const c=this.geolocation.getAccuracyGeometry()||void 0;if(this.accuracyFeature?.setGeometry(c),this.accuracyFeature?.getGeometry()!==void 0&&n(),this.isInitialZoom){const d=this?.accuracyFeature?.getGeometry()?.getExtent();if(d){const u=rl(d);if(!u)return;e.getView().fit(u,{maxZoom:this.maxZoom}),this.isInitialZoom=!1}}}),i=this.geolocation.on("change:position",()=>{const c=this.geolocation.getPosition();c&&(c[0]||c[1])!==void 0&&(this.positionFeature?.setGeometry(new ze(c)),this.setMapToPosition&&e.getView().setCenter(c),this.positionFeature?.getGeometry()!==void 0&&n())}),r=e.getView().on("change:resolution",()=>{this.setMapToPosition=this.isInitialZoom}),a=e.on("pointermove",c=>{c.dragging&&(this.setMapToPosition=!1)});this.changeHandlers.push(s,i,r,a),e.addLayer(this.positionHighlightLayer)}).catch(n=>{kn.error("Failed to determine location",n)})}stopGeolocation(){this.geolocation?.setTracking(!1),this.isCurrentlyActive=!1,this.trackingOptions={},this.setMapToPosition=!0,this.isInitialZoom=!0,this.changeHandlers.forEach(e=>{ce(e)}),this.changeHandlers=[],this.accuracyFeature?.setGeometry(void 0),this.positionFeature?.setGeometry(void 0),this.olMap.removeLayer(this.positionHighlightLayer)}setPositionFeatureStyle(e){this.positionFeature?.setStyle(e??En())}setAccuracyFeatureStyle(e){this.accuracyFeature?.setStyle(e??Pn())}setMaxZoom(e){this.maxZoom=e??Cn}getMaxZoom(){return this.maxZoom}getPositionFeature(){return this.positionFeature}getAccuracyFeature(){return this.accuracyFeature}getTrackingOptions(){return this.trackingOptions}getGeolocation(){return this.geolocation}handleGeolocationError(e){kn.error("Error from geolocation API:",e.message);const t=(()=>{switch(e.code){case 1:return"permission-denied";case 2:return"position-unavailable";case 3:return"timeout";default:return"unknown"}})();this.emit("error",t)}}const En=()=>new Re({image:new jo({radius:6,fill:new et({color:"#3399CC"}),stroke:new Te({color:"#fff",width:2})})}),Pn=()=>new Re({stroke:new Te({color:"#3399CC",width:3}),fill:new et({color:"rgba(0, 0, 255, 0.05)"})}),Td=()=>({enableHighAccuracy:!0,timeout:6e4,maximumAge:6e5}),Id=p.forwardRef(function(e,t){const{mapId:n,maxZoom:s,positionFeatureStyle:i,accuracyFeatureStyle:r,trackingOptions:a}=e,{containerProps:c}=oe("geolocation",e),d=!!navigator.geolocation,[u,h]=p.useState(!1),[f,g]=p.useState(!1),{map:v}=Y(n),S=Md(),L=Pd("notifier.NotificationService"),E=Rd(v,s,a,i,r),O=(()=>d?u?S.formatMessage({id:"locateMeEnd"}):S.formatMessage({id:"locateMeStart"}):S.formatMessage({id:"locateNotSupported"}))();p.useEffect(()=>{if(E===void 0)return;const X=E.on("error",function(Z){const R=S.formatMessage({id:"error"}),H=(()=>{switch(Z){case"permission-denied":return S.formatMessage({id:"permissionDenied"});case"position-unavailable":return S.formatMessage({id:"positionUnavailable"});case"timeout":return S.formatMessage({id:"timeout"});case"unknown":return S.formatMessage({id:"unknownError"})}})();g(!1),h(!1),L.notify({level:"error",title:R,message:H})});return()=>{X.destroy()}},[E,S,L]),p.useEffect(()=>{if(!E){g(!1);return}return u&&(g(!0),E.startGeolocation().then(()=>{g(!1)})),()=>{E?.stopGeolocation(),g(!1)}},[E,u]);const T=()=>{v&&h(!u)};return l.jsx(te,{ref:t,label:O,icon:l.jsx(Ld,{}),onClick:()=>T(),isActive:u,isLoading:f,isDisabled:!d,...c})});function Rd(o,e,t,n,s){const[i,r]=p.useState();return p.useEffect(()=>{if(!o)return;const a=new Ad(o.olMap,t);return r(a),()=>{a.destroy(),r(void 0)}},[o,t]),p.useEffect(()=>{i?.setPositionFeatureStyle(n)},[i,n]),p.useEffect(()=>{i?.setAccuracyFeatureStyle(s)},[i,s]),p.useEffect(()=>{i?.setMaxZoom(e)},[i,e]),i}function Od(o){const{toolState:e,onToolStateChange:t}=o,n=Ee(),s=Ce("ol-app.AppModel"),i=ot(s.state).resultListState,r=i.open,{map:a}=Y(G),c=Ce("editing.EditingService"),d=Ce("notifier.NotificationService"),u=Oe((h,f)=>{t(h,f??!e[h])});return Dd(a,c,d,n,e,u),l.jsxs(pe,{role:"toolbar","aria-label":n.formatMessage({id:"ariaLabel.toolbar"}),direction:"column",gap:1,padding:1,children:[l.jsx(te,{label:e.editingActive?n.formatMessage({id:"stopEditingTitle"}):n.formatMessage({id:"startEditingTitle"}),icon:e.editingActive?l.jsx(ir,{}):l.jsx(rr,{}),isActive:e.editingActive,onClick:()=>u("editingActive")}),l.jsx(te,{label:n.formatMessage({id:"resetEditingTitle"}),icon:l.jsx(ar,{}),onClick:()=>c.reset(G)}),i.input&&l.jsx(te,{label:n.formatMessage({id:"resultListTitle"}),icon:l.jsx(lr,{}),isActive:i.open,onClick:()=>s.setResultListVisibility(!r)}),l.jsx(te,{label:n.formatMessage({id:"printingTitle"}),icon:l.jsx(cr,{}),isActive:e.printingActive,onClick:()=>u("printingActive")}),l.jsx(te,{label:n.formatMessage({id:"spatialBookmarkTitle"}),icon:l.jsx(dr,{}),isActive:e.bookmarksActive,onClick:()=>u("bookmarksActive")}),l.jsx(Id,{mapId:G}),l.jsx(te,{label:n.formatMessage({id:"tocTitle"}),icon:l.jsx(ur,{}),isActive:e.tocActive,onClick:()=>u("tocActive")}),l.jsx(te,{label:n.formatMessage({id:"legendTitle"}),icon:l.jsx(hr,{}),isActive:e.legendActive,onClick:()=>u("legendActive")}),l.jsx(te,{label:n.formatMessage({id:"measurementTitle"}),icon:l.jsx(pr,{}),isActive:e.measurementActive,onClick:()=>u("measurementActive")}),l.jsx(te,{label:n.formatMessage({id:"selectionTitle"}),icon:l.jsx(fr,{}),isActive:e.selectionActive,onClick:()=>u("selectionActive")}),l.jsx(te,{label:n.formatMessage({id:"overviewMapTitle"}),icon:l.jsx(es,{}),isActive:e.overviewMapActive,onClick:()=>u("overviewMapActive")}),l.jsx(_r,{mapId:G}),l.jsx(xr,{mapId:G}),l.jsx(kr,{mapId:G})]})}function Dd(o,e,t,n,s,i){p.useEffect(()=>{if(!o)return;function r(){if(!o)throw Error("map is undefined");try{const c=o.layers.getLayerById("krankenhaus"),d=new URL(c.attributes.collectionURL+"/items");e.start(o,d).whenComplete().then(h=>{if(!h)return;t.notify({level:"info",message:n.formatMessage({id:"editing.featureCreated"},{featureId:h}),displayDuration:4e3}),(c?.olLayer).getSource()?.refresh()}).catch(h=>{console.error(h)}).finally(()=>{i("editingActive",!1)})}catch(c){console.log(c)}}function a(){e.stop(G)}s.editingActive?r():a()},[o,e,t,n,s.editingActive,i])}const jd="@open-pioneer/measurement",Nd=ue.bind(void 0,jd);class Fd{olMap;messages;activeFeatureStyle;layer;source;draw=void 0;sketch=void 0;helpTooltip;measureTooltip;overlayTooltips=[];resources=[];constructor(e,t){this.olMap=e,this.messages=t;const n=this.source=new De;this.layer=new ge({source:n}),this.layer.setZIndex(Fo),e.addLayer(this.layer);const s=e.on("pointermove",this.handlePointerMove.bind(this));this.resources.push({destroy(){ce(s)}});const i=()=>{this.helpTooltip.element.classList.add("hidden")};e.getViewport().addEventListener("mouseout",i),this.resources.push({destroy(){e.getViewport().removeEventListener("mouseout",i)}}),this.helpTooltip=this.createHelpTooltip()}destroy(){this.stopMeasurement();for(const e of this.resources)e.destroy();this.resources=[],this.helpTooltip.destroy(),this.measureTooltip?.destroy();for(const e of this.overlayTooltips)e.destroy();this.overlayTooltips=[],this.olMap.removeLayer(this.layer),this.layer.dispose(),this.source.dispose()}getVectorLayer(){return this.layer}setFinishedFeatureStyle(e){this.layer.setStyle(e)}setActiveFeatureStyle(e){const t=Ji(e);this.activeFeatureStyle=(n,...s)=>{const i=n?.getGeometry()?.getType();if(i==="Polygon"||i==="LineString"||i==="Point")return t(n,...s)},this.draw?.getOverlay().setStyle(this.activeFeatureStyle)}clearMeasurements(){this.source.clear();for(const e of this.overlayTooltips)e.destroy();this.overlayTooltips=[]}startMeasurement(e){if(this.draw)throw new Error("Internal error: another measurement interaction is still active.");const t=e==="area"?"Polygon":"LineString",n=this.draw=new Wo({source:this.source,type:t,style:this.activeFeatureStyle});this.olMap.addInteraction(n);let s,i;n.on("drawstart",r=>{s=this.measureTooltip=this.createMeasureTooltip();const a=this.sketch=r.feature;if(!a)return;let c;i=a.getGeometry()?.on("change",d=>{const u=d.target,h=this.olMap.getView().getProjection();let f="";u instanceof no?(f=Gd(u,h,this.messages),c=u.getInteriorPoint().getCoordinates()||null):u instanceof Ue&&(f=Bd(u,h,this.messages),c=u.getLastCoordinate()||null),s&&(s.element.innerHTML=f,c&&s?.overlay.setPosition(c))})}),n.on("drawend",()=>{if(s){const r=s.element.classList;r.remove("measurement-active-tooltip"),r.remove("printing-hide"),r.add("measurement-finished-tooltip"),s.overlay.setOffset([0,-7]),this.overlayTooltips.push(s),this.measureTooltip=s=void 0}this.sketch=void 0,i&&ce(i)}),n.on("drawabort",()=>{s&&(s.destroy(),this.measureTooltip=s=void 0),this.sketch=void 0,i&&ce(i)})}stopMeasurement(){this.draw&&(this.olMap.removeInteraction(this.draw),this.draw.abortDrawing(),this.draw.dispose(),this.draw=void 0),this.sketch=void 0,this.measureTooltip?.destroy(),this.measureTooltip=void 0}createMeasureTooltip(){const e=document.createElement("div");e.className="measurement-tooltip measurement-active-tooltip printing-hide";const t=new bt({element:e,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),n=this.olMap;return n.addOverlay(t),{overlay:t,element:e,destroy(){n.removeOverlay(t)}}}createHelpTooltip(){const e=document.createElement("div");e.className="measurement-tooltip printing-hide hidden";const t=new bt({element:e,offset:[15,0],positioning:"center-left"}),n=this.olMap;return n.addOverlay(t),{overlay:t,element:e,destroy(){n.removeOverlay(t)}}}handlePointerMove(e){if(e.dragging)return;const t=this.helpTooltip,n=Vd(this.messages,this.sketch);t.element.textContent=n,t.overlay.setPosition(e.coordinate),t.element.classList.remove("hidden")}}function Vd(o,e){if(e){const t=e.getGeometry();if(t instanceof no||t instanceof Ue)return o.getContinueMessage()}return o.getHelpMessage()}function Gd(o,e,t){const n=Qi(o,{projection:e});let s;return n>=1e6?s=`${t.formatNumber(n/1e6)} km<sup>2</sup>`:s=`${t.formatNumber(n)} m<sup>2</sup>`,s}function Bd(o,e,t){const n=er(o,{projection:e});let s;return n>=1e3?s=`${t.formatNumber(n/1e3)} km`:s=`${t.formatNumber(n)} m`,s}const zd=o=>{const e=Nd(),{mapId:t,activeFeatureStyle:n,finishedFeatureStyle:s}=o,{containerProps:i}=oe("measurement",o),[r,a]=p.useState("distance"),c=g=>e.formatMessage({id:g}),d=Y(t),u=Ud(d.map,e);p.useEffect(()=>{u?.setActiveFeatureStyle(n??Wd())},[u,n]),p.useEffect(()=>{u?.setFinishedFeatureStyle(s??Hd())},[u,s]),p.useEffect(()=>{if(u)return u.startMeasurement(r),()=>{u.stopMeasurement()}},[u,r]);function h(g){if(g==="distance"||g==="area")a(g);else throw new Error(`Unexpected measurement type: '${g}'.`)}function f(){u?.clearMeasurements()}return l.jsxs(N,{...i,children:[l.jsx(fe,{mb:3,children:e.formatMessage({id:"measurementInfoText"})}),l.jsx($t,{mb:4,alignItems:"center",children:l.jsxs(Co,{mb:2,children:[l.jsx(vt,{mb:1,children:c("measurementLabel")}),l.jsxs(Go,{value:r,onChange:g=>h(g.target.value),className:"measurement-select",children:[l.jsx("option",{value:"distance",children:c("distance")}),l.jsx("option",{value:"area",children:c("area")})]})]})}),l.jsx(oo,{padding:2,className:"measurement-delete-button",onClick:f,width:"100%",children:c("deleteMeasurementLabel")})]})};function Ud(o,e){const[t,n]=p.useState(void 0);return p.useEffect(()=>{if(!o)return;const s=new Fd(o.olMap,{getContinueMessage(){return e.formatMessage({id:"tooltips.continue"})},getHelpMessage(){return e.formatMessage({id:"tooltips.help"})},formatNumber(i){return e.formatNumber(i,{maximumFractionDigits:2})}});return n(s),()=>{s.destroy(),n(void 0)}},[o,e]),t}function Wd(){return[new Re({stroke:new Te({color:"#fff",lineDash:[10,10],width:5})}),new Re({fill:new et({color:"rgba(0,0,0,0.15)"}),stroke:new Te({color:"rgba(0, 0, 0, 0.7)",lineDash:[10,10],width:3}),image:new jo({radius:5,stroke:new Te({color:"rgba(0, 0, 0, 0.7)",width:2}),fill:new et({color:"rgba(255, 255, 255, 0.2)"})})})]}function Hd(){return[new Re({stroke:new Te({color:"#fff",width:5})}),new Re({stroke:new Te({color:"#0b96fc",width:3}),fill:new et({color:"rgba(11,150,252,0.15)"})})]}function $d(){const o=p.useId(),e=Ee();return l.jsx(N,{role:"dialog","aria-labelledby":o,children:l.jsx(je,{title:l.jsx(Ne,{id:o,size:"md",mb:2,children:e.formatMessage({id:"measurementTitle"})}),children:l.jsx(zd,{mapId:G})})})}const qd="200px",Kd="300px",Yd=o=>{const{mapId:e,olLayer:t,height:n=qd,width:s=Kd}=o,{containerProps:i}=oe("overview-map",o),r=p.useRef(null),{map:a}=Y(e);return p.useEffect(()=>{if(r.current&&a&&t){const c=a.olMap,d=new Lc({className:"ol-overviewmap",layers:[t],collapsible:!1,collapsed:!1,target:r.current});return c.addControl(d),()=>{c.removeControl(d)}}},[a,t]),l.jsx(N,{height:n,width:s,ref:r,...i})};function Xd(){const o=p.useMemo(()=>new Do({source:new $n}),[]);return l.jsx(N,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",maxWidth:325,children:l.jsx(N,{role:"dialog",children:l.jsx(Yd,{mapId:G,olLayer:o})})})}function Zd(){const o=Ce("ol-app.AppModel"),e=ot(o.state).resultListState,[t,n]=p.useState([]),[s,i]=p.useState([]),r=p.useCallback(a=>{n(a.features),i(a.getFeatureIds())},[]);return p.useEffect(()=>{console.log("Anzahl Features: "+t.length),console.log("SelectedIds: "+s.toString())},[t,s]),e.input&&l.jsx(N,{className:"result-list-container",position:"absolute",visibility:e.open?"visible":"hidden",bottom:"0",backgroundColor:"white",width:"100%",height:"400px",zIndex:1,borderTop:"2px solid",borderBottom:"2px solid",borderColor:"trails.100",children:l.jsx(Lr,{input:e.input,mapId:G,onSelectionChange:r},e.key)})}const Jd="@open-pioneer/search",ao=ue.bind(void 0,Jd);function Qd(o){const e=o.selectProps.inputValue.length>0,t={...o,className:Rt(o.className,{"search-invisible":!e})};return l.jsx(me.Menu,{...t,children:o.children})}function eu(o){const t=ao().formatMessage({id:"noOptionsText"});return l.jsx(me.NoOptionsMessage,{...o,children:l.jsx(ee.span,{className:"search-no-match",children:t})})}function tu(o){const t=ao().formatMessage({id:"loadingText"});return l.jsx(me.LoadingMessage,{...o,children:l.jsx(ee.span,{className:"search-loading-text",children:t})})}function ou({children:o,...e}){const t={...e,className:Rt(e.className,"search-value-container")};return l.jsxs(me.ValueContainer,{...t,children:[!!o&&l.jsx(Cc,{style:{position:"absolute",left:8}}),o]})}function nu(o){const e={...o,isHidden:!1};return l.jsx(me.Input,{...e})}function su(o){return null}function iu(o){return l.jsxs(me.IndicatorsContainer,{...o,children:[o.children,!o.selectProps.isLoading&&o.selectProps.inputValue&&l.jsx(ru,{selectProps:o.selectProps,clearValue:o.clearValue})]})}function ru(o){const t=ao().formatMessage({id:"ariaLabel.clearButton"}),n=s=>{s.preventDefault(),s.stopPropagation(),o.clearValue()};return l.jsx(Qs,{role:"button",size:"md",mr:1,"aria-label":t,onClick:n,onTouchEnd:n,onMouseDown:s=>s.preventDefault()})}function au(o){return null}function lu(o){const e=o.selectProps.inputValue,t=o.data.label,n={...o,className:Rt(o.className,"search-option")};return l.jsx(me.Option,{...n,children:l.jsx(ee.div,{className:"search-option-label",children:e.trim().length>0?cu(t,e):t})})}function cu(o,e){const t=o.toLowerCase().indexOf(e.toLowerCase());return t>=0?l.jsxs(l.Fragment,{children:[o.substring(0,t),l.jsx(ee.span,{className:"search-highlighted-match",children:o.substring(t,t+e.length)},"highlighted"),o.substring(t+e.length)]}):o}const Mn=de("search:SearchController"),Ln=200,An=5;var Lt,Ze,Je,Qe,re,eo,Ns;class du{constructor(e,t){A(this,eo);A(this,Lt,void 0);A(this,Ze,[]);A(this,Je,An);A(this,Qe,Ln);A(this,re,void 0);I(this,Lt,e),I(this,Ze,t)}destroy(){_(this,re)?.abort(),I(this,re,void 0)}async search(e){if(_(this,re)?.abort(),I(this,re,void 0),!e)return[];const t=I(this,re,new AbortController);try{return await uu(t.signal,_(this,Qe)),t.signal.aborted&&(Mn.debug(`search canceled with ${e}`),ei()),(await Promise.all(_(this,Ze).map(s=>W(this,eo,Ns).call(this,s,e,t.signal)))).filter(s=>s!=null)}finally{_(this,re)===t&&I(this,re,void 0)}}get searchTypingDelay(){return _(this,Qe)}set searchTypingDelay(e){I(this,Qe,e??Ln)}get maxResultsPerSource(){return _(this,Je)}set maxResultsPerSource(e){I(this,Je,e??An)}get sources(){return _(this,Ze)}}Lt=new WeakMap,Ze=new WeakMap,Je=new WeakMap,Qe=new WeakMap,re=new WeakMap,eo=new WeakSet,Ns=async function(e,t,n){const s=e.label,i=_(this,Lt).olMap.getView().getProjection();try{const r=_(this,Je);let a=await e.search(t,{maxResults:r,signal:n,mapProjection:i});return a.length>r&&(a=a.slice(0,r)),{label:s,source:e,results:a}}catch(r){Wt(r)||Mn.error(`search for source ${s} failed`,r);return}};async function uu(o,e){o.aborted||await new Promise(t=>{const n=()=>{o.removeEventListener("abort",n),clearTimeout(s),t()};o.addEventListener("abort",n);const s=setTimeout(n,e)})}const Kt=de("search:Search"),hu=o=>{const{mapId:e,sources:t,searchTypingDelay:n,maxResultsPerGroup:s,onSelect:i,onClear:r}=o,{containerProps:a}=oe("search",o),{map:c}=Y(e),d=ao(),u=mu(t,n,s,c),{input:h,search:f,selectedOption:g,onInputChanged:v,onResultConfirmed:S}=vu(u),L=gu(),E=pu(d),O=fu(),T=Oe((R,H)=>{H.action==="input-change"&&v(R)}),X=Oe((R,H)=>{switch(H.action){case"select-option":R&&(S(R),i?.({source:R.source,result:R.result}));break;case"clear":v(""),Z.current?.blur(),Z.current?.focus(),r?.();break;default:Kt.debug(`Unhandled action type '${H.action}'.`);break}}),Z=p.useRef(null);return l.jsx(N,{...a,children:l.jsx(Eo,{className:"search-component",classNamePrefix:"react-select",ref:Z,inputValue:h,onInputChange:T,"aria-label":d.formatMessage({id:"ariaLabel.search"}),ariaLiveMessages:E,colorScheme:"trails",selectedOptionStyle:"color",selectedOptionColorScheme:"trails",chakraStyles:L,isClearable:!0,placeholder:d.formatMessage({id:"searchPlaceholder"}),closeMenuOnSelect:!0,isLoading:f.kind==="loading",options:f.kind==="ready"?f.results:void 0,filterOption:()=>!0,tabSelectsValue:!1,components:O,onChange:X,value:g,menuPosition:"fixed"})})};function pu(o){return p.useMemo(()=>({onFocus:({focused:i})=>`${i.label} ${o.formatMessage({id:"ariaLabel.searchFocus"})}.`,onChange:({action:i,label:r})=>{let a="";switch(i){case"select-option":a=`${r} ${o.formatMessage({id:"ariaLabel.searchSelect"})}.`;break;case"clear":a=`${r} ${o.formatMessage({id:"ariaLabel.searchClear"})}.`;break}return a},guidance:()=>`${o.formatMessage({id:"ariaLabel.instructions"})}`,onFilter:()=>""}),[o])}function fu(){return p.useMemo(()=>({Menu:Qd,Input:nu,SingleValue:su,Option:lu,NoOptionsMessage:eu,LoadingMessage:tu,ValueContainer:ou,IndicatorsContainer:iu,ClearIndicator:au}),[])}function gu(){const[o,e]=Fn("colors",["trails.100","trails.50"],["#d5e5ec","#eaf2f5"]);return p.useMemo(()=>({groupHeading:n=>({...n,backgroundColor:o,padding:"8px 12px",fontSize:"inherit",fontWeight:"inherit"}),option:n=>({...n,backgroundColor:"inherit",_focus:{backgroundColor:e}}),dropdownIndicator:n=>({...n,display:"none"})}),[o,e])}function mu(o,e,t,n){const[s,i]=p.useState(void 0);return p.useEffect(()=>{if(!n)return;const r=new du(n,o);return i(r),()=>{r.destroy(),i(void 0)}},[n,o]),p.useEffect(()=>{s&&(s.searchTypingDelay=e)},[s,e]),p.useEffect(()=>{s&&(s.maxResultsPerSource=t)},[s,t]),s}function vu(o){const[e,t]=p.useReducer((a,c)=>{switch(c.kind){case"input":return{...a,query:c.query,selectedOption:null};case"select-option":return{...a,selectedOption:c.option,query:c.option.label};case"load-results":return{...a,search:{kind:"loading"}};case"accept-results":return{...a,search:{kind:"ready",results:c.results}}}},void 0,()=>({query:"",selectedOption:null,search:{kind:"ready",results:[]}})),n=p.useRef(),s=Oe(a=>{if(!o){n.current=void 0,t({kind:"accept-results",results:[]});return}Kt.isDebug()&&Kt.debug(`Starting new search for query ${JSON.stringify(a)}.`),t({kind:"load-results"});const c=n.current=bu(o,a).then(d=>{n.current===c&&t({kind:"accept-results",results:d})})}),i=p.useCallback(a=>{t({kind:"select-option",option:a})},[]),r=p.useCallback(a=>{t({kind:"input",query:a}),s(a)},[s]);return{input:e.query,search:e.search,selectedOption:e.selectedOption,onResultConfirmed:i,onInputChanged:r}}async function bu(o,e){let t;try{t=await o.search(e)}catch(n){Wt(n)||Kt.error("Search failed",n),t=[]}return yu(t)}function yu(o){return o.map((t,n)=>({label:t.label,options:t.results.map(s=>({value:`${n}-${s.id}`,label:s.label,source:t.source,result:s}))}))}function Fs(o,e){const t=o.olMap.getViewport();o.highlightAndZoom(e,{viewPadding:t&&t.offsetWidth<1e3?{top:150,right:75,bottom:50,left:75}:{top:150,right:400,bottom:50,left:400}})}function wu(){const{map:o}=Y(G),e=Ce("ol-app.AppModel"),t=ot(e.state).searchSources;function n(i){if(console.debug("The user selected the following item: ",i.result),!o)return;const r=i.result.geometry;r&&Fs(o,[r])}function s(){console.debug("The user cleared the search"),o?.removeHighlight()}return l.jsx(N,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",mt:5,className:"search-box",children:l.jsx(hu,{mapId:G,sources:t,maxResultsPerGroup:10,onSelect:n,onClear:s})})}const Vs="@open-pioneer/selection",Su=rt.bind(void 0,Vs),Ko=ue.bind(void 0,Vs),pt="selection-active",zt="selection-inactive";class _u{tooltip;interactionResources=[];olMap;isActive=!0;tooltipMessage;tooltipDisabledMessage;constructor(e,t,n,s,i){let r;switch(t){case Yo.extent:default:r=this.initViewport(e),this.interactionResources.push(this.createDragBox(e,i,r,this.interactionResources)),this.interactionResources.push(this.createDrag(e,r,this.interactionResources));break}this.tooltip=this.createHelpTooltip(e,n),this.olMap=e,this.tooltipMessage=n,this.tooltipDisabledMessage=s}initViewport(e){const t=e.getViewport();return t.classList.add(pt),t.oncontextmenu=n=>(n.preventDefault(),!1),t}destroy(){this.tooltip.destroy(),this.interactionResources.forEach(e=>{e.destroy()})}setActive(e){if(this.isActive===e)return;const t=this.olMap.getViewport();e?(this.interactionResources.forEach(n=>this.olMap.addInteraction(n.interaction)),this.tooltip.element.textContent=this.tooltipMessage,t.classList.remove(zt),t.classList.add(pt),this.isActive=!0):(this.interactionResources.forEach(n=>this.olMap.removeInteraction(n.interaction)),this.tooltip.element.textContent=this.tooltipDisabledMessage,t.classList.remove(pt),t.classList.add(zt),this.isActive=!1)}createDragBox(e,t,n,s){const i=new sn({className:"selection-drag-box",condition:tr});return e.addInteraction(i),i.on("boxend",function(){t(i.getGeometry())}),{interaction:i,destroy(){e.removeInteraction(i),s.splice(s.indexOf(this)),i.dispose(),n.classList.remove(pt),n.classList.remove(zt),n.oncontextmenu=null}}}createDrag(e,t,n){const s=function(a){return a.originalEvent.button==2},i=new rn({condition:s});return e.addInteraction(i),{interaction:i,destroy(){e.removeInteraction(i),n.splice(n.indexOf(this)),i.dispose(),t.classList.remove(pt),t.classList.remove(zt),t.oncontextmenu=null}}}createHelpTooltip(e,t){const n=document.createElement("div");n.className="selection-tooltip printing-hide",n.textContent=t;const s=new bt({element:n,offset:[15,0],positioning:"center-left"}),i=e.on("pointermove",r=>{s.setPosition(r.coordinate)});return e.addOverlay(s),{overlay:s,element:n,destroy(){e.removeOverlay(s),s.dispose(),ce(i)}}}getDragboxInteraction(){return this.interactionResources.find(e=>e.interaction instanceof sn)}getDragPanInteraction(){return this.interactionResources.find(e=>e.interaction instanceof rn)}}const So=de("selection:SelectionController"),xu=1e4;var At,Tt,It,to,Gs;class ku{constructor(e){A(this,to);A(this,At,void 0);A(this,Tt,void 0);A(this,It,void 0);const{mapModel:t,onError:n,maxResults:s=xu}=e;I(this,At,t),I(this,Tt,s),I(this,It,n)}destroy(){}async select(e,t){if(t)return await W(this,to,Gs).call(this,e,t)}}At=new WeakMap,Tt=new WeakMap,It=new WeakMap,to=new WeakSet,Gs=async function(e,t){const n=_(this,At).olMap.getView().getProjection();try{So.debug(`Starting selection on source '${e.label}'`);const s=_(this,Tt);let i=await e.select({type:"extent",extent:t},{maxResults:s,mapProjection:n,signal:new AbortController().signal});return i.length>s&&(i=i.slice(0,s)),So.debug(`Found ${i.length} results on source '${e.label}'`),{source:e,results:i}}catch(s){So.error(`selection from source ${e.label} failed`,s),_(this,It).call(this);return}};var Yo=(o=>(o.extent="EXTENT",o.polygon="POLYGON",o.free="FREEPOLYGON",o.circle="CIRCLE",o))(Yo||{});const Tn={classNamePrefix:"react-select",menuPosition:"fixed",isSearchable:!1,isClearable:!1},Cu=o=>{const e=Ko(),{mapId:t,sources:n,onSelectionComplete:s,onSelectionSourceChanged:i}=o,{containerProps:r}=oe("selection",o),[a,c]=p.useState(()=>n.find(R=>(R.status??"available")==="available")),d=Y(t),{onExtentSelected:u}=Mu(d.map,n,a,s),h=Tu(),g=p.useCallback(R=>{const H=[];if(R||(R=["EXTENT"]),R.forEach(b=>{Object.values(Yo).includes(b)&&H.push({label:e.formatMessage({id:b}),value:b})}),H.length===0)throw new Error("methods does not contain valid values");return H},[e])(void 0),[v,S]=p.useState(g[0]),L=Oe(R=>{S(R)}),[E,O]=p.useState(!0);Au(d.map,v,e,u,E);const T=p.useMemo(()=>n.map(R=>({label:R.label,value:R})),[n]),X=p.useMemo(()=>T.find(R=>R.value===a),[T,a]),Z=Oe(R=>{c(R?.value),i&&i({source:R?.value})});return p.useEffect(()=>{if(!a){O(!1);return}const R=e.formatMessage({id:"sourceNotAvailable"}),H=()=>a&&Ro(a,R).kind==="available";O(H());const b=a.on("changed:status",()=>{O(H())});return()=>b.destroy()},[a,O,e]),l.jsxs(ko,{...r,spacing:2,children:[g.length>1&&l.jsxs($t,{children:[l.jsx(vt,{children:e.formatMessage({id:"selectMethod"})}),l.jsx(Eo,{className:"selection-method react-select",...Tn,options:g,onChange:L,value:v,chakraStyles:h})]}),l.jsxs($t,{children:[l.jsx(vt,{children:e.formatMessage({id:"selectSource"})}),l.jsx(Eo,{className:"selection-source react-select",...Tn,options:T,placeholder:e.formatMessage({id:"selectionPlaceholder"}),value:X,onChange:Z,components:{Option:Eu,SingleValue:Pu},isOptionDisabled:R=>R.value===void 0||R.value.status==="unavailable",getOptionLabel:R=>R.label+(R.value===void 0||R.value.status==="unavailable"?" "+e.formatMessage({id:"sourceNotAvailable"}):""),chakraStyles:h})]})]})};function Eu(o){const{value:e}=o.data,{isAvailable:t,content:n}=Bs(e,!1);return l.jsx(me.Option,{...o,isDisabled:!t,className:"selection-source-option",children:n})}function Pu(o){const{value:e}=o.data,{isAvailable:t,content:n}=Bs(e,!0),s=t?"selection-source-value":"selection-source-value selection-source-value--disabled";return l.jsx(me.SingleValue,{...o,isDisabled:!t,className:s,children:n})}function Bs(o,e){const t=o?.label,n=Lu(o);return{isAvailable:n.kind==="available",content:l.jsxs(pe,{direction:"row",alignItems:"center",grow:1,children:[!e&&l.jsx(pe,{grow:1,children:t}),n.kind==="unavailable"&&l.jsx(N,{ml:2,children:l.jsx(Nn,{label:n.reason,placement:"right",openDelay:500,children:l.jsx(ee.span,{children:l.jsx(ti,{as:Mr,color:"red",className:"warning-icon","aria-label":n.reason})})})}),e&&t]})}}function Mu(o,e,t,n){const s=Su("notifier.NotificationService"),i=Ko(),[r,a]=p.useState(void 0);p.useEffect(()=>{if(!o)return;const d=new ku({mapModel:o,onError(){s.notify({level:"error",message:i.formatMessage({id:"selectionFailed"})})}});return a(d),()=>{d.destroy()}},[o,s,e,i]);const c=Oe(async d=>{if(!r||!t)return;const u=await r.select(t,d.getExtent());u&&n?.(u)});return{controller:r,onExtentSelected:c}}function Ro(o,e){const t=o.status??"available",n=typeof t=="string"?{kind:t}:t;return n.kind==="available"?n:{kind:"unavailable",reason:n.reason??e}}function Lu(o){const e=Ko(),[t,n]=p.useState(()=>({kind:"available"}));return p.useEffect(()=>{if(!o){n({kind:"available"});return}const s=e.formatMessage({id:"sourceNotAvailable"});n(Ro(o,s));const i=o.on?.("changed:status",()=>{n(Ro(o,s))});return()=>i?.destroy()},[o,e]),t}function Au(o,e,t,n,s){p.useEffect(()=>{if(!o)return;const i=new _u(o.olMap,e.value,t.formatMessage({id:"tooltip"}),t.formatMessage({id:"disabledTooltip"}),n);return i.setActive(s),()=>{i?.destroy()}},[o,e,t,n,s])}function Tu(){const[o,e]=Fn("colors",["background_body","border"],["#ffffff","#ffffff"]);return p.useMemo(()=>({control:n=>({...n,cursor:"pointer"}),indicatorSeparator:n=>({...n,borderColor:e}),dropdownIndicator:n=>({...n,backgroundColor:o})}),[o,e])}function Iu(){const o=Ee(),e=Ce("notifier.NotificationService"),t=p.useId(),{map:n}=Y(G),s=Ce("ol-app.AppModel"),i=ot(s.state).selectionSources,r=ot(s.state).sourceMetadata,a={numberOptions:{maximumFractionDigits:3},dateOptions:{dateStyle:"medium",timeStyle:"medium",timeZone:"UTC"}};function c(u){const{source:h,results:f}=u;if(!n){console.debug("Map not ready");return}n?.removeHighlight();const g=f.map(S=>S.geometry);g.length>0&&Fs(n,g);const v=r.get(h);if(!v){console.warn("Can not show results because no metadata could be found");return}s.setResultListInput({columns:v,data:f,formatOptions:a}),e.notify({level:"info",message:o.formatMessage({id:"foundResults"},{resultsCount:f.length}),displayDuration:4e3})}function d(u){n?.removeHighlight()}return l.jsx(N,{role:"dialog","aria-labelledby":t,children:l.jsx(je,{title:l.jsx(Ne,{id:t,size:"md",mb:2,children:o.formatMessage({id:"selectionTitle"})}),children:l.jsx(Cu,{mapId:G,sources:i,onSelectionComplete:c,onSelectionSourceChanged:d})})})}function Ru(o){const e=p.useId(),t=Ee();return l.jsx(N,{role:"dialog","aria-labelledby":e,children:l.jsx(je,{title:l.jsx(Ne,{id:e,size:"md",mb:2,children:l.jsx(fe,{children:t.formatMessage({id:"tocTitle"})})}),children:l.jsx(N,{overflowY:"auto",maxHeight:o.maxHeight,children:l.jsx(yr,{mapId:G,showTools:!0,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})})})}const Ou={bookmarksActive:!1,legendActive:!0,overviewMapActive:!0,tocActive:!0,printingActive:!1};function Du(){const o=Ee(),{map:e}=Y(G),[t,n]=p.useState(),[s,i]=p.useState(Ou),r={...s,editingActive:t==="editing",measurementActive:t==="measurement",selectionActive:t==="selection"},a=(f,g)=>{if(f==="selectionActive"||f==="measurementActive"||f==="editingActive"){let v;switch(f){case"editingActive":v="editing";break;case"measurementActive":v="measurement";break;case"selectionActive":v="selection";break}v!==t&&g?(n(v),e?.removeHighlight()):v===t&&!g&&(n(void 0),e?.removeHighlight())}else i({...s,[f]:g})},c=Ce("ol-app.AppModel"),d=ot(c.state).resultListState,u=d.input&&d.open,h=[r.tocActive&&l.jsx(Ru,{maxHeight:r.legendActive||t?"300px":"75vh"},"toc"),r.legendActive&&l.jsx(Ed,{},"legend"),t==="selection"?l.jsx(Iu,{},"selection"):t==="measurement"?l.jsx($d,{},"measurement"):void 0];return l.jsxs(pe,{height:"100%",direction:"column",overflow:"hidden",children:[l.jsx(Pc,{position:"top-right"}),l.jsxs(je,{title:l.jsx(N,{role:"region","aria-label":o.formatMessage({id:"ariaLabel.header"}),textAlign:"center",py:1,children:l.jsx(Ne,{size:"md",children:"OpenLayers Base Packages - Default Sample"})}),children:[l.jsx(pe,{flex:"1",direction:"column",position:"relative",children:l.jsxs(or,{mapId:G,role:"main","aria-label":o.formatMessage({id:"ariaLabel.map"}),viewPadding:u?{bottom:400}:void 0,children:[l.jsx(Er,{centerContent:!0,children:l.jsx(wu,{})}),l.jsx(lt,{position:"top-left",horizontalGap:20,verticalGap:20,children:l.jsx(ju,{children:h})}),l.jsx(lt,{position:"top-right",horizontalGap:20,verticalGap:20,children:r.overviewMapActive&&l.jsx(Xd,{})}),l.jsx(lt,{horizontalGap:20,position:"bottom-left",children:r.bookmarksActive&&l.jsx(ad,{})}),l.jsx(lt,{horizontalGap:20,position:"bottom-left",children:r.printingActive&&l.jsx(gd,{})}),l.jsx(lt,{position:"bottom-right",horizontalGap:10,verticalGap:45,children:l.jsx(Od,{toolState:r,onToolStateChange:a})}),l.jsx(Zd,{})]})}),l.jsxs(pe,{role:"region","aria-label":o.formatMessage({id:"ariaLabel.footer"}),gap:3,alignItems:"center",justifyContent:"center",children:[l.jsx(bc,{mapId:G,precision:2,displayProjectionCode:"EPSG:4326"}),l.jsx(Ic,{mapId:G}),l.jsx(Dc,{mapId:G})]})]})]})}function ju(o){const e=o.children,t=[];for(const n of e)n&&(t.length&&t.push(l.jsx(Ar,{mt:4,mb:4},t.length)),t.push(n));if(t.length!==0)return l.jsx(N,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",width:350,maxWidth:350,children:t})}const Nu=oi({component:Du,theme:ni,appMetadata:fc,config:{properties:{"@open-pioneer/local-storage":{storageId:"ol-app-state"},"@open-pioneer/editing":{polygonDrawStyle:{"stroke-color":"red","stroke-width":2,"fill-color":"rgba(0, 0, 0, 0.1)","circle-radius":5,"circle-fill-color":"rgba(255, 0, 0, 0.2)","circle-stroke-color":"rgba(255, 0, 0, 0.7)","circle-stroke-width":2}}}},async resolveConfig(o){const e=o.getAttribute("forced-locale");if(e)return{locale:e}}});customElements.define("ol-map-app",Nu);const Fu=document.getElementsByTagName("body")[0];Vu();function Vu(){const o=window.location.search,t=new URLSearchParams(o).get("lang"),n=document.createElement("ol-map-app");n.classList.add("full-height"),n.classList.add("app"),n.setAttribute("id","test"),t&&n.setAttribute("forced-locale",t),Fu.appendChild(n)}
