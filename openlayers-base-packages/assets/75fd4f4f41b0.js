import{u as ce,r as y,j as x,A as Dr,m as Gr,c as Br,f as me,B as qe,a as Nr,b as pe,d as Wr,e as Zi,g as Ds,h as jr,o as zr,i as Yr,k as Xr,l as Wt,T as He,F as De,C as Vr,R as Jt,n as $r,p as Ur,q as qr}from"./255e6c31bebe.js";import{g as H,e as Gs,i as Ge,c as gn,V as Bs,S as Hr,a as Dt,C as Jr,l as Ri,E as ue,O as Kr,b as Jn,u as Ti,d as Gt,w as Zr,f as Fe,h as Qr,T as to,B as eo,j as At,k as io,m as X,n as no,o as dt,p as zi,q as Je,r as so,s as ro,t as oo,v as ae,x as ao,y as lo,z as Ns,A as co,D as ho,F as mn,G as uo,H as fo,I as go,J as mo,P as pn,K as po,L as _o,M as Be,N as xo,Q as yo,R as So,U as wo,W as Kn,X as _n,Y as bo,Z as vo,_ as Co,$ as xn,a0 as Eo,a1 as Io,a2 as ko,a3 as Ro,a4 as To,a5 as Lo,a6 as Ne,a7 as Zn,a8 as Mo,a9 as q,aa as Nt,ab as Fo,ac as Ao,ad as Ws,ae as Oo,af as it,ag as de,ah as fe,ai as We,aj as je,ak as ze,al as Li,am as Po,an as Do,ao as Go,ap as Bo,aq as No,ar as It,as as kt,at as Yi,au as Wo,av as Ln,aw as jo,ax as Et,ay as qt,az as Ye,aA as Mi,aB as js,aC as zo,aD as Yo,aE as Fi,aF as Xo,aG as Mn,aH as re,aI as Vo,aJ as Pe,aK as $o,aL as Qn,aM as Uo,aN as qo,aO as Ho,aP as ts,aQ as Jo,aR as pi,aS as _i,aT as Ko,aU as es,aV as Zo,aW as Qo,aX as ta,aY as is,aZ as ea,a_ as ia,a$ as na,b0 as sa,b1 as zs,b2 as ra,b3 as oa,b4 as aa,b5 as la,b6 as ns,b7 as yn,b8 as Fn,b9 as Ke,ba as jt,bb as ca,bc as ha,bd as ua,be as Ys,bf as da,bg as fa,bh as ga,bi as ma,bj as Qi}from"./9b0e0b157136.js";import{B as ft,c as Xs,T as Ai,S as Oi}from"./118c322f8871.js";import{c as Vs,C as $s}from"./bff6cb5a3925.js";import{F as Ut}from"./06d74aad4418.js";function pa(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var _a=pa();const Us=1/60*1e3,xa=typeof performance<"u"?()=>performance.now():()=>Date.now(),qs=typeof window<"u"?n=>window.requestAnimationFrame(n):n=>setTimeout(()=>n(xa()),Us);function ya(n){let t=[],e=[],i=0,s=!1,r=!1;const o=new WeakSet,a={schedule:(l,c=!1,h=!1)=>{const u=h&&s,d=u?t:e;return c&&o.add(l),d.indexOf(l)===-1&&(d.push(l),u&&s&&(i=t.length)),l},cancel:l=>{const c=e.indexOf(l);c!==-1&&e.splice(c,1),o.delete(l)},process:l=>{if(s){r=!0;return}if(s=!0,[t,e]=[e,t],e.length=0,i=t.length,i)for(let c=0;c<i;c++){const h=t[c];h(l),o.has(h)&&(a.schedule(h),n())}s=!1,r&&(r=!1,a.process(l))}};return a}const Sa=40;let Sn=!0,Xe=!1,wn=!1;const he={delta:0,timestamp:0},Ze=["read","update","preRender","render","postRender"],Xi=Ze.reduce((n,t)=>(n[t]=ya(()=>Xe=!0),n),{}),wa=Ze.reduce((n,t)=>{const e=Xi[t];return n[t]=(i,s=!1,r=!1)=>(Xe||Ca(),e.schedule(i,s,r)),n},{}),ba=Ze.reduce((n,t)=>(n[t]=Xi[t].cancel,n),{});Ze.reduce((n,t)=>(n[t]=()=>Xi[t].process(he),n),{});const va=n=>Xi[n].process(he),Hs=n=>{Xe=!1,he.delta=Sn?Us:Math.max(Math.min(n-he.timestamp,Sa),1),he.timestamp=n,wn=!0,Ze.forEach(va),wn=!1,Xe&&(Sn=!1,qs(Hs))},Ca=()=>{Xe=!0,Sn=!0,wn||qs(Hs)},ss=()=>he;function Ea(n){const{value:t,defaultValue:e,onChange:i,shouldUpdate:s=(d,f)=>d!==f}=n,r=ce(i),o=ce(s),[a,l]=y.useState(e),c=t!==void 0,h=c?t:a,u=ce(d=>{const g=typeof d=="function"?d(h):d;o(h,g)&&(c||l(g),r(g))},[c,r,h,o]);return[h,u]}var rs={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},os={enter:{duration:.2,ease:rs.easeOut},exit:{duration:.1,ease:rs.easeIn}},as={enter:(n,t)=>({...n,delay:typeof t=="number"?t:t?.enter}),exit:(n,t)=>({...n,delay:typeof t=="number"?t:t?.exit})},Ia={exit:({reverse:n,initialScale:t,transition:e,transitionEnd:i,delay:s})=>{var r;return{opacity:0,...n?{scale:t,transitionEnd:i?.exit}:{transitionEnd:{scale:t,...i?.exit}},transition:(r=e?.exit)!=null?r:as.exit(os.exit,s)}},enter:({transitionEnd:n,transition:t,delay:e})=>{var i;return{opacity:1,scale:1,transition:(i=t?.enter)!=null?i:as.enter(os.enter,e),transitionEnd:n?.enter}}},ka={initial:"exit",animate:"enter",exit:"exit",variants:Ia},Js=y.forwardRef(function(t,e){const{unmountOnExit:i,in:s,reverse:r=!0,initialScale:o=.95,className:a,transition:l,transitionEnd:c,delay:h,...u}=t,d=i?s&&i:!0,f=s||i?"enter":"exit",g={initialScale:o,reverse:r,transition:l,transitionEnd:c,delay:h};return x.jsx(Dr,{custom:g,children:d&&x.jsx(Gr.div,{ref:e,className:Br("chakra-offset-slide",a),...ka,animate:f,custom:g,...u})})});Js.displayName="ScaleFade";var bn=me((n,t)=>{const{icon:e,children:i,isRound:s,"aria-label":r,...o}=n,a=e||i,l=y.isValidElement(a)?y.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return x.jsx(qe,{padding:"0",borderRadius:s?"full":void 0,ref:t,"aria-label":r,...o,children:l})});bn.displayName="IconButton";function Ra(n){const t=parseFloat(n);return typeof t!="number"||Number.isNaN(t)?0:t}function Ta(n,t){let e=Ra(n);const i=10**(t??10);return e=Math.round(e*i)/i,t?e.toFixed(t):e.toString()}function La(n){if(!Number.isFinite(n))return 0;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e+=1;return e}function ls(n,t,e){return(n-t)*100/(e-t)}function Ma(n,t,e){return(e-t)*n+t}function cs(n,t,e){const i=Math.round((n-t)/e)*e+t,s=La(e);return Ta(i,s)}function tn(n,t,e){return n==null?n:(e<t&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(n,t),e))}var Fa=_a?y.useLayoutEffect:y.useEffect;function hs(n,t=[]){const e=y.useRef(n);return Fa(()=>{e.current=n}),y.useCallback((...i)=>{var s;return(s=e.current)==null?void 0:s.call(e,...i)},t)}function Aa(n,t){const e=y.useId();return y.useMemo(()=>n||[t,e].filter(Boolean).join("-"),[n,t,e])}function Oa(n,t){const e=n!==void 0;return[e,e&&typeof n<"u"?n:t]}function us(n={}){const{onClose:t,onOpen:e,isOpen:i,id:s}=n,r=hs(e),o=hs(t),[a,l]=y.useState(n.defaultIsOpen||!1),[c,h]=Oa(i,a),u=Aa(s,"disclosure"),d=y.useCallback(()=>{c||l(!1),o?.()},[c,o]),f=y.useCallback(()=>{c||l(!0),r?.()},[c,r]),g=y.useCallback(()=>{(h?d:f)()},[h,f,d]);return{isOpen:!!h,onOpen:f,onClose:d,onToggle:g,isControlled:c,getButtonProps:(m={})=>({...m,"aria-expanded":h,"aria-controls":u,onClick:Nr(m.onClick,g)}),getDisclosureProps:(m={})=>({...m,hidden:!h,id:u})}}var vn=pe("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});vn.displayName="Spacer";var ie=n=>n?"":void 0,en=n=>n?!0:void 0,Qe=(...n)=>n.filter(Boolean).join(" ");function nn(...n){return function(e){n.some(i=>(i?.(e),e?.defaultPrevented))}}function xi(n){const{orientation:t,vertical:e,horizontal:i}=n;return t==="vertical"?e:i}var Ei={width:0,height:0},yi=n=>n||Ei;function Pa(n){const{orientation:t,thumbPercents:e,thumbRects:i,isReversed:s}=n,r=m=>{var _;const p=(_=i[m])!=null?_:Ei;return{position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...xi({orientation:t,vertical:{bottom:`calc(${e[m]}% - ${p.height/2}px)`},horizontal:{left:`calc(${e[m]}% - ${p.width/2}px)`}})}},o=t==="vertical"?i.reduce((m,_)=>yi(m).height>yi(_).height?m:_,Ei):i.reduce((m,_)=>yi(m).width>yi(_).width?m:_,Ei),a={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0,...xi({orientation:t,vertical:o?{paddingLeft:o.width/2,paddingRight:o.width/2}:{},horizontal:o?{paddingTop:o.height/2,paddingBottom:o.height/2}:{}})},l={position:"absolute",...xi({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},c=e.length===1,h=[0,s?100-e[0]:e[0]],u=c?h:e;let d=u[0];!c&&s&&(d=100-d);const f=Math.abs(u[u.length-1]-u[0]),g={...l,...xi({orientation:t,vertical:s?{height:`${f}%`,top:`${d}%`}:{height:`${f}%`,bottom:`${d}%`},horizontal:s?{width:`${f}%`,right:`${d}%`}:{width:`${f}%`,left:`${d}%`}})};return{trackStyle:l,innerTrackStyle:g,rootStyle:a,getThumbStyle:r}}function Da(n){const{isReversed:t,direction:e,orientation:i}=n;return e==="ltr"||i==="vertical"?t:!t}function Ga(n,t,e,i){return n.addEventListener(t,e,i),()=>{n.removeEventListener(t,e,i)}}function Ba(n){const t=Wa(n);return typeof t.PointerEvent<"u"&&n instanceof t.PointerEvent?n.pointerType==="mouse":n instanceof t.MouseEvent}function Ks(n){return!!n.touches}function Na(n){return Ks(n)&&n.touches.length>1}function Wa(n){var t;return(t=n.view)!=null?t:window}function ja(n,t="page"){const e=n.touches[0]||n.changedTouches[0];return{x:e[`${t}X`],y:e[`${t}Y`]}}function za(n,t="page"){return{x:n[`${t}X`],y:n[`${t}Y`]}}function Zs(n,t="page"){return Ks(n)?ja(n,t):za(n,t)}function Ya(n){return t=>{const e=Ba(t);(!e||e&&t.button===0)&&n(t)}}function Xa(n,t=!1){function e(s){n(s,{point:Zs(s)})}return t?Ya(e):e}function Ii(n,t,e,i){return Ga(n,t,Xa(e,t==="pointerdown"),i)}var Va=Object.defineProperty,$a=(n,t,e)=>t in n?Va(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,mt=(n,t,e)=>($a(n,typeof t!="symbol"?t+"":t,e),e),Ua=class{constructor(n,t,e){mt(this,"history",[]),mt(this,"startEvent",null),mt(this,"lastEvent",null),mt(this,"lastEventInfo",null),mt(this,"handlers",{}),mt(this,"removeListeners",()=>{}),mt(this,"threshold",3),mt(this,"win"),mt(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;const a=sn(this.lastEventInfo,this.history),l=this.startEvent!==null,c=Ka(a.offset,{x:0,y:0})>=this.threshold;if(!l&&!c)return;const{timestamp:h}=ss();this.history.push({...a.point,timestamp:h});const{onStart:u,onMove:d}=this.handlers;l||(u?.(this.lastEvent,a),this.startEvent=this.lastEvent),d?.(this.lastEvent,a)}),mt(this,"onPointerMove",(a,l)=>{this.lastEvent=a,this.lastEventInfo=l,wa.update(this.updatePoint,!0)}),mt(this,"onPointerUp",(a,l)=>{const c=sn(l,this.history),{onEnd:h,onSessionEnd:u}=this.handlers;u?.(a,c),this.end(),!(!h||!this.startEvent)&&h?.(a,c)});var i;if(this.win=(i=n.view)!=null?i:window,Na(n))return;this.handlers=t,e&&(this.threshold=e),n.stopPropagation(),n.preventDefault();const s={point:Zs(n)},{timestamp:r}=ss();this.history=[{...s.point,timestamp:r}];const{onSessionStart:o}=t;o?.(n,sn(s,this.history)),this.removeListeners=Ja(Ii(this.win,"pointermove",this.onPointerMove),Ii(this.win,"pointerup",this.onPointerUp),Ii(this.win,"pointercancel",this.onPointerUp))}updateHandlers(n){this.handlers=n}end(){var n;(n=this.removeListeners)==null||n.call(this),ba.update(this.updatePoint)}};function ds(n,t){return{x:n.x-t.x,y:n.y-t.y}}function sn(n,t){return{point:n.point,delta:ds(n.point,t[t.length-1]),offset:ds(n.point,t[0]),velocity:Ha(t,.1)}}var qa=n=>n*1e3;function Ha(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const s=n[n.length-1];for(;e>=0&&(i=n[e],!(s.timestamp-i.timestamp>qa(t)));)e--;if(!i)return{x:0,y:0};const r=(s.timestamp-i.timestamp)/1e3;if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ja(...n){return t=>n.reduce((e,i)=>i(e),t)}function rn(n,t){return Math.abs(n-t)}function fs(n){return"x"in n&&"y"in n}function Ka(n,t){if(typeof n=="number"&&typeof t=="number")return rn(n,t);if(fs(n)&&fs(t)){const e=rn(n.x,t.x),i=rn(n.y,t.y);return Math.sqrt(e**2+i**2)}return 0}function Qs(n){const t=y.useRef(null);return t.current=n,t}function Za(n,t){const{onPan:e,onPanStart:i,onPanEnd:s,onPanSessionStart:r,onPanSessionEnd:o,threshold:a}=t,l=!!(e||i||s||r||o),c=y.useRef(null),h=Qs({onSessionStart:r,onSessionEnd:o,onStart:i,onMove:e,onEnd(u,d){c.current=null,s?.(u,d)}});y.useEffect(()=>{var u;(u=c.current)==null||u.updateHandlers(h.current)}),y.useEffect(()=>{const u=n.current;if(!u||!l)return;function d(f){c.current=new Ua(f,h.current,a)}return Ii(u,"pointerdown",d)},[n,l,h,a]),y.useEffect(()=>()=>{var u;(u=c.current)==null||u.end(),c.current=null},[])}function Qa(n,t){if(!n){t(void 0);return}t({width:n.offsetWidth,height:n.offsetHeight});const e=n.ownerDocument.defaultView??window,i=new e.ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const[r]=s;let o,a;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}var tl=globalThis?.document?y.useLayoutEffect:y.useEffect;function el(n,t){var e,i;if(!n||!n.parentElement)return;const s=(i=(e=n.ownerDocument)==null?void 0:e.defaultView)!=null?i:window,r=new s.MutationObserver(()=>{t()});return r.observe(n.parentElement,{childList:!0}),()=>{r.disconnect()}}function il({getNodes:n,observeMutation:t=!0}){const[e,i]=y.useState([]),[s,r]=y.useState(0);return tl(()=>{const o=n(),a=o.map((l,c)=>Qa(l,h=>{i(u=>[...u.slice(0,c),h,...u.slice(c+1)])}));if(t){const l=o[0];a.push(el(l,()=>{r(c=>c+1)}))}return()=>{a.forEach(l=>{l?.()})}},[s]),e}function nl(n){return typeof n=="object"&&n!==null&&"current"in n}function sl(n){const[t]=il({observeMutation:!1,getNodes(){return[nl(n)?n.current:n]}});return t}function rl(n){var t;const{min:e=0,max:i=100,onChange:s,value:r,defaultValue:o,isReversed:a,direction:l="ltr",orientation:c="horizontal",id:h,isDisabled:u,isReadOnly:d,onChangeStart:f,onChangeEnd:g,step:m=1,getAriaValueText:_,"aria-valuetext":p,"aria-label":w,"aria-labelledby":b,name:I,focusThumbOnChange:k=!0,...C}=n,T=ce(f),E=ce(g),D=ce(_),F=Da({isReversed:a,direction:l,orientation:c}),[$,j]=Ea({value:r,defaultValue:o??al(e,i),onChange:s}),[W,J]=y.useState(!1),[L,P]=y.useState(!1),A=!(u||d),N=(i-e)/10,V=m||(i-e)/100,B=tn($,e,i),at=i-B+e,xe=ls(F?at:B,e,i),Q=c==="vertical",U=Qs({min:e,max:i,step:m,isDisabled:u,value:B,isInteractive:A,isReversed:F,isVertical:Q,eventSource:null,focusThumbOnChange:k,orientation:c}),ye=y.useRef(null),Se=y.useRef(null),we=y.useRef(null),ri=y.useId(),be=h??ri,[oi,ai]=[`slider-thumb-${be}`,`slider-track-${be}`],li=y.useCallback(R=>{var O,Xt;if(!ye.current)return;const K=U.current;K.eventSource="pointer";const ct=ye.current.getBoundingClientRect(),{clientX:Vt,clientY:fi}=(Xt=(O=R.touches)==null?void 0:O[0])!=null?Xt:R,Re=Q?ct.bottom-fi:Vt-ct.left,$t=Q?ct.height:ct.width;let St=Re/$t;F&&(St=1-St);let gt=Ma(St,K.min,K.max);return K.step&&(gt=parseFloat(cs(gt,K.min,K.step))),gt=tn(gt,K.min,K.max),gt},[Q,F,U]),tt=y.useCallback(R=>{const O=U.current;O.isInteractive&&(R=parseFloat(cs(R,O.min,V)),R=tn(R,O.min,O.max),j(R))},[V,j,U]),lt=y.useMemo(()=>({stepUp(R=V){const O=F?B-R:B+R;tt(O)},stepDown(R=V){const O=F?B+R:B-R;tt(O)},reset(){tt(o||0)},stepTo(R){tt(R)}}),[tt,F,B,V,o]),ci=y.useCallback(R=>{const O=U.current,K={ArrowRight:()=>lt.stepUp(),ArrowUp:()=>lt.stepUp(),ArrowLeft:()=>lt.stepDown(),ArrowDown:()=>lt.stepDown(),PageUp:()=>lt.stepUp(N),PageDown:()=>lt.stepDown(N),Home:()=>tt(O.min),End:()=>tt(O.max)}[R.key];K&&(R.preventDefault(),R.stopPropagation(),K(R),O.eventSource="keyboard")},[lt,tt,N,U]),hi=(t=D?.(B))!=null?t:p,ve=sl(Se),{getThumbStyle:Ce,rootStyle:Zt,trackStyle:ui,innerTrackStyle:Yt}=y.useMemo(()=>{const R=U.current,O=ve??{width:0,height:0};return Pa({isReversed:F,orientation:R.orientation,thumbRects:[O],thumbPercents:[xe]})},[F,ve,xe,U]),Ee=y.useCallback(()=>{U.current.focusThumbOnChange&&setTimeout(()=>{var O;return(O=Se.current)==null?void 0:O.focus()})},[U]);Wr(()=>{const R=U.current;Ee(),R.eventSource==="keyboard"&&E?.(R.value)},[B,E]);function Rt(R){const O=li(R);O!=null&&O!==U.current.value&&j(O)}Za(we,{onPanSessionStart(R){const O=U.current;O.isInteractive&&(J(!0),Ee(),Rt(R),T?.(O.value))},onPanSessionEnd(){const R=U.current;R.isInteractive&&(J(!1),E?.(R.value))},onPan(R){U.current.isInteractive&&Rt(R)}});const Ie=y.useCallback((R={},O=null)=>({...R,...C,ref:Zi(O,we),tabIndex:-1,"aria-disabled":en(u),"data-focused":ie(L),style:{...R.style,...Zt}}),[C,u,L,Zt]),ke=y.useCallback((R={},O=null)=>({...R,ref:Zi(O,ye),id:ai,"data-disabled":ie(u),style:{...R.style,...ui}}),[u,ai,ui]),Qt=y.useCallback((R={},O=null)=>({...R,ref:O,style:{...R.style,...Yt}}),[Yt]),te=y.useCallback((R={},O=null)=>({...R,ref:Zi(O,Se),role:"slider",tabIndex:A?0:void 0,id:oi,"data-active":ie(W),"aria-valuetext":hi,"aria-valuemin":e,"aria-valuemax":i,"aria-valuenow":B,"aria-orientation":c,"aria-disabled":en(u),"aria-readonly":en(d),"aria-label":w,"aria-labelledby":w?void 0:b,style:{...R.style,...Ce(0)},onKeyDown:nn(R.onKeyDown,ci),onFocus:nn(R.onFocus,()=>P(!0)),onBlur:nn(R.onBlur,()=>P(!1))}),[A,oi,W,hi,e,i,B,c,u,d,w,b,Ce,ci]),Ji=y.useCallback((R,O=null)=>{const Xt=!(R.value<e||R.value>i),K=B>=R.value,ct=ls(R.value,e,i),Vt={position:"absolute",pointerEvents:"none",...ol({orientation:c,vertical:{bottom:F?`${100-ct}%`:`${ct}%`},horizontal:{left:F?`${100-ct}%`:`${ct}%`}})};return{...R,ref:O,role:"presentation","aria-hidden":!0,"data-disabled":ie(u),"data-invalid":ie(!Xt),"data-highlighted":ie(K),style:{...R.style,...Vt}}},[u,F,i,e,c,B]),di=y.useCallback((R={},O=null)=>({...R,ref:O,type:"hidden",value:B,name:I}),[I,B]);return{state:{value:B,isFocused:L,isDragging:W},actions:lt,getRootProps:Ie,getTrackProps:ke,getInnerTrackProps:Qt,getThumbProps:te,getMarkerProps:Ji,getInputProps:di}}function ol(n){const{orientation:t,vertical:e,horizontal:i}=n;return t==="vertical"?e:i}function al(n,t){return t<n?n:n+(t-n)/2}var[ll,Vi]=Ds({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[cl,$i]=Ds({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),tr=me((n,t)=>{var e;const i={...n,orientation:(e=n?.orientation)!=null?e:"horizontal"},s=jr("Slider",i),r=zr(i),{direction:o}=Yr();r.direction=o;const{getInputProps:a,getRootProps:l,...c}=rl(r),h=l(),u=a({},t);return x.jsx(ll,{value:c,children:x.jsx(cl,{value:s,children:x.jsxs(pe.div,{...h,className:Qe("chakra-slider",i.className),__css:s.container,children:[i.children,x.jsx("input",{...u})]})})})});tr.displayName="Slider";var er=me((n,t)=>{const{getThumbProps:e}=Vi(),i=$i(),s=e(n,t);return x.jsx(pe.div,{...s,className:Qe("chakra-slider__thumb",n.className),__css:i.thumb})});er.displayName="SliderThumb";var ir=me((n,t)=>{const{getTrackProps:e}=Vi(),i=$i(),s=e(n,t);return x.jsx(pe.div,{...s,className:Qe("chakra-slider__track",n.className),__css:i.track})});ir.displayName="SliderTrack";var nr=me((n,t)=>{const{getInnerTrackProps:e}=Vi(),i=$i(),s=e(n,t);return x.jsx(pe.div,{...s,className:Qe("chakra-slider__filled-track",n.className),__css:i.filledTrack})});nr.displayName="SliderFilledTrack";var hl=me((n,t)=>{const{getMarkerProps:e}=Vi(),i=$i(),s=e(n,t);return x.jsx(pe.div,{...s,className:Qe("chakra-slider__marker",n.className),__css:i.mark})});hl.displayName="SliderMark";function ul(n,t,e,i,s){sr(n,t,e||0,i||n.length-1,s||dl)}function sr(n,t,e,i,s){for(;i>e;){if(i-e>600){var r=i-e+1,o=t-e+1,a=Math.log(r),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1),h=Math.max(e,Math.floor(t-o*l/r+c)),u=Math.min(i,Math.floor(t+(r-o)*l/r+c));sr(n,t,h,u,s)}var d=n[t],f=e,g=i;for(Te(n,e,t),s(n[i],d)>0&&Te(n,e,i);f<g;){for(Te(n,f,g),f++,g--;s(n[f],d)<0;)f++;for(;s(n[g],d)>0;)g--}s(n[e],d)===0?Te(n,e,g):(g++,Te(n,g,i)),g<=t&&(e=g+1),t<=g&&(i=g-1)}}function Te(n,t,e){var i=n[t];n[t]=n[e],n[e]=i}function dl(n,t){return n<t?-1:n>t?1:0}let rr=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!wi(t,e))return i;const s=this.toBBox,r=[];for(;e;){for(let o=0;o<e.children.length;o++){const a=e.children[o],l=e.leaf?s(a):a;wi(t,l)&&(e.leaf?i.push(a):an(t,l)?this._all(a,i):r.push(a))}e=r.pop()}return i}collides(t){let e=this.data;if(!wi(t,e))return!1;const i=[];for(;e;){for(let s=0;s<e.children.length;s++){const r=e.children[s],o=e.leaf?this.toBBox(r):r;if(wi(t,o)){if(e.leaf||an(t,o))return!0;i.push(r)}}e=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=oe([]),this}remove(t,e){if(!t)return this;let i=this.data;const s=this.toBBox(t),r=[],o=[];let a,l,c;for(;i||r.length;){if(i||(i=r.pop(),l=r[r.length-1],a=o.pop(),c=!0),i.leaf){const h=fl(t,i.children,e);if(h!==-1)return i.children.splice(h,1),r.push(i),this._condense(r),this}!c&&!i.leaf&&an(i,s)?(r.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,s){const r=i-e+1;let o=this._maxEntries,a;if(r<=o)return a=oe(t.slice(e,i+1)),ne(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=oe([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),c=l*Math.ceil(Math.sqrt(o));gs(t,e,i,c,this.compareMinX);for(let h=e;h<=i;h+=c){const u=Math.min(h+c-1,i);gs(t,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const f=Math.min(d+l-1,u);a.children.push(this._build(t,d,f,s-1))}}return ne(a,this.toBBox),a}_chooseSubtree(t,e,i,s){for(;s.push(e),!(e.leaf||s.length-1===i);){let r=1/0,o=1/0,a;for(let l=0;l<e.children.length;l++){const c=e.children[l],h=on(c),u=pl(t,c)-h;u<o?(o=u,r=h<r?h:r,a=c):u===o&&h<r&&(r=h,a=c)}e=a||e.children[0]}return e}_insert(t,e,i){const s=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(s,this.data,e,r);for(o.children.push(t),Oe(o,s);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(s,r,e)}_split(t,e){const i=t[e],s=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,s);const o=this._chooseSplitIndex(i,r,s),a=oe(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,ne(i,this.toBBox),ne(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,e){this.data=oe([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ne(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let s,r=1/0,o=1/0;for(let a=e;a<=i-e;a++){const l=Ae(t,0,a,this.toBBox),c=Ae(t,a,i,this.toBBox),h=_l(l,c),u=on(l)+on(c);h<r?(r=h,s=a,o=u<o?u:o):h===r&&u<o&&(o=u,s=a)}return s||i-e}_chooseSplitAxis(t,e,i){const s=t.leaf?this.compareMinX:gl,r=t.leaf?this.compareMinY:ml,o=this._allDistMargin(t,e,i,s),a=this._allDistMargin(t,e,i,r);o<a&&t.children.sort(s)}_allDistMargin(t,e,i,s){t.children.sort(s);const r=this.toBBox,o=Ae(t,0,e,r),a=Ae(t,i-e,i,r);let l=Si(o)+Si(a);for(let c=e;c<i-e;c++){const h=t.children[c];Oe(o,t.leaf?r(h):h),l+=Si(o)}for(let c=i-e-1;c>=e;c--){const h=t.children[c];Oe(a,t.leaf?r(h):h),l+=Si(a)}return l}_adjustParentBBoxes(t,e,i){for(let s=i;s>=0;s--)Oe(e[s],t)}_condense(t){for(let e=t.length-1,i;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():ne(t[e],this.toBBox)}};function fl(n,t,e){if(!e)return t.indexOf(n);for(let i=0;i<t.length;i++)if(e(n,t[i]))return i;return-1}function ne(n,t){Ae(n,0,n.children.length,t,n)}function Ae(n,t,e,i,s){s||(s=oe(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=t;r<e;r++){const o=n.children[r];Oe(s,n.leaf?i(o):o)}return s}function Oe(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function gl(n,t){return n.minX-t.minX}function ml(n,t){return n.minY-t.minY}function on(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Si(n){return n.maxX-n.minX+(n.maxY-n.minY)}function pl(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function _l(n,t){const e=Math.max(n.minX,t.minX),i=Math.max(n.minY,t.minY),s=Math.min(n.maxX,t.maxX),r=Math.min(n.maxY,t.maxY);return Math.max(0,s-e)*Math.max(0,r-i)}function an(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function wi(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function oe(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gs(n,t,e,i,s){const r=[t,e];for(;r.length;){if(e=r.pop(),t=r.pop(),e-t<=i)continue;const o=t+Math.ceil((e-t)/i/2)*i;ul(n,o,t,e,s),r.push(t,o,o,e)}}class xl{constructor(t){this.rbush_=new rr(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[H(e)]=i}load(t,e){const i=new Array(e.length);for(let s=0,r=e.length;s<r;s++){const o=t[s],a=e[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[H(a)]=l}this.rbush_.load(i)}remove(t){const e=H(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[H(e)],s=[i.minX,i.minY,i.maxX,i.maxY];Gs(s,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let s=0,r=t.length;s<r;s++)if(i=e(t[s]),i)return i;return i}isEmpty(){return Ge(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return gn(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const ms=xl,pt={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function yl(n,t){return[[-1/0,-1/0,1/0,1/0]]}let Sl=!1;function wl(n,t,e,i,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(e,i,s):n,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Sl,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();let h;c=="json"||c=="text"?h=a.responseText:c=="xml"?(h=a.responseXML,h||(h=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(h=a.response),h?r(t.readFeatures(h,{extent:e,featureProjection:s}),t.readProjection(h)):o()}else o()},a.onerror=o,a.send()}function ps(n,t){return function(e,i,s,r,o){const a=this;wl(n,t,e,i,s,function(l,c){a.addFeatures(l),r!==void 0&&r(l)},o||Bs)}}class Tt extends Qr{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class bl extends Hr{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Bs,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Dt(this.format_,"`format` must be set when `url` is set"),this.loader_=ps(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:yl;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new ms:null,this.loadedExtentsRtree_=new ms,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),!e&&i===void 0&&(i=new Jr(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=H(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Tt(pt.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[Ri(e,ue.CHANGE,this.handleFeatureChange_,this),Ri(e,Kr.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const s=e.getId();return s!==void 0&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=e),i&&(Dt(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=H(a);this.addToIndex_(l,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],l=H(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();e.push(h),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(pt.ADDFEATURE))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new Tt(pt.ADDFEATURE,i[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(pt.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(pt.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(Jn.ADD,i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener(Jn.REMOVE,i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ti);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Tt(pt.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(s){if(s.getGeometry().intersectsCoordinate(t))return e(s)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const r=e(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Ge(this.nullGeometryFeatures_)||Gt(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const s=Zr(t,e);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],s=t[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||to,this.featuresRtree_.forEachInExtent(l,function(c){if(e(c)){const h=c.getGeometry(),u=a;if(a=h.closestPointXY(i,s,o,a),a<u){r=c;const d=Math.sqrt(a);l[0]=i-d,l[1]=s-d,l[2]=i+d,l[3]=s+d}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=H(e),s=e.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}const r=e.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new Tt(pt.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:H(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ge(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const s=this.loadedExtentsRtree_,r=this.strategy_(t,e,i);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(h){return Fe(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Tt(pt.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new Tt(pt.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Tt(pt.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(s){if(Gs(s.extent,t))return i=s,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=H(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=H(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(Ti),delete this.featureChangeKeys_[e];const s=t.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Tt(pt.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){Dt(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(ps(t,this.format_))}}const or=bl;class An extends eo{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new An(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ti(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Ri(t,ue.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?vl(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function vl(n){if(typeof n=="function")return n;let t;return Array.isArray(n)?t=n:(Dt(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[n]),function(){return t}}const Cl=An;class El{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?At(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=At(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return X()}readFeature(t,e){return X()}readFeatures(t,e){return X()}readGeometry(t,e){return X()}readProjection(t){return X()}writeFeature(t,e){return X()}writeFeatures(t,e){return X()}writeGeometry(t,e){return X()}}function ar(n,t,e){const i=e?At(e.featureProjection):null,s=e?At(e.dataProjection):null;let r;if(i&&s&&!io(i,s)?r=(t?n.clone():n).transform(t?i:s,t?s:i):r=n,t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),a=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*o)/o;return l};r===n&&(r=n.clone()),r.applyTransform(a)}return r}class Il extends El{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(bi(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(bi(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return X()}readFeaturesFromObject(t,e){return X()}readGeometry(t,e){return this.readGeometryFromObject(bi(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return X()}readProjection(t){return this.readProjectionFromObject(bi(t))}readProjectionFromObject(t){return X()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return X()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return X()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return X()}}function bi(n){if(typeof n=="string"){const t=JSON.parse(n);return t||null}return n!==null?n:null}const kl=Il;function lr(n,t,e,i,s,r,o){let a,l;const c=(e-t)/i;if(c===1)a=t;else if(c===2)a=t,l=s;else if(c!==0){let h=n[t],u=n[t+1],d=0;const f=[0];for(let _=t+i;_<e;_+=i){const p=n[_],w=n[_+1];d+=Math.sqrt((p-h)*(p-h)+(w-u)*(w-u)),f.push(d),h=p,u=w}const g=s*d,m=no(f,g);m<0?(l=(g-f[-m-2])/(f[-m-1]-f[-m-2]),a=t+(-m-2)*i):a=t+m*i}o=o>1?o:2,r=r||new Array(o);for(let h=0;h<o;++h)r[h]=a===void 0?NaN:l===void 0?n[a+h]:dt(n[a+h],n[a+i+h],l);return r}function Cn(n,t,e,i,s,r){if(e==t)return null;let o;if(s<n[t+i-1])return r?(o=n.slice(t,t+i),o[i-1]=s,o):null;if(n[e-1]<s)return r?(o=n.slice(e-i,e),o[i-1]=s,o):null;if(s==n[t+i-1])return n.slice(t,t+i);let a=t/i,l=e/i;for(;a<l;){const d=a+l>>1;s<n[(d+1)*i-1]?l=d:a=d+1}const c=n[a*i-1];if(s==c)return n.slice((a-1)*i,(a-1)*i+i);const h=n[(a+1)*i-1],u=(s-c)/(h-c);o=[];for(let d=0;d<i-1;++d)o.push(dt(n[(a-1)*i+d],n[a*i+d],u));return o.push(s),o}function Rl(n,t,e,i,s,r,o){if(o)return Cn(n,t,e[e.length-1],i,s,r);let a;if(s<n[i-1])return r?(a=n.slice(0,i),a[i-1]=s,a):null;if(n[n.length-1]<s)return r?(a=n.slice(n.length-i),a[i-1]=s,a):null;for(let l=0,c=e.length;l<c;++l){const h=e[l];if(t!=h){if(s<n[t+i-1])return null;if(s<=n[h-1])return Cn(n,t,h,i,s,!1);t=h}}return null}function cr(n,t,e,i){let s=n[t],r=n[t+1],o=0;for(let a=t+i;a<e;a+=i){const l=n[a],c=n[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-r)*(c-r)),s=l,r=c}return o}class Pi extends zi{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?Gt(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new Pi(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Je(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(so(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ro(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,s))}forEachSegment(t){return oo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,Cn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return ae(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return lr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return cr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=ao(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Pi(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return lo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ns(this.flatCoordinates,0,t,this.stride),this.changed()}}const En=Pi;class Di extends zi{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const h=r[l];l===0&&(s=h.getLayout()),Gt(o,h.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?Gt(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Di(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<Je(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(co(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ho(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,s))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,Rl(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return mn(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new En(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=new En(t.slice(r,l),i);s.push(c),r=l}return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],c=lr(e,i,l,r,.5);Gt(t,c),i=l}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=uo(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new Di(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return fo(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=go(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Tl=Di;class On extends zi{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?Gt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new On(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Je(this.getExtent(),t,e))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const c=mo(t,e,r[a],r[a+1]);if(c<s){s=c;for(let h=0;h<o;++h)i[h]=r[a+h];i.length=o}}return s}getCoordinates(){return ae(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new pn(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,s=[];for(let r=0,o=t.length;r<o;r+=i){const a=new pn(t.slice(r,r+i),e);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let s=0,r=e.length;s<r;s+=i){const o=e[s],a=e[s+1];if(po(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ns(this.flatCoordinates,0,t,this.stride),this.changed()}}const hr=On;function Ll(n,t,e,i){const s=[];let r=Be();for(let o=0,a=e.length;o<a;++o){const l=e[o];r=_o(n,t,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=l[l.length-1]}return s}class Gi extends zi{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let s=this.getLayout();const r=t,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const h=r[l];l===0&&(s=h.getLayout());const u=o.length,d=h.getEnds();for(let f=0,g=d.length;f<g;++f)d[f]+=u;Gt(o,h.getFlatCoordinates()),a.push(d)}e=s,t=o,i=a}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Gt(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,r=e.length;s<r;++s)e[s]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const i=new Gi(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,s){return s<Je(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xo(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yo(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return So(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return wo(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Kn(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,_n(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Ll(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=bo(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new hr(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;vo(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Kn(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Co(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new Gi(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const r=this.endss_[t-1];e=r[r.length-1]}const i=this.endss_[t].slice(),s=i[i.length-1];if(e!==0)for(let r=0,o=i.length;r<o;++r)i[r]-=e;return new xn(this.flatCoordinates.slice(e,s),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(r!==0)for(let u=0,d=l.length;u<d;++u)l[u]-=r;const h=new xn(e.slice(r,c),t,l);s.push(h),r=c}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return Eo(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=Io(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const Ml=Gi;class Bi extends ko{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ti),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Ri(this.geometries_[t],ue.CHANGE,this.changed,this))}clone(){const t=new Bi(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<Je(this.getExtent(),t,e))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(t,e,i,s);return s}containsXY(t,e){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)if(i[s].containsXY(t,e))return!0;return!1}computeExtent(t){Ro(t);const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)To(t,e[i].getExtent());return t}getGeometries(){return _s(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let s=!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(s=!0)}if(s){const r=new Bi(null);return r.setGeometriesArray(e),r}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].rotate(t,e);this.changed()}scale(t,e,i){i||(i=Lo(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(_s(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function _s(n){const t=[];for(let e=0,i=n.length;e<i;++e)t.push(n[e].clone());return t}const Fl=Bi;class Al extends kl{constructor(t){t=t||{},super(),this.dataProjection=At(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=At(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const s=In(i.geometry,e),r=new Cl;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(s),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r}readFeaturesFromObject(t,e){const i=t;let s=null;if(i.type==="FeatureCollection"){const r=t;s=[];const o=r.features;for(let a=0,l=o.length;a<l;++a)s.push(this.readFeatureFromObject(o[a],e))}else s=[this.readFeatureFromObject(t,e)];return s}readGeometryFromObject(t,e){return In(t,e)}readProjectionFromObject(t){const e=t.crs;let i;if(e)if(e.type=="name")i=At(e.properties.name);else if(e.type==="EPSG")i=At("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(i.id=s),!t.hasProperties())return i;const r=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=kn(o,e),delete r[t.getGeometryName()]),Ge(r)||(i.properties=r),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let s=0,r=t.length;s<r;++s)i.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return kn(t,this.adaptOptions(e))}}function In(n,t){if(!n)return null;let e;switch(n.type){case"Point":{e=Pl(n);break}case"LineString":{e=Dl(n);break}case"Polygon":{e=Wl(n);break}case"MultiPoint":{e=Bl(n);break}case"MultiLineString":{e=Gl(n);break}case"MultiPolygon":{e=Nl(n);break}case"GeometryCollection":{e=Ol(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return ar(e,!1,t)}function Ol(n,t){const e=n.geometries.map(function(i){return In(i,t)});return new Fl(e)}function Pl(n){return new pn(n.coordinates)}function Dl(n){return new En(n.coordinates)}function Gl(n){return new Tl(n.coordinates)}function Bl(n){return new hr(n.coordinates)}function Nl(n){return new Ml(n.coordinates)}function Wl(n){return new xn(n.coordinates)}function kn(n,t){n=ar(n,!0,t);const e=n.getType();let i;switch(e){case"Point":{i=$l(n);break}case"LineString":{i=zl(n);break}case"Polygon":{i=Ul(n,t);break}case"MultiPoint":{i=Xl(n);break}case"MultiLineString":{i=Yl(n);break}case"MultiPolygon":{i=Vl(n,t);break}case"GeometryCollection":{i=jl(n,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function jl(n,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return kn(i,t)})}}function zl(n,t){return{type:"LineString",coordinates:n.getCoordinates()}}function Yl(n,t){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Xl(n,t){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Vl(n,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}function $l(n,t){return{type:"Point",coordinates:n.getCoordinates()}}function Ul(n,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}const ur=Al;class Pn{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new Pn({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const Dn=Pn;class Gn{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ne(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Gn({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return X()}getImage(t){return X()}getHitDetectionImage(){return X()}getPixelRatio(t){return 1}getImageState(){return X()}getImageSize(){return X()}getOrigin(){return X()}getSize(){return X()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ne(t)}listenImageChange(t){X()}load(){X()}unlistenImageChange(t){X()}}const dr=Gn;let Le=null;class ql extends Mo{constructor(t,e,i,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=s===void 0?q.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===q.LOADED){Le||(Le=Nt(1,1,void 0,{willReadFrequently:!0})),Le.drawImage(this.image_,0,0);try{Le.getImageData(0,0,1,1),this.tainted_=!1}catch{Le=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ue.CHANGE)}handleImageError_(){this.imageState_=q.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=q.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Nt(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===q.IDLE){this.image_||this.initializeImage_(),this.imageState_=q.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Fo(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==q.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const s=i.getContext("2d");s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=Ao(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=i}}function Hl(n,t,e,i,s){let r=t===void 0?void 0:Zn.get(t,e,s);return r||(r=new ql(n,n instanceof HTMLImageElement?n.src||void 0:t,e,i,s),Zn.set(t,e,s,r)),r}function xs(n,t,e,i){return e!==void 0&&i!==void 0?[e/n,i/t]:e!==void 0?e/n:i!==void 0?i/t:1}class Bn extends dr{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Dt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||H(o)),Dt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Dt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=q.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?q.LOADED:q.IDLE:l=q.LOADING:l=q.LOADED),this.color_=t.color!==void 0?Ws(t.color):null,this.iconImage_=Hl(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let c,h;if(t.size)[c,h]=t.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=t;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(xs(f[0],f[1],t.width,t.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(xs(c,h,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Bn({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==q.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==q.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(ue.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ue.CHANGE,t)}}const fr=Bn;class Nn{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Nn({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const gr=Nn;function yt(n){return Array.isArray(n)?Oo(n):n}class Wn extends dr{constructor(t){const e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new Wn({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,s=Nt(i.size*t,i.size*t);this.draw_(i,s,t),e=s.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return q.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const C=s;s=r,r=C}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),c=Math.sqrt(r*r-l*l),h=s-c,u=Math.sqrt(l*l+h*h),d=u/l;if(t==="miter"&&d<=i)return d*e;const f=e/2/d,g=e/2*(h/u),_=Math.sqrt((s+f)*(s+f)+g*g)-s;if(this.radius2_===void 0||t==="bevel")return _*2;const p=s*Math.sin(a),w=Math.sqrt(s*s-p*p),b=r-w,k=Math.sqrt(p*p+b*b)/p;if(k<=i){const C=k*e/2-r-s;return 2*Math.max(_,C)}return _*2}createRenderOptions(){let t=de,e=fe,i=0,s=null,r=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=We),o=yt(o),a=this.stroke_.getWidth(),a===void 0&&(a=je),s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=fe),t=this.stroke_.getLineCap(),t===void 0&&(t=de),i=this.stroke_.getMiterLimit(),i===void 0&&(i=ze));const l=this.calculateLineJoinSize_(e,a,i),c=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:h,lineCap:t,lineDash:s,lineDashOffset:r,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let s=this.fill_.getColor();s===null&&(s=it),e.fillStyle=yt(s),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=Ws(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){const s=Nt(t.size,t.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(t,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){const l=r+a*o,c=a%2===0?i:s;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=it,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const mr=Wn;class jn extends mr{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new jn({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const pr=jn;class Ui{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=ys,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Ui({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=ys,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Jl(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:(Dt(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[n]),t=function(){return e}}return t}let ln=null;function Kl(n,t){if(!ln){const e=new Dn({color:"rgba(255,255,255,0.4)"}),i=new gr({color:"#3399CC",width:1.25});ln=[new Ui({image:new pr({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return ln}function ys(n){return n.getGeometry()}const ki=Ui,Zl="#333";class zn{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Ne(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Dn({color:Zl}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new zn({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ne(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const Ql=zn;let _e=0;const Z=1<<_e++,G=1<<_e++,ge=1<<_e++,Yn=1<<_e++,ti=1<<_e++,_t=Math.pow(2,_e)-1,_r={[Z]:"boolean",[G]:"number",[ge]:"string",[Yn]:"color",[ti]:"number[]"},tc=Object.keys(_r).map(Number).sort(Li);function Ni(n){const t=[];for(const e of tc)ec(n,e)&&t.push(_r[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function ec(n,t){return(n&t)===t}function xr(n,t){return!!(n&t)}class Ot{constructor(t,e){this.type=t,this.value=e}}class ic{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function yr(){return{variables:new Set,properties:new Set}}function qi(n,t){switch(typeof n){case"boolean":return new Ot(Z,n);case"number":return new Ot(G,n);case"string":return new Ot(ge,n)}if(!Array.isArray(n))throw new Error("Expression must be an array or a primitive value");if(n.length===0)throw new Error("Empty expression");if(typeof n[0]=="string")return ac(n,t);for(const i of n)if(typeof i!="number")throw new Error("Expected an array of numbers");let e=ti;return(n.length===3||n.length===4)&&(e|=Yn),new Ot(e,n)}const S={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},nc={[S.Number]:z(Y(1,1/0,_t),G),[S.String]:z(Y(1,1/0,_t),ge),[S.Get]:z(sc,_t),[S.Var]:z(rc,_t),[S.Resolution]:z(oc,G),[S.Any]:z(Y(2,1/0,Z),Z),[S.All]:z(Y(2,1/0,Z),Z),[S.Not]:z(Y(1,1,Z),Z),[S.Equal]:z(Y(2,2,_t),Z),[S.NotEqual]:z(Y(2,2,_t),Z),[S.GreaterThan]:z(Y(2,2,_t),Z),[S.GreaterThanOrEqualTo]:z(Y(2,2,_t),Z),[S.LessThan]:z(Y(2,2,_t),Z),[S.LessThanOrEqualTo]:z(Y(2,2,_t),Z),[S.Multiply]:z(Y(2,1/0,G),G),[S.Divide]:z(Y(2,2,G),G),[S.Add]:z(Y(2,1/0,G),G),[S.Subtract]:z(Y(2,2,G),G),[S.Clamp]:z(Y(3,3,G),G),[S.Mod]:z(Y(2,2,G),G),[S.Pow]:z(Y(2,2,G),G),[S.Abs]:z(Y(1,1,G),G),[S.Floor]:z(Y(1,1,G),G),[S.Ceil]:z(Y(1,1,G),G),[S.Round]:z(Y(1,1,G),G),[S.Sin]:z(Y(1,1,G),G),[S.Cos]:z(Y(1,1,G),G),[S.Atan]:z(Y(1,2,G),G),[S.Sqrt]:z(Y(1,1,G),G),[S.Match]:z(Y(4,1/0,ge|G),_t)};function sc(n,t){if(n.length!==2)throw new Error("Expected 1 argument for get operation");const e=qi(n[1],t);if(!(e instanceof Ot))throw new Error("Expected a literal argument for get operation");if(typeof e.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(e.value),[e]}function rc(n,t){if(n.length!==2)throw new Error("Expected 1 argument for var operation");const e=qi(n[1],t);if(!(e instanceof Ot))throw new Error("Expected a literal argument for var operation");if(typeof e.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(e.value),[e]}function oc(n,t){const e=n[0];if(n.length!==1)throw new Error(`Expected no arguments for ${e} operation`);return[]}function Y(n,t,e){return function(i,s){const r=i[0],o=i.length-1;if(n===t){if(o!==n){const l=n===1?"":"s";throw new Error(`Expected ${n} argument${l} for operation ${r}, got ${o}`)}}else if(o<n||o>t)throw new Error(`Expected ${n} to ${t} arguments for operation ${r}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const c=qi(i[l+1],s);if(!xr(e,c.type)){const h=Ni(e),u=Ni(c.type);throw new Error(`Unexpected type for argument ${l} of ${r} operation : got ${h} but expected ${u}`)}a[l]=c}return a}}function z(n,t){return function(e,i){const s=e[0],r=n(e,i);return new ic(t,s,...r)}}function ac(n,t){const e=n[0],i=nc[e];if(!i)throw new Error(`Unknown operator: ${e}`);return i(n,t)}function Sr(){return{variables:{},properties:{},resolution:NaN}}function zt(n,t,e){const i=qi(n,e);if(!xr(t,i.type)){const s=Ni(t),r=Ni(i.type);throw new Error(`Expected expression to be of type ${s}, got ${r}`)}return Kt(i)}function Kt(n,t){if(n instanceof Ot)return function(){return n.value};const e=n.operator;switch(e){case S.Number:case S.String:return lc(n);case S.Get:case S.Var:return cc(n);case S.Resolution:return i=>i.resolution;case S.Any:case S.All:case S.Not:return uc(n);case S.Equal:case S.NotEqual:case S.LessThan:case S.LessThanOrEqualTo:case S.GreaterThan:case S.GreaterThanOrEqualTo:return hc(n);case S.Multiply:case S.Divide:case S.Add:case S.Subtract:case S.Clamp:case S.Mod:case S.Pow:case S.Abs:case S.Floor:case S.Ceil:case S.Round:case S.Sin:case S.Cos:case S.Atan:case S.Sqrt:return dc(n);case S.Match:return fc(n);default:throw new Error(`Unsupported operator ${e}`)}}function lc(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Kt(n.args[r]);switch(e){case S.Number:case S.String:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a===e)return a}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function cc(n,t){const e=n.args[0];if(!(e instanceof Ot))throw new Error("Expected literal name");const i=e.value;if(typeof i!="string")throw new Error("Expected string name");switch(n.operator){case S.Get:return s=>s.properties[i];case S.Var:return s=>s.variables[i];default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function hc(n,t){const e=n.operator,i=Kt(n.args[0]),s=Kt(n.args[1]);switch(e){case S.Equal:return r=>i(r)===s(r);case S.NotEqual:return r=>i(r)!==s(r);case S.LessThan:return r=>i(r)<s(r);case S.LessThanOrEqualTo:return r=>i(r)<=s(r);case S.GreaterThan:return r=>i(r)>s(r);case S.GreaterThanOrEqualTo:return r=>i(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${e}`)}}function uc(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Kt(n.args[r]);switch(e){case S.Any:return r=>{for(let o=0;o<i;++o)if(s[o](r))return!0;return!1};case S.All:return r=>{for(let o=0;o<i;++o)if(!s[o](r))return!1;return!0};case S.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${e}`)}}function dc(n,t){const e=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Kt(n.args[r]);switch(e){case S.Multiply:return r=>{let o=1;for(let a=0;a<i;++a)o*=s[a](r);return o};case S.Divide:return r=>s[0](r)/s[1](r);case S.Add:return r=>{let o=0;for(let a=0;a<i;++a)o+=s[a](r);return o};case S.Subtract:return r=>s[0](r)-s[1](r);case S.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case S.Mod:return r=>s[0](r)%s[1](r);case S.Pow:return r=>Math.pow(s[0](r),s[1](r));case S.Abs:return r=>Math.abs(s[0](r));case S.Floor:return r=>Math.floor(s[0](r));case S.Ceil:return r=>Math.ceil(s[0](r));case S.Round:return r=>Math.round(s[0](r));case S.Sin:return r=>Math.sin(s[0](r));case S.Cos:return r=>Math.cos(s[0](r));case S.Atan:return i===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case S.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${e}`)}}function fc(n,t){const e=n.args.length,i=new Array(e);for(let s=0;s<e;++s)i[s]=Kt(n.args[s]);return s=>{const r=i[0](s);for(let o=1;o<e;o+=2)if(r===i[o](s))return i[o+1](s);return i[e-1](s)}}function gc(n){return!0}function mc(n){const t=yr(),e=pc(n,t),i=Sr();return function(s,r){return i.properties=s.getPropertiesInternal(),i.resolution=r,e(i)}}function Ss(n){const t=yr(),e=n.length,i=new Array(e);for(let o=0;o<e;++o)i[o]=Rn(n[o],t);const s=Sr(),r=new Array(e);return function(o,a){s.properties=o.getPropertiesInternal(),s.resolution=a;for(let l=0;l<e;++l)r[l]=i[l](s);return r}}function pc(n,t){const e=n.length,i=new Array(e);for(let s=0;s<e;++s){const r=n[s],o="filter"in r?zt(r.filter,Z,t):gc;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Rn(r.style[c],t)}else a=[Rn(r.style,t)];i[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<e;++a){const l=i[a].filter;if(l(s)&&!(n[a].else&&o)){o=!0;for(const c of i[a].styles){const h=c(s);h&&r.push(h)}}}return r}}function Rn(n,t){const e=Ve(n,"",t),i=$e(n,"",t),s=_c(n,t),r=xc(n,t),o=nt(n,"z-index",t),a=new ki;return function(l){let c=!0;if(e){const h=e(l);h&&(c=!1),a.setFill(h)}if(i){const h=i(l);h&&(c=!1),a.setStroke(h)}if(s){const h=s(l);h&&(c=!1),a.setText(h)}if(r){const h=r(l);h&&(c=!1),a.setImage(h)}return o&&a.setZIndex(o(l)),c?null:a}}function Ve(n,t,e){const i=wr(n,t+"fill-color",e);if(!i)return null;const s=new Dn;return function(r){const o=i(r);return o==="none"?null:(s.setColor(o),s)}}function $e(n,t,e){const i=nt(n,t+"stroke-width",e),s=wr(n,t+"stroke-color",e);if(!i&&!s)return null;const r=Ft(n,t+"stroke-line-cap",e),o=Ft(n,t+"stroke-line-join",e),a=br(n,t+"stroke-line-dash",e),l=nt(n,t+"stroke-line-dash-offset",e),c=nt(n,t+"stroke-miter-limit",e),h=new gr;return function(u){if(s){const d=s(u);if(d==="none")return null;h.setColor(d)}if(i&&h.setWidth(i(u)),r){const d=r(u);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(d)}if(o){const d=o(u);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(d)}return a&&h.setLineDash(a(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function _c(n,t){const e="text-",i=Ft(n,e+"value",t);if(!i)return null;const s=Ve(n,e,t),r=Ve(n,e+"background-",t),o=$e(n,e,t),a=$e(n,e+"background-",t),l=Ft(n,e+"font",t),c=nt(n,e+"max-angle",t),h=nt(n,e+"offset-x",t),u=nt(n,e+"offset-y",t),d=Ue(n,e+"overflow",t),f=Ft(n,e+"placement",t),g=nt(n,e+"repeat",t),m=Hi(n,e+"scale",t),_=Ue(n,e+"rotate-with-view",t),p=nt(n,e+"rotation",t),w=Ft(n,e+"align",t),b=Ft(n,e+"justify",t),I=Ft(n,e+"baseline",t),k=br(n,e+"padding",t),C=new Ql({});return function(T){if(C.setText(i(T)),s&&C.setFill(s(T)),r&&C.setBackgroundFill(r(T)),o&&C.setStroke(o(T)),a&&C.setBackgroundStroke(a(T)),l&&C.setFont(l(T)),c&&C.setMaxAngle(c(T)),h&&C.setOffsetX(h(T)),u&&C.setOffsetY(u(T)),d&&C.setOverflow(d(T)),f){const E=f(T);if(E!=="point"&&E!=="line")throw new Error("Expected point or line for text-placement");C.setPlacement(E)}if(g&&C.setRepeat(g(T)),m&&C.setScale(m(T)),_&&C.setRotateWithView(_(T)),p&&C.setRotation(p(T)),w){const E=w(T);if(E!=="left"&&E!=="center"&&E!=="right"&&E!=="end"&&E!=="start")throw new Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(E)}if(b){const E=b(T);if(E!=="left"&&E!=="right"&&E!=="center")throw new Error("Expected left, right, or center for text-justify");C.setJustify(E)}if(I){const E=I(T);if(E!=="bottom"&&E!=="top"&&E!=="middle"&&E!=="alphabetic"&&E!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(E)}return k&&C.setPadding(k(T)),C}}function xc(n,t){return"icon-src"in n?yc(n,t):"shape-points"in n?Sc(n,t):"circle-radius"in n?wc(n,t):null}function yc(n,t){const e="icon-",i=e+"src",s=vr(n[i],i),r=Wi(n,e+"anchor",t),o=Hi(n,e+"scale",t),a=nt(n,e+"opacity",t),l=Wi(n,e+"displacement",t),c=nt(n,e+"rotation",t),h=Ue(n,e+"rotate-with-view",t),u=ws(n,e+"anchor-origin"),d=bs(n,e+"anchor-x-units"),f=bs(n,e+"anchor-y-units"),g=Ec(n,e+"color"),m=vc(n,e+"cross-origin"),_=Cc(n,e+"offset"),p=ws(n,e+"offset-origin"),w=le(n,e+"width"),b=le(n,e+"height"),I=bc(n,e+"size"),k=Xn(n,e+"declutter"),C=new fr({src:s,anchorOrigin:u,anchorXUnits:d,anchorYUnits:f,color:g,crossOrigin:m,offset:_,offsetOrigin:p,height:b,width:w,size:I,declutterMode:k});return function(T){return a&&C.setOpacity(a(T)),l&&C.setDisplacement(l(T)),c&&C.setRotation(c(T)),h&&C.setRotateWithView(h(T)),o&&C.setScale(o(T)),r&&C.setAnchor(r(T)),C}}function Sc(n,t){const e="shape-",i=e+"points",s=Cr(n[i],i),r=Ve(n,e,t),o=$e(n,e,t),a=Hi(n,e+"scale",t),l=Wi(n,e+"displacement",t),c=nt(n,e+"rotation",t),h=Ue(n,e+"rotate-with-view",t),u=le(n,e+"radius"),d=le(n,e+"radius1"),f=le(n,e+"radius2"),g=le(n,e+"angle"),m=Xn(n,e+"declutter-mode"),_=new mr({points:s,radius:u,radius1:d,radius2:f,angle:g,declutterMode:m});return function(p){return r&&_.setFill(r(p)),o&&_.setStroke(o(p)),l&&_.setDisplacement(l(p)),c&&_.setRotation(c(p)),h&&_.setRotateWithView(h(p)),a&&_.setScale(a(p)),_}}function wc(n,t){const e="circle-",i=Ve(n,e,t),s=$e(n,e,t),r=nt(n,e+"radius",t),o=Hi(n,e+"scale",t),a=Wi(n,e+"displacement",t),l=nt(n,e+"rotation",t),c=Ue(n,e+"rotate-with-view",t),h=Xn(n,e+"declutter-mode"),u=new pr({radius:5,declutterMode:h});return function(d){return r&&u.setRadius(r(d)),i&&u.setFill(i(d)),s&&u.setStroke(s(d)),a&&u.setDisplacement(a(d)),l&&u.setRotation(l(d)),c&&u.setRotateWithView(c(d)),o&&u.setScale(o(d)),u}}function nt(n,t,e){if(!(t in n))return;const i=zt(n[t],G,e);return function(s){return Cr(i(s),t)}}function Ft(n,t,e){if(!(t in n))return null;const i=zt(n[t],ge,e);return function(s){return vr(i(s),t)}}function Ue(n,t,e){if(!(t in n))return null;const i=zt(n[t],Z,e);return function(s){const r=i(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${t}`);return r}}function wr(n,t,e){if(!(t in n))return null;const i=zt(n[t],Yn|ge,e);return function(s){return Er(i(s),t)}}function br(n,t,e){if(!(t in n))return null;const i=zt(n[t],ti,e);return function(s){return ei(i(s),t)}}function Wi(n,t,e){if(!(t in n))return null;const i=zt(n[t],ti,e);return function(s){const r=ei(i(s),t);if(r.length!==2)throw new Error(`Expected two numbers for ${t}`);return r}}function Hi(n,t,e){if(!(t in n))return null;const i=zt(n[t],ti|G,e);return function(s){return Ic(i(s),t)}}function le(n,t){const e=n[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function bc(n,t){const e=n[t];if(e!==void 0){if(typeof e=="number")return Ne(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function vc(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function ws(n,t){const e=n[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function bs(n,t){const e=n[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function Cc(n,t){const e=n[t];if(e!==void 0)return ei(e,t)}function Xn(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function Ec(n,t){const e=n[t];if(e!==void 0)return Er(e,t)}function ei(n,t){if(!Array.isArray(n))throw new Error(`Expected an array for ${t}`);const e=n.length;for(let i=0;i<e;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return n}function vr(n,t){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}function Cr(n,t){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}function Er(n,t){if(typeof n=="string")return n;const e=ei(n,t),i=e.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function Ic(n,t){if(typeof n=="number")return n;const e=ei(n,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}const vs={RENDER_ORDER:"renderOrder"};class kc extends Po{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(vs.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new rr(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(vs.RENDER_ORDER,t)}setStyle(t){this.style_=Rc(t),this.styleFunction_=t===null?void 0:Jl(this.style_),this.changed()}}function Rc(n){if(n===void 0)return Kl;if(!n)return null;if(typeof n=="function"||n instanceof ki)return n;if(!Array.isArray(n))return Ss([n]);if(n.length===0)return[];const t=n.length,e=n[0];if(e instanceof ki){const s=new Array(t);for(let r=0;r<t;++r){const o=n[r];if(!(o instanceof ki))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in e){const s=new Array(t);for(let r=0;r<t;++r){const o=n[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return mc(s)}return Ss(n)}const Tc=kc,ii={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},vi=[ii.FILL],Pt=[ii.STROKE],Ht=[ii.BEGIN_PATH],Cs=[ii.CLOSE_PATH],M=ii;class Lc{drawCustom(t,e,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const Ir=Lc;class Mc extends Ir{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=t.length;a<l;a+=e)s[0]=t[a],s[1]=t[a+1],Do(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,i,s,r,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(e+=s);let h=t[e],u=t[e+1];const d=this.tmpCoordinate_;let f=!0,g,m,_;for(g=e+s;g<i;g+=s)d[0]=t[g],d[1]=t[g+1],_=Go(c,d),_!==m?(f&&(a[l++]=h,a[l++]=u,f=!1),a[l++]=d[0],a[l++]=d[1]):_===Bo.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,h=d[0],u=d[1],m=_;return(r&&f||g===e+s)&&(a[l++]=h,a[l++]=u),l}drawCustomCoordinates_(t,e,i,s,r){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(t,e,l,s,!1,!1);r.push(c),e=l}return e}drawCustom(t,e,i,s){this.beginGeometry(t,e);const r=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,h,u,d;switch(r){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),u=[];const f=t.getEndss();d=0;for(let g=0,m=f.length;g<m;++g){const _=[];d=this.drawCustomCoordinates_(l,d,f[g],o,_),u.push(_)}this.instructions.push([M.CUSTOM,a,u,t,i,_n]),this.hitDetectionInstructions.push([M.CUSTOM,a,u,t,s||i,_n]);break;case"Polygon":case"MultiLineString":h=[],l=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,t.getEnds(),o,h),this.instructions.push([M.CUSTOM,a,h,t,i,mn]),this.hitDetectionInstructions.push([M.CUSTOM,a,h,t,s||i,mn]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([M.CUSTOM,a,c,t,i,ae]),this.hitDetectionInstructions.push([M.CUSTOM,a,c,t,s||i,ae]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([M.CUSTOM,a,c,t,i,ae]),this.hitDetectionInstructions.push([M.CUSTOM,a,c,t,s||i,ae]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([M.CUSTOM,a,c,t,i]),this.hitDetectionInstructions.push([M.CUSTOM,a,c,t,s||i]);break}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[M.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[M.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let s,r,o=-1;for(e=0;e<i;++e)s=t[e],r=s[0],r==M.END_GEOMETRY?o=e:r==M.BEGIN_GEOMETRY&&(s[2]=e,No(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const s=t.getColor();i.fillStyle=yt(s||it)}else i.fillStyle=void 0;if(e){const s=e.getColor();i.strokeStyle=yt(s||We);const r=e.getLineCap();i.lineCap=r!==void 0?r:de;const o=e.getLineDash();i.lineDash=o?o.slice():It;const a=e.getLineDashOffset();i.lineDashOffset=a||kt;const l=e.getLineJoin();i.lineJoin=l!==void 0?l:fe;const c=e.getWidth();i.lineWidth=c!==void 0?c:je;const h=e.getMiterLimit();i.miterLimit=h!==void 0?h:ze,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[M.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[M.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||r!=t.currentLineDash&&!Yi(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[M.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Wo(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Ln(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const ni=Mc;class Fc extends ni{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([M.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([M.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([M.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([M.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const Ac=Fc;class Oc extends ni{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),a=[M.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,It,kt],Ht);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Pt),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,It,kt],Ht);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let h=0,u=o.length;h<u;++h)c=this.drawFlatCoordinates_(a,c,o[h],l);this.hitDetectionInstructions.push(Pt),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Pt),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Pt),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Ht)}}const Pc=Oc;class Dc extends ni{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=i.length;this.instructions.push(Ht),this.hitDetectionInstructions.push(Ht);for(let c=0;c<l;++c){const h=i[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,h,s,!0,!a),f=[M.MOVE_TO_LINE_TO,u,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(Cs),this.hitDetectionInstructions.push(Cs)),e=h}return o&&(this.instructions.push(vi),this.hitDetectionInstructions.push(vi)),a&&(this.instructions.push(Pt),this.hitDetectionInstructions.push(Pt)),e}drawCircle(t,e){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([M.SET_FILL_STYLE,it]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,It,kt]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[M.CIRCLE,l];this.instructions.push(Ht,c),this.hitDetectionInstructions.push(Ht,c),i.fillStyle!==void 0&&(this.instructions.push(vi),this.hitDetectionInstructions.push(vi)),i.strokeStyle!==void 0&&(this.instructions.push(Pt),this.hitDetectionInstructions.push(Pt)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([M.SET_FILL_STYLE,it]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,It,kt]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([M.SET_FILL_STYLE,it]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([M.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,It,kt]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let h=0,u=o.length;h<u;++h)c=this.drawFlatCoordinatess_(a,c,o[h],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=jo(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const Es=Dc;function Gc(n,t,e,i,s){const r=[];let o=e,a=0,l=t.slice(e,2);for(;a<n&&o+s<i;){const[c,h]=l.slice(-2),u=t[o+s],d=t[o+s+1],f=Math.sqrt((u-c)*(u-c)+(d-h)*(d-h));if(a+=f,a>=n){const g=(n-a+f)/f,m=dt(c,u,g),_=dt(h,d,g);l.push(m,_),r.push(l),l=[m,_],a==n&&(o+=s),a=0}else if(a<n)l.push(t[o+s],t[o+s+1]),o+=s;else{const g=f-a,m=dt(c,u,g/f),_=dt(h,d,g/f);l.push(m,_),r.push(l),l=[m,_],a=0,o+=s}}return a>0&&r.push(l),r}function Bc(n,t,e,i,s){let r=e,o=e,a=0,l=0,c=e,h,u,d,f,g,m,_,p,w,b;for(u=e;u<i;u+=s){const I=t[u],k=t[u+1];g!==void 0&&(w=I-g,b=k-m,f=Math.sqrt(w*w+b*b),_!==void 0&&(l+=d,h=Math.acos((_*w+p*b)/(d*f)),h>n&&(l>a&&(a=l,r=c,o=u),l=0,c=u-s)),d=f,_=w,p=b),g=I,m=k}return l+=f,l>a?[c,u]:[r,o]}const ji={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Nc extends ni{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[it]={fillStyle:it},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,h=t.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!Et(this.getBufferedMaxExtent(),t.getExtent()))return;let u;if(c=t.getFlatCoordinates(),l=="LineString")u=[c.length];else if(l=="MultiLineString")u=t.getEnds();else if(l=="Polygon")u=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=t.getEndss();u=[];for(let _=0,p=m.length;_<p;++_)u.push(m[_][0])}this.beginGeometry(t,e);const d=r.repeat,f=d?void 0:r.textAlign;let g=0;for(let m=0,_=u.length;m<_;++m){let p;d?p=Gc(d*this.resolution,c,g,u[m],h):p=[c.slice(g,u[m])];for(let w=0,b=p.length;w<b;++w){const I=p[w];let k=0,C=I.length;if(f==null){const E=Bc(r.maxAngle,I,0,I.length,2);k=E[0],C=E[1]}for(let E=k;E<C;E+=h)o.push(I[E],I[E+1]);const T=o.length;g=u[m],this.drawChars_(a,T),a=T}}this.endGeometry(e)}else{let u=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),h=2;break;case"Polygon":c=t.getFlatInteriorPoint(),r.overflow||u.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const p=t.getFlatInteriorPoints();c=[];for(let w=0,b=p.length;w<b;w+=3)r.overflow||u.push(p[w+2]/this.resolution),c.push(p[w],p[w+1]);if(c.length===0)return;h=2;break}const d=this.appendFlatPointCoordinates(c,h);if(d===a)return;if(u&&(d-a)/2!==c.length/h){let p=a/2;u=u.filter((w,b)=>{const I=o[(p+b)*2]===c[b*h]&&o[(p+b)*2+1]===c[b*h+1];return I||--p,I})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let f=r.padding;if(f!=qt&&(r.scale[0]<0||r.scale[1]<0)){let p=r.padding[0],w=r.padding[1],b=r.padding[2],I=r.padding[3];r.scale[0]<0&&(w=-w,I=-I),r.scale[1]<0&&(p=-p,b=-b),f=[p,w,b,I]}const g=this.pixelRatio;this.instructions.push([M.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==qt?qt:f.map(function(p){return p*g}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);const m=1/g,_=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=it,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([M.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,f,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?it:this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),r.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||Ye,justify:e.justify,textBaseline:e.textBaseline||Mi,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=ji[s.textBaseline],h=this.textOffsetY_*l,u=this.text_,d=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([M.DRAW_CHARS,t,e,c,s.overflow,a,s.maxAngle,l,h,r,d*l,u,o,1]),this.hitDetectionInstructions.push([M.DRAW_CHARS,t,e,c,s.overflow,a&&it,s.maxAngle,l,h,r,d*l,u,o,1/l])}setTextStyle(t,e){let i,s,r;if(!t)this.text_="";else{const o=t.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=yt(o.getColor()||it)):(s=null,this.textFillState_=s);const a=t.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),p=a.getMiterLimit();r.lineCap=a.getLineCap()||de,r.lineDash=g?g.slice():It,r.lineDashOffset=m===void 0?kt:m,r.lineJoin=a.getLineJoin()||fe,r.lineWidth=_===void 0?je:_,r.miterLimit=p===void 0?ze:p,r.strokeStyle=yt(a.getColor()||We)}i=this.textState_;const l=t.getFont()||js;zo(l);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Mi,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||qt,i.scale=c===void 0?[1,1]:c;const h=t.getOffsetX(),u=t.getOffsetY(),d=t.getRotateWithView(),f=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:H(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+H(s.fillStyle):""}this.declutterImageWithText_=e}}const Wc={Circle:Es,Default:ni,Image:Ac,LineString:Pc,Polygon:Es,Text:Nc};class jc{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const r=i[s].finish();t[e][s]=r}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let r=s[e];if(r===void 0){const o=Wc[e];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=r}return r}}const Is=jc;function zc(n,t,e,i,s,r,o,a,l,c,h,u){let d=n[t],f=n[t+1],g=0,m=0,_=0,p=0;function w(){g=d,m=f,t+=i,d=n[t],f=n[t+1],p+=_,_=Math.sqrt((d-g)*(d-g)+(f-m)*(f-m))}do w();while(t<e-i&&p+_<r);let b=_===0?0:(r-p)/_;const I=dt(g,d,b),k=dt(m,f,b),C=t-i,T=p,E=r+a*l(c,s,h);for(;t<e-i&&p+_<E;)w();b=_===0?0:(E-p)/_;const D=dt(g,d,b),F=dt(m,f,b);let $;if(u){const P=[I,k,D,F];Yo(P,0,4,2,u,P,P),$=P[0]>P[2]}else $=I>D;const j=Math.PI,W=[],J=C+i===t;t=C,_=0,p=T,d=n[t],f=n[t+1];let L;if(J){w(),L=Math.atan2(f-m,d-g),$&&(L+=L>0?-j:j);const P=(D+I)/2,A=(F+k)/2;return W[0]=[P,A,(E-r)/2,L,s],W}s=s.replace(/\n/g," ");for(let P=0,A=s.length;P<A;){w();let N=Math.atan2(f-m,d-g);if($&&(N+=N>0?-j:j),L!==void 0){let Q=N-L;if(Q+=Q>j?-2*j:Q<-j?2*j:0,Math.abs(Q)>o)return null}L=N;const V=P;let B=0;for(;P<A;++P){const Q=$?A-P-1:P,U=a*l(c,s[Q],h);if(t+i<e&&p+_<r+B+U/2)break;B+=U}if(P===V)continue;const at=$?s.substring(A-V,A-P):s.substring(V,P);b=_===0?0:(r+B/2-p)/_;const v=dt(g,d,b),xe=dt(m,f,b);W.push([v,xe,B/2,N,at]),r+=B}return W}const se=Be(),Lt=[],vt=[],Ct=[],Mt=[];function ks(n){return n[3].declutterBox}const Rs=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function cn(n,t){return t==="start"?t=Rs.test(n)?"right":"left":t==="end"&&(t=Rs.test(n)?"left":"right"),ji[t]}function Yc(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}class Xc{constructor(t,e,i,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=Fi(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,s){const r=t+e+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],u=Array.isArray(t),d=l.justify?ji[l.justify]:cn(Array.isArray(t)?t[0]:t,l.textAlign||Ye),f=s&&o.lineWidth?o.lineWidth:0,g=u?t:t.split(`
`).reduce(Yc,[]),{width:m,height:_,widths:p,heights:w,lineWidths:b}=Xo(l,g),I=m+f,k=[],C=(I+2)*h[0],T=(_+f)*h[1],E={width:C<0?Math.floor(C):Math.ceil(C),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:k};(h[0]!=1||h[1]!=1)&&k.push("scale",h),s&&(k.push("strokeStyle",o.strokeStyle),k.push("lineWidth",f),k.push("lineCap",o.lineCap),k.push("lineJoin",o.lineJoin),k.push("miterLimit",o.miterLimit),k.push("setLineDash",[o.lineDash]),k.push("lineDashOffset",o.lineDashOffset)),i&&k.push("fillStyle",a.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const D=.5-d;let F=d*I+D*f;const $=[],j=[];let W=0,J=0,L=0,P=0,A;for(let N=0,V=g.length;N<V;N+=2){const B=g[N];if(B===`
`){J+=W,W=0,F=d*I+D*f,++P;continue}const at=g[N+1]||l.font;at!==A&&(s&&$.push("font",at),i&&j.push("font",at),A=at),W=Math.max(W,w[L]);const v=[B,F+D*p[L]+d*(p[L]-b[P]),.5*(f+W)+J];F+=p[L],s&&$.push("strokeText",v),i&&j.push("fillText",v),++L}return Array.prototype.push.apply(k,$),Array.prototype.push.apply(k,j),this.labels_[r]=E,E}replayTextBackground_(t,e,i,s,r,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,r,o,a,l,c,h,u,d,f,g,m,_){a*=d[0],l*=d[1];let p=i-a,w=s-l;const b=r+c>t?t-c:r,I=o+h>e?e-h:o,k=g[3]+b*d[0]+g[1],C=g[0]+I*d[1]+g[2],T=p-g[3],E=w-g[0];(m||u!==0)&&(Lt[0]=T,Mt[0]=T,Lt[1]=E,vt[1]=E,vt[0]=T+k,Ct[0]=vt[0],Ct[1]=E+C,Mt[1]=Ct[1]);let D;return u!==0?(D=Mn(Fi(),i,s,1,1,u,-i,-s),re(D,Lt),re(D,vt),re(D,Ct),re(D,Mt),gn(Math.min(Lt[0],vt[0],Ct[0],Mt[0]),Math.min(Lt[1],vt[1],Ct[1],Mt[1]),Math.max(Lt[0],vt[0],Ct[0],Mt[0]),Math.max(Lt[1],vt[1],Ct[1],Mt[1]),se)):gn(Math.min(T,T+k),Math.min(E,E+C),Math.max(T,T+k),Math.max(E,E+C),se),f&&(p=Math.round(p),w=Math.round(w)),{drawImageX:p,drawImageY:w,drawImageW:b,drawImageH:I,originX:c,originY:h,declutterBox:{minX:se[0],minY:se[1],maxX:se[2],maxY:se[3],value:_},canvasTransform:D,scale:d}}replayImageOrLabel_(t,e,i,s,r,o,a){const l=!!(o||a),c=s.declutterBox,h=t.canvas,u=a?a[2]*s.scale[0]/2:0;return c.minX-u<=h.width/e&&c.maxX+u>=0&&c.minY-u<=h.height/e&&c.maxY+u>=0&&(l&&this.replayTextBackground_(t,Lt,vt,Ct,Mt,o,a),Vo(t,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){const e=re(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const r=this.textStates[e],o=this.createLabel(t,e,s,i),a=this.strokeStates[i],l=this.pixelRatio,c=cn(Array.isArray(t)?t[0]:t,r.textAlign||Ye),h=ji[r.textBaseline||Mi],u=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*r.scale[0],f=c*d+2*(.5-c)*u,g=h*o.height/l+2*(.5-h)*u;return{label:o,anchorX:f,anchorY:g}}execute_(t,e,i,s,r,o,a,l){let c;this.pixelCoordinates_&&Yi(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Pe(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),$o(this.renderedTransform_,i));let h=0;const u=s.length;let d=0,f,g,m,_,p,w,b,I,k,C,T,E,D=0,F=0,$=null,j=null;const W=this.coordinateCache_,J=this.viewRotation_,L=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:J},A=this.instructions!=s||this.overlaps?0:200;let N,V,B,at;for(;h<u;){const v=s[h];switch(v[0]){case M.BEGIN_GEOMETRY:N=v[1],at=v[3],N.getGeometry()?a!==void 0&&!Et(a,at.getExtent())?h=v[2]+1:++h:h=v[2];break;case M.BEGIN_PATH:D>A&&(this.fill_(t),D=0),F>A&&(t.stroke(),F=0),!D&&!F&&(t.beginPath(),_=NaN,p=NaN),++h;break;case M.CIRCLE:d=v[1];const Q=c[d],U=c[d+1],ye=c[d+2],Se=c[d+3],we=ye-Q,ri=Se-U,be=Math.sqrt(we*we+ri*ri);t.moveTo(Q+be,U),t.arc(Q,U,be,0,2*Math.PI,!0),++h;break;case M.CLOSE_PATH:t.closePath(),++h;break;case M.CUSTOM:d=v[1],f=v[2];const oi=v[3],ai=v[4],li=v.length==6?v[5]:void 0;P.geometry=oi,P.feature=N,h in W||(W[h]=[]);const tt=W[h];li?li(c,d,f,2,tt):(tt[0]=c[d],tt[1]=c[d+1],tt.length=2),ai(tt,P),++h;break;case M.DRAW_IMAGE:d=v[1],f=v[2],I=v[3],g=v[4],m=v[5];let lt=v[6];const ci=v[7],hi=v[8],ve=v[9],Ce=v[10];let Zt=v[11];const ui=v[12];let Yt=v[13];const Ee=v[14],Rt=v[15];if(!I&&v.length>=20){k=v[19],C=v[20],T=v[21],E=v[22];const st=this.drawLabelWithPointPlacement_(k,C,T,E);I=st.label,v[3]=I;const ee=v[23];g=(st.anchorX-ee)*this.pixelRatio,v[4]=g;const ht=v[24];m=(st.anchorY-ht)*this.pixelRatio,v[5]=m,lt=I.height,v[6]=lt,Yt=I.width,v[13]=Yt}let Ie;v.length>25&&(Ie=v[25]);let ke,Qt,te;v.length>17?(ke=v[16],Qt=v[17],te=v[18]):(ke=qt,Qt=!1,te=!1),Ce&&L?Zt+=J:!Ce&&!L&&(Zt-=J);let Ji=0;for(;d<f;d+=2){if(Ie&&Ie[Ji++]<Yt/this.pixelRatio)continue;const st=this.calculateImageOrLabelDimensions_(I.width,I.height,c[d],c[d+1],Yt,lt,g,m,hi,ve,Zt,ui,r,ke,Qt||te,N),ee=[t,e,I,st,ci,Qt?$:null,te?j:null];if(l){if(Ee==="none")continue;if(Ee==="obstacle"){l.insert(st.declutterBox);continue}else{let ht,wt;if(Rt){const rt=f-d;if(!Rt[rt]){Rt[rt]=ee;continue}if(ht=Rt[rt],delete Rt[rt],wt=ks(ht),l.collides(wt))continue}if(l.collides(st.declutterBox))continue;ht&&(l.insert(wt),this.replayImageOrLabel_.apply(this,ht)),l.insert(st.declutterBox)}}this.replayImageOrLabel_.apply(this,ee)}++h;break;case M.DRAW_CHARS:const di=v[1],Ki=v[2],R=v[3],O=v[4];E=v[5];const Xt=v[6],K=v[7],ct=v[8];T=v[9];const Vt=v[10];k=v[11],C=v[12];const fi=[v[13],v[13]],Re=this.textStates[C],$t=Re.font,St=[Re.scale[0]*K,Re.scale[1]*K];let gt;$t in this.widths_?gt=this.widths_[$t]:(gt={},this.widths_[$t]=gt);const qn=cr(c,di,Ki,2),Hn=Math.abs(St[0])*Qn($t,k,gt);if(O||Hn<=qn){const st=this.textStates[C].textAlign,ee=(qn-Hn)*cn(k,st),ht=zc(c,di,Ki,2,k,ee,Xt,Math.abs(St[0]),Qn,$t,gt,L?0:this.viewRotation_);t:if(ht){const wt=[];let rt,gi,mi,et,ut;if(T)for(rt=0,gi=ht.length;rt<gi;++rt){ut=ht[rt],mi=ut[4],et=this.createLabel(mi,C,"",T),g=ut[2]+(St[0]<0?-Vt:Vt),m=R*et.height+(.5-R)*2*Vt*St[1]/St[0]-ct;const bt=this.calculateImageOrLabelDimensions_(et.width,et.height,ut[0],ut[1],et.width,et.height,g,m,0,0,ut[3],fi,!1,qt,!1,N);if(l&&l.collides(bt.declutterBox))break t;wt.push([t,e,et,bt,1,null,null])}if(E)for(rt=0,gi=ht.length;rt<gi;++rt){ut=ht[rt],mi=ut[4],et=this.createLabel(mi,C,E,""),g=ut[2],m=R*et.height-ct;const bt=this.calculateImageOrLabelDimensions_(et.width,et.height,ut[0],ut[1],et.width,et.height,g,m,0,0,ut[3],fi,!1,qt,!1,N);if(l&&l.collides(bt.declutterBox))break t;wt.push([t,e,et,bt,1,null,null])}l&&l.load(wt.map(ks));for(let bt=0,Pr=wt.length;bt<Pr;++bt)this.replayImageOrLabel_.apply(this,wt[bt])}}++h;break;case M.END_GEOMETRY:if(o!==void 0){N=v[1];const st=o(N,at);if(st)return st}++h;break;case M.FILL:A?D++:this.fill_(t),++h;break;case M.MOVE_TO_LINE_TO:for(d=v[1],f=v[2],V=c[d],B=c[d+1],w=V+.5|0,b=B+.5|0,(w!==_||b!==p)&&(t.moveTo(V,B),_=w,p=b),d+=2;d<f;d+=2)V=c[d],B=c[d+1],w=V+.5|0,b=B+.5|0,(d==f-2||w!==_||b!==p)&&(t.lineTo(V,B),_=w,p=b);++h;break;case M.SET_FILL_STYLE:$=v,this.alignFill_=v[2],D&&(this.fill_(t),D=0,F&&(t.stroke(),F=0)),t.fillStyle=v[1],++h;break;case M.SET_STROKE_STYLE:j=v,F&&(t.stroke(),F=0),this.setStrokeStyle_(t,v),++h;break;case M.STROKE:A?F++:t.stroke(),++h;break;default:++h;break}}D&&this.fill_(t),F&&t.stroke()}execute(t,e,i,s,r,o){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,i,s,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,s,r)}}const Vc=Xc,hn=["Polygon","Circle","LineString","Image","Text","Default"];class $c{constructor(t,e,i,s,r,o){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Fi(),this.createExecutors_(r)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];i===void 0&&(i={},this.executorsByZIndex_[e]=i);const s=t[e];for(const r in s){const o=s[r];i[r]=new Vc(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let s=0,r=t.length;s<r;++s)if(t[s]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,r,o){s=Math.round(s);const a=s*2+1,l=Mn(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Nt(a,a,void 0,{willReadFrequently:!0}));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=Be(),Uo(u,t),Ln(u,e*(this.renderBuffer_+s),u));const d=Uc(s);let f;function g(k,C){const T=h.getImageData(0,0,a,a).data;for(let E=0,D=d.length;E<D;E++)if(T[d[E]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(k)){const F=(d[E]-3)/4,$=s-F%a,j=s-(F/a|0),W=r(k,C,$*$+j*j);if(W)return W}h.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Li);let _,p,w,b,I;for(_=m.length-1;_>=0;--_){const k=m[_].toString();for(w=this.executorsByZIndex_[k],p=hn.length-1;p>=0;--p)if(f=hn[p],b=w[f],b!==void 0&&(I=b.executeHitDetection(h,l,i,g,u),I))return I}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],r=e[2],o=e[3],a=[i,s,i,o,r,o,r,s];return Pe(a,0,8,2,t,a),a}isEmpty(){return Ge(this.executorsByZIndex_)}execute(t,e,i,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Li),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||hn;let c,h,u,d,f,g;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const m=l[c].toString();for(f=this.executorsByZIndex_[m],u=0,d=o.length;u<d;++u){const _=o[u];g=f[_],g!==void 0&&g.execute(t,e,i,s,r,a)}}this.maxExtent_&&t.restore()}}const un={};function Uc(n){if(un[n]!==void 0)return un[n];const t=n*2+1,e=n*n,i=new Array(e+1);for(let r=0;r<=n;++r)for(let o=0;o<=n;++o){const a=r*r+o*o;if(a>e)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+r)*t+(n+o))*4+3),r>0&&l.push(((n-r)*t+(n+o))*4+3),o>0&&(l.push(((n+r)*t+(n-o))*4+3),r>0&&l.push(((n-r)*t+(n-o))*4+3))}const s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return un[n]=s,s}const Ts=$c;class qc extends Ir{constructor(t,e,i,s,r,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?qo(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Fi()}drawImages_(t,e,i,s){if(!this.image_)return;const r=Pe(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,u=r.length;h<u;h+=2){const d=r[h]-this.imageAnchorX_,f=r[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,m=f+this.imageAnchorY_;Mn(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Pe(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=s){const l=r[e]+this.textOffsetX_,c=r[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(t,e,i,s,r){const o=this.context_,a=Pe(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return r&&o.closePath(),i}drawRings_(t,e,i,s){for(let r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Et(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=Ho(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Et(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Et(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=t.getFlatCoordinates();let r=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Et(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Et(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=r.length;a<l;++a){const c=r[a];s=this.drawRings_(i,s,c,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),Yi(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:Ye;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:yt(i||it)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),s=e.getLineCap(),r=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),h=r||It;this.strokeState_={lineCap:s!==void 0?s:de,lineDash:this.pixelRatio_===1?h:h.map(u=>u*this.pixelRatio_),lineDashOffset:(o||kt)*this.pixelRatio_,lineJoin:a!==void 0?a:fe,lineWidth:(l!==void 0?l:je)*this.pixelRatio_,miterLimit:c!==void 0?c:ze,strokeStyle:yt(i||We)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const f=e.getColor();this.textFillState_={fillStyle:yt(f||it)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const f=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),_=i.getLineDashOffset(),p=i.getLineJoin(),w=i.getWidth(),b=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:de,lineDash:m||It,lineDashOffset:_||kt,lineJoin:p!==void 0?p:fe,lineWidth:w!==void 0?w:je,miterLimit:b!==void 0?b:ze,strokeStyle:yt(f||We)}}const s=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),h=t.getText(),u=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:s!==void 0?s:js,textAlign:u!==void 0?u:Ye,textBaseline:d!==void 0?d:Mi},this.text_=h!==void 0?Array.isArray(h)?h.reduce((f,g,m)=>f+=m%2?" ":g,""):h:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const Hc=qc,xt=.5;function Jc(n,t,e,i,s,r,o){const a=n[0]*xt,l=n[1]*xt,c=Nt(a,l);c.imageSmoothingEnabled=!1;const h=c.canvas,u=new Hc(c,xt,s,null,o),d=e.length,f=Math.floor((256*256*256-1)/d),g={};for(let _=1;_<=d;++_){const p=e[_-1],w=p.getStyleFunction()||i;if(!w)continue;let b=w(p,r);if(!b)continue;Array.isArray(b)||(b=[b]);const k=(_*f).toString(16).padStart(7,"#00000");for(let C=0,T=b.length;C<T;++C){const E=b[C],D=E.getGeometryFunction()(p);if(!D||!Et(s,D.getExtent()))continue;const F=E.clone(),$=F.getFill();$&&$.setColor(k);const j=F.getStroke();j&&(j.setColor(k),j.setLineDash(null)),F.setText(void 0);const W=E.getImage();if(W){const A=W.getImageSize();if(!A)continue;const N=Nt(A[0],A[1],void 0,{alpha:!1}),V=N.canvas;N.fillStyle=k,N.fillRect(0,0,V.width,V.height),F.setImage(new fr({img:V,anchor:W.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:W.getOrigin(),opacity:1,size:W.getSize(),scale:W.getScale(),rotation:W.getRotation(),rotateWithView:W.getRotateWithView()}))}const J=F.getZIndex()||0;let L=g[J];L||(L={},g[J]=L,L.Polygon=[],L.Circle=[],L.LineString=[],L.Point=[]);const P=D.getType();if(P==="GeometryCollection"){const A=D.getGeometriesArrayRecursive();for(let N=0,V=A.length;N<V;++N){const B=A[N];L[B.getType().replace("Multi","")].push(B,F)}}else L[P.replace("Multi","")].push(D,F)}}const m=Object.keys(g).map(Number).sort(Li);for(let _=0,p=m.length;_<p;++_){const w=g[m[_]];for(const b in w){const I=w[b];for(let k=0,C=I.length;k<C;k+=2){u.setStyle(I[k+1]);for(let T=0,E=t.length;T<E;++T)u.setTransform(t[T]),u.drawGeometry(I[k])}}}return c.getImageData(0,0,h.width,h.height)}function Kc(n,t,e){const i=[];if(e){const s=Math.floor(Math.round(n[0])*xt),r=Math.floor(Math.round(n[1])*xt),o=(ts(s,0,e.width-1)+ts(r,0,e.height-1)*e.width)*4,a=e.data[o],l=e.data[o+1],h=e.data[o+2]+256*(l+256*a),u=Math.floor((256*256*256-1)/t.length);h&&h%u===0&&i.push(t[h/u-1])}return i}const Zc=.5,kr={Point:ah,LineString:sh,Polygon:ch,MultiPoint:lh,MultiLineString:rh,MultiPolygon:oh,GeometryCollection:nh,Circle:eh};function Qc(n,t){return parseInt(H(n),10)-parseInt(H(t),10)}function th(n,t){const e=Tn(n,t);return e*e}function Tn(n,t){return Zc*n/t}function eh(n,t,e,i,s){const r=e.getFill(),o=e.getStroke();if(r||o){const l=n.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(t,i)}const a=e.getText();if(a&&a.getText()){const l=(s||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Ls(n,t,e,i,s,r,o){let a=!1;const l=e.getImage();if(l){const c=l.getImageState();c==q.LOADED||c==q.ERROR?l.unlistenImageChange(s):(c==q.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return ih(n,t,e,i,r,o),a}function ih(n,t,e,i,s,r){const o=e.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,s);if(e.getRenderer())Rr(n,a,e,t);else{const c=kr[a.getType()];c(n,a,e,t,r)}}function Rr(n,t,e,i){if(t.getType()=="GeometryCollection"){const r=t.getGeometries();for(let o=0,a=r.length;o<a;++o)Rr(n,r[o],e,i);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function nh(n,t,e,i,s){const r=t.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const l=kr[r[o].getType()];l(n,r[o],e,i,s)}}function sh(n,t,e,i,s){const r=e.getStroke();if(r){const a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(t,i)}const o=e.getText();if(o&&o.getText()){const a=(s||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function rh(n,t,e,i,s){const r=e.getStroke();if(r){const a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(t,i)}const o=e.getText();if(o&&o.getText()){const a=(s||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function oh(n,t,e,i,s){const r=e.getFill(),o=e.getStroke();if(o||r){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const l=(s||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function ah(n,t,e,i,s){const r=e.getImage(),o=e.getText();let a;if(r){if(r.getImageState()!=q.LOADED)return;let l=n;if(s){const h=r.getDeclutterMode();if(h!=="none")if(l=s,h==="obstacle"){const u=n.getBuilder(e.getZIndex(),"Image");u.setImageStyle(r,a),u.drawPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(e.getZIndex(),"Image");c.setImageStyle(r,a),c.drawPoint(t,i)}if(o&&o.getText()){let l=n;s&&(l=s);const c=l.getBuilder(e.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function lh(n,t,e,i,s){const r=e.getImage(),o=e.getText();let a;if(r){if(r.getImageState()!=q.LOADED)return;let l=n;if(s){const h=r.getDeclutterMode();if(h!=="none")if(l=s,h==="obstacle"){const u=n.getBuilder(e.getZIndex(),"Image");u.setImageStyle(r,a),u.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(e.getZIndex(),"Image");c.setImageStyle(r,a),c.drawMultiPoint(t,i)}if(o&&o.getText()){let l=n;s&&(l=s);const c=l.getBuilder(e.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(t,i)}}function ch(n,t,e,i,s){const r=e.getFill(),o=e.getStroke();if(r||o){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const l=(s||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}class hh extends Jo{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Be(),this.wrappedRenderedExtent_=Be(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const s=e.extent,r=e.viewState,o=r.center,a=r.resolution,l=r.projection,c=r.rotation,h=l.getExtent(),u=this.getLayer().getSource(),d=e.pixelRatio,f=e.viewHints,g=!(f[pi.ANIMATING]||f[pi.INTERACTING]),m=this.compositionContext_,_=Math.round(e.size[0]*d),p=Math.round(e.size[1]*d),w=u.getWrapX()&&l.canWrapX(),b=w?_i(h):null,I=w?Math.ceil((s[2]-h[2])/b)+1:1;let k=w?Math.floor((s[0]-h[0])/b):0;do{const C=this.getRenderTransform(o,a,c,d,_,p,k*b);t.execute(m,1,C,c,g,void 0,i)}while(++k<I)}setupCompositionContext_(){if(this.opacity_!==1){const t=Nt(this.context.canvas.width,this.context.canvas.height,es);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Ko(this.compositionContext_),es.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];Zo(this.pixelTransform,1/i,1/i),Qo(this.inversePixelTransform,this.pixelTransform);const r=ta(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let h=l&&!l.isEmpty()||c&&!c.isEmpty();if(!h&&!(this.getLayer().hasListener(is.PRERENDER)||this.getLayer().hasListener(is.POSTRENDER)))return null;const u=Math.round(t.size[0]*i),d=Math.round(t.size[1]*i);a.width!=u||a.height!=d?(a.width=u,a.height=d,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,u,d),this.preRender(o,t);const f=t.viewState;f.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let g=!1;if(h&&s.extent&&this.clipping){const m=ea(s.extent);h=Et(m,t.extent),g=h&&!Fe(m,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,m)}return h&&this.renderWorlds(l,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];re(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],u=i[0]*xt,d=i[1]*xt;h.push(this.getRenderTransform(s,r,o,xt,u,d,0).slice());const f=c.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Fe(g,l)){let m=l[0];const _=_i(g);let p=0,w;for(;m<g[0];)--p,w=_*p,h.push(this.getRenderTransform(s,r,o,xt,u,d,w).slice()),m+=_;for(p=0,m=l[2];m>g[2];)++p,w=_*p,h.push(this.getRenderTransform(s,r,o,xt,u,d,w).slice()),m-=_}this.hitDetectionImageData_=Jc(i,h,this.renderedFeatures_,c.getStyleFunction(),l,r,o)}e(Kc(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,s,r){if(!this.replayGroup_)return;const o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),c={},h=function(f,g,m){const _=H(f),p=c[_];if(p){if(p!==!0&&m<p.distanceSq){if(m===0)return c[_]=!0,r.splice(r.lastIndexOf(p),1),s(f,l,g);p.geometry=g,p.distanceSq=m}}else{if(m===0)return c[_]=!0,s(f,l,g);r.push(c[_]={feature:f,layer:l,geometry:g,distanceSq:m,callback:s})}};let u;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(f=>u=f.forEachFeatureAtCoordinate(t,o,a,i,h,f===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(g=>g.value):null)),u}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const s=t.viewHints[pi.ANIMATING],r=t.viewHints[pi.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,h=c.projection,u=c.resolution,d=t.pixelRatio,f=e.getRevision(),g=e.getRenderBuffer();let m=e.getRenderOrder();m===void 0&&(m=Qc);const _=c.center.slice(),p=Ln(l,g*u),w=p.slice(),b=[p.slice()],I=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!Fe(I,t.extent)){const L=_i(I),P=Math.max(_i(p)/2,L);p[0]=I[0]-P,p[2]=I[2]+P,ia(_,h);const A=na(b[0],h);A[0]<I[0]&&A[2]<I[2]?b.push([A[0]+L,A[1],A[2]+L,A[3]]):A[0]>I[0]&&A[2]>I[2]&&b.push([A[0]-L,A[1],A[2]-L,A[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&Fe(this.wrappedRenderedExtent_,p))return Yi(this.renderedExtent_,w)||(this.hitDetectionImageData_=null,this.renderedExtent_=w),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const k=new Is(Tn(u,d),p,u,d);let C;this.getLayer().getDeclutter()&&(C=new Is(Tn(u,d),p,u,d));let T;for(let L=0,P=b.length;L<P;++L)i.loadFeatures(b[L],u,h);const E=th(u,d);let D=!0;const F=L=>{let P;const A=L.getStyleFunction()||e.getStyleFunction();if(A&&(P=A(L,u)),P){const N=this.renderFeature(L,E,P,k,T,C);D=D&&!N}},$=sa(p),j=i.getFeaturesInExtent($);m&&j.sort(m);for(let L=0,P=j.length;L<P;++L)F(j[L]);this.renderedFeatures_=j,this.ready=D;const W=k.finish(),J=new Ts(p,u,d,i.getOverlaps(),W,e.getRenderBuffer());return C&&(this.declutterExecutorGroup=new Ts(p,u,d,i.getOverlaps(),C.finish(),e.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedExtent_=w,this.wrappedRenderedExtent_=p,this.renderedCenter_=_,this.renderedProjection_=h,this.replayGroup_=J,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=Ls(s,t,i[l],e,this.boundHandleStyleImageChange_,r,o)||a;else a=Ls(s,t,i,e,this.boundHandleStyleImageChange_,r,o);return a}}const uh=hh;class dh extends Tc{constructor(t){super(t)}createRenderer(){return new uh(this)}}const Tr=dh,ot="main";class fh{mapId=ot;async getMapConfig(){return{initialView:{kind:"position",center:{x:404747,y:5757920},zoom:14},projection:"EPSG:25832",layers:[{title:"Haltestellen Stadt Rostock",visible:!0,layer:gh()},{title:"Kindertagesstätten",visible:!0,layer:mh()},{id:"topplus_open",title:"TopPlus Open",isBaseLayer:!0,visible:!0,layer:dn("web")},{id:"topplus_open_grau",title:"TopPlus Open (Grau)",isBaseLayer:!0,visible:!1,layer:dn("web_grau")},{id:"topplus_open_light",title:"TopPlus Open (Light)",isBaseLayer:!0,visible:!1,layer:dn("web_light")},{title:"OSM",visible:!1,isBaseLayer:!0,layer:new zs({source:new ra})}]}}}function dn(n){const t=[-380316598427299e-8,880590808284866e-8],e=[4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.874056570353,76.4370282851763,38.2185141425881,19.1092570712941,9.55462853564703,4.77731426782352,2.38865713391176,1.19432856695588,.59716428347794],i=new Array(e.length);for(let r=0;r<e.length;r++)i[r]=r;const s=new oa({url:`https://sgx.geodatenzentrum.de/wmts_topplus_open/tile/1.0.0/${n}/{Style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png`,layer:"web_grau",matrixSet:"EU_EPSG_25832_TOPPLUS",format:"image/png",projection:"EPSG:25832",requestEncoding:"REST",tileGrid:new aa({origin:t,resolutions:e,matrixIds:i}),style:"default",attributions:`Kartendarstellung und Präsentationsgraphiken: © Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html" target="_blank">Datenquellen</a>`});return new zs({source:s})}function gh(){const n=new or({url:"https://geo.sv.rostock.de/download/opendata/haltestellen/haltestellen.json",format:new ur,attributions:"Haltestellen Stadt Rostock, Creative Commons CC Zero License (cc-zero)"});return new Tr({source:n})}function mh(){const n=new or({url:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json&limit=10000",format:new ur,attributions:'&copy; <a href="http://www.bkg.bund.de" target="_blank">Bundesamt f&uuml;r Kartographie und Geod&auml;sie</a> 2017, <a href="http://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf" target="_blank">Datenquellen</a>'});return new Tr({source:n})}class ph{constructor({properties:t}){const e=t.logLevel;console.debug("Log Service created with log level",e)}destroy(){console.debug("Log Service destroyed")}log(t){console.info("LOG: "+t)}}const _h={"ol-map":{name:"ol-map",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:fh,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{}}},ui:{references:[{name:"map-sample-logging.LogService",qualifier:void 0,all:!1},{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:la,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/coordinate-viewer":{name:"@open-pioneer/coordinate-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-viewer":{name:"@open-pioneer/scale-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"map-sample-logging":{name:"map-sample-logging",services:{LogService:{name:"LogService",clazz:ph,provides:[{name:"map-sample-logging.LogService",qualifier:void 0}],references:{}}},ui:{references:[]},properties:{logLevel:{value:"INFO",required:!1}}},"map-sample-scale-component":{name:"map-sample-scale-component",services:{},ui:{references:[]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/experimental-layout-sidebar":{name:"@open-pioneer/experimental-layout-sidebar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/experimental-ol-layer-control":{name:"@open-pioneer/experimental-ol-layer-control",services:{},ui:{references:[]},properties:{}},"@open-pioneer/initial-extent":{name:"@open-pioneer/initial-extent",services:{},ui:{references:[]},properties:{}},"@open-pioneer/zoom":{name:"@open-pioneer/zoom",services:{},ui:{references:[]},properties:{}},"@open-pioneer/test-utils":{name:"@open-pioneer/test-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-test-utils":{name:"@open-pioneer/map-test-utils",services:{},ui:{references:[]},properties:{}}},xh=`.layout-sidebar{z-index:99}:root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:none}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.scale-wrapper .ol-scale-line{position:relative;bottom:0;left:0;background:none}.scale-wrapper .ol-scale-line .ol-scale-line-inner{color:var(--chakra-white);border-color:var(--chakra-white)}.layout-sidebar{height:100%;position:absolute;top:0}.layout-sidebar[data-theme=light]{background-color:var(--chakra-colors-whiteAlpha-700)}.layout-sidebar[data-theme=dark]{background-color:var(--chakra-colors-blackAlpha-700)}.layout-sidebar .layout-sidebar-main{transition:width .3s ease-out 0s;border-right:1px solid var(--chakra-colors-chakra-border-color)}.layout-sidebar .layout-sidebar-content{overflow:auto;transition:width .3s ease-out 0s}.layout-sidebar .layout-sidebar-content .content-section .content-header{font-size:1.5em;background-color:var(--chakra-colors-blackAlpha-500);padding:.5rem 1rem}.layout-sidebar .layout-sidebar-content .content-section .content-body{padding:1rem}
`,yh=["en","de"];function Sh(n){switch(n){case"en":return ns(()=>import("./f9f99d7adba2.js"),[],import.meta.url).then(t=>t.default);case"de":return ns(()=>import("./026a0817ffb8.js"),[],import.meta.url).then(t=>t.default)}throw new Error(`Unsupported locale: '${n}'`)}const wh=Xr(xh),bh=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:Sh,locales:yh,packages:_h,styles:wh},Symbol.toStringTag,{value:"Module"})),vh=25.4/.28,Ch=39.37;function Vn(n){return $n(n,Eh,Ih)}function Eh(n){return n.getView()}function Ih(n,t){return n.on("change:view",t)}function Lr(n){return Vn(n)?.getProjection()}function kh(n){const t=Vn(n);return $n(t,Rh,Th)}function Rh(n){return n.getResolution()}function Th(n,t){return n.on("change:resolution",t)}function Lh(n){const t=Vn(n);return $n(t,Mh,Fh)}function Mh(n){return n.getCenter()}function Fh(n,t){return n.on("change:center",t)}function Ah(n){const t=Lh(n),e=kh(n),i=Lr(n);return y.useMemo(()=>{if(i==null||e==null||t==null)return;const r=yn(i,e,t);return Math.round(r*Ch*vh)},[i,e,t])}function $n(n,t,e){const i=y.useCallback(()=>n?t(n):void 0,[n,t]),s=y.useCallback(r=>{if(!n)return()=>{};const o=e(n,r);return()=>Fn(o)},[n,e]);return y.useSyncExternalStore(s,i)}var Oh=function(n){return(n+1)%1e6};function Ph(){var n=y.useReducer(Oh,0),t=n[1];return t}function Dh(n,t){t===void 0&&(t=0);var e=y.useRef(!1),i=y.useRef(),s=y.useRef(n),r=y.useCallback(function(){return e.current},[]),o=y.useCallback(function(){e.current=!1,i.current&&clearTimeout(i.current),i.current=setTimeout(function(){e.current=!0,s.current()},t)},[t]),a=y.useCallback(function(){e.current=null,i.current&&clearTimeout(i.current)},[]);return y.useEffect(function(){s.current=n},[n]),y.useEffect(function(){return o(),a},[t]),[r,a,o]}function Gh(n){n===void 0&&(n=0);var t=Ph();return Dh(t,n)}const Bh="@open-pioneer/coordinate-viewer",Nh=Wt.bind(void 0,Bh),Wh=4,jh=n=>{const{mapId:t,precision:e}=n,{containerProps:i}=Ke("coordinate-viewer",n),{map:s}=jt(t),r=s?.olMap,{coordinates:o}=Yh(r),a=zh(o,e),l=Lr(r)?.getCode()??"",c=a?a+" "+l:"";return x.jsx(ft,{...i,children:x.jsx(He,{className:"coordinate-viewer-text",children:c})})};function zh(n,t){const e=Nh();return n?Xh(n,t,e):""}function Yh(n){const[t,e]=y.useState();return y.useEffect(()=>{if(!n)return;const i=n.on("pointermove",s=>{e(s.coordinate)});return()=>Fn(i)},[n]),{coordinates:t}}function Xh(n,t,e){if(n[0]==null||n[1]==null)return"";const i=t??Wh,[s,r]=n,o=e.formatNumber(s,{maximumFractionDigits:i,minimumFractionDigits:i}),a=e.formatNumber(r,{maximumFractionDigits:i,minimumFractionDigits:i});return o+" "+a}var Vh=Vs({displayName:"ArrowLeftIcon",path:x.jsxs("g",{fill:"currentColor",children:[x.jsx("path",{d:"M10.416,12a2.643,2.643,0,0,1,.775-1.875L20.732.584a1.768,1.768,0,0,1,2.5,2.5l-8.739,8.739a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5l-9.541-9.541A2.643,2.643,0,0,1,10.416,12Z"}),x.jsx("path",{d:"M.25,12a2.643,2.643,0,0,1,.775-1.875L10.566.584a1.768,1.768,0,0,1,2.5,2.5L4.327,11.823a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5L1.025,13.875A2.643,2.643,0,0,1,.25,12Z"})]})}),$h=Vs({displayName:"ArrowRightIcon",path:x.jsxs("g",{fill:"currentColor",children:[x.jsx("path",{d:"M13.584,12a2.643,2.643,0,0,1-.775,1.875L3.268,23.416a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L.768,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,13.584,12Z"}),x.jsx("path",{d:"M23.75,12a2.643,2.643,0,0,1-.775,1.875l-9.541,9.541a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L10.934,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,23.75,12Z"})]})});const Uh="@open-pioneer/experimental-layout-sidebar",qh=Wt.bind(void 0,Uh),Ms=60,Fs=180,As=300;function Hh({defaultExpanded:n,expandedChanged:t,sidebarWidthChanged:e,items:i}){const s=qh(),[r,{toggle:o}]=Jh(i),{isOpen:a,onToggle:l}=us({defaultIsOpen:n,onOpen(){t?.(!0)},onClose(){t?.(!1)}}),{isOpen:c,onToggle:h}=us(),u=r.size>0;y.useEffect(()=>{u&&!c&&h(),!u&&c&&h()},[u]),y.useEffect(()=>{if(e){let m=Ms;a&&(m=Fs),c&&(m+=As),e(m)}},[a,c]);const d=i?.map((m,_)=>{const p="white",w=r.has(m.id)?"outline":"ghost";return x.jsx("div",{children:a?x.jsx(qe,{leftIcon:m.icon,variant:w,colorScheme:p,onClick:()=>o(m),children:m.label},m.id):x.jsx(De,{hasArrow:!0,label:m.label,placement:"right",children:x.jsx(bn,{"aria-label":m.label,variant:w,colorScheme:p,icon:m.icon,onClick:()=>o(m)})},m.id)},_)}),f=i?.filter(m=>r.has(m.id)).map(m=>x.jsxs("div",{className:"content-section",children:[x.jsxs(Ut,{className:"content-header",alignItems:"center",children:[x.jsx(ft,{children:m.label}),x.jsx(vn,{}),x.jsx(Vr,{onClick:()=>o(m)})]}),x.jsx("div",{className:"content-body",children:m.content})]},m.id)),g=s.formatMessage({id:a?"toggle.collapse":"toggle.expand"});return x.jsxs(Ut,{className:"layout-sidebar",children:[x.jsxs(ft,{className:"layout-sidebar-main",display:"flex",flexDirection:"column",width:a?`${Fs}px`:`${Ms}px`,padding:"10px",gap:"10px",children:[d,x.jsx(vn,{}),x.jsx(De,{label:g,hasArrow:!0,placement:"right",children:x.jsx(bn,{"aria-label":g,variant:"ghost",icon:a?x.jsx(Vh,{}):x.jsx($h,{}),onClick:l})})]}),x.jsx(ft,{className:"layout-sidebar-content",width:c?`${As}px`:"0px",children:f})]})}function Jh(n){const[t,e]=y.useReducer((s,r)=>{switch(r.type){case"toggle":{const o=new Set(s);return o.has(r.id)?o.delete(r.id):o.add(r.id),o}case"retain":{const o=new Set(r.ids),a=new Set(s);for(const l of a)o.has(l)||a.delete(l);return a}}},void 0,()=>new Set),i=y.useCallback(s=>{e({type:"toggle",id:s.id})},[e]);return y.useEffect(()=>{e({type:"retain",ids:n?.map(s=>s.id)??[]})},[n,e]),[t,{toggle:i}]}const Kh="@open-pioneer/experimental-ol-layer-control",Un=Wt.bind(void 0,Kh);function Zh(n){const t=Un(),e=jt(n.mapId),[i]=Gh(100),s=e.kind!=="loading"||i()||!1;let r;switch(e.kind){case"loading":r=x.jsx("div",{children:t.formatMessage({id:"loading"})});break;case"rejected":r=x.jsxs("div",{children:[t.formatMessage({id:"error"})," ",e.error.message]});break;case"resolved":r=x.jsx(Qh,{map:e.map,...n});break}return x.jsx(Js,{className:"layer-control",in:s,children:r})}function Qh(n){const{map:t,showOpacitySlider:e}=n,i=iu(t);return x.jsx("div",{className:"layer-list",children:i.map((s,r)=>x.jsxs("div",{className:"layer-entry",children:[x.jsx(tu,{layer:s}),e&&x.jsx(eu,{layer:s})]},r))})}function tu(n){const{layer:t}=n,e=Un(),i=nu(t),s=ru(t)||e.formatMessage({id:"undefined-layer-title"}),r=()=>{t.setVisible(!i)};return x.jsx($s,{className:"layer-select",size:"lg",isChecked:i,onChange:r,children:s})}function eu(n){const{layer:t}=n,e=Un(),s=su(t)*100,r=e.formatNumber(s,{maximumFractionDigits:2})+"%",[o,a]=y.useState(!1);return x.jsxs(tr,{id:"slider",value:s,min:0,max:100,colorScheme:"teal",onChange:l=>t.olLayer.setOpacity(l/100),onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[x.jsx(ir,{children:x.jsx(nr,{})}),x.jsx(De,{hasArrow:!0,bg:"teal.500",color:"white",placement:"top",isOpen:o,label:r,children:x.jsx(er,{bg:"teal.500"})})]})}function iu(n){const t=y.useRef(),e=y.useCallback(s=>{const r=n.layers.on("changed",()=>{t.current=void 0,s()});return()=>r.destroy()},[n]),i=y.useCallback(()=>t.current??=n.layers.getAllLayers().reverse(),[n]);return y.useSyncExternalStore(e,i)}function nu(n){const t=y.useCallback(i=>{const s=n.on("changed:visible",i);return()=>s.destroy()},[n]),e=y.useCallback(()=>n.visible,[n]);return y.useSyncExternalStore(t,e)}function su(n){const t=y.useCallback(i=>{const s=n.olLayer.on("change:opacity",i);return()=>Fn(s)},[n]),e=y.useCallback(()=>n.olLayer.getOpacity(),[n]);return y.useSyncExternalStore(t,e)}function ru(n){const t=y.useCallback(i=>{const s=n.on("changed:title",i);return()=>s.destroy()},[n]),e=y.useCallback(()=>n.title,[n]);return y.useSyncExternalStore(t,e)}const ou="@open-pioneer/initial-extent",au=Wt.bind(void 0,ou);var Mr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Os=Jt.createContext&&Jt.createContext(Mr),Bt=globalThis&&globalThis.__assign||function(){return Bt=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Bt.apply(this,arguments)},lu=globalThis&&globalThis.__rest||function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};function Fr(n){return n&&n.map(function(t,e){return Jt.createElement(t.tag,Bt({key:e},t.attr),Fr(t.child))})}function si(n){return function(t){return Jt.createElement(cu,Bt({attr:Bt({},n.attr)},t),Fr(n.child))}}function cu(n){var t=function(e){var i=n.attr,s=n.size,r=n.title,o=lu(n,["attr","size","title"]),a=s||e.size||"1em",l;return e.className&&(l=e.className),n.className&&(l=(l?l+" ":"")+n.className),Jt.createElement("svg",Bt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,o,{className:l,style:Bt(Bt({color:n.color||e.color},e.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),r&&Jt.createElement("title",null,r),n.children)};return Os!==void 0?Jt.createElement(Os.Consumer,null,function(e){return t(e)}):t(Mr)}function hu(n){return si({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}},{tag:"polyline",attr:{points:"7.5 4.21 12 6.81 16.5 4.21"}},{tag:"polyline",attr:{points:"7.5 19.79 7.5 14.6 3 12"}},{tag:"polyline",attr:{points:"21 12 16.5 14.6 16.5 19.79"}},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"}},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"}}]})(n)}function uu(n){return si({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(n)}function du(n){return si({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"}},{tag:"polyline",attr:{points:"2 17 12 22 22 17"}},{tag:"polyline",attr:{points:"2 12 12 17 22 12"}}]})(n)}function fu(n){return si({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(n)}function gu(n){return si({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(n)}const mu=y.forwardRef(function(t,e){const{mapId:i}=t,{containerProps:s}=Ke("initial-extent",t),{map:r}=jt(i),o=au();function a(){const l=r?.initialExtent,c=r?.olMap;if(l&&c){const h=[l.xMin,l.yMin,l.xMax,l.yMax];c.getView().fit(h,{duration:200})}}return x.jsx(De,{label:o.formatMessage({id:"title"}),placement:"auto",openDelay:500,children:x.jsx(qe,{className:"initial-extent-button",ref:e,"aria-label":o.formatMessage({id:"title"}),leftIcon:x.jsx(uu,{}),onClick:a,iconSpacing:0,padding:0,...s})})}),pu="@open-pioneer/scale-viewer",_u=Wt.bind(void 0,pu),xu=n=>{const{mapId:t}=n,{containerProps:e}=Ke("scale-viewer",n),{map:i}=jt(t),s=_u(),r=Ah(i?.olMap),o=r?s.formatNumber(r):void 0;return x.jsx(ft,{...e,children:o&&x.jsxs(He,{children:["1:",o]})})},yu="@open-pioneer/toc",Ar=Wt.bind(void 0,yu);function Su(n){const{map:t,"aria-labelledby":e}=n,i=Ar(),r=Cu(t).map(o=>x.jsx(wu,{layer:o},o.id));return r.length?x.jsx(ca,{as:"ol",className:"toc-layer-list",listStyleType:"none","aria-labelledby":e,children:r}):x.jsx(He,{className:"toc-missing-layers","aria-labelledby":e,children:i.formatMessage({id:"missingLayers"})})}function wu(n){const{layer:t}=n,e=bu(t),{isVisible:i,setVisible:s}=vu(t);return x.jsx(ha,{className:Xs("toc-layer-list-entry",`layer-${Iu(t.id)}`),children:x.jsx($s,{isChecked:i,onChange:r=>s(r.target.checked),children:e})})}function bu(n){const t=y.useCallback(()=>n.title,[n]),e=y.useCallback(i=>{const s=n.on("changed:title",i);return()=>s.destroy()},[n]);return y.useSyncExternalStore(e,t)}function vu(n){const t=y.useCallback(()=>n.visible,[n]),e=y.useCallback(r=>{const o=n.on("changed:visible",r);return()=>o.destroy()},[n]),i=y.useSyncExternalStore(e,t),s=y.useCallback(r=>{n.setVisible(r)},[n]);return{isVisible:i,setVisible:s}}function Cu(n){const t=y.useRef(),e=y.useCallback(s=>{t.current=void 0;const r=n.layers.on("changed",()=>{t.current=void 0,s()});return()=>r.destroy()},[n]),i=y.useCallback(()=>{if(t.current)return t.current;let s=n?.layers.getOperationalLayers({sortByDisplayOrder:!0})??[];return s=s.reverse().filter(Eu),t.current=s},[n]);return y.useSyncExternalStore(e,i)}function Eu(n){return!(n.olLayer instanceof ua)}function Iu(n){return n.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}const Ci=2,ku=n=>{const t=Ar(),{mapId:e,showBasemapSwitcher:i=!0,basemapSwitcherProps:s}=n,{containerProps:r}=Ke("toc",n),o=y.useId(),a=y.useId(),l=jt(e);let c;switch(l.kind){case"loading":c=null;break;case"rejected":c=x.jsx(He,{className:"toc-error",children:t.formatMessage({id:"error"})});break;case"resolved":{const h=i&&x.jsx(ft,{className:"toc-basemap-switcher",padding:Ci,children:x.jsx(Ai,{title:x.jsx(Oi,{id:o,size:"sm",mb:Ci,children:t.formatMessage({id:"basemapsLabel"})}),children:x.jsx(Ys,{mapId:e,"aria-labelledby":o,...s})})}),u=x.jsx(ft,{className:"toc-operational-layers",padding:Ci,children:x.jsx(Ai,{title:x.jsx(Oi,{id:a,size:"sm",mb:Ci,children:t.formatMessage({id:"operationalLayerLabel"})}),children:x.jsx(Su,{map:l.map,"aria-labelledby":a})})});c=x.jsxs(x.Fragment,{children:[h,u]});break}}return x.jsx(ft,{...r,children:c})},Ru="@open-pioneer/zoom",Tu=Wt.bind(void 0,Ru),Lu=y.forwardRef(function(t,e){return x.jsx(Or,{zoomDirection:"in",ref:e,...t})}),Mu=y.forwardRef(function(t,e){return x.jsx(Or,{zoomDirection:"out",ref:e,...t})}),Or=y.forwardRef(function(t,e){const{mapId:i,zoomDirection:s}=t,{map:r}=jt(i),o=Tu(),{defaultClassName:a,buttonLabel:l,buttonIcon:c}=Fu(o,s),{containerProps:h}=Ke(Xs("zoom",a),t);function u(){const d=r?.olMap.getView();let f=d?.getZoom();d&&f!==void 0&&(s==="in"?++f:--f,d.animate({zoom:f,duration:200}))}return x.jsx(De,{label:l,placement:"auto",openDelay:500,children:x.jsx(qe,{ref:e,"aria-label":l,leftIcon:c,onClick:u,iconSpacing:0,padding:0,...h})})});function Fu(n,t){switch(t){case"in":return{defaultClassName:"zoom-in",buttonLabel:n.formatMessage({id:"zoom-in.title"}),buttonIcon:x.jsx(gu,{})};case"out":return{defaultClassName:"zoom-out",buttonLabel:n.formatMessage({id:"zoom-out.title"}),buttonIcon:x.jsx(fu,{})}}}const fn="units",Au=[1,2,5],Me=25.4/.28;class Ou extends da{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const i=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+fa,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(fn,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(fn)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(fn,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=t.center,i=t.projection,s=this.getUnits(),r=s=="degrees"?"degrees":"m";let o=yn(i,t.resolution,e,r);const a=this.minWidth_*(this.dpi_||Me)/Me,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Me)/Me:void 0;let c=a*o,h="";if(s=="degrees"){const b=ga.degrees;c*=b,c<b/60?(h="″",o*=3600):c<b?(h="′",o*=60):h="°"}else if(s=="imperial")c<.9144?(h="in",o/=.0254):c<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344);else if(s=="nautical")o/=1852,h="NM";else if(s=="metric")c<.001?(h="μm",o*=1e6):c<1?(h="mm",o*=1e3):c<1e3?h="m":(h="km",o/=1e3);else if(s=="us")c<.9144?(h="in",o*=39.37):c<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472);else throw new Error("Invalid units");let u=3*Math.floor(Math.log(a*o)/Math.log(10)),d,f,g,m,_,p;for(;;){g=Math.floor(u/3);const b=Math.pow(10,g);if(d=Au[(u%3+3)%3]*b,f=Math.round(d/o),isNaN(f)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&f>=l){d=m,f=_,g=p;break}else if(f>=a)break;m=d,_=f,p=g,++u}const w=this.scaleBar_?this.createScaleBar(f,d,h):d.toFixed(g<0?-g:0)+" "+h;this.renderedHTML_!=w&&(this.innerElement_.innerHTML=w,this.renderedHTML_=w),this.renderedWidth_!=f&&(this.innerElement_.style.width=f+"px",this.renderedWidth_=f),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){const s=this.getScaleForResolution(),r=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),o=this.scaleBarSteps_,a=t/o,l=[this.createMarker("absolute")];for(let h=0;h<o;++h){const u=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${u}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(h%2===0||o===2?this.createStepText(h,t,!1,e,i):"")+"</div>")}return l.push(this.createStepText(o,t,!0,e,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,e,i,s,r){const a=(t===0?0:Math.round(s/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+r),l=t===0?-3:e/this.scaleBarSteps_*-1,c=t===0?0:e/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${t===0?"left":"center"};min-width: ${c}px;left: ${i?e+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const t=yn(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),e=this.dpi_||Me,i=1e3/25.4;return t*i*e}render(t){const e=t.frameState;e?this.viewState_=e.viewState:this.viewState_=null,this.updateElement_()}}const Pu=Ou;function Ps(n){const{mapId:t,...e}=n,i=y.useRef(null),{map:s}=jt(t);return y.useEffect(()=>{if(i.current&&s){const r=s.olMap,o=new Pu({units:"metric",target:i.current});return r.addControl(o),()=>{r.removeControl(o)}}},[s]),x.jsx("div",{className:"scale-wrapper",ref:i,...e})}const Du="ol-map",Gu=Wt.bind(void 0,Du),Bu=[796987,5827477,796987,5827477];function Nu(){const[n,t]=y.useState(),[e,i]=y.useState(!0),s=jt(ot),r=()=>{const l=s.map?.olMap;l&&l?.getView().fit(Bu,{maxZoom:13})},o=Gu(),a=[{id:"map-content",icon:x.jsx(du,{}),label:"Karteninhalt",content:x.jsx(Zh,{mapId:ot,showOpacitySlider:!0})},{id:"sandbox",icon:x.jsx(hu,{}),label:"Sandbox",content:x.jsx(qe,{onClick:r,children:"Center Berlin"})}];return x.jsx(Ut,{height:"100%",direction:"column",overflow:"hidden",children:x.jsxs(Ai,{title:x.jsx(ft,{textAlign:"center",py:1,px:1,children:x.jsx(Oi,{size:"md",children:"Open Pioneer - Map sample"})}),children:[x.jsxs(Ut,{flex:"1",direction:"column",position:"relative",children:[x.jsx(Hh,{defaultExpanded:e,expandedChanged:l=>i(l),sidebarWidthChanged:l=>t({left:l}),items:a}),x.jsxs(ma,{mapId:ot,viewPadding:n,viewPaddingChangeBehavior:"preserve-extent",children:[x.jsxs(Qi,{position:"top-left",horizontalGap:10,verticalGap:10,children:[x.jsx(ft,{backgroundColor:"whiteAlpha.800",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",children:x.jsxs($r,{children:[x.jsx(Ur,{ps:1,children:x.jsx(He,{as:"b",children:o.formatMessage({id:"basemapLabel"})})}),x.jsx(Ys,{allowSelectingEmptyBasemap:!0,mapId:ot})]})}),x.jsx(Ai,{title:x.jsx(ft,{marginTop:10,className:"toc-header",padding:2,backgroundColor:"blackAlpha.500",children:x.jsx(Oi,{size:"md",children:o.formatMessage({id:"tocTitle"})})}),children:x.jsx(ft,{backgroundColor:"whiteAlpha.800",children:x.jsx(ku,{mapId:ot,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})})]}),x.jsx(Qi,{position:"bottom-right",horizontalGap:10,verticalGap:30,children:x.jsxs(Ut,{direction:"column",gap:1,padding:1,children:[x.jsx(mu,{mapId:ot}),x.jsx(Lu,{mapId:ot}),x.jsx(Mu,{mapId:ot})]})}),x.jsx(Qi,{position:"top-right",children:x.jsxs(Ut,{gap:3,alignItems:"center",justifyContent:"center",padding:4,boxShadow:"lg",backgroundColor:"whiteAlpha.800",children:[x.jsx(xu,{mapId:ot}),x.jsx(Ps,{mapId:ot})]})})]})]}),x.jsxs(Ut,{gap:3,alignItems:"center",justifyContent:"center",children:[x.jsx(jh,{mapId:ot,precision:2}),x.jsx(Ps,{mapId:ot})]})]})})}const Wu=qr({component:Nu,appMetadata:bh,async resolveConfig(n){const t=n.getAttribute("forced-locale");if(t)return{locale:t}}});customElements.define("ol-map-app",Wu);const ju=document.getElementsByTagName("body")[0];zu();function zu(){const n=window.location.search,e=new URLSearchParams(n).get("lang"),i=document.createElement("ol-map-app");i.classList.add("full-height"),i.setAttribute("id","test"),e&&i.setAttribute("forced-locale",e),ju.appendChild(i)}
