import{aU as m,aY as g,bc as _,cn as u}from"./c0d2fbcdd7fa.js";function d(s,e){const i=[];Object.keys(e).forEach(function(t){e[t]!==null&&e[t]!==void 0&&i.push(t+"="+encodeURIComponent(e[t]))});const r=i.join("&");return s=s.replace(/[?&]$/,""),s+=s.includes("?")?"&":"?",s+r}class f extends m{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}const b=f;class x extends g{constructor(e){const i=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid;let t=e.urls;t===void 0&&e.url!==void 0&&(t=_(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:t,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=i,this.setKey(this.getKeyForDimensions_()),t&&t.length>0&&(this.tileUrlFunction=u(t.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const i=e.join(`
`);this.setTileUrlFunction(u(e.map(this.createFromWMTSTemplate.bind(this))),i)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const i in this.dimensions_)e.push(i+"-"+this.dimensions_[i]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const i=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=i=="KVP"?d(e,r):e.replace(/\{(\w+?)\}/g,function(n,l){return l.toLowerCase()in r?r[l.toLowerCase()]:n});const t=this.tileGrid,o=this.dimensions_;return function(n,l,T){if(!n)return;const c={TileMatrix:t.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]};Object.assign(c,o);let a=e;return i=="KVP"?a=d(a,c):a=a.replace(/\{(\w+?)\}/g,function(y,h){return c[h]}),a}}}const F=x;export{F as W,d as a,b};
