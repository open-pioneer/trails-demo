import{i as io,a as oo,v as ao,b as so,j as K,e as lo}from"./cf33be65345b.js";import{t as uo}from"./5432d2d56a8b.js";import{V as At,aw as ni,ax as ii,ay as pe,az as co,aA as po,aB as q,aC as fo,aD as ho,aE as qe,aF as oi,aG as dt,ak as mo,aH as bn,aI as yo,i as De,aJ as vn,m as go,aK as xo,_ as bo,aL as vo,al as ai,aM as si,aN as rr,aO as wo,aP as To,aQ as ko,aR as nr,aS as wn,aT as Tn,aU as zo,aV as Fo,aW as Eo,aX as Ft,aY as Co,aZ as li,a_ as jr,a$ as So,b0 as Ro,b1 as Io,E as Tr,b2 as $r,b3 as Mo,b4 as _o,b5 as Po,b6 as Ao,b7 as Lo,J as $e,H as Do,b8 as jo,b9 as $o,ba as Oo,bb as kr,bc as qo,x as No,q as Go,b as zr,B as Vo,bd as jt,ar as Uo,be as ui,ab as Bo,bf as Zo,bg as Wo,bh as Xo,bi as Ho,a6 as pt,a5 as We,bj as Jo,bk as Ko,a3 as Se,bl as kn,a4 as ci,bm as Yo,bn as zn,a as ut,T as Qo,O as ea,$ as ta,au as ra,av as ir}from"./0fda7ba7cdd5.js";import{a as Fn,S as En}from"./8b95035cb26e.js";import{G as Fr,F as na,b as ia,M as oa,a as aa,t as sa,T as la}from"./335cf3877c84.js";import{L as ua}from"./b71904d9ceb4.js";import{_ as Cn}from"./adb0df4d3ebc.js";import{I as ca,Z as pa,a as da}from"./19f409eab374.js";import{u as fa}from"./cf67f9467b2c.js";import{F as or}from"./835c70ad42b1.js";import{B as Sn}from"./10024935a2fe.js";import{V as ha}from"./629976bbf63c.js";import{T as ar}from"./d9f7581a22b6.js";import"./960f2965a833.js";import"./78815b3d2f82.js";import"./5dd51dea0129.js";import"./acfb93d51b62.js";import"./da307b269916.js";import"./7f5ae809743c.js";import"./857afe2dbb57.js";import"./750385679da7.js";import"./79b99c1ce4a2.js";import"./56b80cace6fd.js";import"./5a3671a01ff3.js";const ma="next";function ya(t,e,r){const n=new URL(t),i=n.searchParams;return i.set("bbox",e.join(",")),i.set("bbox-crs",r),i.set("crs",r),i.set("f","json"),n}function ga(t,e,r){const n=new URL(t),i=n.searchParams;return i.set("offset",e.toString()),i.set("limit",r.toString()),n.toString()}function pi(t){if(!Array.isArray(t))return;const r=t.filter(n=>n.rel===ma);if(r.length===1)return r[0]?.href}async function di(t,e,r){let n=[];const o=await fetch(t,{headers:{Accept:"application/geo+json"},signal:r});if(o.status!==200)throw new Error(`Failed to query features from service (status code ${o.status})`);const a=await o.json();e&&(n=e.readFeatures(a));const s=pi(a.links);return{features:n,numberMatched:a.numberMatched,nextURL:s}}async function xa(t){const e={supportsOffsetStrategy:!1},r=new URL(t);r.searchParams.set("limit","1"),r.searchParams.set("f","json");const n=await fetch(r.toString(),{headers:{Accept:"application/geo+json"}});if(n.status!==200)throw new Error(`Failed to probe collection information (status code ${n.status})`);const i=await n.json(),o=pi(i.links);if(!o)return e;const s=new URL(o).searchParams.has("offset");return e.supportsOffsetStrategy=s,e}async function ba(t){const{fullURL:e,featureFormat:r,signal:n,addFeatures:i,queryFeatures:o}=t,a=t.limit,s=t.maxConcurrentRequests;let l=0,u=e;const c=[];let p;for(;u;){let d;p==null?d=s:d=Math.ceil((p-l)/a),d=Math.max(1,Math.min(d,s));const f=[];for(let g=0;g<d;++g)f.push(ga(e,l,a)),l+=a;const h=await fi(f,r,n,i,o);c.push(...h.features),u=h.nextURL,h.numberMatched!=null&&(p=h.numberMatched)}return c}const Ue=oo("ogc-features:OgcFeatureSourceFactory"),va=5e3,wa=6;function Rn(t){return Ta(t,void 0,void 0,void 0)}function Ta(t,e,r,n){const i=`${t.baseUrl}/collections/${t.collectionId}/items?`,o=new At({format:new Fr,strategy:ni,attributions:t.attributions,...t.additionalOptions}),a=e??di,s=n??xa,l=r||function(d){Ue.debug(`Adding ${d.length} features`),o.addFeatures(d)};let u,c;const p=async(d,f,h,g,m)=>{c??=s(i);let I;try{I=await c}catch(k){Ue.error("Failed to retrieve collection information",k),m?.(),c=void 0;return}u?.abort("Extent changed"),u=new AbortController;const F=ya(i,d,t.crs),R=I?.supportsOffsetStrategy?"offset":"next";try{const k=await ka(R,{fullURL:F.toString(),featureFormat:o.getFormat(),queryFeatures:a,addFeatures:l,limit:t.limit??va,maxConcurrentRequests:t.maxConcurrentRequests??wa,signal:u.signal,collectionInfos:I});g?.(k),Ue.debug("Finished loading features for extent:",d)}catch(k){io(k)?(Ue.debug("Query-Feature-Request aborted",k),o.removeLoadedExtent(d),m?.()):Ue.error("Failed to load features",k)}};return o.setLoader(p),o}function ka(t,e){switch(t){case"next":return za(e);case"offset":return ba(e)}}async function za(t){const e=t.limit;let r=new URL(t.fullURL);r.searchParams.set("limit",e.toString());let n=[];do{const i=await fi([r.toString()],t.featureFormat,t.signal,t.addFeatures,t.queryFeatures);if(n=n.concat(i.features),!i.nextURL)break;r=new URL(i.nextURL)}while(1);return n}async function fi(t,e,r,n,i=di){const o={nextURL:void 0,numberMatched:void 0,features:[]},a=t.map(async(s,l)=>{const u=l===t.length-1,c=await i(s,e,r);n(c.features),Ue.debug(`NextURL for index = ${l} (isLast = ${u}): ${c.nextURL||"No Next URL"}`),o.features.push(...c.features),u&&(o.numberMatched=c.numberMatched,o.nextURL=c.nextURL)});return await Promise.all(a),o}const In=[];class Fa extends ii{constructor(e,r,n,i){super(e,r,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.wrappedTileCoord=n}getContext(e){const r=pe(e);return r in this.context_||(this.context_[r]=co(1,1,In)),this.context_[r]}hasContext(e){return pe(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const r=pe(e);return r in this.replayState_||(this.replayState_[r]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[r]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const r=this.context_[e];po(r),In.push(r.canvas),delete this.context_[e]}super.release()}}const Ea=Fa;let Ca=class extends ii{constructor(e,r,n,i,o,a){super(e,r,a),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=n,this.key=n}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==q.IDLE&&(this.setState(q.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,r){this.setFeatures(e)}onError(){this.setState(q.ERROR)}setFeatures(e){this.features_=e,this.setState(q.LOADED)}setLoader(e){this.loader_=e}};const hi=Ca,Sa={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Ra={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Ia extends fo{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=ho()}prepareTile(e,r,n){let i;const o=e.getState();return(o===q.LOADED||o===q.ERROR)&&(this.updateExecutorGroup_(e,r,n),this.tileImageNeedsRender_(e)&&(i=!0)),i}getTile(e,r,n,i){const o=i.pixelRatio,a=i.viewState,s=a.resolution,l=a.projection,u=this.getLayer(),c=u.getSource().getTile(e,r,n,o,l),p=i.viewHints,d=!(p[qe.ANIMATING]||p[qe.INTERACTING]);return(d||!c.wantedResolution)&&(c.wantedResolution=s),this.prepareTile(c,o,l)&&(d||Date.now()-i.time<8)&&u.getRenderMode()!=="vector"&&this.renderTileImage_(c,i),super.getTile(e,r,n,i)}isDrawableTile(e){const r=this.getLayer();return super.isDrawableTile(e)&&(r.getRenderMode()==="vector"?pe(r)in e.executorGroups:e.hasContext(r))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const r=this.getLayer().getRevision();return this.renderedLayerRevision_!==r&&(this.renderedLayerRevision_=r,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,r,n){const i=this.getLayer(),o=i.getRevision(),a=i.getRenderOrder()||null,s=e.wantedResolution,l=e.getReplayState(i);if(!l.dirty&&l.renderedResolution===s&&l.renderedRevision==o&&l.renderedRenderOrder==a)return;const u=i.getSource(),c=i.getDeclutter(),p=u.getTileGrid(),f=u.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),h=u.getSourceTiles(r,n,e),g=pe(i);delete e.hitDetectionImageData[g],e.executorGroups[g]=[],c&&(e.declutterExecutorGroups[g]=[]),l.dirty=!1;for(let m=0,I=h.length;m<I;++m){const F=h[m];if(F.getState()!=q.LOADED)continue;const R=F.tileCoord,k=p.getTileCoordExtent(R),S=oi(f,k),L=dt(S,i.getRenderBuffer()*s,this.tmpExtent),w=mo(k,S)?null:L,z=new bn(0,L,s,r),M=c?new bn(0,S,s,r):void 0,H=yo(s,r),U=function($){let ve;const Me=$.getStyleFunction()||i.getStyleFunction();if(Me&&(ve=Me($,s)),ve){const Tt=this.renderFeature($,H,ve,z,M);l.dirty=l.dirty||Tt}},v=F.getFeatures();a&&a!==l.renderedRenderOrder&&v.sort(a);for(let $=0,ve=v.length;$<ve;++$){const Me=v[$];(!w||De(w,Me.getGeometry().getExtent()))&&U.call(this,Me)}const re=z.finish(),T=i.getRenderMode()!=="vector"&&c&&h.length===1?null:S,C=new vn(T,s,r,u.getOverlaps(),re,i.getRenderBuffer());if(e.executorGroups[g].push(C),M){const $=new vn(null,s,r,u.getOverlaps(),M.finish(),i.getRenderBuffer());e.declutterExecutorGroups[g].push($)}}l.renderedRevision=o,l.renderedRenderOrder=a,l.renderedResolution=s}forEachFeatureAtCoordinate(e,r,n,i,o){const a=r.viewState.resolution,s=r.viewState.rotation;n=n??0;const l=this.getLayer(),c=l.getSource().getTileGridForProjection(r.viewState.projection),p=go([e]);dt(p,a*n,p);const d={},f=function(m,I,F){let R=m.getId();R===void 0&&(R=pe(m));const k=d[R];if(k){if(k!==!0&&F<k.distanceSq){if(F===0)return d[R]=!0,o.splice(o.lastIndexOf(k),1),i(m,l,I);k.geometry=I,k.distanceSq=F}}else{if(F===0)return d[R]=!0,i(m,l,I);o.push(d[R]={feature:m,layer:l,geometry:I,distanceSq:F,callback:i})}},h=this.renderedTiles;let g;for(let m=0,I=h.length;!g&&m<I;++m){const F=h[m],R=c.getTileCoordExtent(F.wrappedTileCoord);if(!De(R,p))continue;const k=pe(l),S=[F.executorGroups[k]],L=F.declutterExecutorGroups[k];L&&S.push(L),S.some(w=>{const z=w===L?r.declutterTree.all().map(M=>M.value):null;for(let M=0,H=w.length;M<H;++M)if(g=w[M].forEachFeatureAtCoordinate(e,a,s,n,f,z),g)return!0})}return g}getFeatures(e){return new Promise((r,n)=>{const i=this.getLayer(),o=pe(i),a=i.getSource(),s=this.renderedProjection,l=s.getExtent(),u=this.renderedResolution,c=a.getTileGridForProjection(s),p=xo(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(p,u);let f;for(let R=0,k=this.renderedTiles.length;R<k;++R)if(d.toString()===this.renderedTiles[R].tileCoord.toString()){if(f=this.renderedTiles[R],f.getState()===q.LOADED){const S=c.getTileCoordExtent(f.tileCoord);a.getWrapX()&&s.canWrapX()&&!bo(l,S)&&vo(p,s);break}f=void 0}if(!f||f.loadingSourceTiles>0){r([]);return}const h=c.getTileCoordExtent(f.wrappedTileCoord),g=ai(h),m=[(p[0]-g[0])/u,(g[1]-p[1])/u],I=f.getSourceTiles().reduce(function(R,k){return R.concat(k.getFeatures())},[]);let F=f.hitDetectionImageData[o];if(!F){const R=si(c.getTileSize(c.getZForResolution(u,a.zDirection))),k=this.renderedRotation_,S=[this.getRenderTransform(c.getTileCoordCenter(f.wrappedTileCoord),u,0,rr,R[0]*rr,R[1]*rr,0)];F=wo(R,S,I,i.getStyleFunction(),c.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(i).renderedResolution,k),f.hitDetectionImageData[o]=F}r(To(m,I,F))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const r=this.context,n=r.globalAlpha;r.globalAlpha=this.getLayer().getOpacity();const i=e.viewHints,o=!(i[qe.ANIMATING]||i[qe.INTERACTING]),a=this.renderedTiles;for(let s=0,l=a.length;s<l;++s){const u=a[s],c=u.declutterExecutorGroups[pe(this.getLayer())];if(c)for(let p=c.length-1;p>=0;--p)c[p].execute(this.context,1,this.getTileRenderTransform(u,e),e.viewState.rotation,o,void 0,e.declutterTree)}r.globalAlpha=n}getTileRenderTransform(e,r){const n=r.pixelRatio,i=r.viewState,o=i.center,a=i.resolution,s=i.rotation,l=r.size,u=Math.round(l[0]*n),c=Math.round(l[1]*n),d=this.getLayer().getSource().getTileGridForProjection(r.viewState.projection),f=e.tileCoord,h=d.getTileCoordExtent(e.wrappedTileCoord),g=d.getTileCoordExtent(f,this.tmpExtent)[0]-h[0];return ko(nr(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(o,a,s,n,u,c,g))}postRender(e,r){const n=r.viewHints,i=!(n[qe.ANIMATING]||n[qe.INTERACTING]);this.renderedPixelToCoordinateTransform_=r.pixelToCoordinateTransform.slice(),this.renderedRotation_=r.viewState.rotation;const o=this.getLayer(),a=o.getRenderMode(),s=e.globalAlpha;e.globalAlpha=o.getOpacity();const l=Ra[a],u=r.viewState,c=u.rotation,p=o.getSource(),f=p.getTileGridForProjection(u.projection).getZForResolution(u.resolution,p.zDirection),h=this.renderedTiles,g=[],m=[];let I=!0;for(let F=h.length-1;F>=0;--F){const R=h[F];I=I&&!R.getReplayState(o).dirty;const k=R.executorGroups[pe(o)].filter(M=>M.hasExecutors(l));if(k.length===0)continue;const S=this.getTileRenderTransform(R,r),L=R.tileCoord[0];let w=!1;const z=k[0].getClipCoords(S);if(z){for(let M=0,H=g.length;M<H;++M)if(f!==L&&L<m[M]){const U=g[M];De([z[0],z[3],z[4],z[7]],[U[0],U[3],U[4],U[7]])&&(w||(e.save(),w=!0),e.beginPath(),e.moveTo(z[0],z[1]),e.lineTo(z[2],z[3]),e.lineTo(z[4],z[5]),e.lineTo(z[6],z[7]),e.moveTo(U[6],U[7]),e.lineTo(U[4],U[5]),e.lineTo(U[2],U[3]),e.lineTo(U[0],U[1]),e.clip())}g.push(z),m.push(L)}for(let M=0,H=k.length;M<H;++M)k[M].execute(e,1,S,c,i,l);w&&e.restore()}e.globalAlpha=s,this.ready=I,super.postRender(e,r)}renderFeature(e,r,n,i,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let s=0,l=n.length;s<l;++s)a=wn(i,e,n[s],r,this.boundHandleStyleImageChange_,void 0,o)||a;else a=wn(i,e,n,r,this.boundHandleStyleImageChange_,void 0,o);return a}tileImageNeedsRender_(e){const r=this.getLayer();if(r.getRenderMode()==="vector")return!1;const n=e.getReplayState(r),i=r.getRevision(),o=e.wantedResolution;return n.renderedTileResolution!==o||n.renderedTileRevision!==i}renderTileImage_(e,r){const n=this.getLayer(),i=e.getReplayState(n),o=n.getRevision(),a=e.executorGroups[pe(n)];i.renderedTileRevision=o;const s=e.wrappedTileCoord,l=s[0],u=n.getSource();let c=r.pixelRatio;const d=r.viewState.projection,f=u.getTileGridForProjection(d),h=f.getResolution(e.tileCoord[0]),g=r.pixelRatio/e.wantedResolution*h,m=f.getResolution(l),I=e.getContext(n);c=Math.round(Math.max(c,g/c));const F=u.getTilePixelSize(l,c,d);I.canvas.width=F[0],I.canvas.height=F[1];const R=c/g;if(R!==1){const w=Tn(this.tmpTransform_);nr(w,R,R),I.setTransform.apply(I,w)}const k=f.getTileCoordExtent(s,this.tmpExtent),S=g/m,L=Tn(this.tmpTransform_);nr(L,S,-S),zo(L,-k[0],-k[3]);for(let w=0,z=a.length;w<z;++w)a[w].execute(I,R,L,0,!0,Sa[n.getRenderMode()]);i.renderedTileResolution=e.wantedResolution}}const Ma=Ia;class _a extends Fo{constructor(e){e=e||{};const r=Object.assign({},e);delete r.preload,delete r.useInterimTilesOnError,super(r),this.on,this.once,this.un;const n=e.renderMode||"hybrid";Eo(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Ma(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Ft.PRELOAD)}getUseInterimTilesOnError(){return this.get(Ft.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Ft.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Ft.USE_INTERIM_TILES_ON_ERROR,e)}}const ft=_a;function Pa(t,e,r,n){const i=document.createElement("script"),o="olc_"+pe(e);function a(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(t.includes("?")?"&":"?")+(n||"callback")+"="+o;const s=setTimeout(function(){a(),r&&r()},1e4);window[o]=function(l){clearTimeout(s),a(),e(l)},document.head.appendChild(i)}class Aa extends Co{constructor(e){const r=e.projection||"EPSG:3857",n=e.extent||li(r),i=e.tileGrid||jr({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:r,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:mi,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new So(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:hi,this.tileGrids_={}}getFeaturesInExtent(e){const r=[],n=this.tileCache;if(n.getCount()===0)return r;const i=Ro(n.peekFirstKey())[0],o=this.tileGrid;return n.forEach(function(a){if(a.tileCoord[0]!==i||a.getState()!==q.LOADED)return;const s=a.getSourceTiles();for(let l=0,u=s.length;l<u;++l){const c=s[l],p=c.tileCoord;if(De(e,o.getTileCoordExtent(p))){const d=c.getFeatures();if(d)for(let f=0,h=d.length;f<h;++f){const g=d[f],m=g.getGeometry();De(e,m.getExtent())&&r.push(g)}}}}),r}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,r){const n=this.getTileCacheForProjection(e),i=Object.keys(r).reduce((o,a)=>{const s=Io(a),l=n.peek(s);if(l){const u=l.sourceTiles;for(let c=0,p=u.length;c<p;++c)o[u[c].getKey()]=!0}return o},{});super.expireCache(e,r),this.sourceTileCache.expireCache(i)}getSourceTiles(e,r,n){if(n.getState()===q.IDLE){n.setState(q.LOADING);const i=n.wrappedTileCoord,o=this.getTileGridForProjection(r),a=o.getTileCoordExtent(i),s=i[0],l=o.getResolution(s);dt(a,-l,a);const u=this.tileGrid,c=u.getExtent();c&&oi(a,c,a);const p=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(a,p,d=>{const f=this.tileUrlFunction(d,e,r),h=this.sourceTileCache.containsKey(f)?this.sourceTileCache.get(f):new this.tileClass(d,f?q.IDLE:q.EMPTY,f,this.format_,this.tileLoadFunction);n.sourceTiles.push(h);const g=h.getState();if(g<q.LOADED){const m=I=>{this.handleTileChange(I);const F=h.getState();if(F===q.LOADED||F===q.ERROR){const R=h.getKey();R in n.errorTileKeys?h.getState()===q.LOADED&&delete n.errorTileKeys[R]:n.loadingSourceTiles--,F===q.ERROR?n.errorTileKeys[R]=!0:h.removeEventListener(Tr.CHANGE,m),n.loadingSourceTiles===0&&n.setState(_o(n.errorTileKeys)?q.LOADED:q.ERROR)}};h.addEventListener(Tr.CHANGE,m),n.loadingSourceTiles++}g===q.IDLE&&(h.extent=u.getTileCoordExtent(d),h.projection=r,h.resolution=u.getResolution(d[0]),this.sourceTileCache.set(f,h),h.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(d=>d.getState()===q.ERROR)?q.ERROR:q.LOADED)}return n.sourceTiles}getTile(e,r,n,i,o){const a=Po(e,r,n),s=this.getKey();let l;if(this.tileCache.containsKey(a)&&(l=this.tileCache.get(a),l.key===s))return l;const u=[e,r,n];let c=this.getTileCoordForTileUrlFunction(u,o);const p=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(o);if(c&&p){const g=d.getTileCoordExtent(c);dt(g,-d.getResolution(e),g),De(p,g)||(c=null)}let f=!0;if(c!==null){const g=this.tileGrid,m=d.getResolution(e),I=g.getZForResolution(m,1),F=d.getTileCoordExtent(c);dt(F,-m,F),g.forEachTileCoord(F,I,R=>{f=f&&!this.tileUrlFunction(R,i,o)})}const h=new Ea(u,f?q.EMPTY:q.IDLE,c,this.getSourceTiles.bind(this,i,o));return h.key=s,l?(h.interimTile=l,h.refreshInterimChain(),this.tileCache.replace(a,h)):this.tileCache.set(a,h),h}getTileGridForProjection(e){const r=e.getCode();let n=this.tileGrids_[r];if(!n){const i=this.tileGrid,o=i.getResolutions().slice(),a=o.map(function(u,c){return i.getOrigin(c)}),s=o.map(function(u,c){return i.getTileSize(c)}),l=Ao+1;for(let u=o.length;u<l;++u)o.push(o[u-1]/2),a.push(a[u-1]),s.push(s[u-1]);n=new $r({extent:i.getExtent(),origins:a,resolutions:o,tileSizes:s}),this.tileGrids_[r]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,r,n){const i=this.getTileGridForProjection(n),o=si(i.getTileSize(e),this.tmpSize);return[Math.round(o[0]*r),Math.round(o[1]*r)]}updateCacheSize(e,r){super.updateCacheSize(e*2,r),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(r).highWaterMark}}const Or=Aa;function mi(t,e){t.setLoader(function(r,n,i){Mo(e,t.getFormat(),r,n,i,t.onLoad.bind(t),t.onError.bind(t))})}class La extends Lo{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:$e("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Pa(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const r=new XMLHttpRequest;r.addEventListener("load",this.onXHRLoad_.bind(this)),r.addEventListener("error",this.onXHRError_.bind(this)),r.open("GET",e.url),r.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const r=e.target;if(!r.status||r.status>=200&&r.status<300){let n;try{n=JSON.parse(r.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const r=$e("EPSG:4326"),n=this.getProjection();let i;if(e.bounds!==void 0){const u=Do(r,n);i=jo(e.bounds,u)}const o=li(n),a=e.minzoom||0,s=e.maxzoom||22,l=jr({extent:o,maxZoom:s,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=$o(e.tiles,l),e.attribution&&!this.getAttributions()){const u=i!==void 0?i:o;this.setAttributions(function(c){return De(u,c.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const Da=La;var qr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */qr.read=function(t,e,r,n,i){var o,a,s=i*8-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,d=r?-1:1,f=t[e+p];for(p+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=o*256+t[e+p],p+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=a*256+t[e+p],p+=d,c-=8);if(o===0)o=1-u;else{if(o===l)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(f?-1:1)*a*Math.pow(2,o-n)};qr.write=function(t,e,r,n,i,o){var a,s,l,u=o*8-i-1,c=(1<<u)-1,p=c>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,h=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+p>=1?e+=d/l:e+=d*Math.pow(2,1-p),e*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*l-1)*Math.pow(2,i),a=a+p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[r+f]=s&255,f+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[r+f]=a&255,f+=h,a/=256,u-=8);t[r+f-h]|=g*128};var ja=j,Et=qr;function j(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}j.Varint=0;j.Fixed64=1;j.Bytes=2;j.Fixed32=5;var Er=65536*65536,Mn=1/Er,$a=12,yi=typeof TextDecoder>"u"?null:new TextDecoder("utf8");j.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=n&7,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Ct(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Pn(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Ct(this.buf,this.pos)+Ct(this.buf,this.pos+4)*Er;return this.pos+=8,t},readSFixed64:function(){var t=Ct(this.buf,this.pos)+Pn(this.buf,this.pos+4)*Er;return this.pos+=8,t},readFloat:function(){var t=Et.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Et.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,r,n;return n=e[this.pos++],r=n&127,n<128||(n=e[this.pos++],r|=(n&127)<<7,n<128)||(n=e[this.pos++],r|=(n&127)<<14,n<128)||(n=e[this.pos++],r|=(n&127)<<21,n<128)?r:(n=e[this.pos],r|=(n&15)<<28,Oa(r,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=$a&&yi?Qa(this.buf,e,t):Ya(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==j.Bytes)return t.push(this.readVarint(e));var r=ke(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==j.Bytes)return t.push(this.readSVarint());var e=ke(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==j.Bytes)return t.push(this.readBoolean());var e=ke(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==j.Bytes)return t.push(this.readFloat());var e=ke(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==j.Bytes)return t.push(this.readDouble());var e=ke(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==j.Bytes)return t.push(this.readFixed32());var e=ke(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==j.Bytes)return t.push(this.readSFixed32());var e=ke(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==j.Bytes)return t.push(this.readFixed64());var e=ke(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==j.Bytes)return t.push(this.readSFixed64());var e=ke(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=t&7;if(e===j.Varint)for(;this.buf[this.pos++]>127;);else if(e===j.Bytes)this.pos=this.readVarint()+this.pos;else if(e===j.Fixed32)this.pos+=4;else if(e===j.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Ge(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Ge(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Ge(this.buf,t&-1,this.pos),Ge(this.buf,Math.floor(t*Mn),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Ge(this.buf,t&-1,this.pos),Ge(this.buf,Math.floor(t*Mn),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){qa(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var e=this.pos;this.pos=es(this.buf,t,this.pos);var r=this.pos-e;r>=128&&_n(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),Et.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Et.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&_n(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,j.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Va,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Ua,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Wa,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Ba,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Za,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Xa,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Ha,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Ja,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Ka,e)},writeBytesField:function(t,e){this.writeTag(t,j.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,j.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,j.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,j.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,j.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,j.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,j.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,j.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,j.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,j.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};function Oa(t,e,r){var n=r.buf,i,o;if(o=n[r.pos++],i=(o&112)>>4,o<128||(o=n[r.pos++],i|=(o&127)<<3,o<128)||(o=n[r.pos++],i|=(o&127)<<10,o<128)||(o=n[r.pos++],i|=(o&127)<<17,o<128)||(o=n[r.pos++],i|=(o&127)<<24,o<128)||(o=n[r.pos++],i|=(o&1)<<31,o<128))return Ne(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function ke(t){return t.type===j.Bytes?t.readVarint()+t.pos:t.pos+1}function Ne(t,e,r){return r?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function qa(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),r^4294967295?r=r+1|0:(r=0,n=n+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Na(r,n,e),Ga(n,e)}function Na(t,e,r){r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos]=t&127}function Ga(t,e){var r=(t&7)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function _n(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function Va(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function Ua(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function Ba(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function Za(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function Wa(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function Xa(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function Ha(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function Ja(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function Ka(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function Ct(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+t[e+3]*16777216}function Ge(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function Pn(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Ya(t,e,r){for(var n="",i=e;i<r;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s>r)break;var l,u,c;s===1?o<128&&(a=o):s===2?(l=t[i+1],(l&192)===128&&(a=(o&31)<<6|l&63,a<=127&&(a=null))):s===3?(l=t[i+1],u=t[i+2],(l&192)===128&&(u&192)===128&&(a=(o&15)<<12|(l&63)<<6|u&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):s===4&&(l=t[i+1],u=t[i+2],c=t[i+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(a=(o&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,s=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),n+=String.fromCharCode(a),i+=s}return n}function Qa(t,e,r){return yi.decode(t.subarray(e,r))}function es(t,e,r){for(var n=0,i,o;n<e.length;n++){if(i=e.charCodeAt(n),i>55295&&i<57344)if(o)if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||n+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):o=i;continue}else o&&(t[r++]=239,t[r++]=191,t[r++]=189,o=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=i&63|128)}return r}const ts=ao(ja);class rs extends na{constructor(e){super(),e=e||{},this.dataProjection=new Oo({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:kr,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,r,n,i){e.pos=r.geometry;const o=e.readVarint()+e.pos;let a=1,s=0,l=0,u=0,c=0,p=0;for(;e.pos<o;){if(!s){const d=e.readVarint();a=d&7,s=d>>3}if(s--,a===1||a===2)l+=e.readSVarint(),u+=e.readSVarint(),a===1&&c>p&&(i.push(c),p=c),n.push(l,u),c+=2;else if(a===7)c>p&&(n.push(n[p],n[p+1]),c+=2);else throw new Error("Invalid command found in the PBF")}c>p&&(i.push(c),p=c)}createFeature_(e,r,n){const i=r.type;if(i===0)return null;let o;const a=r.properties;let s;this.idProperty_?(s=a[this.idProperty_],delete a[this.idProperty_]):s=r.id,a[this.layerName_]=r.layer.name;const l=[],u=[];this.readRawGeometry_(e,r,l,u);const c=ss(i,u.length);if(this.featureClass_===kr)o=new this.featureClass_(c,l,u,2,a,s),o.transform(n.dataProjection);else{let p;if(c=="Polygon"){const h=qo(l,u);p=h.length>1?new ia(l,"XY",h):new No(l,"XY",u)}else p=c==="Point"?new Go(l,"XY"):c==="LineString"?new ua(l,"XY"):c==="MultiPoint"?new oa(l,"XY"):c==="MultiLineString"?new aa(l,"XY",u):null;const d=this.featureClass_;o=new d,this.geometryName_&&o.setGeometryName(this.geometryName_);const f=sa(p,!1,n);o.setGeometry(f),s!==void 0&&o.setId(s),o.setProperties(a,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,r){const n=this.layers_;r=this.adaptOptions(r);const i=$e(r.dataProjection);i.setWorldExtent(r.extent),r.dataProjection=i;const o=new ts(e),a=o.readFields(ns,{}),s=[];for(const l in a){if(n&&!n.includes(l))continue;const u=a[l],c=u?[0,0,u.extent,u.extent]:null;i.setExtent(c);for(let p=0,d=u.length;p<d;++p){const f=as(o,u,p),h=this.createFeature_(o,f,r);h!==null&&s.push(h)}}return s}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function ns(t,e,r){if(t===3){const n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(is,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function is(t,e,r){if(t===15)e.version=r.readVarint();else if(t===1)e.name=r.readString();else if(t===5)e.extent=r.readVarint();else if(t===2)e.features.push(r.pos);else if(t===3)e.keys.push(r.readString());else if(t===4){let n=null;const i=r.readVarint()+r.pos;for(;r.pos<i;)t=r.readVarint()>>3,n=t===1?r.readString():t===2?r.readFloat():t===3?r.readDouble():t===4?r.readVarint64():t===5?r.readVarint():t===6?r.readSVarint():t===7?r.readBoolean():null;e.values.push(n)}}function os(t,e,r){if(t==1)e.id=r.readVarint();else if(t==2){const n=r.readVarint()+r.pos;for(;r.pos<n;){const i=e.layer.keys[r.readVarint()],o=e.layer.values[r.readVarint()];e.properties[i]=o}}else t==3?e.type=r.readVarint():t==4&&(e.geometry=r.pos)}function as(t,e,r){t.pos=e.features[r];const n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(os,i,n),i}function ss(t,e){let r;return t===1?r=e===1?"Point":"MultiPoint":t===2?r=e===1?"LineString":"MultiLineString":t===3&&(r="Polygon"),r}const Nr=rs;function gi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ls={},xi,An={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ht(t){return t=Math.round(t),t<0?0:t>255?255:t}function Ln(t){return t<0?0:t>1?1:t}function sr(t){return t[t.length-1]==="%"?ht(parseFloat(t)/100*255):ht(parseInt(t))}function St(t){return t[t.length-1]==="%"?Ln(parseFloat(t)/100):Ln(parseFloat(t))}function lr(t,e,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?t+(e-t)*r*6:r*2<1?e:r*3<2?t+(e-t)*(2/3-r)*6:t}function us(t){var e=t.replace(/ /g,"").toLowerCase();if(e in An)return An[e].slice();if(e[0]==="#"){if(e.length===4){var r=parseInt(e.substr(1),16);return r>=0&&r<=4095?[(r&3840)>>4|(r&3840)>>8,r&240|(r&240)>>4,r&15|(r&15)<<4,1]:null}else if(e.length===7){var r=parseInt(e.substr(1),16);return r>=0&&r<=16777215?[(r&16711680)>>16,(r&65280)>>8,r&255,1]:null}return null}var n=e.indexOf("("),i=e.indexOf(")");if(n!==-1&&i+1===e.length){var o=e.substr(0,n),a=e.substr(n+1,i-(n+1)).split(","),s=1;switch(o){case"rgba":if(a.length!==4)return null;s=St(a.pop());case"rgb":return a.length!==3?null:[sr(a[0]),sr(a[1]),sr(a[2]),s];case"hsla":if(a.length!==4)return null;s=St(a.pop());case"hsl":if(a.length!==3)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=St(a[1]),c=St(a[2]),p=c<=.5?c*(u+1):c+u-c*u,d=c*2-p;return[ht(lr(d,p,l+1/3)*255),ht(lr(d,p,l)*255),ht(lr(d,p,l-1/3)*255),s];default:return null}}return null}try{xi=ls.parseCSSColor=us}catch{}class se{constructor(e,r,n,i=1){this.r=e,this.g=r,this.b=n,this.a=i}static parse(e){if(!e)return;if(e instanceof se)return e;if(typeof e!="string")return;const r=xi(e);if(r)return new se(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}toString(){const[e,r,n,i]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(n)},${i})`}toArray(){const{r:e,g:r,b:n,a:i}=this;return i===0?[0,0,0,0]:[e*255/i,r*255/i,n*255/i,i]}toArray01(){const{r:e,g:r,b:n,a:i}=this;return i===0?[0,0,0,0]:[e/i,r/i,n/i,i]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:n,a:i}=this;return[e,r,n,i]}}se.black=new se(0,0,0,1);se.white=new se(1,1,1,1);se.transparent=new se(0,0,0,0);se.red=new se(1,0,0,1);se.blue=new se(0,0,1,1);var fe=se;function gt(t){return typeof t=="object"?["literal",t]:t}function cs(t,e){let r=t.stops;if(!r)return ps(t,e);const n=r&&typeof r[0][0]=="object",i=n||t.property!==void 0,o=n||!i;return r=r.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],ms(a[1])]:[a[0],gt(a[1])]),n?ds(t,e,r):o?hs(t,e,r):Cr(t,e,r)}function ps(t,e){const r=["get",t.property];if(t.default===void 0)return e.type==="string"?["string",r]:r;if(e.type==="enum")return["match",r,Object.keys(e.values),r,t.default];{const n=[e.type==="color"?"to-color":e.type,r,gt(t.default)];return e.type==="array"&&n.splice(1,0,e.value,e.length||null),n}}function Gr(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function ds(t,e,r){const n={},i={},o=[];for(let s=0;s<r.length;s++){const l=r[s],u=l[0].zoom;n[u]===void 0&&(n[u]={zoom:u,type:t.type,property:t.property,default:t.default},i[u]=[],o.push(u)),i[u].push([l[0].value,l[1]])}if(Ur({},e)==="exponential"){const s=[Gr(t),["linear"],["zoom"]];for(const l of o){const u=Cr(n[l],e,i[l]);Je(s,l,u,!1)}return s}else{const s=["step",["zoom"]];for(const l of o){const u=Cr(n[l],e,i[l]);Je(s,l,u,!0)}return Vr(s),s}}function fs(t,e){if(t!==void 0)return t;if(e!==void 0)return e}function Dn(t,e){const r=gt(fs(t.default,e.default));return r===void 0&&e.type==="resolvedImage"?"":r}function Cr(t,e,r){const n=Ur(t,e),i=["get",t.property];if(n==="categorical"&&typeof r[0][0]=="boolean"){const o=["case"];for(const a of r)o.push(["==",i,a[0]],a[1]);return o.push(Dn(t,e)),o}else if(n==="categorical"){const o=["match",i];for(const a of r)Je(o,a[0],a[1],!1);return o.push(Dn(t,e)),o}else if(n==="interval"){const o=["step",["number",i]];for(const a of r)Je(o,a[0],a[1],!0);return Vr(o),t.default===void 0?o:["case",["==",["typeof",i],"number"],o,gt(t.default)]}else if(n==="exponential"){const o=t.base!==void 0?t.base:1,a=[Gr(t),o===1?["linear"]:["exponential",o],["number",i]];for(const s of r)Je(a,s[0],s[1],!1);return t.default===void 0?a:["case",["==",["typeof",i],"number"],a,gt(t.default)]}else throw new Error(`Unknown property function type ${n}`)}function hs(t,e,r,n=["zoom"]){const i=Ur(t,e);let o,a=!1;if(i==="interval")o=["step",n],a=!0;else if(i==="exponential"){const s=t.base!==void 0?t.base:1;o=[Gr(t),s===1?["linear"]:["exponential",s],n]}else throw new Error(`Unknown zoom function type "${i}"`);for(const s of r)Je(o,s[0],s[1],a);return Vr(o),o}function Vr(t){t[0]==="step"&&t.length===3&&(t.push(0),t.push(t[3]))}function Je(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&t.length===2||t.push(e),t.push(r))}function Ur(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function ms(t){const e=["concat"],r=/{([^{}]+)}/g;let n=0;for(let i=r.exec(t);i!==null;i=r.exec(t)){const o=t.slice(n,r.lastIndex-i[0].length);n=r.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(e.length===1)return t;if(n<t.length)e.push(t.slice(n));else if(e.length===2)return["to-string",e[1]];return e}class ys extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}var xe=ys;class Br{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[n,i]of r)this.bindings[n]=i}concat(e){return new Br(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var gs=Br;const Wt={kind:"null"},y={kind:"number"},A={kind:"string"},_={kind:"boolean"},Fe={kind:"color"},Ke={kind:"object"},P={kind:"value"},xs={kind:"error"},Xt={kind:"collator"},Ht={kind:"formatted"},vt={kind:"resolvedImage"};function me(t,e){return{kind:"array",itemType:t,N:e}}function V(t){if(t.kind==="array"){const e=V(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}else return t.kind}const bs=[Wt,y,A,_,Fe,Ht,Ke,me(P),vt];function xt(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!xt(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(const r of bs)if(!xt(r,e))return null}}return`Expected ${V(t)} but found ${V(e)} instead.`}function Zr(t,e){return e.some(r=>r.kind===t.kind)}function bt(t,e){return e.some(r=>r==="null"?t===null:r==="array"?Array.isArray(t):r==="object"?t&&!Array.isArray(t)&&typeof t=="object":r===typeof t)}class Wr{constructor(e,r,n){e?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Sr{constructor(e,r,n,i,o){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=n,this.fontStack=i,this.textColor=o}}class be{constructor(e){this.sections=e}static fromString(e){return new be([new Sr(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof be?e:be.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.name]);continue}e.push(r.text);const n={};r.fontStack&&(n["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(n["font-scale"]=r.scale),r.textColor&&(n["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(n)}return e}}class Ie{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ie({name:e,available:!1}):null}serialize(){return["image",this.name]}}function bi(t,e,r,n){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $t(t){if(t===null)return!0;if(typeof t=="string")return!0;if(typeof t=="boolean")return!0;if(typeof t=="number")return!0;if(t instanceof fe)return!0;if(t instanceof Wr)return!0;if(t instanceof be)return!0;if(t instanceof Ie)return!0;if(Array.isArray(t)){for(const e of t)if(!$t(e))return!1;return!0}else if(typeof t=="object"){for(const e in t)if(!$t(t[e]))return!1;return!0}else return!1}function Q(t){if(t===null)return Wt;if(typeof t=="string")return A;if(typeof t=="boolean")return _;if(typeof t=="number")return y;if(t instanceof fe)return Fe;if(t instanceof Wr)return Xt;if(t instanceof be)return Ht;if(t instanceof Ie)return vt;if(Array.isArray(t)){const e=t.length;let r;for(const n of t){const i=Q(n);if(!r)r=i;else{if(r===i)continue;r=P;break}}return me(r||P,e)}else return Ke}function mt(t){const e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof fe||t instanceof be||t instanceof Ie?t.toString():JSON.stringify(t)}class Xr{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!$t(e[1]))return r.error("invalid value");const n=e[1];let i=Q(n);const o=r.expectedType;return i.kind==="array"&&i.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(i=o),new Xr(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof fe?["rgba"].concat(this.value.toArray()):this.value instanceof be?this.value.serialize():this.value}}var Ot=Xr;class vs{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var te=vs;const ur={string:A,number:y,boolean:_,object:Ke};class Hr{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n=1,i;const o=e[0];if(o==="array"){let s;if(e.length>2){const u=e[1];if(typeof u!="string"||!(u in ur)||u==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);s=ur[u],n++}else s=P;let l;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);l=e[2],n++}i=me(s,l)}else i=ur[o];const a=[];for(;n<e.length;n++){const s=r.parse(e[n],n,P);if(!s)return null;a.push(s)}return new Hr(i,a)}evaluate(e){for(let r=0;r<this.args.length;r++){const n=this.args[r].evaluate(e);if(xt(this.type,Q(n))){if(r===this.args.length-1)throw new te(`Expected value to be of type ${V(this.type)}, but found ${V(Q(n))} instead.`)}else return n}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if(e.kind==="array"){const n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){r.push(n.kind);const i=e.N;(typeof i=="number"||this.args.length>1)&&r.push(i)}}return r.concat(this.args.map(n=>n.serialize()))}}var ze=Hr;class Jt{constructor(e){this.type=Ht,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");const i=[];let o=!1;for(let a=1;a<=e.length-1;++a){const s=e[a];if(o&&typeof s=="object"&&!Array.isArray(s)){o=!1;let l=null;if(s["font-scale"]&&(l=r.parse(s["font-scale"],1,y),!l))return null;let u=null;if(s["text-font"]&&(u=r.parse(s["text-font"],1,me(A)),!u))return null;let c=null;if(s["text-color"]&&(c=r.parse(s["text-color"],1,Fe),!c))return null;const p=i[i.length-1];p.scale=l,p.font=u,p.textColor=c}else{const l=r.parse(e[a],1,P);if(!l)return null;const u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:l,scale:null,font:null,textColor:null})}}return new Jt(i)}evaluate(e){const r=n=>{const i=n.content.evaluate(e);return Q(i)===vt?new Sr("",i,null,null,null):new Sr(mt(i),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)};return new be(this.sections.map(r))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),e.push(n)}return e}}class Kt{constructor(e){this.type=vt,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const n=r.parse(e[1],1,A);return n?new Kt(n):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),n=Ie.fromString(r);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(r)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const ws={"to-boolean":_,"to-color":Fe,"to-number":y,"to-string":A};class Jr{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return r.error("Expected one argument.");const i=ws[n],o=[];for(let a=1;a<e.length;a++){const s=r.parse(e[a],a,P);if(!s)return null;o.push(s)}return new Jr(i,o)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let r,n;for(const i of this.args){if(r=i.evaluate(e),n=null,r instanceof fe)return r;if(typeof r=="string"){const o=e.parseColor(r);if(o)return o}else if(Array.isArray(r)&&(r.length<3||r.length>4?n=`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:n=bi(r[0],r[1],r[2],r[3]),!n))return new fe(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new te(n||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}else if(this.type.kind==="number"){let r=null;for(const n of this.args){if(r=n.evaluate(e),r===null)return 0;const i=Number(r);if(!isNaN(i))return i}throw new te(`Could not convert ${JSON.stringify(r)} to number.`)}else return this.type.kind==="formatted"?be.fromString(mt(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ie.fromString(mt(this.args[0].evaluate(e))):mt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Jt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Kt(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Xe=Jr;const Ts=["Unknown","Point","LineString","Polygon"];class ks{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ts[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:n,y:i}=this.featureTileCoord,o=n*r-e[0],a=i*r-e[1],s=this.featureDistanceData.bearing[0],l=this.featureDistanceData.bearing[1];return s*o+l*a}return 0}parseColor(e){let r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=fe.parse(e)),r}}var vi=ks;class He{constructor(e,r,n,i){this.name=e,this.type=r,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const n=e[0],i=He.definitions[n];if(!i)return r.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(([u])=>!Array.isArray(u)||u.length===e.length-1);let l=null;for(const[u,c]of s){l=new Fi(r.registry,r.path,null,r.scope);const p=[];let d=!1;for(let f=1;f<e.length;f++){const h=e[f],g=Array.isArray(u)?u[f-1]:u.type,m=l.parse(h,1+p.length,g);if(!m){d=!0;break}p.push(m)}if(!d){if(Array.isArray(u)&&u.length!==p.length){l.error(`Expected ${u.length} arguments, but found ${p.length} instead.`);continue}for(let f=0;f<p.length;f++){const h=Array.isArray(u)?u[f]:u.type,g=p[f];l.concat(f+1).checkSubtype(h,g.type)}if(l.errors.length===0)return new He(n,o,c,p)}}if(s.length===1)r.errors.push(...l.errors);else{const c=(s.length?s:a).map(([d])=>zs(d)).join(" | "),p=[];for(let d=1;d<e.length;d++){const f=r.parse(e[d],1+p.length);if(!f)return null;p.push(V(f.type))}r.error(`Expected arguments of type ${c}, but found (${p.join(", ")}) instead.`)}return null}static register(e,r){He.definitions=r;for(const n in r)e[n]=He}}function zs(t){return Array.isArray(t)?`(${t.map(V).join(", ")})`:`(${V(t.type)}...)`}var tt=He;class Yt{constructor(e,r,n){this.type=Xt,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const n=e[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");const i=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,_);if(!i)return null;const o=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,_);if(!o)return null;let a=null;return n.locale&&(a=r.parse(n.locale,1,A),!a)?null:new Yt(i,o,a)}evaluate(e){return new Wr(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Re=8192;function Kr(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Fs(t){return(180+t)/360}function Es(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function qt(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Cs(t,e){const r=Fs(t[0]),n=Es(t[1]),i=Math.pow(2,e.z);return[Math.round(r*i*Re),Math.round(n*i*Re)]}function Ss(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],o=t[0]-r[0],a=t[1]-r[1];return n*a-o*i===0&&n*o<=0&&i*a<=0}function Rs(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function Yr(t,e){let r=!1;for(let n=0,i=e.length;n<i;n++){const o=e[n];for(let a=0,s=o.length;a<s-1;a++){if(Ss(t,o[a],o[a+1]))return!1;Rs(t,o[a],o[a+1])&&(r=!r)}}return r}function Is(t,e){for(let r=0;r<e.length;r++)if(Yr(t,e[r]))return!0;return!1}function Ms(t,e){return t[0]*e[1]-t[1]*e[0]}function jn(t,e,r,n){const i=t[0]-r[0],o=t[1]-r[1],a=e[0]-r[0],s=e[1]-r[1],l=n[0]-r[0],u=n[1]-r[1],c=i*u-l*o,p=a*u-l*s;return c>0&&p<0||c<0&&p>0}function _s(t,e,r,n){const i=[e[0]-t[0],e[1]-t[1]],o=[n[0]-r[0],n[1]-r[1]];return Ms(o,i)===0?!1:!!(jn(t,e,r,n)&&jn(r,n,t,e))}function Ps(t,e,r){for(const n of r)for(let i=0;i<n.length-1;++i)if(_s(t,e,n[i],n[i+1]))return!0;return!1}function wi(t,e){for(let r=0;r<t.length;++r)if(!Yr(t[r],e))return!1;for(let r=0;r<t.length-1;++r)if(Ps(t[r],t[r+1],e))return!1;return!0}function As(t,e){for(let r=0;r<e.length;r++)if(wi(t,e[r]))return!0;return!1}function Qr(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=[];for(let a=0;a<t[i].length;a++){const s=Cs(t[i][a],r);Kr(e,s),o.push(s)}n.push(o)}return n}function Ti(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=Qr(t[i],e,r);n.push(o)}return n}function ki(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const i=n*.5;let o=t[0]-r[0]>i?-n:r[0]-t[0]>i?n:0;o===0&&(o=t[0]-r[2]>i?-n:r[2]-t[0]>i?n:0),t[0]+=o}Kr(e,t)}function Ls(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}function $n(t,e,r,n){const i=Math.pow(2,n.z)*Re,o=[n.x*Re,n.y*Re],a=[];if(!t)return a;for(const s of t)for(const l of s){const u=[l.x+o[0],l.y+o[1]];ki(u,e,r,i),a.push(u)}return a}function On(t,e,r,n){const i=Math.pow(2,n.z)*Re,o=[n.x*Re,n.y*Re],a=[];if(!t)return a;for(const s of t){const l=[];for(const u of s){const c=[u.x+o[0],u.y+o[1]];Kr(e,c),l.push(c)}a.push(l)}if(e[2]-e[0]<=i/2){Ls(e);for(const s of a)for(const l of s)ki(l,e,r,i)}return a}function Ds(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const o=Qr(e.coordinates,n,i),a=$n(t.geometry(),r,n,i);if(!qt(r,n))return!1;for(const s of a)if(!Yr(s,o))return!1}if(e.type==="MultiPolygon"){const o=Ti(e.coordinates,n,i),a=$n(t.geometry(),r,n,i);if(!qt(r,n))return!1;for(const s of a)if(!Is(s,o))return!1}return!0}function js(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const o=Qr(e.coordinates,n,i),a=On(t.geometry(),r,n,i);if(!qt(r,n))return!1;for(const s of a)if(!wi(s,o))return!1}if(e.type==="MultiPolygon"){const o=Ti(e.coordinates,n,i),a=On(t.geometry(),r,n,i);if(!qt(r,n))return!1;for(const s of a)if(!As(s,o))return!1}return!0}class yt{constructor(e,r){this.type=_,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if($t(e[1])){const n=e[1];if(n.type==="FeatureCollection")for(let i=0;i<n.features.length;++i){const o=n.features[i].geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new yt(n,n.features[i].geometry)}else if(n.type==="Feature"){const i=n.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new yt(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new yt(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Ds(e,this.geometries);if(e.geometryType()==="LineString")return js(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var en=yt;function Qt(t){if(t instanceof tt){if(t.name==="get"&&t.args.length===1)return!1;if(t.name==="feature-state")return!1;if(t.name==="has"&&t.args.length===1)return!1;if(t.name==="properties"||t.name==="geometry-type"||t.name==="id")return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof en)return!1;let e=!0;return t.eachChild(r=>{e&&!Qt(r)&&(e=!1)}),e}function tn(t){if(t instanceof tt&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(r=>{e&&!tn(r)&&(e=!1)}),e}function rn(t,e){if(t instanceof tt&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild(n=>{r&&!rn(n,e)&&(r=!1)}),r}class nn{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const n=e[1];return r.scope.has(n)?new nn(n,r.scope.get(n)):r.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var zi=nn;class on{constructor(e,r=[],n,i=new gs,o=[]){this.registry=e,this.path=r,this.key=r.map(a=>`[${a}]`).join(""),this.scope=i,this.errors=o,this.expectedType=n}parse(e,r,n,i,o={}){return r?this.concat(r,n,i)._parse(e,o):this._parse(e,o)}_parse(e,r){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(i,o,a){return a==="assert"?new ze(o,[i]):a==="coerce"?new Xe(o,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[i];if(o){let a=o.parse(e,this);if(!a)return null;if(this.expectedType){const s=this.expectedType,l=a.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&l.kind==="value")a=n(a,s,r.typeAnnotation||"assert");else if((s.kind==="color"||s.kind==="formatted"||s.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string"))a=n(a,s,r.typeAnnotation||"coerce");else if(this.checkSubtype(s,l))return null}if(!(a instanceof Ot)&&a.type.kind!=="resolvedImage"&&Rr(a)){const s=new vi;try{a=new Ot(a.type,a.evaluate(s))}catch(l){return this.error(l.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,r,n){const i=typeof e=="number"?this.path.concat(e):this.path,o=n?this.scope.concat(n):this.scope;return new on(this.registry,i,r||null,o,this.errors)}error(e,...r){const n=`${this.key}${r.map(i=>`[${i}]`).join("")}`;this.errors.push(new xe(n,e))}checkSubtype(e,r){const n=xt(e,r);return n&&this.error(n),n}}var Fi=on;function Rr(t){if(t instanceof zi)return Rr(t.boundExpression);if(t instanceof tt&&t.name==="error")return!1;if(t instanceof Yt)return!1;if(t instanceof en)return!1;const e=t instanceof Xe||t instanceof ze;let r=!0;return t.eachChild(n=>{e?r=r&&Rr(n):r=r&&n instanceof Ot}),r?Qt(t)&&rn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function Ei(t,e){const r=t.length-1;let n=0,i=r,o=0,a,s;for(;n<=i;)if(o=Math.floor((n+i)/2),a=t[o],s=t[o+1],a<=e){if(o===r||e<s)return o;n=o+1}else if(a>e)i=o-1;else throw new te("Input is not a number.");return 0}class an{constructor(e,r,n){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[i,o]of n)this.labels.push(i),this.outputs.push(o)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");const n=r.parse(e[1],1,y);if(!n)return null;const i=[];let o=null;r.expectedType&&r.expectedType.kind!=="value"&&(o=r.expectedType);for(let a=1;a<e.length;a+=2){const s=a===1?-1/0:e[a],l=e[a+1],u=a,c=a+1;if(typeof s!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);const p=r.parse(l,c,o);if(!p)return null;o=o||p.type,i.push([s,p])}return new an(o,n,i)}evaluate(e){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=r[0])return n[0].evaluate(e);const o=r.length;if(i>=r[o-1])return n[o-1].evaluate(e);const a=Ei(r,i);return n[a].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}var Ci=an,$s=rt;function rt(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}rt.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t};rt.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t};rt.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx};rt.prototype.solveCurveX=function(t,e){typeof e>"u"&&(e=1e-6);var r,n,i,o,a;for(i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}if(r=0,n=1,i=t,i<r)return r;if(i>n)return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=(n-r)*.5+r}return i};rt.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Os=gi($s);function de(t,e,r){return t*(1-r)+e*r}function qs(t,e,r){return new fe(de(t.r,e.r,r),de(t.g,e.g,r),de(t.b,e.b,r),de(t.a,e.a,r))}function Ns(t,e,r){return t.map((n,i)=>de(n,e[i],r))}var Gs=Object.freeze({__proto__:null,number:de,color:qs,array:Ns});const Si=.95047,Ri=1,Ii=1.08883,Mi=4/29,Ye=6/29,_i=3*Ye*Ye,Vs=Ye*Ye*Ye,Us=Math.PI/180,Bs=180/Math.PI;function cr(t){return t>Vs?Math.pow(t,1/3):t/_i+Mi}function pr(t){return t>Ye?t*t*t:_i*(t-Mi)}function dr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function fr(t){return t/=255,t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Pi(t){const e=fr(t.r),r=fr(t.g),n=fr(t.b),i=cr((.4124564*e+.3575761*r+.1804375*n)/Si),o=cr((.2126729*e+.7151522*r+.072175*n)/Ri),a=cr((.0193339*e+.119192*r+.9503041*n)/Ii);return{l:116*o-16,a:500*(i-o),b:200*(o-a),alpha:t.a}}function Ai(t){let e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=Ri*pr(e),r=Si*pr(r),n=Ii*pr(n),new fe(dr(3.2404542*r-1.5371385*e-.4985314*n),dr(-.969266*r+1.8760108*e+.041556*n),dr(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function Zs(t,e,r){return{l:de(t.l,e.l,r),a:de(t.a,e.a,r),b:de(t.b,e.b,r),alpha:de(t.alpha,e.alpha,r)}}function Ws(t){const{l:e,a:r,b:n}=Pi(t),i=Math.atan2(n,r)*Bs;return{h:i<0?i+360:i,c:Math.sqrt(r*r+n*n),l:e,alpha:t.a}}function Xs(t){const e=t.h*Us,r=t.c,n=t.l;return Ai({l:n,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})}function Hs(t,e,r){const n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function Js(t,e,r){return{h:Hs(t.h,e.h,r),c:de(t.c,e.c,r),l:de(t.l,e.l,r),alpha:de(t.alpha,e.alpha,r)}}const Rt={forward:Pi,reverse:Ai,interpolate:Zs},It={forward:Ws,reverse:Xs,interpolate:Js};class Nt{constructor(e,r,n,i,o){this.type=e,this.operator=r,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[a,s]of o)this.labels.push(a),this.outputs.push(s)}static interpolationFactor(e,r,n,i){let o=0;if(e.name==="exponential")o=hr(r,e.base,n,i);else if(e.name==="linear")o=hr(r,1,n,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;o=new Os(a[0],a[1],a[2],a[3]).solve(hr(r,1,n,i))}return o}static parse(e,r){let[n,i,o,...a]=e;if(!Array.isArray(i)||i.length===0)return r.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const u=i[1];if(typeof u!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:u}}else if(i[0]==="cubic-bezier"){const u=i.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:u}}else return r.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(o=r.parse(o,2,y),!o)return null;const s=[];let l=null;n==="interpolate-hcl"||n==="interpolate-lab"?l=Fe:r.expectedType&&r.expectedType.kind!=="value"&&(l=r.expectedType);for(let u=0;u<a.length;u+=2){const c=a[u],p=a[u+1],d=u+3,f=u+4;if(typeof c!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(s.length&&s[s.length-1][0]>=c)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);const h=r.parse(p,f,l);if(!h)return null;l=l||h.type,s.push([c,h])}return l.kind!=="number"&&l.kind!=="color"&&!(l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number")?r.error(`Type ${V(l)} is not interpolatable.`):new Nt(l,n,i,o,s)}evaluate(e){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=r[0])return n[0].evaluate(e);const o=r.length;if(i>=r[o-1])return n[o-1].evaluate(e);const a=Ei(r,i),s=r[a],l=r[a+1],u=Nt.interpolationFactor(this.interpolation,i,s,l),c=n[a].evaluate(e),p=n[a+1].evaluate(e);return this.operator==="interpolate"?Gs[this.type.kind.toLowerCase()](c,p,u):this.operator==="interpolate-hcl"?It.reverse(It.interpolate(It.forward(c),It.forward(p),u)):Rt.reverse(Rt.interpolate(Rt.forward(c),Rt.forward(p),u))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)r.push(this.labels[n],this.outputs[n].serialize());return r}}function hr(t,e,r,n){const i=n-r,o=t-r;return i===0?0:e===1?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var je=Nt;class Gt{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let n=null;const i=r.expectedType;i&&i.kind!=="value"&&(n=i);const o=[];for(const s of e.slice(1)){const l=r.parse(s,1+o.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,o.push(l)}return i&&o.some(s=>xt(i,s.type))?new Gt(P,o):new Gt(n,o)}evaluate(e){let r=null,n=0,i;for(const o of this.args){if(n++,r=o.evaluate(e),r&&r instanceof Ie&&!r.available&&(i||(i=r),r=null,n===this.args.length))return i;if(r!==null)break}return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Li=Gt;class sn{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let o=1;o<e.length-1;o+=2){const a=e[o];if(typeof a!="string")return r.error(`Expected string, but found ${typeof a} instead.`,o);if(/[^a-zA-Z0-9_]/.test(a))return r.error("Variable names must contain only alphanumeric characters or '_'.",o);const s=r.parse(e[o+1],o+1);if(!s)return null;n.push([a,s])}const i=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return i?new sn(n,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,n]of this.bindings)e.push(r,n.serialize());return e.push(this.result.serialize()),e}}var Di=sn;class ln{constructor(e,r,n){this.type=e,this.index=r,this.input=n}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,y),i=r.parse(e[2],2,me(r.expectedType||P));if(!n||!i)return null;const o=i.type;return new ln(o.itemType,n,i)}evaluate(e){const r=this.index.evaluate(e),n=this.input.evaluate(e);if(r<0)throw new te(`Array index out of bounds: ${r} < 0.`);if(r>=n.length)throw new te(`Array index out of bounds: ${r} > ${n.length-1}.`);if(r!==Math.floor(r))throw new te(`Array index must be an integer, but found ${r} instead.`);return n[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Ks=ln;class un{constructor(e,r){this.type=_,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,P),i=r.parse(e[2],2,P);return!n||!i?null:Zr(n.type,[_,A,y,Wt,P])?new un(n,i):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${V(n.type)} instead`)}evaluate(e){const r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(n==null)return!1;if(!bt(r,["boolean","string","number","null"]))throw new te(`Expected first argument to be of type boolean, string, number or null, but found ${V(Q(r))} instead.`);if(!bt(n,["string","array"]))throw new te(`Expected second argument to be of type array or string, but found ${V(Q(n))} instead.`);return n.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Ys=un;class Vt{constructor(e,r,n){this.type=y,this.needle=e,this.haystack=r,this.fromIndex=n}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,P),i=r.parse(e[2],2,P);if(!n||!i)return null;if(!Zr(n.type,[_,A,y,Wt,P]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${V(n.type)} instead`);if(e.length===4){const o=r.parse(e[3],3,y);return o?new Vt(n,i,o):null}else return new Vt(n,i)}evaluate(e){const r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!bt(r,["boolean","string","number","null"]))throw new te(`Expected first argument to be of type boolean, string, number or null, but found ${V(Q(r))} instead.`);if(!bt(n,["string","array"]))throw new te(`Expected second argument to be of type array or string, but found ${V(Q(n))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(e);return n.indexOf(r,i)}return n.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Qs=Vt;class cn{constructor(e,r,n,i,o,a){this.inputType=e,this.type=r,this.input=n,this.cases=i,this.outputs=o,this.otherwise=a}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return r.error("Expected an even number of arguments.");let n,i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);const o={},a=[];for(let u=2;u<e.length-1;u+=2){let c=e[u];const p=e[u+1];Array.isArray(c)||(c=[c]);const d=r.concat(u);if(c.length===0)return d.error("Expected at least one branch label.");for(const h of c){if(typeof h!="number"&&typeof h!="string")return d.error("Branch labels must be numbers or strings.");if(typeof h=="number"&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof h=="number"&&Math.floor(h)!==h)return d.error("Numeric branch labels must be integer values.");if(!n)n=Q(h);else if(d.checkSubtype(n,Q(h)))return null;if(typeof o[String(h)]<"u")return d.error("Branch labels must be unique.");o[String(h)]=a.length}const f=r.parse(p,u,i);if(!f)return null;i=i||f.type,a.push(f)}const s=r.parse(e[1],1,P);if(!s)return null;const l=r.parse(e[e.length-1],e.length-1,i);return!l||s.type.kind!=="value"&&r.concat(1).checkSubtype(n,s.type)?null:new cn(n,i,s,o,a,l)}evaluate(e){const r=this.input.evaluate(e);return(Q(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),n=[],i={};for(const a of r){const s=i[this.cases[a]];s===void 0?(i[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[s][1].push(a)}const o=a=>this.inputType.kind==="number"?Number(a):a;for(const[a,s]of n)s.length===1?e.push(o(s[0])):e.push(s.map(o)),e.push(this.outputs[a].serialize());return e.push(this.otherwise.serialize()),e}}var el=cn;class pn{constructor(e,r,n){this.type=e,this.branches=r,this.otherwise=n}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return r.error("Expected an odd number of arguments.");let n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const s=r.parse(e[a],a,_);if(!s)return null;const l=r.parse(e[a+1],a+1,n);if(!l)return null;i.push([s,l]),n=n||l.type}const o=r.parse(e[e.length-1],e.length-1,n);return o?new pn(n,i,o):null}evaluate(e){for(const[r,n]of this.branches)if(r.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,n]of this.branches)e(r),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var tl=pn;class Ut{constructor(e,r,n,i){this.type=e,this.input=r,this.beginIndex=n,this.endIndex=i}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,P),i=r.parse(e[2],2,y);if(!n||!i)return null;if(!Zr(n.type,[me(P),A,P]))return r.error(`Expected first argument to be of type array or string, but found ${V(n.type)} instead`);if(e.length===4){const o=r.parse(e[3],3,y);return o?new Ut(n.type,n,i,o):null}else return new Ut(n.type,n,i)}evaluate(e){const r=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!bt(r,["string","array"]))throw new te(`Expected first argument to be of type array or string, but found ${V(Q(r))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(e);return r.slice(n,i)}return r.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var rl=Ut;function qn(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function nl(t,e,r){return e===r}function il(t,e,r){return e!==r}function ol(t,e,r){return e<r}function al(t,e,r){return e>r}function sl(t,e,r){return e<=r}function ll(t,e,r){return e>=r}function ji(t,e,r,n){return n.compare(e,r)===0}function ul(t,e,r,n){return!ji(t,e,r,n)}function cl(t,e,r,n){return n.compare(e,r)<0}function pl(t,e,r,n){return n.compare(e,r)>0}function dl(t,e,r,n){return n.compare(e,r)<=0}function fl(t,e,r,n){return n.compare(e,r)>=0}function nt(t,e,r){const n=t!=="=="&&t!=="!=";return class $i{constructor(o,a,s){this.type=_,this.lhs=o,this.rhs=a,this.collator=s,this.hasUntypedArgument=o.type.kind==="value"||a.type.kind==="value"}static parse(o,a){if(o.length!==3&&o.length!==4)return a.error("Expected two or three arguments.");const s=o[0];let l=a.parse(o[1],1,P);if(!l)return null;if(!qn(s,l.type))return a.concat(1).error(`"${s}" comparisons are not supported for type '${V(l.type)}'.`);let u=a.parse(o[2],2,P);if(!u)return null;if(!qn(s,u.type))return a.concat(2).error(`"${s}" comparisons are not supported for type '${V(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error(`Cannot compare types '${V(l.type)}' and '${V(u.type)}'.`);n&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new ze(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new ze(l.type,[u])));let c=null;if(o.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(c=a.parse(o[3],3,Xt),!c)return null}return new $i(l,u,c)}evaluate(o){const a=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){const l=Q(a),u=Q(s);if(l.kind!==u.kind||!(l.kind==="string"||l.kind==="number"))throw new te(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const l=Q(a),u=Q(s);if(l.kind!=="string"||u.kind!=="string")return e(o,a,s)}return this.collator?r(o,a,s,this.collator.evaluate(o)):e(o,a,s)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}serialize(){const o=[t];return this.eachChild(a=>{o.push(a.serialize())}),o}}}const hl=nt("==",nl,ji),ml=nt("!=",il,ul),yl=nt("<",ol,cl),gl=nt(">",al,pl),xl=nt("<=",sl,dl),bl=nt(">=",ll,fl);class dn{constructor(e,r,n,i,o,a){this.type=A,this.number=e,this.locale=r,this.currency=n,this.unit=i,this.minFractionDigits=o,this.maxFractionDigits=a}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const n=r.parse(e[1],1,y);if(!n)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return r.error("NumberFormat options argument must be an object.");let o=null;if(i.locale&&(o=r.parse(i.locale,1,A),!o))return null;let a=null;if(i.currency&&(a=r.parse(i.currency,1,A),!a))return null;let s=null;if(i.unit&&(s=r.parse(i.unit,1,A),!s))return null;let l=null;if(i["min-fraction-digits"]&&(l=r.parse(i["min-fraction-digits"],1,y),!l))return null;let u=null;return i["max-fraction-digits"]&&(u=r.parse(i["max-fraction-digits"],1,y),!u)?null:new dn(n,o,a,s,l,u)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class fn{constructor(e){this.type=y,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=r.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${V(n.type)} instead.`):new fn(n):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string")return r.length;if(Array.isArray(r))return r.length;throw new te(`Expected value to be of type string or array, but found ${V(Q(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var vl=fn;const Oi={"==":hl,"!=":ml,">":gl,"<":yl,">=":bl,"<=":xl,array:ze,at:Ks,boolean:ze,case:tl,coalesce:Li,collator:Yt,format:Jt,image:Kt,in:Ys,"index-of":Qs,interpolate:je,"interpolate-hcl":je,"interpolate-lab":je,length:vl,let:Di,literal:Ot,match:el,number:ze,"number-format":dn,object:ze,slice:rl,step:Ci,string:ze,"to-boolean":Xe,"to-color":Xe,"to-number":Xe,"to-string":Xe,var:zi,within:en};function Nn(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const o=i?i.evaluate(t):1,a=bi(e,r,n,o);if(a)throw new te(a);return new fe(e/255*o,r/255*o,n/255*o,o)}function Gn(t,e){return t in e}function mr(t,e){const r=e[t];return typeof r>"u"?null:r}function wl(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}function Ae(t){return{type:t}}tt.register(Oi,{error:[xs,[A],(t,[e])=>{throw new te(e.evaluate(t))}],typeof:[A,[P],(t,[e])=>V(Q(e.evaluate(t)))],"to-rgba":[me(y,4),[Fe],(t,[e])=>e.evaluate(t).toArray()],rgb:[Fe,[y,y,y],Nn],rgba:[Fe,[y,y,y,y],Nn],has:{type:_,overloads:[[[A],(t,[e])=>Gn(e.evaluate(t),t.properties())],[[A,Ke],(t,[e,r])=>Gn(e.evaluate(t),r.evaluate(t))]]},get:{type:P,overloads:[[[A],(t,[e])=>mr(e.evaluate(t),t.properties())],[[A,Ke],(t,[e,r])=>mr(e.evaluate(t),r.evaluate(t))]]},"feature-state":[P,[A],(t,[e])=>mr(e.evaluate(t),t.featureState||{})],properties:[Ke,[],t=>t.properties()],"geometry-type":[A,[],t=>t.geometryType()],id:[P,[],t=>t.id()],zoom:[y,[],t=>t.globals.zoom],pitch:[y,[],t=>t.globals.pitch||0],"distance-from-center":[y,[],t=>t.distanceFromCenter()],"heatmap-density":[y,[],t=>t.globals.heatmapDensity||0],"line-progress":[y,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[y,[],t=>t.globals.skyRadialProgress||0],accumulated:[P,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[y,Ae(y),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],"*":[y,Ae(y),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],"-":{type:y,overloads:[[[y,y],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[y],(t,[e])=>-e.evaluate(t)]]},"/":[y,[y,y],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[y,[y,y],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[y,[],()=>Math.LN2],pi:[y,[],()=>Math.PI],e:[y,[],()=>Math.E],"^":[y,[y,y],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[y,[y],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[y,[y],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[y,[y],(t,[e])=>Math.log(e.evaluate(t))],log2:[y,[y],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[y,[y],(t,[e])=>Math.sin(e.evaluate(t))],cos:[y,[y],(t,[e])=>Math.cos(e.evaluate(t))],tan:[y,[y],(t,[e])=>Math.tan(e.evaluate(t))],asin:[y,[y],(t,[e])=>Math.asin(e.evaluate(t))],acos:[y,[y],(t,[e])=>Math.acos(e.evaluate(t))],atan:[y,[y],(t,[e])=>Math.atan(e.evaluate(t))],min:[y,Ae(y),(t,e)=>Math.min(...e.map(r=>r.evaluate(t)))],max:[y,Ae(y),(t,e)=>Math.max(...e.map(r=>r.evaluate(t)))],abs:[y,[y],(t,[e])=>Math.abs(e.evaluate(t))],round:[y,[y],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[y,[y],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[y,[y],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[_,[A,P],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[_,[P],(t,[e])=>t.id()===e.value],"filter-type-==":[_,[A],(t,[e])=>t.geometryType()===e.value],"filter-<":[_,[A,P],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[_,[P],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[_,[A,P],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[_,[P],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[_,[A,P],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[_,[P],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[_,[A,P],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[_,[P],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[_,[P],(t,[e])=>e.value in t.properties()],"filter-has-id":[_,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[_,[me(A)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[_,[me(P)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[_,[A,me(P)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[_,[A,me(P)],(t,[e,r])=>wl(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:_,overloads:[[[_,_],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[Ae(_),(t,e)=>{for(const r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:_,overloads:[[[_,_],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[Ae(_),(t,e)=>{for(const r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[_,[_],(t,[e])=>!e.evaluate(t)],"is-supported-script":[_,[A],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return r?r(e.evaluate(t)):!0}],upcase:[A,[A],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[A,[A],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[A,Ae(P),(t,e)=>e.map(r=>mt(r.evaluate(t))).join("")],"resolved-locale":[A,[Xt],(t,[e])=>e.evaluate(t).resolvedLocale()]});var qi=Oi;function Ir(t){return{result:"success",value:t}}function Be(t){return{result:"error",value:t}}function Tl(t){return t["property-type"]==="data-driven"}function kl(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function zl(t){return!!t.expression&&t.expression.interpolated}function Ni(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}class Fl{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new vi,this._defaultValue=r?Rl(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,n,i,o,a,s,l){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=i||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,n,i,o,a,s,l){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=l||null;try{const u=this.expression.evaluate(this._evaluator);if(u==null||typeof u=="number"&&u!==u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new te(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(u)} instead.`);return u}catch(u){return this._warningHistory[u.message]||(this._warningHistory[u.message]=!0,typeof console<"u"&&console.warn(u.message)),this._defaultValue}}}function El(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in qi}function Mr(t,e){const r=new Fi(qi,[],e?Sl(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Ir(new Fl(n,e)):Be(r.errors)}class Vn{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!tn(r.expression)}evaluateWithoutErrorHandling(e,r,n,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,i,o,a)}evaluate(e,r,n,i,o,a){return this._styleExpression.evaluate(e,r,n,i,o,a)}}class Un{constructor(e,r,n,i){this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!tn(r.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,r,n,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,i,o,a)}evaluate(e,r,n,i,o,a){return this._styleExpression.evaluate(e,r,n,i,o,a)}interpolationFactor(e,r,n){return this.interpolationType?je.interpolationFactor(this.interpolationType,e,r,n):0}}function Cl(t,e){if(t=Mr(t,e),t.result==="error")return t;const r=t.value.expression,n=Qt(r);if(!n&&!Tl(e))return Be([new xe("","data expressions not supported")]);const i=rn(r,["zoom","pitch","distance-from-center"]);if(!i&&!kl(e))return Be([new xe("","zoom expressions not supported")]);const o=Lt(r);if(!o&&!i)return Be([new xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof xe)return Be([o]);if(o instanceof je&&!zl(e))return Be([new xe("",'"interpolate" expressions cannot be used with this property')]);if(!o)return Ir(n?new Vn("constant",t.value):new Vn("source",t.value));const a=o instanceof je?o.interpolation:void 0;return Ir(n?new Un("camera",t.value,o.labels,a):new Un("composite",t.value,o.labels,a))}function Lt(t){let e=null;if(t instanceof Di)e=Lt(t.result);else if(t instanceof Li){for(const r of t.args)if(e=Lt(r),e)break}else(t instanceof Ci||t instanceof je)&&t.input instanceof tt&&t.input.name==="zoom"&&(e=t);return e instanceof xe||t.eachChild(r=>{const n=Lt(r);n instanceof xe?e=n:!e&&n?e=new xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new xe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Sl(t){const e={color:Fe,string:A,number:y,enum:A,boolean:_,formatted:Ht,resolvedImage:vt};return t.type==="array"?me(e[t.value]||P,t.length):e[t.type]}function Rl(t){return t.type==="color"&&(Ni(t.default)||Array.isArray(t.default))?new fe(0,0,0,0):t.type==="color"?fe.parse(t.default)||null:t.default===void 0?null:t.default}function Il(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function _r(t){if(Array.isArray(t))return t.map(_r);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const r in t)e[r]=_r(t[r]);return e}return Il(t)}var Gi={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Vi(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Vi(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Ml(t,e="fill"){if(t==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Vi(t)||(t=Bt(t));const r=t;let n=!0;try{n=_l(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(r,null,2)}
        `)}const i=Gi[`filter_${e}`],o=Mr(n,i);let a=null;if(o.result==="error")throw new Error(o.value.map(c=>`${c.key}: ${c.message}`).join(", "));a=(c,p,d)=>o.value.evaluate(c,p,{},d);let s=null,l=null;if(n!==r){const c=Mr(r,i);if(c.result==="error")throw new Error(c.value.map(p=>`${p.key}: ${p.message}`).join(", "));s=(p,d,f,h,g)=>c.value.evaluate(p,d,{},f,void 0,void 0,h,g),l=!Qt(c.value.expression)}a=a;const u=Zi(n);return{filter:a,dynamicFilter:s||void 0,needGeometry:u,needFeature:!!l}}function _l(t){if(!Qe(t))return t;let e=_r(t);return Bi(e),e=Ui(e),e}function Ui(t){if(!Array.isArray(t))return t;const e=Ll(t);return e===!0?e:e.map(r=>Ui(r))}function Bi(t){let e=!1;const r=[];if(t[0]==="case"){for(let n=1;n<t.length-1;n+=2)e=e||Qe(t[n]),r.push(t[n+1]);r.push(t[t.length-1])}else if(t[0]==="match"){e=e||Qe(t[1]);for(let n=2;n<t.length-1;n+=2)r.push(t[n+1]);r.push(t[t.length-1])}else if(t[0]==="step"){e=e||Qe(t[1]);for(let n=1;n<t.length-1;n+=2)r.push(t[n+1])}e&&(t.length=0,t.push("any",...r));for(let n=1;n<t.length;n++)Bi(t[n])}function Qe(t){if(!Array.isArray(t))return!1;if(Pl(t[0]))return!0;for(let e=1;e<t.length;e++){const r=t[e];if(Qe(r))return!0}return!1}function Pl(t){return t==="pitch"||t==="distance-from-center"}const Al=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ll(t){if(Al.has(t[0]))for(let e=1;e<t.length;e++){const r=t[e];if(Qe(r))return!0}return t}function Dl(t,e){return t<e?-1:t>e?1:0}function Zi(t){if(!Array.isArray(t))return!1;if(t[0]==="within")return!0;for(let e=1;e<t.length;e++)if(Zi(t[e]))return!0;return!1}function Bt(t){if(!t)return!0;const e=t[0];return t.length<=1?e!=="any":e==="=="?yr(t[1],t[2],"=="):e==="!="?Mt(yr(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?yr(t[1],t[2],e):e==="any"?jl(t.slice(1)):e==="all"?["all"].concat(t.slice(1).map(Bt)):e==="none"?["all"].concat(t.slice(1).map(Bt).map(Mt)):e==="in"?Bn(t[1],t.slice(2)):e==="!in"?Mt(Bn(t[1],t.slice(2))):e==="has"?Zn(t[1]):e==="!has"?Mt(Zn(t[1])):e==="within"?t:!0}function yr(t,e,r){switch(t){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,t,e]}}function jl(t){return["any"].concat(t.map(Bt))}function Bn(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",t,["literal",e.sort(Dl)]]:["filter-in-small",t,["literal",e]]}}function Zn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Mt(t){return["!",t]}var $l=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ol(t,e){const r={};for(const n in t)n!=="ref"&&(r[n]=t[n]);return $l.forEach(n=>{n in e&&(r[n]=e[n])}),r}function ql(t){t=t.slice();const e=Object.create(null);for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(let r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Ol(t[r],e[t[r].ref]));return t}var Wn={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},ct=" ",Xn=/(italic|oblique)$/i,Hn={},Nl=function(t,e,r){var n=Hn[t];if(!n){Array.isArray(t)||(t=[t]);for(var i=400,o="normal",a=[],s,l,u=0,c=t.length;u<c;++u){var p=t[u],d=p.split(" "),f=d[d.length-1].toLowerCase();f=="normal"||f=="italic"||f=="oblique"?(o=l?o:f,d.pop(),f=d[d.length-1].toLowerCase()):Xn.test(f)&&(f=f.replace(Xn,""),o=l?o:d[d.length-1].replace(f,""));for(var h in Wn){var g=d.length>1?d[d.length-2].toLowerCase():"";if(f==h||f==h.replace("-","")||g+"-"+f==h){i=s?i:Wn[h],d.pop(),g&&h.startsWith(g)&&d.pop();break}}!s&&typeof f=="number"&&(i=f);var m=d.join(ct).replace("Klokantech Noto Sans","Noto Sans");m.indexOf(ct)!==-1&&(m='"'+m+'"'),a.push(m)}n=Hn[t]=[o,i,a]}return n[0]+ct+n[1]+ct+e+"px"+(r?"/"+r:"")+ct+n[2]},Pr=gi(Nl);const Wi="https://api.mapbox.com";function hn(t){const e="mapbox://";return t.indexOf(e)!==0?"":t.slice(e.length)}function Gl(t,e,r){const n=hn(t);if(!n)return decodeURI(new URL(t,r).href);const i="sprites/";if(n.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${t}`);const o=n.slice(i.length);return`${Wi}/styles/v1/${o}/sprite?access_token=${e}`}function Xi(t,e){const r=hn(t);if(!r)return decodeURI(new URL(t,location.href).href);const n="styles/";if(r.indexOf(n)!==0)throw new Error(`unexpected style url: ${t}`);const i=r.slice(n.length);return`${Wi}/styles/v1/${i}?&access_token=${e}`}function Dt(t,e,r,n){const i=new URL(t,n),o=hn(t);if(!o)return e&&(i.searchParams.has(r)||i.searchParams.set(r,e)),decodeURI(i.href);if(o==="mapbox.satellite"){const a=window.devicePixelRatio>=1.5?"@2x":"";return`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${a}.webp?access_token=${e}`}return`https://{a-d}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`}const Jn={},Kn={};let Vl=0;function mn(t){return t.id||(t.id=Vl++),t.id}function Ul(t,e){return mn(t)+"."+pe(e)}function Bl(t){let e=Jn[t.id];return e||(e={},Jn[mn(t)]=e),e}function Zl(t){let e=Kn[t.id];return e||(e={},Kn[mn(t)]=e),e}function gr(t){return t*Math.PI/180}const wt=function(){const t=[];for(let e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();new $r({extent:$e("EPSG:3857").getExtent(),resolutions:wt});function Hi(t,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(t,e);const r=document.createElement("canvas");return r.width=t,r.height=e,r}function Ji(t,e){let r=0;const n=e.length;for(;r<n;++r)if(e[r]<t&&r+1<n){const o=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(o)}return n-1}const Ve={};function et(t,e,r={},n){if(e in Ve)return n&&(n.request=Ve[e][0]),Ve[e][1];const i=r.transformRequest&&r.transformRequest(e,t)||e,o=jt(()=>i).then(a=>(a instanceof Request||(a=new Request(a)),a.headers.get("Accept")||a.headers.set("Accept","application/json"),n&&(n.request=a),fetch(a).then(function(s){return delete Ve[e],s.ok?s.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(s){return delete Ve[e],Promise.reject(new Error("Error fetching source "+e))})));return Ve[e]=[i,o],o}function Ki(t,e){if(typeof t=="string")if(t.trim().startsWith("{"))try{const r=JSON.parse(t);return Promise.resolve(r)}catch(r){return Promise.reject(r)}else return t=Xi(t,e.accessToken),et("Style",t,e);else return Promise.resolve(t)}const Yn={};function Wl(t,e,r={}){const n=[e,JSON.stringify(t)].toString();let i=Yn[n];if(!i||r.transformRequest){let o;r.transformRequest&&(o=(s,l)=>{const u=r.transformRequest&&r.transformRequest(l,"Tiles")||l;if(s instanceof hi)s.setLoader((c,p,d)=>{jt(()=>u).then(f=>{fetch(f).then(h=>h.arrayBuffer()).then(h=>{const m=s.getFormat().readFeatures(h,{extent:c,featureProjection:d});s.setFeatures(m)}).catch(h=>s.setState(q.ERROR))})});else{const c=s.getImage();jt(()=>u).then(p=>{p instanceof Request?fetch(p).then(d=>d.blob()).then(d=>{const f=URL.createObjectURL(d);c.addEventListener("load",()=>URL.revokeObjectURL(f)),c.addEventListener("error",()=>URL.revokeObjectURL(f)),c.src=f}).catch(d=>s.setState(q.ERROR)):c.src=p})}});const a=t.url;if(a&&!t.tiles){const s=Dt(a,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:Ko(s)}),tileLoadFunction:o});else{const l={};i=et("Source",s,r,l).then(function(u){return u.tiles=u.tiles.map(function(c){return u.scheme==="tms"&&(c=c.replace("{y}","{-y}")),Dt(c,r.accessToken,r.accessTokenParam||"access_token",l.request.url)}),Promise.resolve({tileJson:u,tileLoadFunction:o})})}}else t=Object.assign({},t,{tiles:t.tiles.map(function(s){return t.scheme==="tms"&&(s=s.replace("{y}","{-y}")),Dt(s,r.accessToken,r.accessTokenParam||"access_token",e||location.href)})}),i=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:o});Yn[n]=i}return i}function Qn(t,e,r,n){const i=document.createElement("canvas"),o=[2*r*e.pixelRatio+e.width,2*r*e.pixelRatio+e.height];i.width=o[0],i.height=o[1];const a=i.getContext("2d");a.drawImage(t,e.x,e.y,e.width,e.height,r*e.pixelRatio,r*e.pixelRatio,e.width,e.height);const s=a.getImageData(0,0,o[0],o[1]);a.globalCompositeOperation="destination-over",a.fillStyle=`rgba(${n.r*255},${n.g*255},${n.b*255},${n.a})`;const l=s.data;for(let u=0,c=s.width;u<c;++u)for(let p=0,d=s.height;p<d;++p){const f=(p*c+u)*4;l[f+3]>0&&a.arc(u,p,r*e.pixelRatio,0,2*Math.PI)}return a.fill(),i}function Xl(t,e,r){const n=Math.max(0,Math.min(1,(r-t)/(e-t)));return n*n*(3-2*n)}function ei(t,e,r){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=i.getImageData(0,0,e.width,e.height),a=o.data;for(let s=0,l=o.width;s<l;++s)for(let u=0,c=o.height;u<c;++u){const p=(u*l+s)*4,d=a[p+3]/255,f=.75,h=.1,g=Xl(f-h,f+h,d);g>0?(a[p+0]=Math.round(255*r.r*g),a[p+1]=Math.round(255*r.g*g),a[p+2]=Math.round(255*r.b*g),a[p+3]=Math.round(255*g)):a[p+3]=0}return i.putImageData(o,0,0),n}const Hl=Array(256).join(" ");function Ar(t,e){if(e>=.05){let r="";const n=t.split(`
`),i=Hl.slice(0,Math.round(e/.1));for(let o=0,a=n.length;o<a;++o)o>0&&(r+=`
`),r+=n[o].split("").join(i);return r}return t}let xr;function Yi(){return xr||(xr=Hi(1,1).getContext("2d")),xr}function Le(t,e){return Yi().measureText(t).width+(t.length-1)*e}const ti={};function Lr(t,e,r,n){if(t.indexOf(`
`)!==-1){const a=t.split(`
`),s=[];for(let l=0,u=a.length;l<u;++l)s.push(Lr(a[l],e,r,n));return s.join(`
`)}const i=r+","+e+","+t+","+n;let o=ti[i];if(!o){const a=t.split(" ");if(a.length>1){const s=Yi();s.font=e;const u=s.measureText("M").width*r;let c="";const p=[];for(let d=0,f=a.length;d<f;++d){const h=a[d],g=c+(c?" ":"")+h;Le(g,n)<=u?c=g:(c&&p.push(c),c=h)}c&&p.push(c);for(let d=0,f=p.length;d<f&&f>1;++d){const h=p[d];if(Le(h,n)<u*.35){const g=d>0?Le(p[d-1],n):1/0,m=d<f-1?Le(p[d+1],n):1/0;p.splice(d,1),f-=1,g<m?(p[d-1]+=" "+h,d-=1):p[d]=h+" "+p[d]}}for(let d=0,f=p.length-1;d<f;++d){const h=p[d],g=p[d+1];if(Le(h,n)>u*.7&&Le(g,n)<u*.6){const m=h.split(" "),I=m.pop();Le(I,n)<u*.2&&(p[d]=m.join(" "),p[d+1]=I+" "+g),f-=1}}o=p.join(`
`)}else o=t;o=Ar(o,n),ti[i]=o}return o}const Jl=/font-family: ?([^;]*);/,Kl=/("|')/g;let _t;function Yl(t){if(!_t){_t={};const e=document.styleSheets;for(let r=0,n=e.length;r<n;++r){const i=e[r];try{const o=i.rules||i.cssRules;if(o)for(let a=0,s=o.length;a<s;++a){const l=o[a];if(l.type==5){const u=l.cssText.match(Jl);_t[u[1].replace(Kl,"")]=!0}}}catch{}}}return t in _t}const br={};function Ql(t,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const r=t.toString();if(r in br)return br[r];const n=[];for(let i=0,o=t.length;i<o;++i){t[i]=t[i].replace("Arial Unicode MS","Arial");const a=t[i],s=Pr(a,1);Xo(s);const l=s.split(" ");n.push([l.slice(3).join(" ").replace(/"/g,""),l[1],l[0]])}for(let i=0,o=n.length;i<o;++i){const a=n[i],s=a[0];if(!Yl(s)&&Ho.get(`${a[2]}
${a[1]} 
${s}`)!==100){const l=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a[1]).replace("{-fontstyle}",a[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",a[2]);if(!document.querySelector('link[href="'+l+'"]')){const u=document.createElement("link");u.href=l,u.rel="stylesheet",document.head.appendChild(u)}}}return br[r]=t,t}const eu={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},tu={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},ru=function(t,e){const r=Cl(t,e);if(r.result==="error")throw new Error(r.value.map(n=>`${n.key}: ${n.message}`).join(", "));return r.value},Dr={},Zt={zoom:0};let Pt,vr;function E(t,e,r,n,i,o,a){const s=t.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[s]||(o[s]={});const l=o[s];if(!l[r]){let u=(t[e]||Dr)[r];const c=Gi[`${e}_${t.type}`][r];u===void 0&&(u=c.default);let p=El(u);if(!p&&Ni(u)&&(u=cs(u,c),p=!0),p){const d=ru(u,c);l[r]=d.evaluate.bind(d)}else c.type=="color"&&(u=fe.parse(u)),l[r]=function(){return u}}return Zt.zoom=n,l[r](Zt,i,a)}function nu(t,e,r,n){return E(t,"layout","icon-allow-overlap",e,r,n)?E(t,"layout","icon-ignore-placement",e,r,n)?"none":"obstacle":"declutter"}function iu(t,e,r,n,i){return i||console.warn("No filterCache provided to evaluateFilter()"),t in i||(i[t]=Ml(e).filter),Zt.zoom=n,i[t](Zt,r)}function Ce(t,e){if(t){if(t.a===0||e===0)return;const r=t.a;return e=e===void 0?1:e,r===0?"transparent":"rgba("+Math.round(t.r*255/r)+","+Math.round(t.g*255/r)+","+Math.round(t.b*255/r)+","+r*e+")"}return t}const ou=/\{[^{}}]*\}/g;function wr(t,e){return t.replace(ou,function(r){return e[r.slice(1,-1)]||""})}const au={};function su(t,e,r,n=wt,i=void 0,o=void 0,a=void 0,s=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");au[Ul(e,t)]=Array.from(arguments);let l,u,c;if(o){if(typeof Image<"u"){const w=new Image;let z;jt(()=>o).then(M=>{M instanceof Request?fetch(M).then(H=>H.blob()).then(H=>{z=URL.createObjectURL(H),w.src=z}).catch(()=>{}):(w.crossOrigin="anonymous",w.src=M,z&&URL.revokeObjectURL(z))}),w.onload=function(){l=w,u=[w.width,w.height],t.changed(),w.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const w=self;w.postMessage({action:"loadImage",src:o}),w.addEventListener("message",function(M){M.data.action==="imageLoaded"&&M.data.src===o&&(l=M.data.image,u=[l.width,l.height])})}}const p=ql(e.layers),d={},f=[],h={},g={},m=Bl(e),I=Zl(e);let F;for(let w=0,z=p.length;w<z;++w){const M=p[w],H=M.id;if(typeof r=="string"&&M.source==r||r.indexOf(H)!==-1){const U=M["source-layer"];if(F){if(M.source!==F)throw new Error(`Layer "${H}" does not use source "${F}`)}else{F=M.source;const re=e.sources[F];if(!re)throw new Error(`Source "${F}" is not defined`);const T=re.type;if(T!=="vector"&&T!=="geojson")throw new Error(`Source "${F}" is not of type "vector" or "geojson", but "${T}"`)}let v=d[U];v||(v=[],d[U]=v),v.push({layer:M,index:w}),f.push(H)}}const R=new pt,k=new We,S=[],L=function(w,z,M){const H=w.getProperties(),U=d[H.layer];if(!U)return;let v=n.indexOf(z);v==-1&&(v=Ji(z,n));const re=eu[w.getGeometry().getType()],T={id:w.getId(),properties:H,type:re},C=t.get("mapbox-featurestate")[w.getId()];let $=-1;for(let ve=0,Me=U.length;ve<Me;++ve){const Tt=U[ve],x=Tt.layer,yn=x.id;if(M!==void 0&&M!==yn)continue;const it=x.layout||Dr,_e=x.paint||Dr;if(it.visibility==="none"||"minzoom"in x&&v<x.minzoom||"maxzoom"in x&&v>=x.maxzoom)continue;const gn=x.filter;if(!gn||iu(yn,gn,T,v,I)){let ye,we,kt,ge,Te,b;const Oe=Tt.index;if(re==3&&(x.type=="fill"||x.type=="fill-extrusion"))if(we=E(x,"paint",x.type+"-opacity",v,T,m,C),x.type+"-pattern"in _e){const B=E(x,"paint",x.type+"-pattern",v,T,m,C);if(B){const Z=typeof B=="string"?wr(B,H):B.toString();if(l&&i&&i[Z]){++$,b=S[$],(!b||!b.getFill()||b.getStroke()||b.getText())&&(b=new Se({fill:new We}),S[$]=b),kt=b.getFill(),b.setZIndex(Oe);const N=Z+"."+we;let W=g[N];if(!W){const D=i[Z],O=Hi(D.width,D.height),ie=O.getContext("2d");ie.globalAlpha=we,ie.drawImage(l,D.x,D.y,D.width,D.height,0,0,D.width,D.height),W=ie.createPattern(O,"repeat"),g[N]=W}kt.setColor(W)}}}else ye=Ce(E(x,"paint",x.type+"-color",v,T,m,C),we),x.type+"-outline-color"in _e&&(Te=Ce(E(x,"paint",x.type+"-outline-color",v,T,m,C),we)),Te||(Te=ye),(ye||Te)&&(++$,b=S[$],(!b||ye&&!b.getFill()||!ye&&b.getFill()||Te&&!b.getStroke()||!Te&&b.getStroke()||b.getText())&&(b=new Se({fill:ye?new We:void 0,stroke:Te?new pt:void 0}),S[$]=b),ye&&(kt=b.getFill(),kt.setColor(ye)),Te&&(ge=b.getStroke(),ge.setColor(Te),ge.setWidth(.5)),b.setZIndex(Oe));if(re!=1&&x.type=="line"){ye=!("line-pattern"in _e)&&"line-color"in _e?Ce(E(x,"paint","line-color",v,T,m,C),E(x,"paint","line-opacity",v,T,m,C)):void 0;const B=E(x,"paint","line-width",v,T,m,C);ye&&B>0&&(++$,b=S[$],(!b||!b.getStroke()||b.getFill()||b.getText())&&(b=new Se({stroke:new pt}),S[$]=b),ge=b.getStroke(),ge.setLineCap(E(x,"layout","line-cap",v,T,m,C)),ge.setLineJoin(E(x,"layout","line-join",v,T,m,C)),ge.setMiterLimit(E(x,"layout","line-miter-limit",v,T,m,C)),ge.setColor(ye),ge.setWidth(B),ge.setLineDash(_e["line-dasharray"]?E(x,"paint","line-dasharray",v,T,m,C).map(function(Z){return Z*B}):null),b.setZIndex(Oe))}let zt=!1,G=null,xn=0,ot,ne,er;if((re==1||re==2)&&"icon-image"in it){const B=E(x,"layout","icon-image",v,T,m,C);if(B){ot=typeof B=="string"?wr(B,H):B.toString();let Z;const N=s?s(t,ot):void 0;if(l&&i&&i[ot]||N){const W=E(x,"layout","icon-rotation-alignment",v,T,m,C);if(re==2){const D=w.getGeometry();if(D.getFlatMidpoint||D.getFlatMidpoints){const O=D.getExtent();if(Math.sqrt(Math.max(Math.pow((O[2]-O[0])/z,2),Math.pow((O[3]-O[1])/z,2)))>150){const J=D.getType()==="MultiLineString"?D.getFlatMidpoints():D.getFlatMidpoint();if(vr||(Pt=[NaN,NaN],vr=new kr("Point",Pt,[],{},null)),Z=vr,Pt[0]=J[0],Pt[1]=J[1],E(x,"layout","symbol-placement",v,T,m,C)==="line"&&W==="map"){const ue=D.getStride(),ae=D.getFlatCoordinates();for(let ce=0,X=ae.length-ue;ce<X;ce+=ue){const oe=ae[ce],he=ae[ce+1],Y=ae[ce+ue],Pe=ae[ce+ue+1],eo=Math.min(oe,Y),to=Math.min(he,Pe),ro=Math.max(oe,Y),no=Math.max(he,Pe);if(J[0]>=eo&&J[0]<=ro&&J[1]>=to&&J[1]<=no){xn=Math.atan2(he-Pe,Y-oe);break}}}}}}if(re!==2||Z){const D=E(x,"layout","icon-size",v,T,m,C),O=_e["icon-color"]!==void 0?E(x,"paint","icon-color",v,T,m,C):null;if(!O||O.a!==0){const ie=E(x,"paint","icon-halo-color",v,T,m,C),J=E(x,"paint","icon-halo-width",v,T,m,C);let le=`${ot}.${D}.${J}.${ie}`;if(O!==null&&(le+=`.${O}`),ne=h[le],!ne){const ue=nu(x,v,T,m);let ae;"icon-offset"in it&&(ae=E(x,"layout","icon-offset",v,T,m,C).slice(0),ae[1]*=-1);let ce=O?[O.r*255,O.g*255,O.b*255,O.a]:void 0;if(N){const X={color:ce,rotateWithView:W==="map",displacement:ae,declutterMode:ue,scale:D};typeof N=="string"?X.src=N:(X.img=N,X.imgSize=[N.width,N.height]),ne=new kn(X)}else{const X=i[ot];let oe,he,Y;J?X.sdf?(oe=Qn(ei(l,X,O),{x:0,y:0,width:X.width,height:X.height,pixelRatio:X.pixelRatio},J,ie),ce=void 0):oe=Qn(l,X,J,ie):(X.sdf?(c||(c=ei(l,{x:0,y:0,width:u[0],height:u[1]},{r:1,g:1,b:1,a:1})),oe=c):oe=l,he=[X.width,X.height],Y=[X.x,X.y]),ne=new kn({color:ce,img:oe,imgSize:u,size:he,offset:Y,rotateWithView:W==="map",scale:D/X.pixelRatio,displacement:ae,declutterMode:ue})}h[le]=ne}}ne&&(++$,b=S[$],(!b||!b.getImage()||b.getFill()||b.getStroke())&&(b=new Se,S[$]=b),b.setGeometry(Z),ne.setRotation(xn+gr(E(x,"layout","icon-rotate",v,T,m,C))),ne.setOpacity(E(x,"paint","icon-opacity",v,T,m,C)),ne.setAnchor(tu[E(x,"layout","icon-anchor",v,T,m,C)]),b.setImage(ne),G=b.getText(),b.setText(void 0),b.setZIndex(Oe),zt=!0,er=!1)}else er=!0}}}if(re==1&&x.type==="circle"){++$,b=S[$],(!b||!b.getImage()||b.getFill()||b.getStroke())&&(b=new Se,S[$]=b);const B="circle-radius"in _e?E(x,"paint","circle-radius",v,T,m,C):5,Z=Ce(E(x,"paint","circle-stroke-color",v,T,m,C),E(x,"paint","circle-stroke-opacity",v,T,m,C)),N=Ce(E(x,"paint","circle-color",v,T,m,C),E(x,"paint","circle-opacity",v,T,m,C)),W=E(x,"paint","circle-stroke-width",v,T,m,C),D=B+"."+Z+"."+N+"."+W;ne=h[D],ne||(ne=new ci({radius:B,stroke:Z&&W>0?new pt({width:W,color:Z}):void 0,fill:N?new We({color:N}):void 0,declutterMode:"none"}),h[D]=ne),b.setImage(ne),G=b.getText(),b.setText(void 0),b.setGeometry(void 0),b.setZIndex(Oe),zt=!0}let ee,at,st,Ee,lt,tr;if("text-field"in it){Ee=Math.round(E(x,"layout","text-size",v,T,m,C));const B=E(x,"layout","text-font",v,T,m,C);st=E(x,"layout","text-line-height",v,T,m,C),at=Pr(a?a(B,e.metadata?e.metadata["ol:webfonts"]:void 0):B,Ee,st),at.includes("sans-serif")||(at+=",sans-serif"),lt=E(x,"layout","text-letter-spacing",v,T,m,C),tr=E(x,"layout","text-max-width",v,T,m,C);const Z=E(x,"layout","text-field",v,T,m,C);typeof Z=="object"&&Z.sections?Z.sections.length===1?ee=Z.toString():ee=Z.sections.reduce((N,W,D)=>{const O=W.fontStack?W.fontStack.split(","):B,ie=Pr(a?a(O):O,Ee*(W.scale||1),st);let J=W.text;if(J===`
`)return N.push(`
`,""),N;if(re==2){N.push(Ar(J,lt),ie);return}J=Lr(J,ie,tr,lt).split(`
`);for(let le=0,ue=J.length;le<ue;++le)le>0&&N.push(`
`,""),N.push(J[le],ie);return N},[]):ee=wr(Z,H).trim(),we=E(x,"paint","text-opacity",v,T,m,C)}if(ee&&we&&!er){zt||(++$,b=S[$],(!b||!b.getText()||b.getFill()||b.getStroke())&&(b=new Se,S[$]=b),b.setImage(void 0),b.setGeometry(void 0)),b.getText()||b.setText(G||new Yo({padding:[2,2,2,2]})),G=b.getText();const B=it["text-transform"];B=="uppercase"?ee=Array.isArray(ee)?ee.map((Y,Pe)=>Pe%2?Y:Y.toUpperCase()):ee.toUpperCase():B=="lowercase"&&(ee=Array.isArray(ee)?ee.map((Y,Pe)=>Pe%2?Y:Y.toLowerCase()):ee.toLowerCase());const Z=Array.isArray(ee)?ee:re==2?Ar(ee,lt):Lr(ee,at,tr,lt);G.setText(Z),G.setFont(at),G.setRotation(gr(E(x,"layout","text-rotate",v,T,m,C)));const N=E(x,"layout","text-anchor",v,T,m,C),W=zt||re==1?"point":E(x,"layout","symbol-placement",v,T,m,C);let D;if(W==="line-center"?(G.setPlacement("line"),D="center"):G.setPlacement(W),W==="line"&&typeof G.setRepeat=="function"){const Y=E(x,"layout","symbol-spacing",v,T,m,C);G.setRepeat(Y*2)}G.setOverflow(W==="point");let O=E(x,"paint","text-halo-width",v,T,m,C);const ie=E(x,"layout","text-offset",v,T,m,C),J=E(x,"paint","text-translate",v,T,m,C);let le=0,ue=0;if(W=="point"){D="center",N.indexOf("left")!==-1?(D="left",ue=O):N.indexOf("right")!==-1&&(D="right",ue=-O);const Y=E(x,"layout","text-rotation-alignment",v,T,m,C);G.setRotateWithView(Y=="map")}else G.setMaxAngle(gr(E(x,"layout","text-max-angle",v,T,m,C))*ee.length/Z.length),G.setRotateWithView(!1);G.setTextAlign(D);let ae="middle";N.indexOf("bottom")==0?(ae="bottom",le=-O-.5*(st-1)*Ee):N.indexOf("top")==0&&(ae="top",le=O+.5*(st-1)*Ee),G.setTextBaseline(ae);const ce=E(x,"layout","text-justify",v,T,m,C);G.setJustify(ce==="auto"?void 0:ce),G.setOffsetX(ie[0]*Ee+ue+J[0]),G.setOffsetY(ie[1]*Ee+le+J[1]),k.setColor(Ce(E(x,"paint","text-color",v,T,m,C),we)),G.setFill(k);const X=Ce(E(x,"paint","text-halo-color",v,T,m,C),we);if(X){R.setColor(X),O*=2;const Y=.5*Ee;R.setWidth(O<=Y?O:Y),G.setStroke(R)}else G.setStroke(void 0);const oe=E(x,"layout","text-padding",v,T,m,C),he=G.getPadding();oe!==he[0]&&(he[0]=oe,he[1]=oe,he[2]=oe,he[3]=oe),b.setZIndex(Oe)}}}if($>-1)return S.length=$+1,S};return t.setStyle(L),t.set("mapbox-source",F),t.set("mapbox-layers",f),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),L}function lu(t,e=512){return t.getExtent()?jr({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():wt}function uu(t,e){return e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((n,i)=>{e.accessToken=n,e.accessTokenParam=i})),e}function cu(t,e,r="",n={},i=void 0){let o,a,s,l,u=!0;return typeof r!="string"&&!Array.isArray(r)?(s=r,l=s.source||s.layers,n=s):l=r,typeof n=="string"?(o=n,s={}):(o=n.styleUrl,s=n),s.updateSource===!1&&(u=!1),i||(i=s.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:Xi(o,s.accessToken),s=uu(o,s)),new Promise(function(c,p){Ki(e,s).then(function(d){if(d.version!=8)return p(new Error("glStyle version 8 required."));if(!(t instanceof zr||t instanceof ft))return p(new Error("Can only apply to VectorLayer or VectorTileLayer"));const f=t instanceof ft?"vector":"geojson";if(l?Array.isArray(l)?a=d.layers.find(function(k){return k.id===l[0]}).source:a=l:(a=Object.keys(d.sources).find(function(k){return d.sources[k].type===f}),l=a),!a)return p(new Error(`No ${f} source found in the glStyle.`));function h(){if(!u)return Promise.resolve();if(t instanceof ft)return yu(d.sources[a],o,s).then(function(w){const z=t.getSource();if(z?w!==z&&(z.setTileUrlFunction(w.getTileUrlFunction()),typeof z.setUrls=="function"&&typeof w.getUrls=="function"&&z.setUrls(w.getUrls()),z.format_||(z.format_=w.format_),z.getAttributions()||z.setAttributions(w.getAttributions()),z.getTileLoadFunction()===mi&&z.setTileLoadFunction(w.getTileLoadFunction()),Jo(z.getProjection(),w.getProjection())&&(z.tileGrid=w.getTileGrid())):t.setSource(w),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){const M=t.getSource().getTileGrid();t.setMaxResolution(M.getResolution(M.getMinZoom()))}});const k=d.sources[a];let S=t.getSource();(!S||S.get("mapbox-source")!==k)&&(S=xu(k,o,s));const L=t.getSource();return L?S!==L&&(L.getAttributions()||L.setAttributions(S.getAttributions()),L.format_||(L.format_=S.getFormat()),L.url_=S.getUrl()):t.setSource(S),Promise.resolve()}let g,m,I,F;function R(){if(!F&&(!d.sprite||m)){if(s.projection&&!i){const S=$e(s.projection).getUnits();S!=="m"&&(i=wt.map(L=>L/Uo[S]))}F=su(t,d,l,i,m,I,Ql,s.getImage),t.getStyle()?h().then(c).catch(p):p(new Error(`Nothing to show for source [${a}]`))}else F?(t.setStyle(F),h().then(c).catch(p)):p(new Error("Something went wrong trying to apply style."))}if(d.sprite){const k=new URL(Gl(d.sprite,s.accessToken,o||location.href));g=window.devicePixelRatio>=1.5?.5:1;const S=g==.5?"@2x":"";let L=k.origin+k.pathname+S+".json"+k.search;new Promise(function(w,z){et("Sprite",L,s).then(w).catch(function(M){L=k.origin+k.pathname+".json"+k.search,et("Sprite",L,s).then(w).catch(z)})}).then(function(w){if(w===void 0&&p(new Error("No sprites found.")),m=w,I=k.origin+k.pathname+S+".png"+k.search,s.transformRequest){const z=s.transformRequest(I,"SpriteImage")||I;(z instanceof Request||z instanceof Promise)&&(I=z)}R()}).catch(function(w){p(new Error(`Sprites cannot be loaded: ${L}: ${w.message}`))})}else R()}).catch(p)})}const ri={};function pu(t,e,r){e.layers.some(function(n){if(n.type==="background"){if(t instanceof ui)return t.setBackground(function(i){return Qi(n,i,r,{})}),!0;if(t instanceof Bo||t instanceof Zo)return t.getLayers().push(mu(n,r,{})),!0}})}function du(t,e,r={}){return Ki(e,r).then(function(n){pu(t,n,r)})}function fu(t,e){const r=t.bounds;if(r){const n=zn([r[0],r[1]],e),i=zn([r[2],r[3]],e);return[n[0],n[1],i[0],i[1]]}return $e(e).getExtent()}function hu(t,e,r){const n=new Da({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),i=n.getTileJSON(),o=n.getTileGrid(),a=$e(r.projection||"EPSG:3857"),s=fu(i,a),l=a.getExtent(),u=i.minzoom||0,c=i.maxzoom||22,p={attributions:n.getAttributions(),projection:a,tileGrid:new $r({origin:l?ai(l):o.getOrigin(0),extent:s||o.getExtent(),minZoom:u,resolutions:lu(a,e.tileSize).slice(0,c+1),tileSize:o.getTileSize(0)})};return Array.isArray(i.tiles)?p.urls=i.tiles:p.url=i.tiles,p}function Qi(t,e,r,n){const i={id:t.id,type:t.type},o=t.layout||{},a=t.paint||{};i.paint=a;const s=Ji(e,r.resolutions||wt);let l,u;return a["background-color"]!==void 0&&(l=E(i,"paint","background-color",s,ri,n)),a["background-opacity"]!==void 0&&(u=E(i,"paint","background-opacity",s,ri,n)),o.visibility=="none"?void 0:Ce(l,u)}function mu(t,e,r){const n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new ui({source:new Wo({}),render(i){const o=Qi(t,i.viewState.resolution,e,r);return n.style.backgroundColor=o,n}})}function yu(t,e,r){return new Promise(function(n,i){Wl(t,e,r).then(function({tileJson:o,tileLoadFunction:a}){const s=hu(t,o,r);s.tileLoadFunction=a,s.format=new Nr,n(new Or(s))}).catch(i)})}function gu(t){return`{bbox-${(t?t.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function xu(t,e,r){const n=r.projection?new Fr({dataProjection:r.projection}):new Fr,i=t.data,o={};if(typeof i=="string"){const s=Dt(i,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(s)){const u=(p,d,f)=>{const h=gu(f);return s.replace(h,`${p.join(",")}`)},c=new At({attributions:t.attribution,format:n,loader:(p,d,f,h,g)=>{const m=typeof u=="function"?u(p,d,f):u;et("GeoJSON",m,r).then(I=>{const F=c.getFormat().readFeatures(I,{featureProjection:f});c.addFeatures(F),h(F)}).catch(I=>{c.removeLoadedExtent(p),g()})},strategy:ni});return c.set("mapbox-source",t),c}const l=new At({attributions:t.attribution,format:n,url:s,loader:(u,c,p,d,f)=>{et("GeoJSON",s,r).then(h=>{const g=l.getFormat().readFeatures(h,{featureProjection:p});l.addFeatures(g),d(g)}).catch(h=>{l.removeLoadedExtent(u),f()})}});return l}o.features=n.readFeatures(i,{featureProjection:"EPSG:3857"});const a=new At(Object.assign({attributions:t.attribution,format:n},o));return a.set("mapbox-source",t),a}class bu extends Vo{constructor(e){super(Tr.ERROR),this.error=e}}class vu extends ft{constructor(e){const r="declutter"in e?e.declutter:!0,n=new Or({state:"loading",format:new Nr});super({source:n,background:e.background,declutter:r,className:e.className,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,renderOrder:e.renderOrder,renderBuffer:e.renderBuffer,renderMode:e.renderMode,map:e.map,updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,preload:e.preload,useInterimTilesOnError:e.useInterimTilesOnError,properties:e.properties}),e.accessToken&&(this.accessToken=e.accessToken);const i=e.styleUrl,o=[cu(this,i,e.layers||e.source,{accessToken:this.accessToken})];this.getBackground()===void 0&&o.push(du(this,e.styleUrl,{accessToken:this.accessToken})),Promise.all(o).then(()=>{n.setState("ready")}).catch(a=>{this.dispatchEvent(new bu(a)),this.getSource().setState("error")})}}const Ze="main";class wu{mapId=Ze;async getMapConfig(){return{projection:"EPSG:3857",initialView:{kind:"position",center:{x:848890,y:6793350},zoom:13},layers:[new ut({title:"OSM",visible:!0,isBaseLayer:!0,olLayer:new Qo({source:new ea})}),new ut({id:"inspire-us-kindergarten",title:"Kindertageseinrichtungen in NRW",visible:!0,olLayer:new zr({style:new Se({image:new ci({fill:new We({color:"blue"}),radius:5})}),source:Rn({baseUrl:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1",collectionId:"governmentalservice",crs:"http://www.opengis.net/def/crs/EPSG/0/3857",attributions:"<a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>"})})}),new ut({id:"ogc_katasterbezirk",title:"Liegenschaftskatasterbezirke in NRW (viele Daten)",visible:!1,olLayer:new zr({source:Rn({baseUrl:"https://ogc-api.nrw.de/lika/v1",collectionId:"katasterbezirk",limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/3857",attributions:"<a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>"})})}),new ut({title:"Abschnitte / Äste mit Unfällen (Mapbox Style)",visible:!1,olLayer:new vu({styleUrl:"https://demo.ldproxy.net/strassen/styles/default?f=mbs"})}),new ut({title:"Pendleratlas",visible:!0,olLayer:new ft({source:new Or({url:"https://pendleratlas.statistikportal.de/_vector_tiles/2022/vg250/{z}/{x}/{y}.pbf",format:new Nr,projection:"EPSG:3857",attributions:`&copy; Statistische Ämter der Länder ${new Date().getFullYear()} | GeoBasis-DE/BKG ${new Date().getFullYear()}`}),style:new Se({fill:new We({color:"rgba(173, 209, 158, 0.6)"}),stroke:new pt({color:"#2d7d9f",width:3})})})})]}}}const Tu={"ogc-api-app":{name:"ogc-api-app",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:wu,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{}}},ui:{references:[]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/theme":{name:"@open-pioneer/theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:ta,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/ogc-features":{name:"@open-pioneer/ogc-features",services:{},ui:{references:[]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/search":{name:"@open-pioneer/search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/test-utils":{name:"@open-pioneer/test-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-test-utils":{name:"@open-pioneer/map-test-utils",services:{},ui:{references:[]},properties:{}}},ku=`:root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.search-component .chakra-divider{display:none}.search-component .search-highlighted-match{font-weight:700}.search-component .search-value-container{cursor:text;padding-left:30px!important}.search-component .search-invisible{display:none}
`,zu=["en","de"];function Fu(t){switch(t){case"en":return Cn(()=>import("./7af13c2e869b.js"),[],import.meta.url).then(e=>e.default);case"de":return Cn(()=>import("./061be87acdef.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${t}'`)}const Eu=so(ku),Cu=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:Fu,locales:zu,packages:Tu,styles:Eu},Symbol.toStringTag,{value:"Module"})),Su="ogc-api-app",Ru=fa.bind(void 0,Su);function Iu(){const t=Ru();return K.jsx(or,{height:"100%",direction:"column",overflow:"hidden",children:K.jsx(Fn,{title:K.jsx(Sn,{textAlign:"center",py:1,children:K.jsx(En,{size:"md",children:"Open Pioneer - OGC API Features and OGC API Tiles Sample"})}),children:K.jsx(or,{flex:"1",direction:"column",position:"relative",children:K.jsxs(ra,{mapId:Ze,children:[K.jsx(ir,{position:"top-left",horizontalGap:20,verticalGap:20,children:K.jsx(Sn,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",children:K.jsx(Fn,{title:K.jsx(En,{size:"md",children:t.formatMessage({id:"tocTitle"})}),children:K.jsx(la,{mapId:Ze,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})})}),K.jsx(ir,{position:"top-right",horizontalGap:10,verticalGap:10,children:K.jsxs(ha,{backgroundColor:"whiteAlpha.900",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",maxWidth:"400px",children:[K.jsx(ar,{as:"b",children:"Description"}),K.jsx(ar,{children:"This application can be used to test OGC API Features and OGC API Tiles."}),K.jsx(ar,{children:"Vector Tiles cannot be reprojected and require the map to use the same projection. Currently all known MVT vector tile sets are using WebMercator, making them unusable in the Default Sample App which uses ETRS89/UTM zone 32N. This Sample App uses WebMercator."})]})}),K.jsx(ir,{position:"bottom-right",horizontalGap:10,verticalGap:30,children:K.jsxs(or,{direction:"column",gap:1,padding:1,children:[K.jsx(ca,{mapId:Ze}),K.jsx(pa,{mapId:Ze}),K.jsx(da,{mapId:Ze})]})})]})})})})}const Mu=lo({component:Iu,theme:uo,appMetadata:Cu,async resolveConfig(t){const e=t.getAttribute("forced-locale");if(e)return{locale:e}}});customElements.define("ogc-api-app",Mu);const _u=document.getElementsByTagName("body")[0];Pu();function Pu(){const t=window.location.search,r=new URLSearchParams(t).get("lang"),n=document.createElement("ogc-api-app");n.classList.add("full-height"),n.setAttribute("id","test"),r&&n.setAttribute("forced-locale",r),_u.appendChild(n)}
