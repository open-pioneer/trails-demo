import{bM as yt,u as Ct,o as Pt,E as bt,bN as J,bO as vt,bP as _t,l as wt,M as le,bQ as M,bR as xt,bS as Ft,bT as jt,bU as St,bV as Gt,bW as Mt,bX as Ot,bY as ce,ah as Et,bZ as Rt,ac as se,b_ as kt,b$ as At,c0 as Nt,c1 as Lt,c2 as Tt,c3 as It,c4 as re,c5 as Bt,c6 as Dt,c7 as Ht,c8 as Me,c9 as zt,af as ne,ca as Vt,cb as Oe,ab as Ee,y as x,cc as p,s as $t,cd as Yt,bC as Re,ce as Xt,cf as Jt,bv as Ut,cg as E,aw as ue}from"./6df5caa67203.js";import{L as oe}from"./e5f03af71751.js";import{M as Zt,N as ke,f as A,j as u,c as O,v as N,r as d,O as Kt,P as Wt,Q,T as k,U as b,m as Qt,V as qt,a as es,W as ts,C as ss,X as rs,Y as ns,B as os,Z as is}from"./4536b7b97685.js";import{u as de,T as Ae,c as Ne,a as Fe,S as je}from"./ca4907bed514.js";import{F as as,a as ls,b as cs,c as us}from"./5a3a511fcd6c.js";import{u as Le}from"./36ac208a0fdb.js";import{B as ds}from"./442a534e2059.js";import{C as hs}from"./e608e3fdf504.js";import{u as fs,a as gs,b as ms,l as ps}from"./8df991587d8a.js";import{T as Te}from"./b1b26d36649f.js";import{L as ys}from"./2230dc970b93.js";import{B as ie}from"./6f807709641e.js";import{F as Ie}from"./54e23a1707a6.js";function Cs(r){return"current"in r}var Be=()=>typeof window<"u";function Ps(){var r;const e=navigator.userAgentData;return(r=e?.platform)!=null?r:navigator.platform}var bs=r=>Be()&&r.test(navigator.vendor),vs=r=>Be()&&r.test(Ps()),_s=()=>vs(/mac|iphone|ipad|ipod/i),ws=()=>_s()&&bs(/apple/i);function xs(r){const{ref:e,elements:t,enabled:s}=r,n=()=>{var o,i;return(i=(o=e.current)==null?void 0:o.ownerDocument)!=null?i:document};Zt(n,"pointerdown",o=>{if(!ws()||!s)return;const i=o.target,l=(t??[e]).some(c=>{const h=Cs(c)?c.current:c;return h?.contains(i)||h===i});n().activeElement!==i&&l&&(o.preventDefault(),i.focus())})}var[Fs,j]=ke({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[js,L]=ke({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),De=A(function(e,t){const{getHeaderProps:s}=j(),n=L();return u.jsx(O.header,{...s(e,t),className:N("chakra-popover__header",e.className),__css:n.header})});De.displayName="PopoverHeader";function He(r){const e=d.Children.only(r.children),{getTriggerProps:t}=j();return d.cloneElement(e,t(e.props,e.ref))}He.displayName="PopoverTrigger";var G={click:"click",hover:"hover"};function Ss(r={}){const{closeOnBlur:e=!0,closeOnEsc:t=!0,initialFocusRef:s,id:n,returnFocusOnClose:o=!0,autoFocus:i=!0,arrowSize:a,arrowShadowColor:l,trigger:c=G.click,openDelay:h=200,closeDelay:g=200,isLazy:C,lazyBehavior:w="unmount",computePositionOnMount:tt,...st}=r,{isOpen:y,onClose:v,onOpen:U,onToggle:pe}=Kt(r),Z=d.useRef(null),T=d.useRef(null),S=d.useRef(null),R=d.useRef(!1),ye=d.useRef(!1);y&&(ye.current=!0);const[Ce,rt]=d.useState(!1),[Pe,nt]=d.useState(!1),ot=d.useId(),it=n??ot,[be,I,B,D]=["popover-trigger","popover-content","popover-header","popover-body"].map(f=>`${f}-${it}`),{referenceRef:H,getArrowProps:at,getPopperProps:ve,getArrowInnerProps:lt,forceUpdate:ct}=Wt({...st,enabled:y||!!tt}),_e=fs({isOpen:y,ref:S});xs({enabled:y,ref:T}),gs(S,{focusRef:T,visible:y,shouldFocus:o&&c===G.click}),ms(S,{focusRef:s,visible:y,shouldFocus:i&&c===G.click});const we=ps({wasSelected:ye.current,enabled:C,mode:w,isSelected:_e.present}),ut=d.useCallback((f={},P=null)=>{const m={...f,style:{...f.style,transformOrigin:Q.transformOrigin.varRef,[Q.arrowSize.var]:a?`${a}px`:void 0,[Q.arrowShadowColor.var]:l},ref:k(S,P),children:we?f.children:null,id:I,tabIndex:-1,role:"dialog",onKeyDown:b(f.onKeyDown,_=>{t&&_.key==="Escape"&&v()}),onBlur:b(f.onBlur,_=>{const z=Se(_),W=q(S.current,z),pt=q(T.current,z);y&&e&&(!W&&!pt)&&v()}),"aria-labelledby":Ce?B:void 0,"aria-describedby":Pe?D:void 0};return c===G.hover&&(m.role="tooltip",m.onMouseEnter=b(f.onMouseEnter,()=>{R.current=!0}),m.onMouseLeave=b(f.onMouseLeave,_=>{_.nativeEvent.relatedTarget!==null&&(R.current=!1,setTimeout(()=>v(),g))})),m},[we,I,Ce,B,Pe,D,c,t,v,y,e,g,l,a]),dt=d.useCallback((f={},P=null)=>ve({...f,style:{visibility:y?"visible":"hidden",...f.style}},P),[y,ve]),ht=d.useCallback((f,P=null)=>({...f,ref:k(P,Z,H)}),[Z,H]),F=d.useRef(),K=d.useRef(),xe=d.useCallback(f=>{Z.current==null&&H(f)},[H]),ft=d.useCallback((f={},P=null)=>{const m={...f,ref:k(T,P,xe),id:be,"aria-haspopup":"dialog","aria-expanded":y,"aria-controls":I};return c===G.click&&(m.onClick=b(f.onClick,pe)),c===G.hover&&(m.onFocus=b(f.onFocus,()=>{F.current===void 0&&U()}),m.onBlur=b(f.onBlur,_=>{const z=Se(_),W=!q(S.current,z);y&&e&&W&&v()}),m.onKeyDown=b(f.onKeyDown,_=>{_.key==="Escape"&&v()}),m.onMouseEnter=b(f.onMouseEnter,()=>{R.current=!0,F.current=window.setTimeout(()=>U(),h)}),m.onMouseLeave=b(f.onMouseLeave,()=>{R.current=!1,F.current&&(clearTimeout(F.current),F.current=void 0),K.current=window.setTimeout(()=>{R.current===!1&&v()},g)})),m},[be,y,I,c,xe,pe,U,e,v,h,g]);d.useEffect(()=>()=>{F.current&&clearTimeout(F.current),K.current&&clearTimeout(K.current)},[]);const gt=d.useCallback((f={},P=null)=>({...f,id:B,ref:k(P,m=>{rt(!!m)})}),[B]),mt=d.useCallback((f={},P=null)=>({...f,id:D,ref:k(P,m=>{nt(!!m)})}),[D]);return{forceUpdate:ct,isOpen:y,onAnimationComplete:_e.onComplete,onClose:v,getAnchorProps:ht,getArrowProps:at,getArrowInnerProps:lt,getPopoverPositionerProps:dt,getPopoverProps:ut,getTriggerProps:ft,getHeaderProps:gt,getBodyProps:mt}}function q(r,e){return r===e||r?.contains(e)}function Se(r){var e;const t=r.currentTarget.ownerDocument.activeElement;return(e=r.relatedTarget)!=null?e:t}function ze(r){const e=Qt("Popover",r),{children:t,...s}=qt(r),n=es(),o=Ss({...s,direction:n.direction});return u.jsx(Fs,{value:o,children:u.jsx(js,{value:e,children:ts(t,{isOpen:o.isOpen,onClose:o.onClose,forceUpdate:o.forceUpdate})})})}ze.displayName="Popover";var ee=(r,e)=>e?`${r}.${e}, ${e}`:void 0;function Ve(r){var e;const{bg:t,bgColor:s,backgroundColor:n,shadow:o,boxShadow:i,shadowColor:a}=r,{getArrowProps:l,getArrowInnerProps:c}=j(),h=L(),g=(e=t??s)!=null?e:n,C=o??i;return u.jsx(O.div,{...l(),className:"chakra-popover__arrow-positioner",children:u.jsx(O.div,{className:N("chakra-popover__arrow",r.className),...c(r),__css:{"--popper-arrow-shadow-color":ee("colors",a),"--popper-arrow-bg":ee("colors",g),"--popper-arrow-shadow":ee("shadows",C),...h.arrow}})})}Ve.displayName="PopoverArrow";var $e=A(function(e,t){const{getBodyProps:s}=j(),n=L();return u.jsx(O.div,{...s(e,t),className:N("chakra-popover__body",e.className),__css:n.body})});$e.displayName="PopoverBody";var Ye=A(function(e,t){const{onClose:s}=j(),n=L();return u.jsx(ss,{size:"sm",onClick:s,className:N("chakra-popover__close-btn",e.className),__css:n.closeButton,ref:t,...e})});Ye.displayName="PopoverCloseButton";function Gs(r){if(r)return{enter:{...r.enter,visibility:"visible"},exit:{...r.exit,transitionEnd:{visibility:"hidden"}}}}var Ms={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},Os=O(rs.section),Xe=A(function(e,t){const{variants:s=Ms,...n}=e,{isOpen:o}=j();return u.jsx(Os,{ref:t,variants:Gs(s),initial:!1,animate:o?"enter":"exit",...n})});Xe.displayName="PopoverTransition";var Je=A(function(e,t){const{rootProps:s,motionProps:n,...o}=e,{getPopoverProps:i,getPopoverPositionerProps:a,onAnimationComplete:l}=j(),c=L(),h={position:"relative",display:"flex",flexDirection:"column",...c.content};return u.jsx(O.div,{...a(s),__css:c.popper,className:"chakra-popover__popper",children:u.jsx(Xe,{...n,...i(o,t),onAnimationComplete:ns(l,o.onAnimationComplete),className:N("chakra-popover__content",e.className),__css:h})})});Je.displayName="PopoverContent";class $ extends yt{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ct),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(Pt(this.geometries_[e],bt.CHANGE,this.changed,this))}clone(){const e=new $(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,s,n){if(n<J(this.getExtent(),e,t))return n;const o=this.geometries_;for(let i=0,a=o.length;i<a;++i)n=o[i].closestPointXY(e,t,s,n);return n}containsXY(e,t){const s=this.geometries_;for(let n=0,o=s.length;n<o;++n)if(s[n].containsXY(e,t))return!0;return!1}computeExtent(e){vt(e);const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)_t(e,t[s].getExtent());return e}getGeometries(){return Ge(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)t[s].getType()===this.getType()?e=e.concat(t[s].getGeometriesArrayRecursive()):e.push(t[s]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],s=this.geometries_;let n=!1;for(let o=0,i=s.length;o<i;++o){const a=s[o],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(n=!0)}if(n){const o=new $(null);return o.setGeometriesArray(t),o}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)if(t[s].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const s=this.geometries_;for(let n=0,o=s.length;n<o;++n)s[n].rotate(e,t);this.changed()}scale(e,t,s){s||(s=wt(this.getExtent()));const n=this.geometries_;for(let o=0,i=n.length;o<i;++o)n[o].scale(e,t,s);this.changed()}setGeometries(e){this.setGeometriesArray(Ge(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)t[s].applyTransform(e);this.changed()}translate(e,t){const s=this.geometries_;for(let n=0,o=s.length;n<o;++n)s[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Ge(r){const e=[];for(let t=0,s=r.length;t<s;++t)e.push(r[t].clone());return e}const Es=$;class Y extends le{constructor(e,t,s){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&s)this.setFlatCoordinates(t,e),this.ends_=s;else{const n=e,o=[],i=[];for(let l=0,c=n.length;l<c;++l){const h=n[l];M(o,h.getFlatCoordinates()),i.push(o.length)}const a=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=i}}appendLineString(e){M(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Y(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,s,n){return n<J(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ft(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,s,n))}getCoordinateAtM(e,t,s){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,s=s!==void 0?s:!1,jt(this.flatCoordinates,0,this.ends_,this.stride,e,t,s))}getCoordinates(){return St(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new oe(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,s=this.layout,n=[];let o=0;for(let i=0,a=t.length;i<a;++i){const l=t[i],c=new oe(e.slice(o,l),s);n.push(c),o=l}return n}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let s=0;const n=this.ends_,o=this.stride;for(let i=0,a=n.length;i<a;++i){const l=n[i],c=Gt(t,s,l,o,.5);M(e,c),s=l}return e}getSimplifiedGeometryInternal(e){const t=[],s=[];return t.length=Mt(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,s),new Y(t,"XY",s)}getType(){return"MultiLineString"}intersectsExtent(e){return Ot(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=ce(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}}const Rs=Y;class he extends le{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){M(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new he(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,s,n){if(n<J(this.getExtent(),e,t))return n;const o=this.flatCoordinates,i=this.stride;for(let a=0,l=o.length;a<l;a+=i){const c=Et(e,t,o[a],o[a+1]);if(c<n){n=c;for(let h=0;h<i;++h)s[h]=o[a+h];s.length=i}}return n}getCoordinates(){return Rt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new se(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,s=this.stride,n=[];for(let o=0,i=e.length;o<i;o+=s){const a=new se(e.slice(o,o+s),t);n.push(a)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,s=this.stride;for(let n=0,o=t.length;n<o;n+=s){const i=t[n],a=t[n+1];if(kt(e,i,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=At(this.flatCoordinates,0,e,this.stride),this.changed()}}const Ue=he;class X extends le{constructor(e,t,s){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!s&&!Array.isArray(e[0])){const n=e,o=[],i=[];for(let a=0,l=n.length;a<l;++a){const c=n[a],h=o.length,g=c.getEnds();for(let C=0,w=g.length;C<w;++C)g[C]+=h;M(o,c.getFlatCoordinates()),i.push(g)}t=n.length===0?this.getLayout():n[0].getLayout(),e=o,s=i}t!==void 0&&s?(this.setFlatCoordinates(t,e),this.endss_=s):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const s=this.flatCoordinates.length;M(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let n=0,o=t.length;n<o;++n)t[n]+=s}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=this.endss_[n].slice();const s=new X(this.flatCoordinates.slice(),this.layout,t);return s.applyProperties(this),s}closestPointXY(e,t,s,n){return n<J(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Nt(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,s,n))}containsXY(e,t){return Tt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return It(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),re(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Bt(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Dt(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Ht(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Ue(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Me(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=re(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],s=[];return t.length=zt(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,s),new X(t,"XY",s)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const s=this.endss_[e].slice(),n=s[s.length-1];if(t!==0)for(let o=0,i=s.length;o<i;++o)s[o]-=t;return new ne(this.flatCoordinates.slice(t,n),this.layout,s)}getPolygons(){const e=this.layout,t=this.flatCoordinates,s=this.endss_,n=[];let o=0;for(let i=0,a=s.length;i<a;++i){const l=s[i].slice(),c=l[l.length-1];if(o!==0)for(let g=0,C=l.length;g<C;++g)l[g]-=o;const h=new ne(t.slice(o,c),e,l);n.push(h),o=c}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return Vt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const s=Oe(this.flatCoordinates,0,e,this.stride,this.endss_);if(s.length===0)this.flatCoordinates.length=0;else{const n=s[s.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const ks=X;class As{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Ee,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let s=t.dataProjection?x(t.dataProjection):this.readProjection(e);t.extent&&s&&s.getUnits()==="tile-pixels"&&(s=x(s),s.setWorldExtent(t.extent)),t={dataProjection:s,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return p()}readFeature(e,t){return p()}readFeatures(e,t){return p()}readGeometry(e,t){return p()}readProjection(e){return p()}writeFeature(e,t){return p()}writeFeatures(e,t){return p()}writeGeometry(e,t){return p()}}const Ns=As;function fe(r,e,t){const s=t?x(t.featureProjection):null,n=t?x(t.dataProjection):null;let o=r;if(s&&n&&!$t(s,n)){e&&(o=r.clone());const i=e?s:n,a=e?n:s;i.getUnits()==="tile-pixels"?o.transform(i,a):o.applyTransform(Yt(i,a))}if(e&&t&&t.decimals!==void 0){const i=Math.pow(10,t.decimals),a=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*i)/i;return l};o===r&&(o=r.clone()),o.applyTransform(a)}return o}const Ls={Point:se,LineString:oe,Polygon:ne,MultiPoint:Ue,MultiLineString:Rs,MultiPolygon:ks};function Ts(r,e,t){return Array.isArray(e[0])?(Me(r,0,e,t)||(r=r.slice(),re(r,0,e,t)),r):(Xt(r,0,e,t)||(r=r.slice(),Jt(r,0,e,t)),r)}function Ze(r,e){const t=r.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>Ze({...r,geometry:o})).flat();const s=t.type==="MultiPolygon"?"Polygon":t.type;if(s==="GeometryCollection"||s==="Circle")throw new Error("Unsupported geometry type: "+s);const n=t.layout.length;return fe(new Re(s,s==="Polygon"?Ts(t.flatCoordinates,t.ends,n):t.flatCoordinates,t.ends?.flat(),n,r.properties||{},r.id).enableSimplifyTransformed(),!1,e)}function ge(r,e){if(!r)return null;if(Array.isArray(r)){const s=r.map(n=>ge(n,e));return new Es(s)}const t=Ls[r.type];return fe(new t(r.flatCoordinates,r.layout,r.ends),!1,e)}class Is extends Ns{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(V(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(V(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return p()}readFeaturesFromObject(e,t){return p()}readGeometry(e,t){return this.readGeometryFromObject(V(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return p()}readProjection(e){return this.readProjectionFromObject(V(e))}readProjectionFromObject(e){return p()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return p()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return p()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return p()}}function V(r){if(typeof r=="string"){const e=JSON.parse(r);return e||null}return r!==null?r:null}const Bs=Is;class Ds extends Bs{constructor(e){e=e||{},super(),this.dataProjection=x(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=x(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let s=null;e.type==="Feature"?s=e:s={type:"Feature",geometry:e,properties:null};const n=me(s.geometry);if(this.featureClass===Re)return Ze({geometry:n,id:s.id,properties:s.properties},t);const o=new Ee;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in s!==void 0&&o.setGeometryName(s.geometry_name),o.setGeometry(ge(n,t)),"id"in s&&o.setId(s.id),s.properties&&o.setProperties(s.properties,!0),o}readFeaturesFromObject(e,t){const s=e;let n=null;if(s.type==="FeatureCollection"){const o=e;n=[];const i=o.features;for(let a=0,l=i.length;a<l;++a){const c=this.readFeatureFromObject(i[a],t);c&&n.push(c)}}else n=[this.readFeatureFromObject(e,t)];return n.flat()}readGeometryFromObject(e,t){return Hs(e,t)}readProjectionFromObject(e){const t=e.crs;let s;if(t)if(t.type=="name")s=x(t.properties.name);else if(t.type==="EPSG")s=x("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else s=this.dataProjection;return s}writeFeatureObject(e,t){t=this.adaptOptions(t);const s={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(s.id=n),!e.hasProperties())return s;const o=e.getProperties(),i=e.getGeometry();return i&&(s.geometry=ae(i,t),delete o[e.getGeometryName()]),Ut(o)||(s.properties=o),s}writeFeaturesObject(e,t){t=this.adaptOptions(t);const s=[];for(let n=0,o=e.length;n<o;++n)s.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:s}}writeGeometryObject(e,t){return ae(e,this.adaptOptions(t))}}function me(r,e){if(!r)return null;let t;switch(r.type){case"Point":{t=Vs(r);break}case"LineString":{t=$s(r);break}case"Polygon":{t=Us(r);break}case"MultiPoint":{t=Xs(r);break}case"MultiLineString":{t=Ys(r);break}case"MultiPolygon":{t=Js(r);break}case"GeometryCollection":{t=zs(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return t}function Hs(r,e){const t=me(r);return ge(t,e)}function zs(r,e){return r.geometries.map(function(s){return me(s)})}function Vs(r){const e=r.coordinates;return{type:"Point",flatCoordinates:e,layout:E(e.length)}}function $s(r){const e=r.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:E(e[0].length)}}function Ys(r){const e=r.coordinates,t=e[0][0].length,s=[],n=ce(s,0,e,t);return{type:"MultiLineString",flatCoordinates:s,ends:n,layout:E(t)}}function Xs(r){const e=r.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:E(e[0].length)}}function Js(r){const e=r.coordinates,t=[],s=e[0][0][0].length,n=Oe(t,0,e,s);return{type:"MultiPolygon",flatCoordinates:t,ends:n,layout:E(s)}}function Us(r){const e=r.coordinates,t=[],s=e[0][0].length,n=ce(t,0,e,s);return{type:"Polygon",flatCoordinates:t,ends:n,layout:E(s)}}function ae(r,e){r=fe(r,!0,e);const t=r.getType();let s;switch(t){case"Point":{s=er(r);break}case"LineString":{s=Ks(r);break}case"Polygon":{s=tr(r,e);break}case"MultiPoint":{s=Qs(r);break}case"MultiLineString":{s=Ws(r);break}case"MultiPolygon":{s=qs(r,e);break}case"GeometryCollection":{s=Zs(r,e);break}case"Circle":{s={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return s}function Zs(r,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(s){return ae(s,e)})}}function Ks(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function Ws(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function Qs(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function qs(r,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function er(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function tr(r,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}const Gr=Ds,sr="@open-pioneer/map-navigation",Ke=Le.bind(void 0,sr),Mr=d.forwardRef(function(e,t){const{mapId:s}=e,{containerProps:n}=de("initial-extent",e),{map:o}=ue(s),i=Ke();function a(){const l=o?.initialExtent,c=o?.olMap;if(l&&c){const h=[l.xMin,l.yMin,l.xMax,l.yMax];c.getView().fit(h,{duration:200})}}return u.jsx(Ae,{ref:t,label:i.formatMessage({id:"initial-extent.title"}),icon:u.jsx(as,{}),onClick:a,...n})}),Or=d.forwardRef(function(e,t){return u.jsx(We,{zoomDirection:"in",ref:t,...e})}),Er=d.forwardRef(function(e,t){return u.jsx(We,{zoomDirection:"out",ref:t,...e})}),We=d.forwardRef(function(e,t){const{mapId:s,zoomDirection:n}=e,{map:o}=ue(s),i=Ke(),{defaultClassName:a,buttonLabel:l,buttonIcon:c}=rr(i,n),{containerProps:h}=de(Ne("zoom",a),e);function g(){const C=o?.olMap.getView();let w=C?.getZoom();C&&w!==void 0&&(n==="in"?++w:--w,C.animate({zoom:w,duration:200}))}return u.jsx(Ae,{ref:t,label:l,icon:c,onClick:g,...h})});function rr(r,e){switch(e){case"in":return{defaultClassName:"zoom-in",buttonLabel:r.formatMessage({id:"zoom-in.title"}),buttonIcon:u.jsx(cs,{})};case"out":return{defaultClassName:"zoom-out",buttonLabel:r.formatMessage({id:"zoom-out.title"}),buttonIcon:u.jsx(ls,{})}}}const nr="@open-pioneer/toc",Qe=Le.bind(void 0,nr);function or(r){const{map:e,"aria-labelledby":t}=r,s=Qe(),n=dr(e);return n.length?qe(n,s,{"aria-labelledby":t}):u.jsx(Te,{className:"toc-missing-layers","aria-labelledby":t,children:s.formatMessage({id:"missingLayers"})})}function qe(r,e,t){const s=r.map(n=>u.jsx(ir,{layer:n,intl:e},n.id));return u.jsx(ys,{as:"ul",className:"toc-layer-list",listStyleType:"none",...t,children:s})}function ir(r){const{layer:e,intl:t}=r,s=cr(e),{isVisible:n,setVisible:o}=ur(e),i=hr(e);let a;return i?.length&&(a=qe(i,t,{ml:4})),u.jsxs(ie,{as:"li",className:Ne("toc-layer-item",`layer-${fr(e.id)}`),children:[u.jsxs(Ie,{className:"toc-layer-item-content",width:"100%",flexDirection:"row",align:"center",justifyContent:"space-between",gap:2,minHeight:10,children:[u.jsx(hs,{isChecked:n,onChange:l=>o(l.target.checked),children:s}),e.description&&u.jsx(ar,{layer:e,title:s,intl:t})]}),a]})}function ar(r){const{layer:e,title:t,intl:s}=r,n=s.formatMessage({id:"descriptionLabel"}),o=lr(e);return u.jsxs(ze,{children:[u.jsx(He,{children:u.jsx(os,{className:"toc-layer-item-details-button","aria-label":n,borderRadius:"full",iconSpacing:0,padding:0,variant:"ghost",leftIcon:u.jsx(us,{})})}),u.jsx(is,{children:u.jsxs(Je,{className:"toc-layer-item-details",overflowY:"auto",maxHeight:"400",children:[u.jsx(Ve,{}),u.jsx(Ye,{}),u.jsx(De,{children:t}),u.jsx($e,{children:o})]})})]})}function lr(r){const e=d.useCallback(()=>r.description,[r]),t=d.useCallback(s=>{const n=r.on("changed:description",s);return()=>n.destroy()},[r]);return d.useSyncExternalStore(t,e)}function cr(r){const e=d.useCallback(()=>r.title,[r]),t=d.useCallback(s=>{const n=r.on("changed:title",s);return()=>n.destroy()},[r]);return d.useSyncExternalStore(t,e)}function ur(r){const e=d.useCallback(()=>r.visible,[r]),t=d.useCallback(o=>{const i=r.on("changed:visible",o);return()=>i.destroy()},[r]),s=d.useSyncExternalStore(t,e),n=d.useCallback(o=>{r.setVisible(o)},[r]);return{isVisible:s,setVisible:n}}function dr(r){const e=d.useCallback(s=>{const n=r.layers.on("changed",s);return()=>n.destroy()},[r]),t=d.useCallback(()=>{let s=r.layers.getOperationalLayers({sortByDisplayOrder:!0})??[];return s=s.reverse(),s},[r]);return et(e,t)}function hr(r){const e=d.useCallback(s=>{const n=r.sublayers?.on("changed",s);return()=>n?.destroy()},[r]),t=d.useCallback(()=>{if(!r.sublayers)return;let n=r.sublayers?.getSublayers({sortByDisplayOrder:!0});return n=n.reverse(),n},[r]);return et(e,t)}function et(r,e){const t=d.useRef(),s=d.useCallback(o=>{const i=r(()=>{t.current=void 0,o()});return()=>{t.current=void 0,i()}},[r]),n=d.useCallback(()=>{if(t.current)return t.current.value;const o=e();return t.current={value:o},o},[e]);return d.useSyncExternalStore(s,n)}function fr(r){return r.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}const te=2,Rr=r=>{const e=Qe(),{mapId:t,showBasemapSwitcher:s=!0,basemapSwitcherProps:n}=r,{containerProps:o}=de("toc",r),i=d.useId(),a=d.useId(),l=ue(t);let c;switch(l.kind){case"loading":c=null;break;case"rejected":c=u.jsx(Te,{className:"toc-error",children:e.formatMessage({id:"error"})});break;case"resolved":{const h=s&&u.jsx(ie,{className:"toc-basemap-switcher",children:u.jsx(Fe,{title:u.jsx(je,{id:i,size:"sm",mb:te,children:e.formatMessage({id:"basemapsLabel"})}),children:u.jsx(ds,{mapId:t,"aria-labelledby":i,...n})})}),g=u.jsx(ie,{className:"toc-operational-layers",children:u.jsx(Fe,{title:u.jsx(je,{id:a,size:"sm",mb:te,children:e.formatMessage({id:"operationalLayerLabel"})}),children:u.jsx(or,{map:l.map,"aria-labelledby":a})})});c=u.jsxs(u.Fragment,{children:[h,g]});break}}return u.jsx(Ie,{...o,direction:"column",gap:te,children:c})};export{Ns as F,Gr as G,Mr as I,Ue as M,Rr as T,Or as Z,Rs as a,ks as b,Es as c,Er as d,fe as t};
