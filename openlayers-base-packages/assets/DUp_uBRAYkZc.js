var ao=Object.defineProperty;var mt=t=>{throw TypeError(t)};var lo=(t,e,o)=>e in t?ao(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var J=(t,e,o)=>lo(t,typeof e!="symbol"?e+"":e,o),Ze=(t,e,o)=>e.has(t)||mt("Cannot "+o);var a=(t,e,o)=>(Ze(t,e,"read from private field"),o?o.call(t):e.get(t)),y=(t,e,o)=>e.has(t)?mt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),S=(t,e,o,i)=>(Ze(t,e,"write to private field"),i?i.call(t,o):e.set(t,o),o),P=(t,e,o)=>(Ze(t,e,"access private method"),o);import{f as Nt,h as co,j as s,r as _,c as Te,B as ne,F as uo,R as po,A as Je,k as Xe,l as ho,E as B,a as mo,e as go}from"./CfsOZItWJxSO.js";import{aE as fo,aF as vo,N as bo,L as gt,aG as wo,aH as yo,ao as xo,aI as ko,aJ as So,aK as _o,E as Mo,as as Io,aL as ft,aM as Eo,aN as Co,aO as vt,aP as Lo,aQ as Ao,aR as Qe,V as jo,aS as bt,Y as To,a2 as Po,aT as Ro,a0 as Do,aU as Vo,aV as No,aW as Oo,aX as Fo,aY as wt,B as H,S as at,T as Ot,O as Ft,a as lt,b as zt,aZ as We,g as qe,d as ct,u as $e,a_ as zo,a$ as yt,b0 as Bo,an as Go,h as rt,c as Bt,C as Uo,F as Gt,ax as Ut,b1 as Ho,b2 as Wo,b3 as qo,b4 as $o,i as Z,b5 as Ko,e as Ne,f as st,H as Yo,M as Zo,j as Jo,k as xt}from"./OE-uVm66ah4q.js";import{W as Xo,i as Qo,j as Ht}from"./W4GM3QQK8ZhG.js";import{O as Wt,W as ei,e as ti,g as oi,I as ii,C as ri,d as si,c as ni,M as ai,P as li,L as ci,r as Ke,f as di,S as ui,u as Se,h as pi,i as hi,w as mi,V as gi,E as fi,j as qt,N as vi}from"./BbyICFxglmxm.js";import{G as $t,T as bi,e as wi}from"./DIRRkLENL5Oa.js";import{T as Ye,V as nt,L as yi}from"./CZKMksgG1gB0.js";import{G as xi}from"./ByEtrROIq9PZ.js";import{Z as ki,a as Si,I as _i,V as Mi,S as Ii}from"./DHiEs4jZgA_m.js";import{c as Ei}from"./Cggywb9cp24J.js";import{M as Ci,a as Li,b as Ai}from"./k6NZb6My06mP.js";import{M as ji}from"./Ou_tk4DdlQr6.js";import{S as Ti}from"./uzE7Eflf_Mmf.js";import{R as Pi}from"./BbxazQyFJ_y4.js";import{N as Ri,P as Di}from"./D_bWtRANyHNF.js";import{_ as kt}from"./Dch09mLNbtBx.js";import{F as Vi}from"./BXT_Zj7rRNC1.js";import{H as Ni}from"./C0eybGlw1vsF.js";import{F as Oi}from"./CFQDb4nmS4iS.js";import"./BCXPb85C2-xx.js";import"./ChptmQL6TRTy.js";import"./CyHSoWdO5dIm.js";import"./CampsnPn98cq.js";import"./BRRkivce1ozn.js";var Kt=Nt("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Kt.displayName="Center";var Fi={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};co(function(e,o){const{axis:i="both",...r}=e;return s.jsx(Nt.div,{ref:o,__css:Fi[i],...r,position:"absolute"})});const E={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},zi={ERROR:"error"};class Bi extends xo{constructor(e){super(zi.ERROR),this.code=e.code,this.message=e.message}}let Gi=class extends fo{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=vo,this.watchId_=void 0,this.addChangeListener(E.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(E.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=bo(gt("EPSG:4326"),e),this.position_&&this.set(E.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const o=e.coords;this.set(E.ACCURACY,o.accuracy),this.set(E.ALTITUDE,o.altitude===null?void 0:o.altitude),this.set(E.ALTITUDE_ACCURACY,o.altitudeAccuracy===null?void 0:o.altitudeAccuracy),this.set(E.HEADING,o.heading===null?void 0:wo(o.heading)),this.position_?(this.position_[0]=o.longitude,this.position_[1]=o.latitude):this.position_=[o.longitude,o.latitude];const i=this.transform_(this.position_);this.set(E.POSITION,i.slice()),this.set(E.SPEED,o.speed===null?void 0:o.speed);const r=yo(this.position_,o.accuracy);r.applyTransform(this.transform_),this.set(E.ACCURACY_GEOMETRY,r),this.changed()}positionError_(e){this.dispatchEvent(new Bi(e))}getAccuracy(){return this.get(E.ACCURACY)}getAccuracyGeometry(){return this.get(E.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(E.ALTITUDE)}getAltitudeAccuracy(){return this.get(E.ALTITUDE_ACCURACY)}getHeading(){return this.get(E.HEADING)}getPosition(){return this.get(E.POSITION)}getProjection(){return this.get(E.PROJECTION)}getSpeed(){return this.get(E.SPEED)}getTracking(){return this.get(E.TRACKING)}getTrackingOptions(){return this.get(E.TRACKING_OPTIONS)}setProjection(e){this.set(E.PROJECTION,gt(e))}setTracking(e){this.set(E.TRACKING,e)}setTrackingOptions(e){this.set(E.TRACKING_OPTIONS,e)}};const Ui=1.2;function Hi(t,e=Ui){Wi(t);const o=ko(t),i=So(t),r=o*e,n=i*e;return[t[0]-(r-o)/2,t[1]-(n-i)/2,t[2]+(r-o)/2,t[3]+(n-i)/2]}function Wi(t){if(t.length!==4)throw new Error(`Invalid extent (expected length 4, but got length ${t.length}).`)}const et=.75,Pe=.1;let qi=class extends _o{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const o=e.className!==void 0?e.className:"ol-overviewmap",i=e.tipLabel!==void 0?e.tipLabel:"Overview map",r=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;const n=e.label!==void 0?e.label:"›";typeof n=="string"?(this.label_=document.createElement("span"),this.label_.textContent=n):this.label_=n;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=i,u.appendChild(c),u.addEventListener(Mo.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const g=new Io({view:e.view,controls:new ft,interactions:new ft});this.ovmap_=g,e.layers&&e.layers.forEach(function(v){g.addLayer(v)});const h=document.createElement("div");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",this.boxOverlay_=new Wt({position:[0,0],positioning:"center-center",element:h}),this.ovmap_.addOverlay(this.boxOverlay_);const f=o+" "+Eo+" "+Co+(this.collapsed_&&this.collapsible_?" "+vt:"")+(this.collapsible_?"":" ol-uncollapsible"),w=this.element;w.className=f,w.appendChild(this.ovmapDiv_),w.appendChild(u);const M=this,A=this.boxOverlay_,m=this.boxOverlay_.getElement(),l=function(v){return{clientX:v.clientX,clientY:v.clientY}},p=function(v){const x=l(v),k=g.getEventCoordinateInternal(x);A.setPosition(k)},d=function(v){const x=g.getEventCoordinateInternal(v);M.getMap().getView().setCenterInternal(x),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",d)};m.addEventListener("mousedown",function(){window.addEventListener("mousemove",p),window.addEventListener("mouseup",d)})}setMap(e){const o=this.getMap();if(e!==o){if(o){const i=o.getView();i&&this.unbindView_(i),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Lo(e,Ao.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===Qe.VIEW){const o=e.oldValue;o&&this.unbindView_(o);const i=this.getMap().getView();this.bindView_(i)}else!this.ovmap_.isRendered()&&(e.key===Qe.TARGET||e.key===Qe.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const o=new jo({projection:e.getProjection()});this.ovmap_.setView(o)}e.addChangeListener(bt.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(bt.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),o=this.ovmap_;if(!e.isRendered()||!o.isRendered())return;const i=e.getSize(),n=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&To(n,this.viewExtent_))return;this.viewExtent_=n;const c=o.getSize(),g=o.getView().calculateExtentInternal(c),h=o.getPixelFromCoordinateInternal(Po(n)),f=o.getPixelFromCoordinateInternal(Ro(n)),w=Math.abs(h[0]-f[0]),M=Math.abs(h[1]-f[1]),A=c[0],m=c[1];w<A*Pe||M<m*Pe||w>A*et||M>m*et?this.resetExtent_():Do(g,n)||this.recenter_()}resetExtent_(){const e=this.getMap(),o=this.ovmap_,i=e.getSize(),n=e.getView().calculateExtentInternal(i),c=o.getView(),u=Math.log(et/Pe)/Math.LN2,g=1/(Math.pow(2,u/2)*Pe);Vo(n,g),c.fitInternal(No(n))}recenter_(){const e=this.getMap(),o=this.ovmap_,i=e.getView();o.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const e=this.getMap(),o=this.ovmap_;if(!e.isRendered()||!o.isRendered())return;const i=e.getSize(),r=e.getView(),n=o.getView(),c=this.rotateWithView_?0:-r.getRotation(),u=this.boxOverlay_,g=this.boxOverlay_.getElement(),h=r.getCenterInternal(),f=r.getResolution(),w=n.getResolution(),M=i[0]*f/w,A=i[1]*f/w;if(u.setPosition(h),g){g.style.width=M+"px",g.style.height=A+"px";const m="rotate("+c+"rad)";g.style.transform=m}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Oo(this.ovmap_,Fo.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(vt),this.collapsed_?wt(this.collapseLabel_,this.label_):wt(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}};var $i=Ei({d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z",displayName:"ChevronUpIcon"});const Ki={height:"25px",width:"25px",borderColor:"#4cb3ff",borderWidth:"3px",borderRadius:"50%",display:"inline-block "};function Yi(t){return s.jsxs(H,{children:[s.jsx(Ye,{children:t.layer.title}),s.jsx(H,{style:Ki})]})}const L="main";class Zi{mapId=L;vectorSourceFactory;constructor(e){this.vectorSourceFactory=e.references.vectorSourceFactory}async getMapConfig(){return{initialView:{kind:"position",center:{x:823091,y:6724521},zoom:8},layers:[new at({title:"OSM",id:"osm",isBaseLayer:!0,olLayer:new Ot({source:new Ft})}),new ei({isBaseLayer:!0,title:"Orthofotos NRW",url:"https://www.wmts.nrw.de/geobasis/wmts_nw_dop/1.0.0/WMTSCapabilities.xml",name:"nw_dop",matrixSet:"EPSG_3857_16",sourceOptions:{attributions:'Die Geobasisdaten des amtlichen Vermessungswesens werden als öffentliche Aufgabe gem. VermKatG NRW und gebührenfrei nach Open Data-Prinzipien über online-Verfahren bereitgestellt. Nutzungsbedingungen: siehe <a href="https://www.bezreg-koeln.nrw.de/system/files/media/document/file/lizenzbedingungen_geobasis_nrw.pdf"</a>'}}),Qi(),Xi(),Ji(this.vectorSourceFactory)]}}}function Ji(t){const e="https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1",o="governmentalservice",i=t.createVectorSource({baseUrl:e,collectionId:o,limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/3857",attributions:`Land NRW (${new Date().getFullYear()}), <a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>, <a href='https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1'>Datenquelle</a>`}),r=new lt({source:i});return new at({id:"krankenhaus",title:"Krankenhäuser-Demo-Dienst",visible:!1,olLayer:r,attributes:{collectionURL:e+"/collections/"+o}})}function Xi(){const t=new zt({url:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json&limit=10000",format:new $t,attributions:'&copy; <a href="http://www.bkg.bund.de" target="_blank">Bundesamt f&uuml;r Kartographie und Geod&auml;sie</a> 2017, <a href="http://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf" target="_blank">Datenquellen</a>'}),e=new lt({source:t}),o={Component:Yi};return new at({id:"ogc_kitas",title:"Kindertagesstätten",visible:!0,olLayer:e,attributes:{legend:o}})}function Qi(){return new Xo({title:"Verwaltungsgebiete",id:"verwaltungsgebiete",visible:!1,url:"https://www.wms.nrw.de/geobasis/wms_nw_dvg",sublayers:[{name:"nw_dvg_krs",title:"Kreise und kreisfreie Städte"}]})}const er="200px",tr="300px",or=t=>{const{mapId:e,olLayer:o,height:i=er,width:r=tr}=t,{containerProps:n}=We("overview-map",t),c=_.useRef(null),{map:u}=qe(e);return _.useEffect(()=>{if(c.current&&u&&o){const g=u.olMap,h=new qi({className:"ol-overviewmap",layers:[o],collapsible:!1,collapsed:!1,target:c.current});return g.addControl(h),()=>{g.removeControl(h)}}},[u,o]),s.jsx(H,{height:i,width:r,ref:c,...n})};function ir({intl:t}){return{id:"overviewMap",title:t.formatMessage({id:"demos.overviewMap.title"}),createModel(){const e=new Ot({source:new Ft});return{description:t.formatMessage({id:"demos.overviewMap.description"}),mainWidget:s.jsx(or,{mapId:L,olLayer:e}),destroy(){e.dispose()}}}}}class rr{label;filteredTypes;httpService;constructor(e,o,i){this.label=e,this.filteredTypes=o,this.httpService=i}async search(e,{mapProjection:o,signal:i}){const r=await this.request(e,100,i),n=new $t({dataProjection:"EPSG:4326",featureProjection:o});return r.features.filter(c=>this.filteredTypes.includes(c.properties.type)).map((c,u)=>{const g=n.readGeometry(c.geometry);return{id:c.properties.osm_id||u,label:this.createLabel(c),geometry:g,properties:c.properties}})}async request(e,o,i){const r=new URL("https://photon.komoot.io/api?");r.searchParams.set("q",e),r.searchParams.set("lang","de"),r.searchParams.set("lat","51.961563"),r.searchParams.set("lon","7.628202"),r.searchParams.set("limit",o.toString());const n=await this.httpService.fetch(r,{signal:i});if(!n.ok)throw new Error("Request failed: "+n.status);return await n.json()}createLabel(e){return`${e.properties.name} (${e.properties.osm_value?e.properties.osm_value+", ":""}${e.properties.postcode?e.properties.postcode+", ":""}${e.properties.city?e.properties.city+", ":""}${e.properties.country?e.properties.country+")":")"}`}}function sr({intl:t,httpService:e,mapModel:o}){return{id:"searchAndHighlight",title:t.formatMessage({id:"demos.searchAndHighlight.title"}),createModel(){return new nr(t,o,e)}}}var _e,Me,ae,Oe,le,Dt;let nr=(Dt=class{constructor(e,o,i){y(this,_e);y(this,Me);y(this,ae);J(this,"description");J(this,"mainWidget");y(this,Oe,e=>{const o=e.result.geometry;o&&(a(this,le).call(this),S(this,ae,ar(a(this,Me),[o])))});y(this,le,()=>{a(this,ae)?.destroy(),S(this,ae,void 0)});S(this,_e,new rr("Photon Geocoder",["city","street"],i)),S(this,Me,o),this.description=e.formatMessage({id:"demos.searchAndHighlight.description"}),this.mainWidget=s.jsx(ti,{mapId:L,sources:[a(this,_e)],onSelect:a(this,Oe),onClear:a(this,le)})}destroy(){a(this,le).call(this)}},_e=new WeakMap,Me=new WeakMap,ae=new WeakMap,Oe=new WeakMap,le=new WeakMap,Dt);function ar(t,e){const o=t.olMap.getViewport();return t.highlightAndZoom(e,{viewPadding:o&&o.offsetWidth<1e3?{top:150,right:75,bottom:50,left:75}:{top:150,right:400,bottom:50,left:400}})}const Yt="@open-pioneer/geolocation",lr=ct.bind(void 0,Yt),cr=$e.bind(void 0,Yt);function dr(t){return xi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"},child:[]}]})(t)}const St=Te("geolocation:GeolocationController"),_t=17;class ur extends zo{olMap;positionHighlightLayer;geolocation;maxZoom=_t;accuracyFeature;positionFeature;changeHandlers=[];isCurrentlyActive=!1;setMapToPosition=!0;trackingOptions={};isInitialZoom=!0;constructor(e,o){super(),this.olMap=e,this.isInitialZoom=!0,this.accuracyFeature=new yt,this.accuracyFeature.setStyle(It()),this.positionFeature=new yt,this.positionFeature.setStyle(Mt()),this.positionHighlightLayer=new lt({source:new zt({features:[this.accuracyFeature,this.positionFeature]})}),this.positionHighlightLayer.setZIndex(Bo);const i=o||pr();this.geolocation=new Gi({tracking:!1,trackingOptions:i,projection:e.getView()?.getProjection()}),this.trackingOptions=i,this.geolocation.on("error",r=>this.handleGeolocationError(r))}destroy(){this.stopGeolocation(),this.geolocation?.setTracking(!1),this.geolocation.dispose(),this.accuracyFeature=void 0,this.positionFeature=void 0,this.positionHighlightLayer.dispose()}startGeolocation(){if(this.isCurrentlyActive)return Promise.resolve();const e=this.olMap;return new Promise(i=>{this.isCurrentlyActive=!0,this.geolocation?.setProjection(e.getView()?.getProjection()),this.geolocation?.setTracking(!0);const r=this.geolocation.on("change:accuracyGeometry",()=>{const g=this.geolocation.getAccuracyGeometry()||void 0;if(this.accuracyFeature?.setGeometry(g),this.accuracyFeature?.getGeometry()!==void 0&&i(),this.isInitialZoom){const h=this?.accuracyFeature?.getGeometry()?.getExtent();if(h){const f=Hi(h);if(!f)return;e.getView().fit(f,{maxZoom:this.maxZoom}),this.isInitialZoom=!1}}}),n=this.geolocation.on("change:position",()=>{const g=this.geolocation.getPosition();g&&(g[0]||g[1])!==void 0&&(this.positionFeature?.setGeometry(new Go(g)),this.setMapToPosition&&e.getView().setCenter(g),this.positionFeature?.getGeometry()!==void 0&&i())}),c=e.getView().on("change:resolution",()=>{this.setMapToPosition=this.isInitialZoom}),u=e.on("pointermove",g=>{g.dragging&&(this.setMapToPosition=!1)});this.changeHandlers.push(r,n,c,u),e.addLayer(this.positionHighlightLayer)}).catch(i=>{St.error("Failed to determine location",i)})}stopGeolocation(){this.geolocation?.setTracking(!1),this.isCurrentlyActive=!1,this.trackingOptions={},this.setMapToPosition=!0,this.isInitialZoom=!0,this.changeHandlers.forEach(e=>{rt(e)}),this.changeHandlers=[],this.accuracyFeature?.setGeometry(void 0),this.positionFeature?.setGeometry(void 0),this.olMap.removeLayer(this.positionHighlightLayer)}setPositionFeatureStyle(e){this.positionFeature?.setStyle(e??Mt())}setAccuracyFeatureStyle(e){this.accuracyFeature?.setStyle(e??It())}setMaxZoom(e){this.maxZoom=e??_t}getMaxZoom(){return this.maxZoom}getPositionFeature(){return this.positionFeature}getAccuracyFeature(){return this.accuracyFeature}getTrackingOptions(){return this.trackingOptions}getGeolocation(){return this.geolocation}handleGeolocationError(e){St.error("Error from geolocation API:",e.message);const o=(()=>{switch(e.code){case 1:return"permission-denied";case 2:return"position-unavailable";case 3:return"timeout";default:return"unknown"}})();this.emit("error",o)}}const Mt=()=>new Bt({image:new Uo({radius:6,fill:new Gt({color:"#3399CC"}),stroke:new Ut({color:"#fff",width:2})})}),It=()=>new Bt({stroke:new Ut({color:"#3399CC",width:3}),fill:new Gt({color:"rgba(0, 0, 255, 0.05)"})}),pr=()=>({enableHighAccuracy:!0,timeout:6e4,maximumAge:6e5}),hr=_.forwardRef(function(e,o){const{mapId:i,maxZoom:r,positionFeatureStyle:n,accuracyFeatureStyle:c,trackingOptions:u}=e,{containerProps:g}=We("geolocation",e),h=!!navigator.geolocation,[f,w]=_.useState(!1),[M,A]=_.useState(!1),{map:m}=qe(i),l=cr(),p=lr("notifier.NotificationService"),d=mr(m,r,u,n,c),v=h?f?l.formatMessage({id:"locateMeEnd"}):l.formatMessage({id:"locateMeStart"}):l.formatMessage({id:"locateNotSupported"});_.useEffect(()=>{if(d===void 0)return;const k=d.on("error",function(T){const I=l.formatMessage({id:"error"}),b=(()=>{switch(T){case"permission-denied":return l.formatMessage({id:"permissionDenied"});case"position-unavailable":return l.formatMessage({id:"positionUnavailable"});case"timeout":return l.formatMessage({id:"timeout"});case"unknown":return l.formatMessage({id:"unknownError"})}})();A(!1),w(!1),p.notify({level:"error",title:I,message:b})});return()=>{k.destroy()}},[d,l,p]),_.useEffect(()=>{if(!d){A(!1);return}return f&&(A(!0),d.startGeolocation().then(()=>{A(!1)})),()=>{d?.stopGeolocation(),A(!1)}},[d,f]);const x=()=>{m&&w(!f)};return s.jsx(bi,{ref:o,label:v,icon:s.jsx(dr,{}),onClick:()=>x(),isActive:f,isLoading:M,isDisabled:!h,...g})});function mr(t,e,o,i,r){const[n,c]=_.useState();return _.useEffect(()=>{if(!t)return;const u=new ur(t.olMap,o);return c(u),()=>{u.destroy(),c(void 0)}},[t,o]),_.useEffect(()=>{n?.setPositionFeatureStyle(i)},[n,i]),_.useEffect(()=>{n?.setAccuracyFeatureStyle(r)},[n,r]),_.useEffect(()=>{n?.setMaxZoom(e)},[n,e]),n}const gr="@open-pioneer/scale-setter",fr=$e.bind(void 0,gr),vr=25.4/.28,br=39.37,wr=[17471320,8735660,4367830,2183915,1091957,545978,272989,136494,68247,34123,17061,8530,4265,2132],yr=t=>{const{mapId:e,scales:o=wr}=t,{containerProps:i}=We("scale-setter",t),{map:r}=qe(e),n=fr(),c=oi(r?.olMap)??1;function u(h){if(!r)return;const f=r.olMap.getView(),w=r.olMap.getView().getProjection(),M=w.getMetersPerUnit()??1,A=br*vr*M,m=r.olMap.getView().getCenter();if(!m)return;const l=h/Ho(w,A,m);f.setResolution(l)}const g=o.map(h=>s.jsx(Ci,{value:h,onClick:()=>u(h),onFocus:f=>{f.target?.scrollIntoView?.({block:"nearest"})},className:"scale-setter-option",children:Et(n,h)},h));return s.jsx(H,{...i,children:s.jsxs(ji,{isLazy:!0,children:[s.jsx(Li,{as:ne,rightIcon:s.jsx($i,{}),className:"scale-setter-menubutton","aria-label":n.formatMessage({id:"button.ariaLabel"},{scale:c}),children:Et(n,c)}),s.jsx(uo,{children:s.jsx(Ai,{className:"scale-setter-menuoptions",maxHeight:"20em",overflowY:"auto",children:g})})]})})};function Et(t,e){return"1 : "+t.formatNumber(e)}var N={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let xr=0;function kr(t,e){const o=`atom${++xr}`,i={toString:()=>o};return typeof t=="function"?i.read=t:(i.init=t,i.read=Sr,i.write=_r),i}function Sr(t){return t(this)}function _r(t,e,o){return e(this,typeof o=="function"?o(t(this)):o)}const Ct=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,tt=t=>"init"in t,ot=t=>!!t.write,ke=Symbol((N?"production":void 0)!=="production"?"CONTINUE_PROMISE":""),dt="pending",Mr="fulfilled",Ir="rejected",Er=t=>typeof t=="object"&&t!==null&&ke in t,Re=new WeakMap,Cr=(t,e,o)=>{if(!Re.has(t)){let i;const r=new Promise((n,c)=>{let u=t;const g=f=>w=>{u===f&&(r.status=Mr,r.value=w,n(w),o())},h=f=>w=>{u===f&&(r.status=Ir,r.reason=w,c(w),o())};t.then(g(t),h(t)),i=(f,w)=>{f&&(Re.set(f,r),u=f,f.then(g(f),h(f)),e(),e=w)}});r.status=dt,r[ke]=i,Re.set(t,r)}return Re.get(t)},Lr=t=>typeof t?.then=="function",Lt=t=>"v"in t||"e"in t,De=t=>{if("e"in t)throw t.e;if((N?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Ve=t=>{const e=t.v;return Er(e)&&e.status===dt?e:null},At=(t,e,o)=>{o.p.has(t)||(o.p.add(t),e.then(()=>{o.p.delete(t)},()=>{o.p.delete(t)}))},re=()=>[new Map,new Map,new Set],it=(t,e,o)=>{t[0].has(e)||t[0].set(e,new Set),t[1].set(e,o)},Ar=(t,e,o)=>{const i=t[0].get(e);i&&i.add(o)},jr=(t,e)=>t[0].get(e),jt=(t,e)=>{t[2].add(e)},X=t=>{for(;t[1].size||t[2].size;){t[0].clear();const e=new Set(t[1].values());t[1].clear();const o=new Set(t[2]);t[2].clear(),e.forEach(i=>{var r;return(r=i.m)==null?void 0:r.l.forEach(n=>n())}),o.forEach(i=>i())}},ut=()=>{const t=new WeakMap;let e;(N?"production":void 0)!=="production"&&(e=new Set);const o=m=>{let l=t.get(m);return l||(l={d:new Map,p:new Set,n:0},t.set(m,l)),l},i=(m,l,p,d=()=>{},v=()=>{})=>{const x="v"in l,k=l.v,T=Ve(l);if(Lr(p))if(T)T!==p&&(T[ke](p,d),++l.n);else{const I=Cr(p,d,v);if(I.status===dt)for(const b of l.d.keys()){const C=o(b);At(m,I,C)}l.v=I,delete l.e}else T&&T[ke](Promise.resolve(p),d),l.v=p,delete l.e;(!x||!Object.is(k,l.v))&&++l.n},r=(m,l,p,d)=>{var v;if((N?"production":void 0)!=="production"&&p===l)throw new Error("[Bug] atom cannot depend on itself");const x=o(l);x.d.set(p,d.n);const k=Ve(x);k&&At(l,k,d),(v=d.m)==null||v.t.add(l),m&&Ar(m,p,l)},n=(m,l,p)=>{const d=o(l);if(!p?.(l)&&Lt(d)&&(d.m||Array.from(d.d).every(([b,C])=>n(m,b,p).n===C)))return d;d.d.clear();let v=!0;const x=b=>{if(Ct(l,b)){const R=o(b);if(!Lt(R))if(tt(b))i(b,R,b.init);else throw new Error("no atom init");return De(R)}const C=n(m,b,p);if(v)r(m,l,b,C);else{const R=re();r(R,l,b,C),f(R,l,d),X(R)}return De(C)};let k,T;const I={get signal(){return k||(k=new AbortController),k.signal},get setSelf(){return(N?"production":void 0)!=="production"&&!ot(l)&&console.warn("setSelf function cannot be used with read-only atom"),!T&&ot(l)&&(T=(...b)=>{if((N?"production":void 0)!=="production"&&v&&console.warn("setSelf function cannot be called in sync"),!v)return h(l,...b)}),T}};try{const b=l.read(x,I);return i(l,d,b,()=>k?.abort(),()=>{if(d.m){const C=re();f(C,l,d),X(C)}}),d}catch(b){return delete d.v,d.e=b,++d.n,d}finally{v=!1}},c=m=>De(n(void 0,m)),u=(m,l)=>{const p=I=>{var b,C;const R=o(I),W=new Set((b=R.m)==null?void 0:b.t);for(const ie of R.p)W.add(ie);return(C=jr(m,I))==null||C.forEach(ie=>{W.add(ie)}),W},d=[],v=new Set,x=I=>{if(!v.has(I)){v.add(I);for(const b of p(I))I!==b&&x(b);d.push(I)}};x(l);const k=new Set([l]),T=I=>v.has(I);for(let I=d.length-1;I>=0;--I){const b=d[I],C=o(b),R=C.n;let W=!1;for(const ie of C.d.keys())if(ie!==b&&k.has(ie)){W=!0;break}W&&(n(m,b,T),f(m,b,C),R!==C.n&&(it(m,b,C),k.add(b))),v.delete(b)}},g=(m,l,...p)=>{const d=k=>De(n(m,k)),v=(k,...T)=>{let I;if(Ct(l,k)){if(!tt(k))throw new Error("atom not writable");const b=o(k),C="v"in b,R=b.v,W=T[0];i(k,b,W),f(m,k,b),(!C||!Object.is(R,b.v))&&(it(m,k,b),u(m,k))}else I=g(m,k,...T);return X(m),I};return l.write(d,v,...p)},h=(m,...l)=>{const p=re(),d=g(p,m,...l);return X(p),d},f=(m,l,p)=>{if(p.m&&!Ve(p)){for(const d of p.d.keys())p.m.d.has(d)||(w(m,d).t.add(l),p.m.d.add(d));for(const d of p.m.d||[])if(!p.d.has(d)){const v=M(m,d);v?.t.delete(l),p.m.d.delete(d)}}},w=(m,l)=>{const p=o(l);if(!p.m){n(m,l);for(const d of p.d.keys())w(m,d).t.add(l);if(p.m={l:new Set,d:new Set(p.d.keys()),t:new Set},(N?"production":void 0)!=="production"&&e.add(l),ot(l)&&l.onMount){const d=p.m,{onMount:v}=l;jt(m,()=>{const x=v((...k)=>g(m,l,...k));x&&(d.u=x)})}}return p.m},M=(m,l)=>{const p=o(l);if(p.m&&!p.m.l.size&&!Array.from(p.m.t).some(d=>o(d).m)){const d=p.m.u;d&&jt(m,d),delete p.m,(N?"production":void 0)!=="production"&&e.delete(l);for(const x of p.d.keys()){const k=M(m,x);k?.t.delete(l)}const v=Ve(p);v&&v[ke](void 0,()=>{});return}return p.m},A=(m,l)=>{const p=re(),d=w(p,m);X(p);const v=d.l;return v.add(l),()=>{v.delete(l);const x=re();M(x,m),X(x)}};return(N?"production":void 0)!=="production"?{get:c,set:h,sub:A,dev4_get_internal_weak_map:()=>t,dev4_get_mounted_atoms:()=>e,dev4_restore_atoms:l=>{const p=re();for(const[d,v]of l)if(tt(d)){const x=o(d),k="v"in x,T=x.v;i(d,x,v),f(p,d,x),(!k||!Object.is(T,x.v))&&(it(p,d,x),u(p,d))}X(p)}}:{get:c,set:h,sub:A}};let ye;const Tr=()=>(ye||(ye=ut(),(N?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=ye),globalThis.__JOTAI_DEFAULT_STORE__!==ye&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),ye),Zt=_.createContext(void 0),Pr=t=>_.useContext(Zt)||Tr(),Rr=({children:t,store:e})=>{const o=_.useRef();return!e&&!o.current&&(o.current=ut()),_.createElement(Zt.Provider,{value:e||o.current},t)},Dr=t=>typeof t?.then=="function",Vr=po.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Nr(t,e){const o=Pr(),[[i,r,n],c]=_.useReducer(h=>{const f=o.get(t);return Object.is(h[0],f)&&h[1]===o&&h[2]===t?h:[f,o,t]},void 0,()=>[o.get(t),o,t]);let u=i;return(r!==o||n!==t)&&(c(),u=o.get(t)),_.useEffect(()=>{const h=o.sub(t,()=>{c()});return c(),h},[o,t,void 0]),_.useDebugValue(u),Dr(u)?Vr(u):u}const Jt="@open-pioneer/spatial-bookmarks",Or=ct.bind(void 0,Jt),Fr=$e.bind(void 0,Jt),q=Te("spatial-bookmark:SpatialBookmarkViewModel");class zr{map;packageNamespace;writableBookmarks=kr([]);stopBookmarksListener;store;get bookmarks(){return this.writableBookmarks}constructor(e,o){this.map=e,this.packageNamespace=o.getNamespace("spatial-bookmarks"),this.store=ut(),this.loadState(),this.stopBookmarksListener=this.store.sub(this.bookmarks,()=>{this.saveState()})}destroy(){this.stopBookmarksListener()}createBookmark(e){const o=this.map.olMap,i=o.getView().calculateExtent(),r=o.getView().getProjection().getCode(),n={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]},c={id:Wo(),title:e,extent:n,projection:r};q.debug("Created a new bookmark",c);const u=this.writableBookmarks;this.store.set(u,[...this.store.get(u),c])}activateBookmark(e){q.debug("Activating bookmark",e);const o=this.getBookmarkExtent(e);q.debug("Attempting to apply extent",o),this.applyExtent(o)}deleteBookmark(e){q.debug("Deleting bookmark",e);const o=this.writableBookmarks;this.store.set(o,[...this.store.get(o).filter(i=>i.id!==e)])}deleteAllBookmarks(){q.debug("Deleting all bookmarks"),this.store.set(this.writableBookmarks,[])}loadState(){q.debug("Restoring bookmarks from local storage");const e=this.packageNamespace.get("bookmarks")??[];try{Br(e),this.store.set(this.writableBookmarks,e)}catch(o){q.error("Bookmarks data in local storage is invalid, resetting to default value.",o),this.store.set(this.writableBookmarks,[]),this.saveState()}}saveState(){q.debug("Saving bookmarks to local storage"),this.packageNamespace.set("bookmarks",this.store.get(this.bookmarks))}getBookmarkExtent(e){const i=this.map.olMap.getView(),r=e.extent,n=[r.minX,r.minY,r.maxX,r.maxY],c=i.getProjection(),u=e.projection;return qo(n,u,c)}applyExtent(e){const i=this.map.olMap.getView(),r=$o(e),n=i.getResolutionForExtent(e);i.setCenter(r),i.setResolution(n)}}function Br(t){if(!Array.isArray(t))throw new Error("Expected bookmarks from local storage to be an array.");for(const e of t)Gr(e)}function Gr(t){if(!t||typeof t!="object")throw new Error("Expected bookmark from local storage to be an object.");const e=t;if(typeof e.id!="string")throw new Error("Bookmark does not have a valid id.");if(typeof e.title!="string")throw new Error("Bookmark does not have a valid title.");if(Ur(e.extent),typeof e.projection!="string")throw new Error("Bookmark does not have a valid projection value.")}function Ur(t){if(!t||typeof t!="object")throw new Error("Expected bookmark extent from local storage to be an object.");const e=t;if(typeof e.minX!="number"||typeof e.minY!="number"||typeof e.maxX!="number"||typeof e.maxY!="number")throw new Error("Expected bookmark extent from local storage to have valid coordinates.")}const Hr=t=>{const{map:e}=qe(t.mapId),o=Or("local-storage.LocalStorageService"),i=Jr(e,o);return i&&s.jsx(Rr,{store:i.store,children:s.jsx(Wr,{...t,viewModel:i})})};function Wr(t){const{viewModel:e}=t,o=Fr(),i=_.useRef([]),[r,n]=_.useState(!1),c=Nr(e.bookmarks),[u,g]=_.useState(""),h=u.trim().length>0,{containerProps:f}=We("spatial-bookmarks",t),[w,M]=_.useState("list"),A=()=>{e.deleteAllBookmarks(),M("list")},m=()=>{h&&(e.createBookmark(u),M("list"),g(""),n(!0))};_.useEffect(()=>{if(r){const x=i.current;x&&x[c.length-1]?.scrollIntoView?.(),n(!1)}},[c,r]);const l=()=>s.jsxs(nt,{children:[s.jsxs(Je,{rounded:"md",status:"warning",children:[s.jsx(Xe,{}),o.formatMessage({id:"bookmark.alert.delete"})]}),s.jsx(Yr,{intl:o,onClear:A,onCancel:()=>M("list")})]}),p=()=>s.jsxs(nt,{children:[s.jsxs(Je,{rounded:"md",status:"info",children:[s.jsx(Xe,{}),o.formatMessage({id:"bookmark.alert.create"})]}),s.jsx(ii,{"aria-label":o.formatMessage({id:"bookmark.input.label"}),placeholder:o.formatMessage({id:"bookmark.input.placeholder"}),value:u,onChange:x=>{g(x.target.value)},onKeyDown:x=>{x.key==="Enter"&&m()},isRequired:!0,isInvalid:!h,autoFocus:!0}),s.jsx(Zr,{intl:o,isInvalid:!h,onCancel:()=>{g(""),M("list")},onSave:m})]}),d=()=>s.jsxs(s.Fragment,{children:[c.length?qr(c,e,o,i):s.jsxs(Je,{rounded:"md",status:"info",children:[s.jsx(Xe,{}),o.formatMessage({id:"bookmark.alert.noSaved"})]}),s.jsx(Kr,{intl:o,bookmarks:c,showCreate:()=>M("create"),showDelete:()=>M("delete")})]}),v=s.jsxs(s.Fragment,{children:[w==="list"&&d(),w==="create"&&p(),w==="delete"&&l()]});return s.jsx(Z,{flexDirection:"column",...f,children:v})}function qr(t,e,o,i){const r=o.formatMessage({id:"bookmark.button.deleteOne"}),n=t.map((c,u)=>s.jsx($r,{index:u,listItemNodes:i,bookmark:c,onActivate:()=>e.activateBookmark(c),onDelete:()=>e.deleteBookmark(c.id),deleteBtnLabel:r},c.id));return s.jsx(yi,{as:"ul",className:"spatial-bookmark-list",role:"listbox","aria-label":o.formatMessage({id:"bookmark.list.label"}),flexShrink:1,flexGrow:1,p:1,spacing:1,overflowY:"auto",listStyleType:"none",children:n})}const Tt={ArrowDown:1,ArrowUp:-1};function $r(t){const{index:e,listItemNodes:o,bookmark:i,onDelete:r,onActivate:n,deleteBtnLabel:c}=t,u=i.title,g=h=>{const f=h.key;if(f==="Enter"){h.target===h.currentTarget&&n();return}if(Tt[f]!=null){const w=o.current?.length;if(!w)return;let M=(e+Tt[f])%w;M<0&&(M=w-1),o.current[M]?.focus()}};return s.jsx(H,{as:"li",p:1,ref:h=>{if(!h){o.current.splice(e,1);return}o.current[e]=h},className:Ko("spatial-bookmarks-item"),tabIndex:0,rounded:"md",role:"option",cursor:"pointer",outline:0,_hover:{background:"trails.50"},_focusVisible:{boxShadow:"outline"},onKeyDown:g,onClick:n,children:s.jsxs(Z,{width:"100%",flexDirection:"row",align:"center",gap:1,children:[s.jsx(Kt,{children:s.jsx(Qo,{})}),s.jsx(Ye,{ps:2,noOfLines:1,children:u}),s.jsx(Ti,{}),s.jsx(ho,{hasArrow:!0,label:c,placement:"right",children:s.jsx(ne,{className:"spatial-bookmarks-item-delete","aria-label":c,borderRadius:"full",iconSpacing:0,padding:0,colorScheme:"red",variant:"ghost",leftIcon:s.jsx(Ht,{}),onClick:h=>{r(),h.stopPropagation()}})},e)]})})}function Kr(t){const{intl:e,bookmarks:o,showCreate:i,showDelete:r}=t;return s.jsxs(pt,{children:[s.jsx(fe,{isDisabled:o.length===0,colorScheme:"red",width:void 0,iconSpacing:0,leftIcon:s.jsx(Ht,{}),onClick:r,"aria-label":e.formatMessage({id:"bookmark.button.deleteAll"}),variant:"outline"}),s.jsx(fe,{onClick:i,width:"100%",children:e.formatMessage({id:"bookmark.button.create"})})]})}function Yr(t){const{intl:e,onCancel:o,onClear:i}=t;return s.jsxs(pt,{children:[s.jsx(fe,{variant:"outline",onClick:o,children:e.formatMessage({id:"bookmark.button.cancelDelete"})}),s.jsx(fe,{onClick:i,children:e.formatMessage({id:"bookmark.button.confirmDelete"})})]})}function Zr(t){const{intl:e,onCancel:o,onSave:i,isInvalid:r}=t;return s.jsxs(pt,{children:[s.jsx(fe,{variant:"outline",onClick:()=>o(),children:e.formatMessage({id:"bookmark.button.cancel"})}),s.jsx(fe,{isDisabled:r,onClick:()=>i(),children:e.formatMessage({id:"bookmark.button.save"})})]})}function pt(t){return s.jsx(Z,{width:"100%",flexDirection:"row",mt:2,gap:1,flexGrow:0,flexShrink:0,children:t.children})}function fe(t){return s.jsx(ne,{width:"100%",...t})}function Jr(t,e){const[o,i]=_.useState();return _.useEffect(()=>{let r;return t?r=new zr(t,e):r=void 0,i(r),()=>r?.destroy()},[t,e]),o}function Xr({intl:t}){return{id:"coordinateViewer",title:t.formatMessage({id:"demos.coordinateViewer.title"}),createModel(){return{description:t.formatMessage({id:"demos.coordinateViewer.description"}),mainWidget:s.jsx(ri,{mapId:L})}}}}function Qr({intl:t}){return{id:"scaleViewer",title:t.formatMessage({id:"demos.scaleViewer.title"}),createModel(){return{description:t.formatMessage({id:"demos.scaleViewer.description"}),mainWidget:s.jsx(si,{mapId:L})}}}}function es({intl:t}){return{id:"scaleSetter",title:t.formatMessage({id:"demos.scaleSetter.title"}),createModel(){return{description:t.formatMessage({id:"demos.scaleSetter.description"}),mainWidget:s.jsx(yr,{mapId:L})}}}}function ts({intl:t}){return{id:"scaleBar",title:t.formatMessage({id:"demos.scaleBar.title"}),createModel(){return{description:t.formatMessage({id:"demos.scaleBar.description"}),tools:s.jsx(ni,{mapId:L})}}}}function os({intl:t}){return{id:"measurement",title:t.formatMessage({id:"demos.measurement.title"}),createModel(){return{description:t.formatMessage({id:"demos.measurement.description"}),mainWidget:s.jsx(ai,{mapId:L})}}}}function is({intl:t}){return{id:"mapNavigation",title:t.formatMessage({id:"demos.mapNavigation.title"}),createModel(){return{description:t.formatMessage({id:"demos.mapNavigation.description"}),tools:s.jsxs(s.Fragment,{children:[s.jsx(ki,{mapId:L}),s.jsx(Si,{mapId:L}),s.jsx(_i,{mapId:L})]})}}}}function rs({intl:t}){return{id:"geolocation",title:t.formatMessage({id:"demos.geolocation.title"}),createModel(){return{description:t.formatMessage({id:"demos.geolocation.description"}),tools:s.jsx(hr,{mapId:L})}}}}function ss({intl:t}){return{id:"spatialBookmarks",title:t.formatMessage({id:"demos.spatialBookmarks.title"}),createModel(){return{description:t.formatMessage({id:"demos.spatialBookmarks.description"}),mainWidget:s.jsx(Hr,{mapId:L})}}}}function ns({intl:t}){return{id:"printing",title:t.formatMessage({id:"demos.printing.title"}),createModel(){return{description:t.formatMessage({id:"demos.printing.description"}),mainWidget:s.jsx(li,{mapId:L})}}}}const Xt="showcase-app",Qt=ct.bind(void 0,Xt),we=$e.bind(void 0,Xt);function as({intl:t,mapModel:e}){return{id:"tocLegend",title:t.formatMessage({id:"demos.tocLegend.title"}),createModel(){function o(r=!0){e.layers.getLayerById("verwaltungsgebiete").setVisible(r),e.layers.getLayerById("krankenhaus").setVisible(r),e.layers.getLayerById("ogc_kitas").setVisible(r)}function i(){o(!1),e?.layers.activateBaseLayer("osm")}return{description:t.formatMessage({id:"demos.tocLegend.description"}),mainWidget:s.jsx(ls,{}),destroy:i}}}}function ls(){const t=_.useId(),e=_.useId(),o=we();return s.jsxs(s.Fragment,{children:[s.jsx(H,{role:"dialog","aria-labelledby":t,children:s.jsx(Ne,{title:s.jsx(st,{id:t,size:"md",mb:2,children:s.jsx(Ye,{children:o.formatMessage({id:"demos.tocLegend.tocTitle"})})}),children:s.jsx(wi,{mapId:L,showTools:!0,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})}),s.jsx(H,{pt:2,role:"dialog","aria-labelledby":e,children:s.jsx(Ne,{title:s.jsx(st,{id:e,size:"md",mb:2,children:o.formatMessage({id:"demos.tocLegend.legendTitle"})}),children:s.jsx(ci,{mapId:L,showBaseLayers:!0})})})]})}function cs(t){return{id:"selectionResultList",title:t.intl.formatMessage({id:"demos.selectionResultList.title"}),createModel(){return new ds(t)}}}var Ie,ce,de,Fe,ze,Vt;let ds=(Vt=class{constructor(e){y(this,Ie);y(this,ce);y(this,de,Ke({key:0,input:void 0,open:!1}));J(this,"description");J(this,"mainWidget");y(this,Fe,e=>{const{results:o}=e,n={columns:[{id:"id",displayName:"ID",width:100,getPropertyValue(u){return u.id}},{propertyName:"pointOfContact.address.postCode",displayName:"PLZ",width:120},{propertyName:"name",displayName:"Name"},{propertyName:"inspireId",displayName:"inspireID"},{displayName:"Gefördert",width:160,getPropertyValue(u){switch(u.properties?.gefoerdert){case"ja":return!0;case"nein":return!1;default:return u.properties?.gefoerdert}}}],data:o,formatOptions:{numberOptions:{maximumFractionDigits:3},dateOptions:{dateStyle:"medium",timeStyle:"medium",timeZone:"UTC"}}},c=a(this,de).value.key;a(this,de).value={open:!0,key:c+1,input:n}});y(this,ze,e=>{console.log("Selected features: ",e.features)});const{mapModel:o,vectorSelectionSourceFactory:i,intl:r}=e;S(this,Ie,o),S(this,ce,us(o,i)),this.description=r.formatMessage({id:"demos.selectionResultList.description"}),this.mainWidget=s.jsx(di,{mapId:L,sources:[a(this,ce)],onSelectionComplete:a(this,Fe)}),o.layers.getLayerById("ogc_kitas").setVisible(!0)}destroy(){a(this,ce).destroy(),a(this,Ie).layers.getLayerById("ogc_kitas").setVisible(!1)}get listContainer(){const e=a(this,de).value;if(!(!e.open||!e.input))return s.jsx(Pi,{input:e.input,mapId:L,onSelectionChange:a(this,ze)},e.key)}},Ie=new WeakMap,ce=new WeakMap,de=new WeakMap,Fe=new WeakMap,ze=new WeakMap,Vt);function us(t,e){const o=t.layers.getLayerById("ogc_kitas");return e.createSelectionSource({vectorLayer:o.olLayer,label:o.title})}const ps="krankenhaus";function hs(t){return{id:"editing",title:t.intl.formatMessage({id:"demos.editing.title"}),createModel(){return new ms(t)}}}var Ee,ue;class ms{constructor(e){J(this,"description");J(this,"mainWidget");y(this,Ee);y(this,ue);const{mapModel:o,intl:i,editingService:r,notificationService:n}=e;S(this,Ee,o),this.description=i.formatMessage({id:"demos.editing.description"}),S(this,ue,new gs(o,r,n,i)),this.mainWidget=s.jsx(fs,{editingController:a(this,ue)}),this._setEditLayerVisible(!0)}destroy(){this._setEditLayerVisible(!1),a(this,ue).stopEditing()}_setEditLayerVisible(e=!0){a(this,Ee).layers.getLayerById(ps).setVisible(e)}}Ee=new WeakMap,ue=new WeakMap;var D,V,Q,pe,ee,U,te,$;class gs{constructor(e,o,i,r){y(this,D);y(this,V);y(this,Q);y(this,pe);y(this,ee);y(this,U);y(this,te);y(this,$);S(this,D,Ke(!1)),S(this,V,e),S(this,Q,o),S(this,pe,i),S(this,ee,r)}editingActive(){return a(this,D).value}startCreateWorkflow(){if(!a(this,D).value)try{a(this,D).value=!0;const e=a(this,V).layers.getLayerById("krankenhaus"),o=new URL(e.attributes.collectionURL+"/items");a(this,Q).createFeature(a(this,V),o).whenComplete().then(r=>{if(!r)return;a(this,pe).notify({level:"info",message:a(this,ee).formatMessage({id:"demos.editing.create.featureCreated"},{featureId:r.featureId})}),(e?.olLayer).getSource()?.refresh()}).catch(r=>{console.error(r)}).finally(()=>{a(this,D).value=!1})}catch(e){a(this,D).value=!1,console.error(e)}}startUpdateWorkflow(){if(!a(this,D).value)try{a(this,D).value=!0,S(this,$,this._createEditingSelectTooltip());const e=a(this,V).layers.getLayerById("krankenhaus"),o=e?.olLayer;S(this,U,new ui({layers:[o]})),a(this,V).olMap.addInteraction(a(this,U)),a(this,$).element.classList.remove("editing-tooltip-hidden"),S(this,te,a(this,U).on("select",i=>{const r=i.selected,n=i.deselected;if(r.length!==1||n.length!==0)return;this._stopUpdateSelection();const c=r[0];if(!c)throw Error("feature is undefined");const u=new URL(e.attributes.collectionURL+"/items");a(this,Q).updateFeature(a(this,V),u,c).whenComplete().then(h=>{h&&(a(this,pe).notify({level:"info",message:a(this,ee).formatMessage({id:"demos.editing.update.featureModified"},{featureId:h.featureId})}),o.getSource()?.refresh())}).catch(h=>{console.error(h)}).finally(()=>{a(this,D).value=!1})}))}catch(e){a(this,D).value=!1,console.error(e)}}_createEditingSelectTooltip(){const e=document.createElement("div");e.className="editing-tooltip editing-tooltip-hidden",e.textContent=a(this,ee).formatMessage({id:"demos.editing.update.tooltip.select"});const o=new Wt({element:e,offset:[15,0],positioning:"center-left"}),i=a(this,V).olMap,r=i.on("pointermove",n=>{n.dragging||o.setPosition(n.coordinate)});return i.addOverlay(o),{overlay:o,element:e,destroy(){rt(r),i.removeOverlay(o)}}}_stopUpdateSelection(){a(this,U)&&a(this,V).olMap.removeInteraction(a(this,U)),a(this,te)&&rt(a(this,te)),a(this,$)&&a(this,$).destroy(),S(this,U,void 0),S(this,te,void 0),S(this,$,void 0)}stopEditing(){a(this,Q).stop(L),this._stopUpdateSelection(),a(this,D).value=!1}}D=new WeakMap,V=new WeakMap,Q=new WeakMap,pe=new WeakMap,ee=new WeakMap,U=new WeakMap,te=new WeakMap,$=new WeakMap;function fs({editingController:t}){const e=we(),o=Se(()=>t.editingActive(),[t]),i=o?e.formatMessage({id:"demos.editing.activeInfo"}):e.formatMessage({id:"demos.editing.inactiveInfo"});return s.jsxs(s.Fragment,{children:[s.jsxs(Z,{px:1,py:1,children:[s.jsx(ne,{mr:2,isDisabled:o,onClick:()=>{t.startCreateWorkflow()},children:e.formatMessage({id:"demos.editing.startCreateButton"})}),s.jsx(ne,{mr:2,isDisabled:o,onClick:()=>{t.startUpdateWorkflow()},children:e.formatMessage({id:"demos.editing.startUpdateButton"})}),s.jsx(ne,{isDisabled:!o,onClick:()=>{t.stopEditing()},children:e.formatMessage({id:"demos.editing.stopButton"})})]}),s.jsx(Z,{px:1,py:1,children:i})]})}function vs(t){return[as(t),Xr(t),Qr(t),es(t),ts(t),os(t),hs(t),is(t),rs(t),ss(t),ir(t),ns(t),cs(t),sr(t)]}const bs=Te("app::AppModel");var Be,Ce,Le,K,O,Ge,Ue,be,eo,to;class ws{constructor(e,o,i,r){y(this,be);y(this,Be);y(this,Ce);y(this,Le);y(this,K);y(this,O);y(this,Ge,pi(()=>Array.from(a(this,K).values())));y(this,Ue,[]);if(S(this,Be,e),S(this,Ce,o),S(this,Le,i),S(this,K,new Map(r.map(c=>[c.id,c]))),a(this,K).size===0)throw new Error("No demos defined.");const n=r[0];S(this,O,Ke([n,n.createModel()])),P(this,be,eo).call(this),a(this,Ue).push(P(this,be,to).call(this))}destroy(){a(this,O).value[1].destroy?.()}get currentDemo(){return a(this,O).value[0]}get currentDemoModel(){return a(this,O).value[1]}get allDemoInfos(){return a(this,Ge).value}selectDemo(e){const o=a(this,K).get(e);if(!o)throw new Error(`Demo '${e}' does not exist.`);hi(()=>{const[,i]=a(this,O).value;i.destroy?.(),a(this,O).value=[o,o.createModel()]})}}Be=new WeakMap,Ce=new WeakMap,Le=new WeakMap,K=new WeakMap,O=new WeakMap,Ge=new WeakMap,Ue=new WeakMap,be=new WeakSet,eo=function(){const o=new URL(window.location.href).searchParams.get("demo");if(o){if(!a(this,K).has(o)){a(this,Ce).notify({title:a(this,Le).formatMessage({id:"demoSelection.notFound"},{demoId:o})});return}try{this.selectDemo(o)}catch(i){bs.error("Failed to select demo from URL",i)}}},to=function(){return mi(()=>[a(this,O).value[0].id],([e])=>{const o=new URL(window.location.href);o.searchParams.set("demo",e),window.history.replaceState(null,"",o.toString())},{immediate:!0})};var he,Ae,je,He,oo;class ys{constructor(e){y(this,He);y(this,he,Ke({kind:"loading"}));y(this,Ae,[]);y(this,je,!1);const{mapRegistry:o,httpService:i,notifier:r,vectorSelectionSourceFactory:n,editingService:c,notificationService:u}=e.references,g=e.intl;P(this,He,oo).call(this,{mapRegistry:o,httpService:i,notifier:r,vectorSelectionSourceFactory:n,editingService:c,intl:g,notificationService:u}).catch(h=>{a(this,he).value={kind:"error",message:h.message||"Unknown error"}})}destroy(){S(this,je,!0);for(const e of a(this,Ae))e.destroy()}get appState(){return a(this,he).value}}he=new WeakMap,Ae=new WeakMap,je=new WeakMap,He=new WeakSet,oo=async function(e){const{mapRegistry:o,httpService:i,notifier:r,vectorSelectionSourceFactory:n,editingService:c,intl:u,notificationService:g}=e,h=await o.getMapModel(L);if(!h)throw new Error("No mapModel found.");const f=vs({intl:u,httpService:i,mapModel:h,vectorSelectionSourceFactory:n,editingService:c,notificationService:g}),w={kind:"ready",appModel:new ws(h,r,u,f),destroy(){this.appModel.destroy()}};if(a(this,je)){w.destroy();return}a(this,he).value=w,a(this,Ae).push(w)};const oe=Te("local-storage"),xs=0,G={CORRUPTED_DATA:"local-storage:corrupted-data",INVALID_PATH:"local-storage:invalid-path",INVALID_VALUE:"local-storage:invalid-value",NOT_SUPPORTED:"local-storage:not-supported",INTERNAL:"local-storage:internal-error"};var me,F,Y,ge,z,j,io,ro,xe,se,so;class ks{constructor(e){y(this,j);y(this,me);y(this,F,{});y(this,Y);y(this,ge);y(this,z);S(this,me,Is(e.properties)),S(this,Y,Es()),a(this,Y)&&(P(this,j,ro).call(this),S(this,ge,P(this,j,so).call(this)))}destroy(){a(this,z)&&(clearTimeout(a(this,z)),S(this,z,void 0)),a(this,Y)&&P(this,j,xe).call(this)}get isSupported(){return!!a(this,ge)}get(e){return P(this,j,se).call(this).get(e)}set(e,o){return P(this,j,se).call(this).set(e,o)}remove(e){return P(this,j,se).call(this).remove(e)}removeAll(){return P(this,j,se).call(this).removeAll()}getNamespace(e){return P(this,j,se).call(this).getNamespace(e)}}me=new WeakMap,F=new WeakMap,Y=new WeakMap,ge=new WeakMap,z=new WeakMap,j=new WeakSet,io=function(){a(this,z)&&clearTimeout(a(this,z)),S(this,z,setTimeout(()=>{S(this,z,void 0),P(this,j,xe).call(this)},xs))},ro=function(){try{const e=a(this,Y);if(!e)throw new B(G.INTERNAL,"Local storage is not available.");const o=e.getItem(a(this,me));if(o==null){S(this,F,{}),P(this,j,xe).call(this);return}try{const i=JSON.parse(o);if(!ve(i))throw new B(G.CORRUPTED_DATA,"Persisted value should be an object.");S(this,F,i)}catch(i){oe.warn("Invalid persisted data, reverting to default.",i),S(this,F,{}),P(this,j,xe).call(this)}}catch(e){oe.error("Failed to load from local storage",e)}},xe=function(){try{const e=a(this,Y);if(!e)throw new B(G.INTERNAL,"Local storage is not available.");const o=JSON.stringify(a(this,F));e.setItem(a(this,me),o)}catch(e){oe.error("Failed to save to local storage",e)}},se=function(){const e=a(this,ge);if(!e)throw new B(G.NOT_SUPPORTED,"Local storage is not supported by this browser.");return e},so=function(){const e={getByPath:o=>Rt(Ss(a(this,F),o)),setByPath:(o,i)=>{if(!Ms(i))throw new B(G.INVALID_VALUE,"The value is not supported by local storage.");if(i=Rt(i),o.length===0){if(!ve(i))throw new B(G.INVALID_VALUE,"The root value must be a plain object.");S(this,F,i)}else _s(a(this,F),o,i);P(this,j,io).call(this)}};return new ht([],e)};class ht{path;access;constructor(e,o){this.path=e,this.access=o}get(e){return this.access.getByPath([...this.path,e])}set(e,o){this.access.setByPath([...this.path,e],o)}remove(e){this.access.setByPath([...this.path,e],void 0)}removeAll(){this.access.setByPath(this.path,{})}getNamespace(e){const o=this.get(e);if(o===void 0)this.set(e,{});else if(!ve(o))throw new B(G.INVALID_PATH,`Cannot use '${e}' as a namespace because it is not associated with an object.`);return new ht(this.path.concat([e]),this.access)}}const Pt="trails-state";function Ss(t,e){let o=t;for(const i of e){if(!ve(o))throw new B(G.INVALID_PATH,`Cannot get nested property '${i}' because the parent is no object.`);o=o[i]}return o}function _s(t,e,o){if(!e.length)throw new B(G.INTERNAL,"Path must not be empty.");let i=t;for(let n=0,c=e.length-1;n<c;++n){const u=e[n],g=i[u];if(!ve(g))throw new B(G.INVALID_PATH,`Cannot set property on '${u}' because it is no object.`);i=g}const r=e[e.length-1];i[r]=o}function ve(t){return!!(t&&typeof t=="object"&&!Array.isArray(t))}function Ms(t){const e=typeof t;return e==="boolean"||e==="number"||e==="string"||e==="undefined"||t===null||Array.isArray(t)||ve(t)}function Is(t){const e=t.storageId;return!e||typeof e!="string"?(oe.warn(`The 'storageId' property of the 'local-storage' package should be set to a valid string to avoid collisions with other applications. Defaulting to '${Pt}'.`),Pt):e}function Es(){if(typeof Storage>"u"){oe.warn("Local storage is not supported by this browser.");return}try{const t=globalThis.localStorage;if(!t){oe.warn("Local storage is not supported by this browser.");return}return t}catch(t){oe.warn("Local storage is not supported by this browser.",t);return}}function Rt(t){return t!=null&&(t=JSON.parse(JSON.stringify(t))),t}const Cs={"showcase-app":{name:"showcase-app",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:Zi,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{vectorSourceFactory:{name:"ogc-features.VectorSourceFactory",qualifier:void 0,all:!1}}},AppInitModel:{name:"AppInitModel",clazz:ys,provides:[{name:"app.AppInitModel",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1},mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1},notifier:{name:"notifier.NotificationService",qualifier:void 0,all:!1},vectorSelectionSourceFactory:{name:"selection.VectorSelectionSourceFactory",qualifier:void 0,all:!1},editingService:{name:"editing.EditingService",qualifier:void 0,all:!1},notificationService:{name:"notifier.NotificationService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"app.AppInitModel",qualifier:void 0,all:!1},{name:"runtime.ApplicationContext",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:Yo,provides:[{name:"http.HttpService",qualifier:"http.HttpService"}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/notifier":{name:"@open-pioneer/notifier",services:{NotificationServiceImpl:{name:"NotificationServiceImpl",clazz:Ri,provides:[{name:"notifier.NotificationService",qualifier:"notifier.NotificationService"}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/reactivity":{name:"@open-pioneer/reactivity",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:Zo,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/coordinate-viewer":{name:"@open-pioneer/coordinate-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/ogc-features":{name:"@open-pioneer/ogc-features",services:{VectorSourceFactory:{name:"VectorSourceFactory",clazz:Mi,provides:[{name:"ogc-features.VectorSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}},SearchSourceFactory:{name:"SearchSourceFactory",clazz:Ii,provides:[{name:"ogc-features.SearchSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}},"@open-pioneer/overview-map":{name:"@open-pioneer/overview-map",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-bar":{name:"@open-pioneer/scale-bar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-viewer":{name:"@open-pioneer/scale-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/result-list":{name:"@open-pioneer/result-list",services:{},ui:{references:[]},properties:{}},"@open-pioneer/geolocation":{name:"@open-pioneer/geolocation",services:{},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/legend":{name:"@open-pioneer/legend",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/measurement":{name:"@open-pioneer/measurement",services:{},ui:{references:[]},properties:{}},"@open-pioneer/printing":{name:"@open-pioneer/printing",services:{PrintingServiceImpl:{name:"PrintingServiceImpl",clazz:Di,provides:[{name:"printing.PrintingService",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1},{name:"printing.PrintingService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/scale-setter":{name:"@open-pioneer/scale-setter",services:{},ui:{references:[]},properties:{}},"@open-pioneer/search":{name:"@open-pioneer/search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/spatial-bookmarks":{name:"@open-pioneer/spatial-bookmarks",services:{},ui:{references:[{name:"local-storage.LocalStorageService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/selection":{name:"@open-pioneer/selection",services:{VectorSelectionSourceFactory:{name:"VectorSelectionSourceFactory",clazz:gi,provides:[{name:"selection.VectorSelectionSourceFactory",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/editing":{name:"@open-pioneer/editing",services:{EditingServiceImpl:{name:"EditingServiceImpl",clazz:fi,provides:[{name:"editing.EditingService",qualifier:void 0}],references:{mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{polygonStyle:{value:{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"red","stroke-width":1.25,"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1},vertexStyle:{value:{"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1}}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-ui-components":{name:"@open-pioneer/map-ui-components",services:{},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/local-storage":{name:"@open-pioneer/local-storage",services:{LocalStorageServiceImpl:{name:"LocalStorageServiceImpl",clazz:ks,provides:[{name:"local-storage.LocalStorageService",qualifier:"local-storage.LocalStorageService"}],references:{}}},ui:{references:[]},properties:{storageId:{value:null,required:!1}}}},Ls=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.measurement-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.measurement-active-tooltip{background:#000000e6;border-radius:4px;border-color:#000000e6;opacity:.9;color:#fff}.measurement-finished-tooltip{background-color:#4cb3ffe6;color:#000;border:1px solid white}.measurement-active-tooltip:before,.measurement-finished-tooltip:before{border-top:6px solid rgba(0,0,0,.9);border-right:6px solid transparent;border-left:6px solid transparent;content:"";position:absolute;bottom:-6px;margin-left:-7px;left:50%}.measurement-finished-tooltip:before{border-top-color:#4cb3ff}.printing-overlay{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10000;-webkit-user-select:none;user-select:none;pointer-events:all;cursor:wait;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#b4b4b4cc}.printing-overlay-status{flex:1 1 auto;font-size:1.5em;text-align:center}.printing-scale-bar.ol-scale-bar{left:var(--printing-scale-bar-left);bottom:var(--printing-scale-bar-bottom)}.search-component .chakra-divider{display:none}.search-component .search-highlighted-match{font-weight:700}.search-component .search-value-container{cursor:text;padding-left:30px!important}.search-component .search-invisible{display:none}.selection-drag-box{background-color:#ffffff4d!important;border:3px solid var(--chakra-colors-background_primary)!important}.selection-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.selection .react-select{cursor:default}.map-container .selection-active{cursor:crosshair}.map-container .selection-inactive{cursor:no-drop}.selection-source-value.selection-source-value--disabled{opacity:.4}.selection-source-value.selection-source-value--disabled span{margin:0 6px 0 0}.editing-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.editing-tooltip-hidden{visibility:hidden}.map-anchor.main-map-anchor{overflow-x:hidden;overflow-y:auto}.map-container:focus-visible{outline:none}.map-container:focus-visible:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;border:3px solid var(--chakra-colors-trails-500)}@media screen and (max-width: 48em){.map-anchor.main-map-anchor{max-height:45%}}.overview-map .ol-overviewmap{position:relative;height:100%;width:100%}.overview-map .ol-overviewmap:not(.ol-collapsed){border:1px solid black}.overview-map .ol-overviewmap .ol-overviewmap-map{border:none;width:100%;height:100%}.overview-map .ol-overviewmap .ol-overviewmap-box{border:2px solid red}.scale-bar .ol-scale-bar{margin-bottom:8px;margin-right:8px}.scale-bar .ol-scale-bar,.scale-bar .ol-scale-line{position:relative;bottom:0;left:0;background:none}.scale-bar .ol-scale-bar .ol-scale-bar-inner,.scale-bar .ol-scale-bar .ol-scale-line-inner,.scale-bar .ol-scale-line .ol-scale-bar-inner,.scale-bar .ol-scale-line .ol-scale-line-inner{color:var(--chakra-white);border-color:var(--chakra-white)}.result-list-no-data-message{text-align:center;margin-top:50px;font-weight:700;font-size:larger}.result-list-table th,.result-list-table td{overflow-wrap:break-word}.result-list-table.result-list-table--is-resizing *{cursor:col-resize}.result-list-table thead{position:sticky;top:0;z-index:1;background:var(--chakra-colors-background_body)}.result-list-table th{position:relative;border-right-width:thin}.result-list-table tbody tr:hover{background:var(--chakra-colors-background_light)}.result-list-table .result-list-resizer{position:absolute;top:0;height:100%;right:0;width:8px;background:var(--chakra-colors-trails-100);transform:scaleX(.25);cursor:col-resize;-webkit-user-select:none;user-select:none;touch-action:none;padding-left:0}.result-list-table th:last-child .result-list-resizer{width:8px;transform:translate(50%) scaleX(.25)}.result-list-table th .result-list-resizer.result-list-resizer--is-resizing{background:var(--chakra-colors-trails-500);transform:scale(1)}.result-list-table th .result-list-resizer:hover{transform:scale(1)}',As=["en","de"];function js(t){switch(t){case"en":return kt(()=>import("./PfXWDbYiBKGh.js"),[],import.meta.url).then(e=>e.default);case"de":return kt(()=>import("./BQHso5RiyKUr.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${t}'`)}const Ts=mo(Ls),Ps=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:js,locales:As,packages:Cs,styles:Ts},Symbol.toStringTag,{value:"Module"}));function no({label:t,children:e}){return s.jsxs(Vi,{as:Ni,maxWidth:{base:"none",md:"20em"},width:{base:"100%",sm:"47%",md:void 0},children:[s.jsx(Oi,{flexBasis:{base:"8em",sm:"auto"},m:0,children:t}),e]})}const Rs=Te("app::DemoSelection");function Ds({appModel:t}){const e=we(),{allDemos:o,currentDemo:i}=Se(()=>({allDemos:t.allDemoInfos,currentDemo:t.currentDemo}),[t]),r=_.useMemo(()=>o.map(n=>s.jsx("option",{value:n.id,children:n.title},n.id)),[o]);return s.jsx(no,{label:e.formatMessage({id:"demoSelection.label"}),children:s.jsx(qt,{value:i.id,onChange:n=>{const c=n.target.value;try{t.selectDemo(c)}catch(u){Rs.error("Failed to select demo",u)}},children:r})})}function Vs(){const t=we(),e=Qt("runtime.ApplicationContext"),o=Ns(e.getLocale()),i=r=>{switch(r){case"en":e.setLocale("en-GB");break;case"de":e.setLocale("de-DE");break}};return s.jsx(no,{label:t.formatMessage({id:"localeSwitcher.label"}),children:s.jsxs(qt,{value:o,onChange:r=>i(r.target.value),children:[s.jsx("option",{value:"de",children:t.formatMessage({id:"localeSwitcher.locale.de"})}),s.jsx("option",{value:"en",children:t.formatMessage({id:"localeSwitcher.locale.en"})})]})})}function Ns(t){const e=t.match(/^[a-z]+/i)?.[0];if(e==="en"||e=="de")return e;throw new Error("unexpected locale prefix: "+e)}function Os({appModel:t}){const e=we();return s.jsxs(Z,{as:"header",px:2,py:3,flexWrap:{base:"wrap",md:"nowrap"},alignItems:"baseline",gap:2,boxShadow:"1px 0px 3px rgba(0, 0, 0, 0.5)",bgColor:"white",zIndex:100,children:[s.jsx(st,{size:"md",flexShrink:0,flexGrow:1,textAlign:{base:"center",md:"left"},width:{base:"100%",md:"auto"},mb:{base:2,md:0},children:e.formatMessage({id:"header.title"})}),s.jsx(Ds,{appModel:t}),s.jsx(Vs,{})]})}function Fs(){const t=Qt("app.AppInitModel"),e=Se(()=>t.appState,[t]);let o;switch(e.kind){case"loading":o="Loading...";break;case"error":o="Error: "+e.message;break;case"ready":o=s.jsx(zs,{state:e})}return o}function zs(t){const e=we(),o=t.state.appModel,{currentDemo:i,currentDemoModel:r}=Se(()=>({currentDemo:o.currentDemo,currentDemoModel:o.currentDemoModel}),[o]),n=Se(()=>r.listContainer,[r]);return s.jsxs(s.Fragment,{children:[s.jsx(vi,{position:"top-right"}),s.jsx(Z,{height:"100%",direction:"column",children:s.jsx(Ne,{title:s.jsx(Os,{appModel:o}),children:s.jsx(Z,{flex:"1",direction:"column",position:"relative",children:s.jsxs(Jo,{mapId:L,role:"main","aria-label":e.formatMessage({id:"ariaLabels.map"}),children:[s.jsx(xt,{className:"main-map-anchor",position:"top-left",horizontalGap:10,verticalGap:10,children:s.jsx(H,{bgColor:"white",borderRadius:10,p:2,maxW:"500px",children:s.jsxs(Ne,{title:i.title,sectionHeadingProps:{size:"lg"},children:[s.jsx(Ye,{py:4,dangerouslySetInnerHTML:{__html:r.description}}),r.mainWidget]})})}),s.jsx(xt,{position:"bottom-right",horizontalGap:6,children:s.jsx(nt,{p:1,children:r.tools})}),n&&s.jsx(H,{className:"list-container",position:"absolute",bottom:"0",backgroundColor:"white",width:"100%",height:"400px",zIndex:1,borderTop:"2px solid",borderColor:"trails.100",children:n})]})})})})]})}const Bs=new URLSearchParams(window.location.search),Gs=Bs.get("lang")||void 0,Us=go({component:Fs,appMetadata:Ps,config:{properties:{"@open-pioneer/local-storage":{storageId:"ol-showcase-state"}},locale:Gs}});customElements.define("showcase-app",Us);
