var w=t=>{throw TypeError(t)};var k=(t,n,s)=>n.has(t)||w("Cannot "+s);var p=(t,n,s)=>(k(t,n,"read from private field"),s?s.call(t):n.get(t)),v=(t,n,s)=>n.has(t)?w("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,s),l=(t,n,s,i)=>(k(t,n,"write to private field"),i?i.call(t,s):n.set(t,s),s);import{p as q,q as A,j as e,d as C,r as m,P as b,Q as y,R as B,S as U,a as O,b as D}from"./CP8MVrT81mG9.js";import{E as G}from"./vOBnYnib6xFk.js";import{u as H,I as V}from"./B4Et_VrZbAI1.js";import{I as L}from"./BKGDiz-wqvFI.js";import{C as P,H as F}from"./qK5A3QF7i-vn.js";import{V as K}from"./DBlWAQNrMizC.js";import{T as Q}from"./C7TYXCc56rA1.js";import{F as _}from"./DTcwvI7lZQBL.js";import{F as N}from"./BQKSesc4bxtF.js";import{B as S}from"./6x-PNDsXtbVt.js";import{A as Y,u as $,F as J}from"./CIOhC7Cp81P3.js";import{u as W}from"./C45KNpS0yFsl.js";import{F as X}from"./mcFmBe9aR2Xm.js";import"./CkMijwItPRnA.js";var Z=q("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),x=A(function(n,s){var i,a;const{placement:o="left",...h}=n,g=H(),r=g.field,j={[o==="left"?"insetStart":"insetEnd"]:"0",width:(i=r?.height)!=null?i:r?.h,height:(a=r?.height)!=null?a:r?.h,fontSize:r?.fontSize,...g.element};return e.jsx(Z,{ref:s,__css:j,...h})});x.id="InputElement";x.displayName="InputElement";var T=A(function(n,s){const{className:i,...a}=n,o=C("chakra-input__left-element",i);return e.jsx(x,{ref:s,placement:"left",className:o,...a})});T.id="InputLeftElement";T.displayName="InputLeftElement";var I=A(function(n,s){const{className:i,...a}=n,o=C("chakra-input__right-element",i);return e.jsx(x,{ref:s,placement:"right",className:o,...a})});I.id="InputRightElement";I.displayName="InputRightElement";function ee({doLogin:t,wasLoggedIn:n}){const[s,i]=m.useState(""),[a,o]=m.useState(""),[h,g]=m.useState(!1),[r,E]=m.useState(),[j,M]=m.useState(n),z=d=>{d.preventDefault();const R=t(s,a);E(R||""),M(!1)};return e.jsx(P,{p:5,children:e.jsxs(K,{as:"form",onSubmit:z,spacing:4,children:[e.jsx(F,{as:"h1",textAlign:"center",children:"Login"}),e.jsxs(Q,{textAlign:"center",children:["Please enter your user name and password to authenticate.",e.jsx("br",{}),"Note: credentials are ",'"admin"'," / ",'"admin"']}),r&&e.jsxs(b,{status:"error",children:[e.jsx(y,{}),e.jsx(B,{children:r})]}),j&&e.jsxs(b,{status:"info",mb:5,children:[e.jsx(y,{}),e.jsxs(U,{children:["Logout successful.",e.jsx("br",{}),"You can use the form below to log in again."]})]}),e.jsxs(_,{children:[e.jsx(N,{children:"User name"}),e.jsx(L,{placeholder:"User name",value:s,onChange:d=>i(d.target.value),autoComplete:"username"})]}),e.jsxs(_,{children:[e.jsx(N,{children:"Password"}),e.jsxs(V,{children:[e.jsx(L,{pr:"4.5rem",type:h?"text":"password",placeholder:"Enter password",value:a,onChange:d=>o(d.target.value),autoComplete:"current-password"}),e.jsx(I,{width:"4.5rem",children:e.jsx(S,{h:"1.75rem",size:"sm",onClick:()=>g(!h),children:h?"Hide":"Show"})})]})]}),e.jsx(S,{type:"submit",children:"Login"})]})})}var u,c,f;class te extends G{constructor(){super();v(this,u,{kind:"pending"});v(this,c);v(this,f,!1);l(this,c,setTimeout(()=>{l(this,u,{kind:"not-authenticated"}),this.emit("changed")},500))}destroy(){clearTimeout(p(this,c)),l(this,c,void 0)}getAuthState(){return p(this,u)}getLoginBehavior(){const s=(a,o)=>{if(a==="admin"&&o==="admin")l(this,u,{kind:"authenticated",sessionInfo:{userId:"admin",userName:"Arnold Administrator"}}),l(this,f,!0),this.emit("changed");else return"Invalid user name or password!"};return{kind:"fallback",Fallback:()=>m.createElement(ee,{doLogin:s,wasLoggedIn:p(this,f)})}}logout(){(p(this,u).kind==="authenticated"||p(this,u).kind==="pending")&&(l(this,u,{kind:"not-authenticated"}),clearTimeout(p(this,c)),l(this,c,void 0),this.emit("changed"))}}u=new WeakMap,c=new WeakMap,f=new WeakMap;const ne={"auth-app":{name:"auth-app",services:{TestAuthPlugin:{name:"TestAuthPlugin",clazz:te,provides:[{name:"authentication.AuthPlugin",qualifier:void 0}],references:{}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/authentication":{name:"@open-pioneer/authentication",services:{AuthServiceImpl:{name:"AuthServiceImpl",clazz:Y,provides:[{name:"authentication.AuthService",qualifier:void 0}],references:{plugin:{name:"authentication.AuthPlugin",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}}},se="",re=[];function ie(t){throw new Error(`Unsupported locale: '${t}'`)}const ae=O(se),oe=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:ie,locales:re,packages:ne,styles:ae},Symbol.toStringTag,{value:"Module"})),ue="auth-app",le=W.bind(void 0,ue);function ce(){const t=le("authentication.AuthService"),n=$(t),s=()=>{t.logout()};return n.kind==="not-authenticated"||n.kind==="pending"?null:e.jsx(S,{colorScheme:"red",onClick:s,children:"Log out"})}function pe(){return e.jsx(J,{children:e.jsxs(P,{p:5,children:[e.jsx(F,{as:"h1",children:"Authenticated"}),"This is the actual content of the app. Authentication was successful.",e.jsx(X,{pt:5,flexDirection:"row",justifyContent:"center",children:e.jsx(ce,{})})]})})}const me=D({component:pe,appMetadata:oe});customElements.define("auth-app",me);
