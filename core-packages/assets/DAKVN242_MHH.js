var Ne=r=>{throw TypeError(r)};var Fe=(r,e,s)=>e.has(r)||Ne("Cannot "+s);var C=(r,e,s)=>(Fe(r,e,"read from private field"),s?s.call(r):e.get(r)),$=(r,e,s)=>e.has(r)?Ne("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,s),W=(r,e,s,k)=>(Fe(r,e,"write to private field"),k?k.call(r,s):e.set(r,s),s),ae=(r,e,s)=>(Fe(r,e,"access private method"),s);import{q as nt,a3 as it,G as ot,j as A,p as st,d as at,a8 as ct,_ as lt,$ as ut,a9 as ft,c as ht,a as dt,b as pt}from"./CP8MVrT81mG9.js";import{A as vt,u as mt,F as gt}from"./CIOhC7Cp81P3.js";import{H as kt}from"./DTabHU9jzDOF.js";import{N as xt,a as yt}from"./flePTK8g-Ce2.js";import{E as wt}from"./vOBnYnib6xFk.js";import{_ as He}from"./Dch09mLNbtBx.js";import{u as bt}from"./C45KNpS0yFsl.js";import{B as Ve}from"./6x-PNDsXtbVt.js";import{U as St,L as Ie}from"./C74bg2hjP-YZ.js";import{T as ce}from"./C7TYXCc56rA1.js";import{V as Ke}from"./DBlWAQNrMizC.js";import{C as _t,H as De}from"./qK5A3QF7i-vn.js";import{F as Et}from"./mcFmBe9aR2Xm.js";import"./uqmvkmFl71M2.js";import"./CkMijwItPRnA.js";var ie=nt(function(e,s){const k=it("Code",e),{className:I,...b}=ot(e);return A.jsx(st.code,{ref:s,className:at("chakra-code",e.className),...b,__css:{display:"inline-block",...k}})});ie.displayName="Code";class At{authService;constructor(e){this.authService=e.references.authService}beforeRequest({target:e,options:s}){const k=this.authService.getAuthState(),R=((k.kind=="authenticated"?k.sessionInfo:void 0)?.attributes?.keycloak).token;e.protocol==="https:"&&e.hostname==="ogc-api.nrw.de"&&R&&s.headers.set("Authorization",R)}}var Ft=Symbol.for("preact-signals");function Oe(){if(ue>1)ue--;else{for(var r,e=!1;ye!==void 0;){var s=ye;for(ye=void 0,Le++;s!==void 0;){var k=s.o;if(s.o=void 0,s.f&=-3,!(8&s.f)&&Ge(s))try{s.c()}catch(I){e||(r=I,e=!0)}s=k}}if(Le=0,ue--,e)throw r}}var T=void 0;function Je(r){var e=T;T=void 0;try{return r()}finally{T=e}}var ye=void 0,ue=0,Le=0,Ae=0;function Ye(r){if(T!==void 0){var e=r.n;if(e===void 0||e.t!==T)return e={i:0,S:r,p:T.s,n:void 0,t:T,e:void 0,x:void 0,r:e},T.s!==void 0&&(T.s.n=e),T.s=e,r.n=e,32&T.f&&r.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=T.s,e.n=void 0,T.s.n=e,T.s=e),e}}function D(r){this.v=r,this.i=0,this.n=void 0,this.t=void 0}D.prototype.brand=Ft;D.prototype.h=function(){return!0};D.prototype.S=function(r){this.t!==r&&r.e===void 0&&(r.x=this.t,this.t!==void 0&&(this.t.e=r),this.t=r)};D.prototype.U=function(r){if(this.t!==void 0){var e=r.e,s=r.x;e!==void 0&&(e.x=s,r.e=void 0),s!==void 0&&(s.e=e,r.x=void 0),r===this.t&&(this.t=s)}};D.prototype.subscribe=function(r){var e=this;return Qe(function(){var s=e.value,k=T;T=void 0;try{r(s)}finally{T=k}})};D.prototype.valueOf=function(){return this.value};D.prototype.toString=function(){return this.value+""};D.prototype.toJSON=function(){return this.value};D.prototype.peek=function(){var r=T;T=void 0;try{return this.value}finally{T=r}};Object.defineProperty(D.prototype,"value",{get:function(){var r=Ye(this);return r!==void 0&&(r.i=this.i),this.v},set:function(r){if(r!==this.v){if(Le>100)throw new Error("Cycle detected");this.v=r,this.i++,Ae++,ue++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{Oe()}}}});function It(r){return new D(r)}function Ge(r){for(var e=r.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function $e(r){for(var e=r.s;e!==void 0;e=e.n){var s=e.S.n;if(s!==void 0&&(e.r=s),e.S.n=e,e.i=-1,e.n===void 0){r.s=e;break}}}function We(r){for(var e=r.s,s=void 0;e!==void 0;){var k=e.p;e.i===-1?(e.S.U(e),k!==void 0&&(k.n=e.n),e.n!==void 0&&(e.n.p=k)):s=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=k}r.s=s}function me(r){D.call(this,void 0),this.x=r,this.s=void 0,this.g=Ae-1,this.f=4}(me.prototype=new D).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Ae))return!0;if(this.g=Ae,this.f|=1,this.i>0&&!Ge(this))return this.f&=-2,!0;var r=T;try{$e(this),T=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(s){this.v=s,this.f|=16,this.i++}return T=r,We(this),this.f&=-2,!0};me.prototype.S=function(r){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}D.prototype.S.call(this,r)};me.prototype.U=function(r){if(this.t!==void 0&&(D.prototype.U.call(this,r),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};me.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var r=this.t;r!==void 0;r=r.x)r.t.N()}};Object.defineProperty(me.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var r=Ye(this);if(this.h(),r!==void 0&&(r.i=this.i),16&this.f)throw this.v;return this.v}});function Ut(r){return new me(r)}function Xe(r){var e=r.u;if(r.u=void 0,typeof e=="function"){ue++;var s=T;T=void 0;try{e()}catch(k){throw r.f&=-2,r.f|=8,Pe(r),k}finally{T=s,Oe()}}}function Pe(r){for(var e=r.s;e!==void 0;e=e.n)e.S.U(e);r.x=void 0,r.s=void 0,Xe(r)}function Tt(r){if(T!==this)throw new Error("Out-of-order effect");We(this),T=r,this.f&=-2,8&this.f&&Pe(this),Oe()}function be(r){this.x=r,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}be.prototype.c=function(){var r=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{r()}};be.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Xe(this),$e(this),ue++;var r=T;return T=this,Tt.bind(this,r)};be.prototype.N=function(){2&this.f||(this.f|=2,this.o=ye,ye=this)};be.prototype.d=function(){this.f|=8,1&this.f||Pe(this)};function Qe(r){var e=new be(r);try{e.c()}catch(s){throw e.d(),s}return e.d.bind(e)}function Ct(r,e){return new Rt(r,e?.equal)}function je(r){return Je(r)}var le=Symbol("signal"),Ue=Symbol("equals"),Lt=class{[le];constructor(r){this[le]=r}get value(){return this[le].value}set value(r){throw new Error("Cannot update a readonly reactive object.")}trigger(){throw new Error("Cannot trigger this reactive object.")}peek(){return this[le].peek()}toJSON(){return this.value}toString(){return`Reactive[value=${Ot(this[le].value)}]`}},Rt=class extends Lt{[Ue];constructor(r,e){super(It(r)),this[Ue]=e}get value(){return super.value}set value(r){Je(()=>this[Ue]?.(this.value,r))||(this[le].value=r)}};function Ot(r){return typeof r=="string"?JSON.stringify(r):String(r)}function Pt(r,e){return r===e?!0:r.length===e.length&&r.every((s,k)=>s===e[k])}function jt(r,e,s,k){const I=Ut(e),b=!1;let R,j;function v(){const q=j;j=void 0;try{q?.()}catch(X){throw M.destroy(),X}}const J=r(()=>{const q=I.value;je(()=>{const X=!R&&b||R&&!Pt(R,q);R=q,X&&(v(),j=s(q))})}),M={destroy(){try{v()}finally{J.destroy()}}};return M}function Mt(r){return{destroy:Qe(r)}}function Nt(r,e){let s=0,k=!0,I;return I=Mt(()=>{const b=s++;if(b===0)return r();b===1&&je(()=>{try{e()}finally{k?Promise.resolve().then(()=>I?.destroy()):I?.destroy()}})}),k=!1,I}function Ze(r){Promise.reject(new Error("Error in effect or watch callback",{cause:r}))}var Ht=class{queue=[];channel=new MessageChannel;constructor(){this.channel.port2.start()}enqueue(r){const e={fn:r,destroyed:!1};return this.queue.push(e),this.queue.length===1&&this.scheduleIteration(),{destroy(){e.destroyed||(e.destroyed=!0)}}}messageHandler=()=>this.runIteration();scheduleIteration(){const r=this.channel;r.port2.addEventListener("message",this.messageHandler),r.port1.postMessage("")}runIteration(){this.channel.port2.removeEventListener("message",this.messageHandler);const r=this.queue;this.queue=[];for(const e of r)if(!e.destroyed)try{e.fn()}catch(s){Ze(s)}}};function Kt(r){const e=new Dt(r);return{destroy:e.destroy.bind(e)}}var Dt=class{callback;cleanup;effectHandle;scheduledExecution;isDestroyed=!1;initialExecution=!0;isExecuting=!1;constructor(r){this.callback=r,this.execute(),this.initialExecution=!1}destroy(){if(!this.isDestroyed){this.isDestroyed=!0;try{this.triggerCleanup()}finally{this.effectHandle?.destroy(),this.effectHandle=void 0,this.scheduledExecution?.destroy(),this.scheduledExecution=void 0}}}execute(){this.isExecuting=!0;try{const r=Nt(()=>{if(this.initialExecution)this.triggerCallback();else try{this.triggerCallback()}catch(e){Ze(e)}},()=>this.scheduleExecution());this.isDestroyed?r.destroy():this.effectHandle=r}finally{this.isExecuting=!1}}triggerCallback(){this.triggerCleanup(),this.isDestroyed||(this.cleanup=this.callback())}triggerCleanup(){const r=this.cleanup;this.cleanup=void 0;try{r&&je(r)}catch(e){throw this.destroy(),e}}scheduleExecution(){if(!this.isDestroyed){if(this.effectHandle?.destroy(),this.effectHandle=void 0,this.isExecuting)throw new Error("Cycle detected");this.scheduledExecution||(this.scheduledExecution=zt(()=>{try{this.execute()}finally{this.scheduledExecution=void 0}}))}}};function Bt(r,e,s){return jt(Kt,r,e)}var qt=new Ht;function zt(r){return qt.enqueue(r)}var et={exports:{}};const Vt={},Jt=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"})),Be=ct(Jt);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2024
 * @license MIT
 */(function(r){(function(){var e="input is invalid type",s=typeof window=="object",k=s?window:{};k.JS_SHA256_NO_WINDOW&&(s=!1);var I=!s&&typeof self=="object",b=!k.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;b?k=lt:I&&(k=self);var R=!k.JS_SHA256_NO_COMMON_JS&&!0&&r.exports,j=!k.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",v="0123456789abcdef".split(""),J=[-2147483648,8388608,32768,128],M=[24,16,8,0],q=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],X=["hex","array","digest","arrayBuffer"],O=[];(k.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"}),j&&(k.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(i){return typeof i=="object"&&i.buffer&&i.buffer.constructor===ArrayBuffer});var Se=function(i,d){return function(w){return new P(d,!0).update(w)[i]()}},_e=function(i){var d=Se("hex",i);b&&(d=Y(d,i)),d.create=function(){return new P(i)},d.update=function(g){return d.create().update(g)};for(var w=0;w<X.length;++w){var p=X[w];d[p]=Se(p,i)}return d},Y=function(i,d){var w=Be,p=Be.Buffer,g=d?"sha224":"sha256",h;p.from&&!k.JS_SHA256_NO_BUFFER_FROM?h=p.from:h=function(l){return new p(l)};var E=function(l){if(typeof l=="string")return w.createHash(g).update(l,"utf8").digest("hex");if(l==null)throw new Error(e);return l.constructor===ArrayBuffer&&(l=new Uint8Array(l)),Array.isArray(l)||ArrayBuffer.isView(l)||l.constructor===p?w.createHash(g).update(h(l)).digest("hex"):i(l)};return E},Ee=function(i,d){return function(w,p){return new ne(w,d,!0).update(p)[i]()}},Q=function(i){var d=Ee("hex",i);d.create=function(g){return new ne(g,i)},d.update=function(g,h){return d.create(g).update(h)};for(var w=0;w<X.length;++w){var p=X[w];d[p]=Ee(p,i)}return d};function P(i,d){d?(O[0]=O[16]=O[1]=O[2]=O[3]=O[4]=O[5]=O[6]=O[7]=O[8]=O[9]=O[10]=O[11]=O[12]=O[13]=O[14]=O[15]=0,this.blocks=O):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=i}P.prototype.update=function(i){if(!this.finalized){var d,w=typeof i;if(w!=="string"){if(w==="object"){if(i===null)throw new Error(e);if(j&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!Array.isArray(i)&&(!j||!ArrayBuffer.isView(i)))throw new Error(e)}else throw new Error(e);d=!0}for(var p,g=0,h,E=i.length,l=this.blocks;g<E;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),d)for(h=this.start;g<E&&h<64;++g)l[h>>>2]|=i[g]<<M[h++&3];else for(h=this.start;g<E&&h<64;++g)p=i.charCodeAt(g),p<128?l[h>>>2]|=p<<M[h++&3]:p<2048?(l[h>>>2]|=(192|p>>>6)<<M[h++&3],l[h>>>2]|=(128|p&63)<<M[h++&3]):p<55296||p>=57344?(l[h>>>2]|=(224|p>>>12)<<M[h++&3],l[h>>>2]|=(128|p>>>6&63)<<M[h++&3],l[h>>>2]|=(128|p&63)<<M[h++&3]):(p=65536+((p&1023)<<10|i.charCodeAt(++g)&1023),l[h>>>2]|=(240|p>>>18)<<M[h++&3],l[h>>>2]|=(128|p>>>12&63)<<M[h++&3],l[h>>>2]|=(128|p>>>6&63)<<M[h++&3],l[h>>>2]|=(128|p&63)<<M[h++&3]);this.lastByteIndex=h,this.bytes+=h-this.start,h>=64?(this.block=l[16],this.start=h-64,this.hash(),this.hashed=!0):this.start=h}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},P.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var i=this.blocks,d=this.lastByteIndex;i[16]=this.block,i[d>>>2]|=J[d&3],this.block=i[16],d>=56&&(this.hashed||this.hash(),i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),i[14]=this.hBytes<<3|this.bytes>>>29,i[15]=this.bytes<<3,this.hash()}},P.prototype.hash=function(){var i=this.h0,d=this.h1,w=this.h2,p=this.h3,g=this.h4,h=this.h5,E=this.h6,l=this.h7,_=this.blocks,L,N,H,z,F,G,t,n,a,f,o;for(L=16;L<64;++L)F=_[L-15],N=(F>>>7|F<<25)^(F>>>18|F<<14)^F>>>3,F=_[L-2],H=(F>>>17|F<<15)^(F>>>19|F<<13)^F>>>10,_[L]=_[L-16]+N+_[L-7]+H<<0;for(o=d&w,L=0;L<64;L+=4)this.first?(this.is224?(n=300032,F=_[0]-1413257819,l=F-150054599<<0,p=F+24177077<<0):(n=704751109,F=_[0]-210244248,l=F-1521486534<<0,p=F+143694565<<0),this.first=!1):(N=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),H=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),n=i&d,z=n^i&w^o,t=g&h^~g&E,F=l+H+t+q[L]+_[L],G=N+z,l=p+F<<0,p=F+G<<0),N=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),H=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),a=p&i,z=a^p&d^n,t=l&g^~l&h,F=E+H+t+q[L+1]+_[L+1],G=N+z,E=w+F<<0,w=F+G<<0,N=(w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10),H=(E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7),f=w&p,z=f^w&i^a,t=E&l^~E&g,F=h+H+t+q[L+2]+_[L+2],G=N+z,h=d+F<<0,d=F+G<<0,N=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),H=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),o=d&w,z=o^d&p^f,t=h&E^~h&l,F=g+H+t+q[L+3]+_[L+3],G=N+z,g=i+F<<0,i=F+G<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+i<<0,this.h1=this.h1+d<<0,this.h2=this.h2+w<<0,this.h3=this.h3+p<<0,this.h4=this.h4+g<<0,this.h5=this.h5+h<<0,this.h6=this.h6+E<<0,this.h7=this.h7+l<<0},P.prototype.hex=function(){this.finalize();var i=this.h0,d=this.h1,w=this.h2,p=this.h3,g=this.h4,h=this.h5,E=this.h6,l=this.h7,_=v[i>>>28&15]+v[i>>>24&15]+v[i>>>20&15]+v[i>>>16&15]+v[i>>>12&15]+v[i>>>8&15]+v[i>>>4&15]+v[i&15]+v[d>>>28&15]+v[d>>>24&15]+v[d>>>20&15]+v[d>>>16&15]+v[d>>>12&15]+v[d>>>8&15]+v[d>>>4&15]+v[d&15]+v[w>>>28&15]+v[w>>>24&15]+v[w>>>20&15]+v[w>>>16&15]+v[w>>>12&15]+v[w>>>8&15]+v[w>>>4&15]+v[w&15]+v[p>>>28&15]+v[p>>>24&15]+v[p>>>20&15]+v[p>>>16&15]+v[p>>>12&15]+v[p>>>8&15]+v[p>>>4&15]+v[p&15]+v[g>>>28&15]+v[g>>>24&15]+v[g>>>20&15]+v[g>>>16&15]+v[g>>>12&15]+v[g>>>8&15]+v[g>>>4&15]+v[g&15]+v[h>>>28&15]+v[h>>>24&15]+v[h>>>20&15]+v[h>>>16&15]+v[h>>>12&15]+v[h>>>8&15]+v[h>>>4&15]+v[h&15]+v[E>>>28&15]+v[E>>>24&15]+v[E>>>20&15]+v[E>>>16&15]+v[E>>>12&15]+v[E>>>8&15]+v[E>>>4&15]+v[E&15];return this.is224||(_+=v[l>>>28&15]+v[l>>>24&15]+v[l>>>20&15]+v[l>>>16&15]+v[l>>>12&15]+v[l>>>8&15]+v[l>>>4&15]+v[l&15]),_},P.prototype.toString=P.prototype.hex,P.prototype.digest=function(){this.finalize();var i=this.h0,d=this.h1,w=this.h2,p=this.h3,g=this.h4,h=this.h5,E=this.h6,l=this.h7,_=[i>>>24&255,i>>>16&255,i>>>8&255,i&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,w>>>24&255,w>>>16&255,w>>>8&255,w&255,p>>>24&255,p>>>16&255,p>>>8&255,p&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,E>>>24&255,E>>>16&255,E>>>8&255,E&255];return this.is224||_.push(l>>>24&255,l>>>16&255,l>>>8&255,l&255),_},P.prototype.array=P.prototype.digest,P.prototype.arrayBuffer=function(){this.finalize();var i=new ArrayBuffer(this.is224?28:32),d=new DataView(i);return d.setUint32(0,this.h0),d.setUint32(4,this.h1),d.setUint32(8,this.h2),d.setUint32(12,this.h3),d.setUint32(16,this.h4),d.setUint32(20,this.h5),d.setUint32(24,this.h6),this.is224||d.setUint32(28,this.h7),i};function ne(i,d,w){var p,g=typeof i;if(g==="string"){var h=[],E=i.length,l=0,_;for(p=0;p<E;++p)_=i.charCodeAt(p),_<128?h[l++]=_:_<2048?(h[l++]=192|_>>>6,h[l++]=128|_&63):_<55296||_>=57344?(h[l++]=224|_>>>12,h[l++]=128|_>>>6&63,h[l++]=128|_&63):(_=65536+((_&1023)<<10|i.charCodeAt(++p)&1023),h[l++]=240|_>>>18,h[l++]=128|_>>>12&63,h[l++]=128|_>>>6&63,h[l++]=128|_&63);i=h}else if(g==="object"){if(i===null)throw new Error(e);if(j&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!Array.isArray(i)&&(!j||!ArrayBuffer.isView(i)))throw new Error(e)}else throw new Error(e);i.length>64&&(i=new P(d,!0).update(i).array());var L=[],N=[];for(p=0;p<64;++p){var H=i[p]||0;L[p]=92^H,N[p]=54^H}P.call(this,d,w),this.update(N),this.oKeyPad=L,this.inner=!0,this.sharedMemory=w}ne.prototype=new P,ne.prototype.finalize=function(){if(P.prototype.finalize.call(this),this.inner){this.inner=!1;var i=this.array();P.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(i),P.prototype.finalize.call(this)}};var B=_e();B.sha256=B,B.sha224=_e(!0),B.sha256.hmac=Q(),B.sha224.hmac=Q(!0),R?r.exports=B:(k.sha256=B.sha256,k.sha224=B.sha224)})()})(et);var Yt=et.exports;const Gt=ut(Yt);class ke extends Error{}ke.prototype.name="InvalidTokenError";function $t(r){return decodeURIComponent(atob(r).replace(/(.)/g,(e,s)=>{let k=s.charCodeAt(0).toString(16).toUpperCase();return k.length<2&&(k="0"+k),"%"+k}))}function Wt(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return $t(e)}catch{return atob(e)}}function Te(r,e){if(typeof r!="string")throw new ke("Invalid token specified: must be a string");e||(e={});const s=e.header===!0?0:1,k=r.split(".")[s];if(typeof k!="string")throw new ke(`Invalid token specified: missing part #${s+1}`);let I;try{I=Wt(k)}catch(b){throw new ke(`Invalid token specified: invalid base64 for part #${s+1} (${b.message})`)}try{return JSON.parse(I)}catch(b){throw new ke(`Invalid token specified: invalid json for part #${s+1} (${b.message})`)}}if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function tt(r){if(!(this instanceof tt))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,s,k=[],I,b={enable:!0,callbackList:[],interval:5},R=document.getElementsByTagName("script"),j=0;j<R.length;j++)(R[j].src.indexOf("keycloak.js")!==-1||R[j].src.indexOf("keycloak.min.js")!==-1)&&R[j].src.indexOf("version=")!==-1&&(e.iframeVersion=R[j].src.substring(R[j].src.indexOf("version=")+8).split("&")[0]);var v=!0,J=G(console.info),M=G(console.warn);e.init=function(t){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,I=F();var n=["default","cordova","cordova-native"];if(t&&n.indexOf(t.adapter)>-1?s=N(t.adapter):t&&typeof t.adapter=="object"?s=t.adapter:window.Cordova||window.cordova?s=N("cordova"):s=N(),t){if(typeof t.useNonce<"u"&&(v=t.useNonce),typeof t.checkLoginIframe<"u"&&(b.enable=t.checkLoginIframe),t.checkLoginIframeInterval&&(b.interval=t.checkLoginIframeInterval),t.onLoad==="login-required"&&(e.loginRequired=!0),t.responseMode)if(t.responseMode==="query"||t.responseMode==="fragment")e.responseMode=t.responseMode;else throw"Invalid value for responseMode";if(t.flow){switch(t.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=t.flow}if(t.timeSkew!=null&&(e.timeSkew=t.timeSkew),t.redirectUri&&(e.redirectUri=t.redirectUri),t.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=t.silentCheckSsoRedirectUri),typeof t.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=t.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,typeof t.pkceMethod<"u"){if(t.pkceMethod!=="S256"&&t.pkceMethod!==!1)throw new TypeError(`Invalid value for pkceMethod', expected 'S256' or false but got ${t.pkceMethod}.`);e.pkceMethod=t.pkceMethod}else e.pkceMethod="S256";typeof t.enableLogging=="boolean"?e.enableLogging=t.enableLogging:e.enableLogging=!1,t.logoutMethod==="POST"?e.logoutMethod="POST":e.logoutMethod="GET",typeof t.scope=="string"&&(e.scope=t.scope),typeof t.acrValues=="string"&&(e.acrValues=t.acrValues),typeof t.messageReceiveTimeout=="number"&&t.messageReceiveTimeout>0?e.messageReceiveTimeout=t.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var a=g(),f=g();f.promise.then(function(){e.onReady&&e.onReady(e.authenticated),a.setSuccess(e.authenticated)}).catch(function(y){a.setError(y)});var o=P();function m(){var y=function(U){U||(S.prompt="none"),t&&t.locale&&(S.locale=t.locale),e.login(S).then(function(){f.setSuccess()}).catch(function(Z){f.setError(Z)})},x=function(){var U=document.createElement("iframe"),Z=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});U.setAttribute("src",Z),U.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),U.setAttribute("title","keycloak-silent-check-sso"),U.style.display="none",document.body.appendChild(U);var re=function(V){if(!(V.origin!==window.location.origin||U.contentWindow!==V.source)){var ge=d(V.data);Q(ge,f),document.body.removeChild(U),window.removeEventListener("message",re)}};window.addEventListener("message",re)},S={};switch(t.onLoad){case"check-sso":b.enable?E().then(function(){_().then(function(U){U?f.setSuccess():e.silentCheckSsoRedirectUri?x():y(!1)}).catch(function(U){f.setError(U)})}):e.silentCheckSsoRedirectUri?x():y(!1);break;case"login-required":y(!0);break;default:throw"Invalid value for onLoad"}}function c(){var y=d(window.location.href);if(y&&window.history.replaceState(window.history.state,null,y.newUrl),y&&y.valid)return E().then(function(){Q(y,f)}).catch(function(x){f.setError(x)});t?t.token&&t.refreshToken?(B(t.token,t.refreshToken,t.idToken),b.enable?E().then(function(){_().then(function(x){x?(e.onAuthSuccess&&e.onAuthSuccess(),f.setSuccess(),l()):f.setSuccess()}).catch(function(x){f.setError(x)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),f.setSuccess()}).catch(function(x){e.onAuthError&&e.onAuthError(),t.onLoad?m():f.setError(x)})):t.onLoad?m():f.setSuccess():f.setSuccess()}function u(){var y=g(),x=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",x),y.setSuccess())};return document.addEventListener("readystatechange",x),x(),y.promise}return o.then(function(){u().then(L).then(c).catch(function(y){a.setError(y)})}),o.catch(function(y){a.setError(y)}),a.promise},e.login=function(t){return s.login(t)};function q(t){var n=null,a=window.crypto||window.msCrypto;if(a&&a.getRandomValues&&window.Uint8Array)return n=new Uint8Array(t),a.getRandomValues(n),n;n=new Array(t);for(var f=0;f<n.length;f++)n[f]=Math.floor(256*Math.random());return n}function X(t){return O(t,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function O(t,n){for(var a=q(t),f=new Array(t),o=0;o<t;o++)f[o]=n.charCodeAt(a[o]%n.length);return String.fromCharCode.apply(null,f)}function Se(t,n){if(t!=="S256")throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${t}'.`);const a=new Uint8Array(Gt.arrayBuffer(n));return Xt(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function _e(t){var n={id_token:{acr:t}};return JSON.stringify(n)}e.createLoginUrl=function(t){var n=i(),a=i(),f=s.redirectUri(t),o={state:n,nonce:a,redirectUri:encodeURIComponent(f),loginOptions:t};t&&t.prompt&&(o.prompt=t.prompt);var m;t&&t.action=="register"?m=e.endpoints.register():m=e.endpoints.authorize();var c=t&&t.scope||e.scope;c?c.indexOf("openid")===-1&&(c="openid "+c):c="openid";var u=m+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(f)+"&state="+encodeURIComponent(n)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(c);if(v&&(u=u+"&nonce="+encodeURIComponent(a)),t&&t.prompt&&(u+="&prompt="+encodeURIComponent(t.prompt)),t&&t.maxAge&&(u+="&max_age="+encodeURIComponent(t.maxAge)),t&&t.loginHint&&(u+="&login_hint="+encodeURIComponent(t.loginHint)),t&&t.idpHint&&(u+="&kc_idp_hint="+encodeURIComponent(t.idpHint)),t&&t.action&&t.action!="register"&&(u+="&kc_action="+encodeURIComponent(t.action)),t&&t.locale&&(u+="&ui_locales="+encodeURIComponent(t.locale)),t&&t.acr){var y=_e(t.acr);u+="&claims="+encodeURIComponent(y)}if((t&&t.acrValues||e.acrValues)&&(u+="&acr_values="+encodeURIComponent(t.acrValues||e.acrValues)),e.pkceMethod){var x=X(96);o.pkceCodeVerifier=x;var S=Se(e.pkceMethod,x);u+="&code_challenge="+S,u+="&code_challenge_method="+e.pkceMethod}return I.add(o),u},e.logout=function(t){return s.logout(t)},e.createLogoutUrl=function(t){if((t?.logoutMethod??e.logoutMethod)==="POST")return e.endpoints.logout();var a=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(s.redirectUri(t,!1));return e.idToken&&(a+="&id_token_hint="+encodeURIComponent(e.idToken)),a},e.register=function(t){return s.register(t)},e.createRegisterUrl=function(t){return t||(t={}),t.action="register",e.createLoginUrl(t)},e.createAccountUrl=function(t){var n=Y(),a=void 0;return typeof n<"u"&&(a=n+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(s.redirectUri(t))),a},e.accountManagement=function(){return s.accountManagement()},e.hasRealmRole=function(t){var n=e.realmAccess;return!!n&&n.roles.indexOf(t)>=0},e.hasResourceRole=function(t,n){if(!e.resourceAccess)return!1;var a=e.resourceAccess[n||e.clientId];return!!a&&a.roles.indexOf(t)>=0},e.loadUserProfile=function(){var t=Y()+"/account",n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Authorization","bearer "+e.token);var a=g();return n.onreadystatechange=function(){n.readyState==4&&(n.status==200?(e.profile=JSON.parse(n.responseText),a.setSuccess(e.profile)):a.setError())},n.send(),a.promise},e.loadUserInfo=function(){var t=e.endpoints.userinfo(),n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Authorization","bearer "+e.token);var a=g();return n.onreadystatechange=function(){n.readyState==4&&(n.status==200?(e.userInfo=JSON.parse(n.responseText),a.setSuccess(e.userInfo)):a.setError())},n.send(),a.promise},e.isTokenExpired=function(t){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return J("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var n=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(t){if(isNaN(t))throw"Invalid minValidity";n-=t}return n<0},e.updateToken=function(t){var n=g();if(!e.refreshToken)return n.setError(),n.promise;t=t||5;var a=function(){var o=!1;if(t==-1?(o=!0,J("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(t))&&(o=!0,J("[KEYCLOAK] Refreshing token: token expired")),!o)n.setSuccess(!1);else{var m="grant_type=refresh_token&refresh_token="+e.refreshToken,c=e.endpoints.token();if(k.push(n),k.length==1){var u=new XMLHttpRequest;u.open("POST",c,!0),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.withCredentials=!0,m+="&client_id="+encodeURIComponent(e.clientId);var y=new Date().getTime();u.onreadystatechange=function(){if(u.readyState==4)if(u.status==200){J("[KEYCLOAK] Token refreshed"),y=(y+new Date().getTime())/2;var x=JSON.parse(u.responseText);B(x.access_token,x.refresh_token,x.id_token,y),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var S=k.pop();S!=null;S=k.pop())S.setSuccess(!0)}else{M("[KEYCLOAK] Failed to refresh token"),u.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var S=k.pop();S!=null;S=k.pop())S.setError(!0)}},u.send(m)}}};if(b.enable){var f=_();f.then(function(){a()}).catch(function(o){n.setError(o)})}else a();return n.promise},e.clearToken=function(){e.token&&(B(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function Y(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function Ee(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function Q(t,n){var a=t.code,f=t.error,o=t.prompt,m=new Date().getTime();if(t.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(t.kc_action_status),f){if(o!="none")if(t.error_description&&t.error_description==="authentication_expired")e.login(t.loginOptions);else{var c={error:f,error_description:t.error_description};e.onAuthError&&e.onAuthError(c),n&&n.setError(c)}else n&&n.setSuccess();return}else e.flow!="standard"&&(t.access_token||t.id_token)&&S(t.access_token,null,t.id_token,!0);if(e.flow!="implicit"&&a){var u="code="+a+"&grant_type=authorization_code",y=e.endpoints.token(),x=new XMLHttpRequest;x.open("POST",y,!0),x.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u+="&client_id="+encodeURIComponent(e.clientId),u+="&redirect_uri="+t.redirectUri,t.pkceCodeVerifier&&(u+="&code_verifier="+t.pkceCodeVerifier),x.withCredentials=!0,x.onreadystatechange=function(){if(x.readyState==4)if(x.status==200){var U=JSON.parse(x.responseText);S(U.access_token,U.refresh_token,U.id_token,e.flow==="standard"),l()}else e.onAuthError&&e.onAuthError(),n&&n.setError()},x.send(u)}function S(U,Z,re,V){m=(m+new Date().getTime())/2,B(U,Z,re,m),v&&e.idTokenParsed&&e.idTokenParsed.nonce!=t.storedNonce?(J("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),n&&n.setError()):V&&(e.onAuthSuccess&&e.onAuthSuccess(),n&&n.setSuccess())}}function P(t){var n=g(),a;r?typeof r=="string"&&(a=r):a="keycloak.json";function f(x){x?e.endpoints={authorize:function(){return x.authorization_endpoint},token:function(){return x.token_endpoint},logout:function(){if(!x.end_session_endpoint)throw"Not supported by the OIDC server";return x.end_session_endpoint},checkSessionIframe:function(){if(!x.check_session_iframe)throw"Not supported by the OIDC server";return x.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!x.userinfo_endpoint)throw"Not supported by the OIDC server";return x.userinfo_endpoint}}:e.endpoints={authorize:function(){return Y()+"/protocol/openid-connect/auth"},token:function(){return Y()+"/protocol/openid-connect/token"},logout:function(){return Y()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var S=Y()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},thirdPartyCookiesIframe:function(){var S=Y()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},register:function(){return Y()+"/protocol/openid-connect/registrations"},userinfo:function(){return Y()+"/protocol/openid-connect/userinfo"}}}if(a){var o=new XMLHttpRequest;o.open("GET",a,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200||ne(o)){var x=JSON.parse(o.responseText);e.authServerUrl=x["auth-server-url"],e.realm=x.realm,e.clientId=x.resource,f(null),n.setSuccess()}else n.setError()},o.send()}else{if(!r.clientId)throw"clientId missing";e.clientId=r.clientId;var m=r.oidcProvider;if(m)if(typeof m=="string"){var y;m.charAt(m.length-1)=="/"?y=m+".well-known/openid-configuration":y=m+"/.well-known/openid-configuration";var o=new XMLHttpRequest;o.open("GET",y,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200||ne(o)){var S=JSON.parse(o.responseText);f(S),n.setSuccess()}else n.setError()},o.send()}else f(m),n.setSuccess();else{if(!r.url){for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++)if(c[u].src.match(/.*keycloak\.js/)){r.url=c[u].src.substr(0,c[u].src.indexOf("/js/keycloak.js"));break}}if(!r.realm)throw"realm missing";e.authServerUrl=r.url,e.realm=r.realm,f(null),n.setSuccess()}}return n.promise}function ne(t){return t.status==0&&t.responseText&&t.responseURL.startsWith("file:")}function B(t,n,a,f){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),n?(e.refreshToken=n,e.refreshTokenParsed=Te(n)):(delete e.refreshToken,delete e.refreshTokenParsed),a?(e.idToken=a,e.idTokenParsed=Te(a)):(delete e.idToken,delete e.idTokenParsed),t){if(e.token=t,e.tokenParsed=Te(t),e.sessionId=e.tokenParsed.sid,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,f&&(e.timeSkew=Math.floor(f/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(J("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var o=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;J("[KEYCLOAK] Token expires in "+Math.round(o/1e3)+" s"),o<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,o)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function i(){var t="0123456789abcdef",n=O(36,t).split("");n[14]="4",n[19]=t.substr(n[19]&3|8,1),n[8]=n[13]=n[18]=n[23]="-";var a=n.join("");return a}function d(t){var n=w(t);if(n){var a=I.get(n.state);return a&&(n.valid=!0,n.redirectUri=a.redirectUri,n.storedNonce=a.nonce,n.prompt=a.prompt,n.pkceCodeVerifier=a.pkceCodeVerifier,n.loginOptions=a.loginOptions),n}}function w(t){var n;switch(e.flow){case"standard":n=["code","state","session_state","kc_action_status","iss"];break;case"implicit":n=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":n=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break}n.push("error"),n.push("error_description"),n.push("error_uri");var a=t.indexOf("?"),f=t.indexOf("#"),o,m;if(e.responseMode==="query"&&a!==-1?(o=t.substring(0,a),m=p(t.substring(a+1,f!==-1?f:t.length),n),m.paramsString!==""&&(o+="?"+m.paramsString),f!==-1&&(o+=t.substring(f))):e.responseMode==="fragment"&&f!==-1&&(o=t.substring(0,f),m=p(t.substring(f+1),n),m.paramsString!==""&&(o+="#"+m.paramsString)),m&&m.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((m.oauthParams.code||m.oauthParams.error)&&m.oauthParams.state)return m.oauthParams.newUrl=o,m.oauthParams}else if(e.flow==="implicit"&&(m.oauthParams.access_token||m.oauthParams.error)&&m.oauthParams.state)return m.oauthParams.newUrl=o,m.oauthParams}}function p(t,n){for(var a=t.split("&"),f={paramsString:"",oauthParams:{}},o=0;o<a.length;o++){var m=a[o].indexOf("="),c=a[o].slice(0,m);n.indexOf(c)!==-1?f.oauthParams[c]=a[o].slice(m+1):(f.paramsString!==""&&(f.paramsString+="&"),f.paramsString+=a[o])}return f}function g(){var t={setSuccess:function(n){t.resolve(n)},setError:function(n){t.reject(n)}};return t.promise=new Promise(function(n,a){t.resolve=n,t.reject=a}),t}function h(t,n,a){var f=null,o=new Promise(function(m,c){f=setTimeout(function(){c({error:a})},n)});return Promise.race([t,o]).finally(function(){clearTimeout(f)})}function E(){var t=g();if(!b.enable||b.iframe)return t.setSuccess(),t.promise;var n=document.createElement("iframe");b.iframe=n,n.onload=function(){var o=e.endpoints.authorize();o.charAt(0)==="/"?b.iframeOrigin=Ee():b.iframeOrigin=o.substring(0,o.indexOf("/",8)),t.setSuccess()};var a=e.endpoints.checkSessionIframe();n.setAttribute("src",a),n.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),n.setAttribute("title","keycloak-session-iframe"),n.style.display="none",document.body.appendChild(n);var f=function(o){if(!(o.origin!==b.iframeOrigin||b.iframe.contentWindow!==o.source)&&(o.data=="unchanged"||o.data=="changed"||o.data=="error")){o.data!="unchanged"&&e.clearToken();for(var m=b.callbackList.splice(0,b.callbackList.length),c=m.length-1;c>=0;--c){var u=m[c];o.data=="error"?u.setError():u.setSuccess(o.data=="unchanged")}}};return window.addEventListener("message",f,!1),t.promise}function l(){b.enable&&e.token&&setTimeout(function(){_().then(function(t){t&&l()})},b.interval*1e3)}function _(){var t=g();if(b.iframe&&b.iframeOrigin){var n=e.clientId+" "+(e.sessionId?e.sessionId:"");b.callbackList.push(t);var a=b.iframeOrigin;b.callbackList.length==1&&b.iframe.contentWindow.postMessage(n,a)}else t.setSuccess();return t.promise}function L(){var t=g();if(b.enable||e.silentCheckSsoRedirectUri){var n=document.createElement("iframe");n.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),n.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),n.setAttribute("title","keycloak-3p-check-iframe"),n.style.display="none",document.body.appendChild(n);var a=function(f){n.contentWindow===f.source&&(f.data!=="supported"&&f.data!=="unsupported"||(f.data==="unsupported"&&(M(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),b.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(n),window.removeEventListener("message",a),t.setSuccess()))};window.addEventListener("message",a,!1)}else t.setSuccess();return h(t.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function N(t){if(!t||t=="default")return{login:function(c){return window.location.assign(e.createLoginUrl(c)),g().promise},logout:async function(c){if((c?.logoutMethod??e.logoutMethod)==="GET"){window.location.replace(e.createLogoutUrl(c));return}const y=e.createLogoutUrl(c),x=await fetch(y,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id_token_hint:e.idToken,client_id:e.clientId,post_logout_redirect_uri:s.redirectUri(c,!1)})});if(x.redirected){window.location.href=x.url;return}if(x.ok){window.location.reload();return}throw new Error("Logout failed, request returned an error code.")},register:function(c){return window.location.assign(e.createRegisterUrl(c)),g().promise},accountManagement:function(){var c=e.createAccountUrl();if(typeof c<"u")window.location.href=c;else throw"Not supported by the OIDC server";return g().promise},redirectUri:function(c,u){return c&&c.redirectUri?c.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(t=="cordova"){b.enable=!1;var n=function(c,u,y){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(c,u,y):window.open(c,u,y)},a=function(c){return c&&c.cordovaOptions?Object.keys(c.cordovaOptions).reduce(function(u,y){return u[y]=c.cordovaOptions[y],u},{}):{}},f=function(c){return Object.keys(c).reduce(function(u,y){return u.push(y+"="+c[y]),u},[]).join(",")},o=function(c){var u=a(c);return u.location="no",c&&c.prompt=="none"&&(u.hidden="yes"),f(u)},m=function(){return e.redirectUri||"http://localhost"};return{login:function(c){var u=g(),y=o(c),x=e.createLoginUrl(c),S=n(x,"_blank",y),U=!1,Z=!1,re=function(){Z=!0,S.close()};return S.addEventListener("loadstart",function(V){if(V.url.indexOf(m())==0){var ge=d(V.url);Q(ge,u),re(),U=!0}}),S.addEventListener("loaderror",function(V){if(!U)if(V.url.indexOf(m())==0){var ge=d(V.url);Q(ge,u),re(),U=!0}else u.setError(),re()}),S.addEventListener("exit",function(V){Z||u.setError({reason:"closed_by_user"})}),u.promise},logout:function(c){var u=g(),y=e.createLogoutUrl(c),x=n(y,"_blank","location=no,hidden=yes,clearcache=yes"),S;return x.addEventListener("loadstart",function(U){U.url.indexOf(m())==0&&x.close()}),x.addEventListener("loaderror",function(U){U.url.indexOf(m())==0||(S=!0),x.close()}),x.addEventListener("exit",function(U){S?u.setError():(e.clearToken(),u.setSuccess())}),u.promise},register:function(c){var u=g(),y=e.createRegisterUrl(),x=o(c),S=n(y,"_blank",x);return S.addEventListener("loadstart",function(U){if(U.url.indexOf(m())==0){S.close();var Z=d(U.url);Q(Z,u)}}),u.promise},accountManagement:function(){var c=e.createAccountUrl();if(typeof c<"u"){var u=n(c,"_blank","location=no");u.addEventListener("loadstart",function(y){y.url.indexOf(m())==0&&u.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(c){return m()}}}if(t=="cordova-native")return b.enable=!1,{login:function(c){var u=g(),y=e.createLoginUrl(c);return universalLinks.subscribe("keycloak",function(x){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=d(x.url);Q(S,u)}),window.cordova.plugins.browsertab.openUrl(y),u.promise},logout:function(c){var u=g(),y=e.createLogoutUrl(c);return universalLinks.subscribe("keycloak",function(x){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),u.setSuccess()}),window.cordova.plugins.browsertab.openUrl(y),u.promise},register:function(c){var u=g(),y=e.createRegisterUrl(c);return universalLinks.subscribe("keycloak",function(x){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=d(x.url);Q(S,u)}),window.cordova.plugins.browsertab.openUrl(y),u.promise},accountManagement:function(){var c=e.createAccountUrl();if(typeof c<"u")window.cordova.plugins.browsertab.openUrl(c);else throw"Not supported by the OIDC server"},redirectUri:function(c){return c&&c.redirectUri?c.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+t}var H=function(){if(!(this instanceof H))return new H;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var t=this;function n(){for(var a=new Date().getTime(),f=0;f<localStorage.length;f++){var o=localStorage.key(f);if(o&&o.indexOf("kc-callback-")==0){var m=localStorage.getItem(o);if(m)try{var c=JSON.parse(m).expires;(!c||c<a)&&localStorage.removeItem(o)}catch{localStorage.removeItem(o)}}}}t.get=function(a){if(a){var f="kc-callback-"+a,o=localStorage.getItem(f);return o&&(localStorage.removeItem(f),o=JSON.parse(o)),n(),o}},t.add=function(a){n();var f="kc-callback-"+a.state;a.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(f,JSON.stringify(a))}},z=function(){if(!(this instanceof z))return new z;var t=this;t.get=function(o){if(o){var m=a("kc-callback-"+o);if(f("kc-callback-"+o,"",n(-100)),m)return JSON.parse(m)}},t.add=function(o){f("kc-callback-"+o.state,JSON.stringify(o),n(60))},t.removeItem=function(o){f(o,"",n(-100))};var n=function(o){var m=new Date;return m.setTime(m.getTime()+o*60*1e3),m},a=function(o){for(var m=o+"=",c=document.cookie.split(";"),u=0;u<c.length;u++){for(var y=c[u];y.charAt(0)==" ";)y=y.substring(1);if(y.indexOf(m)==0)return y.substring(m.length,y.length)}return""},f=function(o,m,c){var u=o+"="+m+"; expires="+c.toUTCString()+"; ";document.cookie=u}};function F(){try{return new H}catch{}return new z}function G(t){return function(){e.enableLogging&&t.apply(console,Array.prototype.slice.call(arguments))}}}function Xt(r){const e=String.fromCodePoint(...r);return btoa(e)}const ee=ht("authentication-keycloak:KeycloakAuthPlugin");var we,fe,oe,K,he,de,se,pe,ve,te,rt,xe;class Qt extends wt{constructor(s){super();$(this,te);$(this,we);$(this,fe);$(this,oe);$(this,K);$(this,he);$(this,de);$(this,se);$(this,pe);$(this,ve,Ct({kind:"pending"}));W(this,we,s.references.notifier),W(this,fe,s.intl),W(this,he,{redirectUri:void 0}),W(this,de,{redirectUri:void 0}),W(this,pe,Bt(()=>[C(this,ve).value],()=>{this.emit("changed")}));try{W(this,oe,Zt(s.properties))}catch(k){throw new Error("Invalid keycloak configuration",{cause:k})}try{W(this,K,new tt(C(this,oe).keycloakConfig))}catch(k){throw new Error("Failed to construct keycloak instance",{cause:k})}ae(this,te,rt).call(this).catch(k=>{ae(this,te,xe).call(this,{kind:"pending"}),C(this,we).notify({level:"error",title:C(this,fe).formatMessage({id:"loginFailed.title"}),message:C(this,fe).formatMessage({id:"loginFailed.message"})}),ee.error("Failed to check if user is authenticated",k)})}destroy(){clearInterval(C(this,se)),W(this,pe,ft(C(this,pe))),W(this,se,void 0)}getAuthState(){return C(this,ve).value}getLoginBehavior(){return{kind:"effect",login:()=>{ee.debug("Login with options",C(this,de)),C(this,K).login(C(this,de))}}}logout(){ee.debug("Logout with options",C(this,he)),C(this,K).logout(C(this,he))}__refresh(s,k){clearInterval(C(this,se)),W(this,se,setInterval(()=>{C(this,K).updateToken(k).catch(I=>{ee.error("Failed to refresh token",I),ae(this,te,xe).call(this,{kind:"not-authenticated"}),this.emit("changed"),this.destroy()})},s))}}we=new WeakMap,fe=new WeakMap,oe=new WeakMap,K=new WeakMap,he=new WeakMap,de=new WeakMap,se=new WeakMap,pe=new WeakMap,ve=new WeakMap,te=new WeakSet,rt=async function(){const s=C(this,oe),k=C(this,oe).keycloakInitOptions,I=s.refreshOptions;let b;try{b=await C(this,K).init(k)}catch(R){const j=typeof R=="string"?new Error(R):R;throw new Error("Failed to initialize keycloak session",{cause:j})}b?(ae(this,te,xe).call(this,{kind:"authenticated",sessionInfo:{userId:C(this,K).subject?C(this,K).subject:"undefined",userName:C(this,K).idTokenParsed?.preferred_username,attributes:{keycloak:C(this,K),familyName:C(this,K).idTokenParsed?.family_name,givenName:C(this,K).idTokenParsed?.given_name,userName:C(this,K).idTokenParsed?.preferred_username}}}),ee.debug(`User ${C(this,K).subject} is authenticated`),I.autoRefresh&&(ee.debug("Starting auto-refresh",I),this.__refresh(I.interval,I.timeLeft))):(ae(this,te,xe).call(this,{kind:"not-authenticated"}),ee.debug("User is not authenticated"))},xe=function(s){C(this,ve).value=s};const qe={autoRefresh:!0,interval:6e3,timeLeft:70},ze={onLoad:"check-sso",pkceMethod:"S256"};function Zt(r){const{keycloakOptions:e}=r,{refreshOptions:s,keycloakInitOptions:k,keycloakConfig:I}=e;return{refreshOptions:{...er(s)},keycloakInitOptions:{...tr(k)},keycloakConfig:{...rr(I)}}}function er(r){return!r||Me(r)?(ee.warn(`The autorefresh options of the Keycloak configuration should be set to ensure automatic refreshes at specified intervals. Defaulting to '${qe}'.`),Object.assign({},{...qe})):r}function tr(r){return!r||Me(r)?(ee.warn(`The Keycloak init options of the keycloak configuration should be set. Defaulting to '${ze}'.`),Object.assign({},{...ze})):r}function rr(r){if(!r||Me(r))throw new Error("KeycloakConfig not found: The Keycloak configuration options are required by the plugin to perform login and logout operations");return r}const Me=r=>r&&Object.keys(r).length===0&&r.constructor===Object,nr={"keycloak-sample":{name:"keycloak-sample",services:{SampleTokenInterceptor:{name:"SampleTokenInterceptor",clazz:At,provides:[{name:"http.Interceptor",qualifier:void 0}],references:{authService:{name:"authentication.AuthService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1},{name:"http.HttpService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/authentication":{name:"@open-pioneer/authentication",services:{AuthServiceImpl:{name:"AuthServiceImpl",clazz:vt,provides:[{name:"authentication.AuthService",qualifier:void 0}],references:{plugin:{name:"authentication.AuthPlugin",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:kt,provides:[{name:"http.HttpService",qualifier:void 0}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/notifier":{name:"@open-pioneer/notifier",services:{NotificationServiceImpl:{name:"NotificationServiceImpl",clazz:xt,provides:[{name:"notifier.NotificationService",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/authentication-keycloak":{name:"@open-pioneer/authentication-keycloak",services:{KeycloakAuthPlugin:{name:"KeycloakAuthPlugin",clazz:Qt,provides:[{name:"authentication.AuthPlugin",qualifier:void 0},{name:"authentication-keycloak.KeycloakAuthPlugin",qualifier:void 0}],references:{notifier:{name:"notifier.NotificationService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{keycloakOptions:{value:{refreshOptions:null,keycloakInitOptions:null,keycloakConfig:null,keycloakLogoutOptions:null,keycloakLoginOptions:null},required:!1}}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}}},ir="",or=["de","en"];function sr(r){switch(r){case"de":return He(()=>import("./DVe9bi08BzF-.js"),[],import.meta.url).then(e=>e.default);case"en":return He(()=>import("./v21zemnsDP_q.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${r}'`)}const ar=dt(ir),cr=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:sr,locales:or,packages:nr,styles:ar},Symbol.toStringTag,{value:"Module"})),lr="keycloak-sample",Re=bt.bind(void 0,lr);function ur(){const r=Re("authentication.AuthService"),e=()=>{r.logout()};return A.jsx(Ve,{colorScheme:"red",onClick:e,children:"Log out"})}function fr(){const r=Re("authentication.AuthService"),e=Re("http.HttpService"),s=mt(r),I=(s.kind=="authenticated"?s.sessionInfo:void 0)?.userName,b=()=>{e.fetch("https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json").catch(R=>console.error("Request failed",R))};return A.jsxs(A.Fragment,{children:[A.jsx(yt,{}),A.jsxs(_t,{maxW:"800px",children:[A.jsxs(Et,{height:"100%",direction:"column",overflow:"hidden",children:[A.jsx(De,{as:"h1",size:"2xl",children:"Keycloak Sample"}),A.jsxs(Ke,{mt:4,spacing:2,align:"stretch",children:[A.jsx(De,{as:"h2",size:"xl",children:"Additional Setup"}),A.jsx(ce,{children:"This application requires additional setup. Most importantly, a Keycloak installation must be present."}),A.jsxs(ce,{children:["The following environment properties should be set via vite (e.g. in"," ",A.jsx(ie,{children:".env.local"}),"):"]}),A.jsxs(St,{children:[A.jsxs(Ie,{children:[A.jsx(ie,{children:"VITE_KEYCLOAK_CONFIG_URL"})," (the URL to the Keycloak instance)"]}),A.jsxs(Ie,{children:[A.jsx(ie,{children:"VITE_KEYCLOAK_CONFIG_REALM"})," (the Keycloak realm)"]}),A.jsxs(Ie,{children:[A.jsx(ie,{children:"VITE_KEYCLOAK_CONFIG_CLIENT_ID"})," (the client id of this application)"]})]}),A.jsxs(ce,{textAlign:"center",children:[A.jsx(ce,{as:"b",children:"Status: "}),I!=null?A.jsxs(A.Fragment,{children:["Logged in as ",A.jsx(ie,{children:I}),"."]}):A.jsx(A.Fragment,{children:"Not logged in."})]})]})]}),A.jsx(gt,{children:A.jsxs(Ke,{align:"center",p:10,mt:2,spacing:3,border:"2px solid red",borderRadius:5,children:[A.jsx(ce,{textAlign:"center",children:"This part of the application is only visible when logged in."}),A.jsx(ur,{}),A.jsxs(ce,{children:["The following button triggers a request against a backend. The request will automatically include the Keycloak token (see"," ",A.jsx(ie,{children:"SampleTokenInterceptor.ts"}),"):"]}),A.jsx(Ve,{onClick:b,children:"Trigger Request With Token"})]})})]})]})}var Ce={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const hr=new URLSearchParams(window.location.search),dr=hr.get("lang")||void 0,pr=pt({component:fr,appMetadata:cr,config:{properties:{"@open-pioneer/authentication-keycloak":{keycloakOptions:{refreshOptions:{autoRefresh:!0,interval:6e3,timeLeft:70},keycloakInitOptions:{onLoad:"check-sso",pkceMethod:"S256"},keycloakConfig:{url:Ce.VITE_KEYCLOAK_CONFIG_URL,realm:Ce.VITE_KEYCLOAK_CONFIG_REALM,clientId:Ce.VITE_KEYCLOAK_CONFIG_CLIENT_ID}}}},locale:dr}});customElements.define("keycloak-app-element",pr);
