var w=(t,n,s)=>{if(!n.has(t))throw TypeError("Cannot "+s)};var p=(t,n,s)=>(w(t,n,"read from private field"),s?s.call(t):n.get(t)),v=(t,n,s)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,s)},l=(t,n,s,i)=>(w(t,n,"write to private field"),i?i.call(t,s):n.set(t,s),s);import{p as R,q as A,j as e,d as N,r as m,P as k,Q as b,R as q,S as B,a as U,b as O}from"./DJmFkcIFdodk.js";import{E as D}from"./vOBnYnib6xFk.js";import{u as G,I as H}from"./DP_IGRzdNuKD.js";import{I as y}from"./Di_6DQkxpLgE.js";import{C,H as P}from"./DDipuOSdUqZp.js";import{V}from"./mR0zOImdLTCv.js";import{T as K}from"./TIhUPXJo_gyX.js";import{F as L}from"./Bf_QhFinNFxX.js";import{F as _}from"./CzW-v1GHaVhQ.js";import{B as S}from"./Ck1rQJ8KdNmr.js";import{A as Q,u as Y,F as $}from"./C0VAHhqIhx5T.js";import{u as J}from"./DtzrJf1FMcy1.js";import{F as W}from"./BFqQQR-hw1_l.js";import"./C1vRgZSO997p.js";var X=R("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),x=A(function(n,s){var i,a;const{placement:o="left",...h}=n,g=G(),r=g.field,j={[o==="left"?"insetStart":"insetEnd"]:"0",width:(i=r?.height)!=null?i:r?.h,height:(a=r?.height)!=null?a:r?.h,fontSize:r?.fontSize,...g.element};return e.jsx(X,{ref:s,__css:j,...h})});x.id="InputElement";x.displayName="InputElement";var F=A(function(n,s){const{className:i,...a}=n,o=N("chakra-input__left-element",i);return e.jsx(x,{ref:s,placement:"left",className:o,...a})});F.id="InputLeftElement";F.displayName="InputLeftElement";var I=A(function(n,s){const{className:i,...a}=n,o=N("chakra-input__right-element",i);return e.jsx(x,{ref:s,placement:"right",className:o,...a})});I.id="InputRightElement";I.displayName="InputRightElement";function Z({doLogin:t,wasLoggedIn:n}){const[s,i]=m.useState(""),[a,o]=m.useState(""),[h,g]=m.useState(!1),[r,E]=m.useState(),[j,T]=m.useState(n),M=d=>{d.preventDefault();const z=t(s,a);E(z||""),T(!1)};return e.jsx(C,{p:5,children:e.jsxs(V,{as:"form",onSubmit:M,spacing:4,children:[e.jsx(P,{as:"h1",textAlign:"center",children:"Login"}),e.jsxs(K,{textAlign:"center",children:["Please enter your user name and password to authenticate.",e.jsx("br",{}),"Note: credentials are ",'"admin"'," / ",'"admin"']}),r&&e.jsxs(k,{status:"error",children:[e.jsx(b,{}),e.jsx(q,{children:r})]}),j&&e.jsxs(k,{status:"info",mb:5,children:[e.jsx(b,{}),e.jsxs(B,{children:["Logout successful.",e.jsx("br",{}),"You can use the form below to log in again."]})]}),e.jsxs(L,{children:[e.jsx(_,{children:"User name"}),e.jsx(y,{placeholder:"User name",value:s,onChange:d=>i(d.target.value),autoComplete:"username"})]}),e.jsxs(L,{children:[e.jsx(_,{children:"Password"}),e.jsxs(H,{children:[e.jsx(y,{pr:"4.5rem",type:h?"text":"password",placeholder:"Enter password",value:a,onChange:d=>o(d.target.value),autoComplete:"current-password"}),e.jsx(I,{width:"4.5rem",children:e.jsx(S,{h:"1.75rem",size:"sm",onClick:()=>g(!h),children:h?"Hide":"Show"})})]})]}),e.jsx(S,{type:"submit",children:"Login"})]})})}var u,c,f;class ee extends D{constructor(){super();v(this,u,{kind:"pending"});v(this,c,void 0);v(this,f,!1);l(this,c,setTimeout(()=>{l(this,u,{kind:"not-authenticated"}),this.emit("changed")},500))}destroy(){clearTimeout(p(this,c)),l(this,c,void 0)}getAuthState(){return p(this,u)}getLoginBehavior(){const s=(a,o)=>{if(a==="admin"&&o==="admin")l(this,u,{kind:"authenticated",sessionInfo:{userId:"admin",userName:"Arnold Administrator"}}),l(this,f,!0),this.emit("changed");else return"Invalid user name or password!"};return{kind:"fallback",Fallback:()=>m.createElement(Z,{doLogin:s,wasLoggedIn:p(this,f)})}}logout(){(p(this,u).kind==="authenticated"||p(this,u).kind==="pending")&&(l(this,u,{kind:"not-authenticated"}),clearTimeout(p(this,c)),l(this,c,void 0),this.emit("changed"))}}u=new WeakMap,c=new WeakMap,f=new WeakMap;const te={"auth-app":{name:"auth-app",services:{TestAuthPlugin:{name:"TestAuthPlugin",clazz:ee,provides:[{name:"authentication.AuthPlugin",qualifier:void 0}],references:{}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/authentication":{name:"@open-pioneer/authentication",services:{AuthServiceImpl:{name:"AuthServiceImpl",clazz:Q,provides:[{name:"authentication.AuthService",qualifier:void 0}],references:{plugin:{name:"authentication.AuthPlugin",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}}},ne="",se=[];function re(t){throw new Error(`Unsupported locale: '${t}'`)}const ie=U(ne),ae=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:re,locales:se,packages:te,styles:ie},Symbol.toStringTag,{value:"Module"})),oe="auth-app",ue=J.bind(void 0,oe);function le(){const t=ue("authentication.AuthService"),n=Y(t),s=()=>{t.logout()};return n.kind==="not-authenticated"||n.kind==="pending"?null:e.jsx(S,{colorScheme:"red",onClick:s,children:"Log out"})}function ce(){return e.jsx($,{children:e.jsxs(C,{p:5,children:[e.jsx(P,{as:"h1",children:"Authenticated"}),"This is the actual content of the app. Authentication was successful.",e.jsx(W,{pt:5,flexDirection:"row",justifyContent:"center",children:e.jsx(le,{})})]})})}const pe=O({component:ce,appMetadata:ae});customElements.define("auth-app",pe);
