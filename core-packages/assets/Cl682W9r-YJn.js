var E=t=>{throw TypeError(t)};var k=(t,n,s)=>n.has(t)||E("Cannot "+s);var p=(t,n,s)=>(k(t,n,"read from private field"),s?s.call(t):n.get(t)),x=(t,n,s)=>n.has(t)?E("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,s),c=(t,n,s,r)=>(k(t,n,"write to private field"),r?r.call(t,s):n.set(t,s),s);import{n as q,h as S,j as e,l as C,r as m,P as w,Q as _,R as D,S as H,a as U,b as V}from"./D2oXSZAF25Nh.js";import{E as G}from"./vOBnYnib6xFk.js";import{u as K,I as Q}from"./DVtiiguhxXOo.js";import{C as F,H as N}from"./D5d8MKrNO9TY.js";import{V as Y}from"./C01kSkQ--ETF.js";import{T as $}from"./DfwCaCqN11zg.js";import{F as b}from"./NWwYVL9TBgXj.js";import{F as L}from"./DjuJFArFKNLG.js";import{I as y}from"./CB_-DziTXLXN.js";import{B as d}from"./ByauQZPFLiUp.js";import{H as J}from"./BLexmwLyHax-.js";import{A as W,u as X,F as Z}from"./DmpMMwGLAqtN.js";import{_ as P}from"./CmsKOCeNyeyo.js";import{u as ee}from"./CEqcg7qjrBaf.js";import{F as te}from"./CJAaOOGk-WF8.js";import{B as ne}from"./CW9VlGYS245s.js";import"./CZpnpGhF6lFQ.js";const se=q("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),j=S(function(n,s){const{placement:r="left",...l}=n,i=K(),a=i.field,v={[r==="left"?"insetStart":"insetEnd"]:"0",width:a?.height??a?.h,height:a?.height??a?.h,fontSize:a?.fontSize,...i.element};return e.jsx(se,{ref:s,__css:v,...l})});j.id="InputElement";j.displayName="InputElement";const T=S(function(n,s){const{className:r,...l}=n,i=C("chakra-input__left-element",r);return e.jsx(j,{ref:s,placement:"left",className:i,...l})});T.id="InputLeftElement";T.displayName="InputLeftElement";const A=S(function(n,s){const{className:r,...l}=n,i=C("chakra-input__right-element",r);return e.jsx(j,{ref:s,placement:"right",className:i,...l})});A.id="InputRightElement";A.displayName="InputRightElement";function re({doLogin:t,doFail:n,wasLoggedIn:s}){const[r,l]=m.useState(""),[i,a]=m.useState(""),[g,v]=m.useState(!1),[I,M]=m.useState(),[z,R]=m.useState(s),B=h=>{h.preventDefault();const O=t(r,i);M(O||""),R(!1)};return e.jsx(F,{p:5,children:e.jsxs(Y,{as:"form",onSubmit:B,spacing:4,children:[e.jsx(N,{as:"h1",textAlign:"center",children:"Login"}),e.jsxs($,{textAlign:"center",children:["Please enter your user name and password to authenticate.",e.jsx("br",{}),"Note: credentials are ",'"admin"'," / ",'"admin"']}),I&&e.jsxs(w,{status:"error",children:[e.jsx(_,{}),e.jsx(D,{children:I})]}),z&&e.jsxs(w,{status:"info",mb:5,children:[e.jsx(_,{}),e.jsxs(H,{children:["Logout successful.",e.jsx("br",{}),"You can use the form below to log in again."]})]}),e.jsxs(b,{children:[e.jsx(L,{children:"User name"}),e.jsx(y,{placeholder:"User name",value:r,onChange:h=>l(h.target.value),autoComplete:"username"})]}),e.jsxs(b,{children:[e.jsx(L,{children:"Password"}),e.jsxs(Q,{children:[e.jsx(y,{pr:"4.5rem",type:g?"text":"password",placeholder:"Enter password",value:i,onChange:h=>a(h.target.value),autoComplete:"current-password"}),e.jsx(A,{width:"4.5rem",children:e.jsx(d,{h:"1.75rem",size:"sm",onClick:()=>v(!g),children:g?"Hide":"Show"})})]})]}),e.jsxs(J,{children:[e.jsx(d,{colorScheme:"red",onClick:n,children:"Let it fail!"}),e.jsx(d,{type:"submit",children:"Login"})]})]})})}var o,u,f;class ie extends G{constructor(){super();x(this,o,{kind:"pending"});x(this,u);x(this,f,!1);c(this,u,setTimeout(()=>{c(this,o,{kind:"not-authenticated"}),this.emit("changed")},500))}destroy(){clearTimeout(p(this,u)),c(this,u,void 0)}getAuthState(){return p(this,o)}getLoginBehavior(){const s=(i,a)=>{if(i==="admin"&&a==="admin")c(this,o,{kind:"authenticated",sessionInfo:{userId:"admin",userName:"Arnold Administrator"}}),c(this,f,!0),this.emit("changed");else return"Invalid user name or password!"},r=()=>{c(this,o,{kind:"error",error:new Error("Login failed!")}),this.emit("changed")};return{kind:"fallback",Fallback:()=>m.createElement(re,{doLogin:s,doFail:r,wasLoggedIn:p(this,f)})}}logout(){(p(this,o).kind==="authenticated"||p(this,o).kind==="pending")&&(c(this,o,{kind:"not-authenticated"}),clearTimeout(p(this,u)),c(this,u,void 0),this.emit("changed"))}}o=new WeakMap,u=new WeakMap,f=new WeakMap;const oe={"auth-app":{name:"auth-app",services:{TestAuthPlugin:{name:"TestAuthPlugin",clazz:ie,provides:[{name:"authentication.AuthPlugin",qualifier:void 0}],references:{}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/authentication":{name:"@open-pioneer/authentication",services:{AuthServiceImpl:{name:"AuthServiceImpl",clazz:W,provides:[{name:"authentication.AuthService",qualifier:void 0}],references:{plugin:{name:"authentication.AuthPlugin",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}}},ae="",ce=["en","de"];function le(t){switch(t){case"en":return P(()=>import("./P9WplnIxWHzS.js"),[],import.meta.url).then(n=>n.default);case"de":return P(()=>import("./z2D46c5wMnzO.js"),[],import.meta.url).then(n=>n.default)}throw new Error(`Unsupported locale: '${t}'`)}const ue=U(ae),pe=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:le,locales:ce,packages:oe,styles:ue},Symbol.toStringTag,{value:"Module"})),me="auth-app",he=ee.bind(void 0,me);function de(){const t=he("authentication.AuthService"),n=X(t),s=()=>{t.logout()};return n.kind==="not-authenticated"||n.kind==="pending"?null:e.jsx(d,{colorScheme:"red",onClick:s,children:"Log out"})}function fe(){return e.jsx(Z,{errorFallback:ge,children:e.jsxs(F,{p:5,children:[e.jsx(N,{as:"h1",children:"Authenticated"}),"This is the actual content of the app. Authentication was successful.",e.jsx(te,{pt:5,flexDirection:"row",justifyContent:"center",children:e.jsx(de,{})})]})})}function ge(t){return e.jsxs(e.Fragment,{children:[e.jsx(ne,{margin:2,color:"red",children:t.error.message}),e.jsx(d,{margin:2,onClick:()=>window.location.reload(),children:"reload"})]})}const xe=V({component:fe,appMetadata:pe});customElements.define("auth-app",xe);
