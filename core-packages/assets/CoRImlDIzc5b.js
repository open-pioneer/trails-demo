var we=(a,e,p)=>{if(!e.has(a))throw TypeError("Cannot "+p)};var T=(a,e,p)=>(we(a,e,"read from private field"),p?p.call(a):e.get(a)),W=(a,e,p)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,p)},B=(a,e,p,g)=>(we(a,e,"write to private field"),g?g.call(a,p):e.set(a,p),p);var Ie=(a,e,p)=>(we(a,e,"access private method"),p);import{q as Ke,a2 as He,G as Be,j as I,p as De,d as ze,a7 as Ve,Z as qe,_ as Je,c as Ye,a as Ge,b as We}from"./DJmFkcIFdodk.js";import{A as $e,u as Xe,F as Qe}from"./C0VAHhqIhx5T.js";import{H as Ze}from"./CKdalLcZe0mZ.js";import{N as er,a as rr}from"./mgsJL9_1KTFp.js";import{E as tr}from"./vOBnYnib6xFk.js";import{_ as Ee}from"./Dch09mLNbtBx.js";import{u as nr}from"./DtzrJf1FMcy1.js";import{B as Oe}from"./Ck1rQJ8KdNmr.js";import{U as or,L as ye}from"./DnZBFZtK0pJZ.js";import{T as se}from"./TIhUPXJo_gyX.js";import{V as Ue}from"./mR0zOImdLTCv.js";import{C as ar,H as Ce}from"./DDipuOSdUqZp.js";import{F as ir}from"./BFqQQR-hw1_l.js";import"./AJTpfBEcE0Gg.js";import"./C1vRgZSO997p.js";var te=Ke(function(e,p){const g=He("Code",e),{className:A,...y}=Be(e);return I.jsx(De.code,{ref:p,className:ze("chakra-code",e.className),...y,__css:{display:"inline-block",...g}})});te.displayName="Code";class sr{authService;constructor(e){this.authService=e.references.authService}beforeRequest({target:e,options:p}){const g=this.authService.getAuthState(),C=((g.kind=="authenticated"?g.sessionInfo:void 0)?.attributes?.keycloak).token;e.protocol==="https:"&&e.hostname==="ogc-api.nrw.de"&&C&&p.headers.set("Authorization",C)}}var xe={};xe.byteLength=ur;xe.toByteArray=dr;xe.fromByteArray=vr;var $=[],V=[],cr=typeof Uint8Array<"u"?Uint8Array:Array,be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ce=0,lr=be.length;ce<lr;++ce)$[ce]=be[ce],V[be.charCodeAt(ce)]=ce;V[45]=62;V[95]=63;function je(a){var e=a.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=a.indexOf("=");p===-1&&(p=e);var g=p===e?0:4-p%4;return[p,g]}function ur(a){var e=je(a),p=e[0],g=e[1];return(p+g)*3/4-g}function fr(a,e,p){return(e+p)*3/4-p}function dr(a){var e,p=je(a),g=p[0],A=p[1],y=new cr(fr(a,g,A)),C=0,R=A>0?g-4:g,f;for(f=0;f<R;f+=4)e=V[a.charCodeAt(f)]<<18|V[a.charCodeAt(f+1)]<<12|V[a.charCodeAt(f+2)]<<6|V[a.charCodeAt(f+3)],y[C++]=e>>16&255,y[C++]=e>>8&255,y[C++]=e&255;return A===2&&(e=V[a.charCodeAt(f)]<<2|V[a.charCodeAt(f+1)]>>4,y[C++]=e&255),A===1&&(e=V[a.charCodeAt(f)]<<10|V[a.charCodeAt(f+1)]<<4|V[a.charCodeAt(f+2)]>>2,y[C++]=e>>8&255,y[C++]=e&255),y}function hr(a){return $[a>>18&63]+$[a>>12&63]+$[a>>6&63]+$[a&63]}function pr(a,e,p){for(var g,A=[],y=e;y<p;y+=3)g=(a[y]<<16&16711680)+(a[y+1]<<8&65280)+(a[y+2]&255),A.push(hr(g));return A.join("")}function vr(a){for(var e,p=a.length,g=p%3,A=[],y=16383,C=0,R=p-g;C<R;C+=y)A.push(pr(a,C,C+y>R?R:C+y));return g===1?(e=a[p-1],A.push($[e>>2]+$[e<<4&63]+"==")):g===2&&(e=(a[p-2]<<8)+a[p-1],A.push($[e>>10]+$[e>>4&63]+$[e<<2&63]+"=")),A.join("")}var Pe={exports:{}};const mr={},kr=Object.freeze(Object.defineProperty({__proto__:null,default:mr},Symbol.toStringTag,{value:"Module"})),Te=Ve(kr);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.10.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(a){(function(){var e="input is invalid type",p=typeof window=="object",g=p?window:{};g.JS_SHA256_NO_WINDOW&&(p=!1);var A=!p&&typeof self=="object",y=!g.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;y?g=qe:A&&(g=self);var C=!g.JS_SHA256_NO_COMMON_JS&&!0&&a.exports,R=!g.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),X=[-2147483648,8388608,32768,128],K=[24,16,8,0],ae=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ie=["hex","array","digest","arrayBuffer"],O=[];(g.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),R&&(g.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return typeof n=="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var ve=function(n,h){return function(b){return new j(h,!0).update(b)[n]()}},me=function(n){var h=ve("hex",n);y&&(h=q(h,n)),h.create=function(){return new j(n)},h.update=function(k){return h.create().update(k)};for(var b=0;b<ie.length;++b){var v=ie[b];h[v]=ve(v,n)}return h},q=function(n,h){var b=Te,v=Te.Buffer,k=h?"sha224":"sha256",d;v.from&&!g.JS_SHA256_NO_BUFFER_FROM?d=v.from:d=function(s){return new v(s)};var F=function(s){if(typeof s=="string")return b.createHash(k).update(s,"utf8").digest("hex");if(s==null)throw new Error(e);return s.constructor===ArrayBuffer&&(s=new Uint8Array(s)),Array.isArray(s)||ArrayBuffer.isView(s)||s.constructor===v?b.createHash(k).update(d(s)).digest("hex"):n(s)};return F},ke=function(n,h){return function(b,v){return new re(b,h,!0).update(v)[n]()}},Y=function(n){var h=ke("hex",n);h.create=function(k){return new re(k,n)},h.update=function(k,d){return h.create(k).update(d)};for(var b=0;b<ie.length;++b){var v=ie[b];h[v]=ke(v,n)}return h};function j(n,h){h?(O[0]=O[16]=O[1]=O[2]=O[3]=O[4]=O[5]=O[6]=O[7]=O[8]=O[9]=O[10]=O[11]=O[12]=O[13]=O[14]=O[15]=0,this.blocks=O):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=n}j.prototype.update=function(n){if(!this.finalized){var h,b=typeof n;if(b!=="string"){if(b==="object"){if(n===null)throw new Error(e);if(R&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!R||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);h=!0}for(var v,k=0,d,F=n.length,s=this.blocks;k<F;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),h)for(d=this.start;k<F&&d<64;++k)s[d>>2]|=n[k]<<K[d++&3];else for(d=this.start;k<F&&d<64;++k)v=n.charCodeAt(k),v<128?s[d>>2]|=v<<K[d++&3]:v<2048?(s[d>>2]|=(192|v>>6)<<K[d++&3],s[d>>2]|=(128|v&63)<<K[d++&3]):v<55296||v>=57344?(s[d>>2]|=(224|v>>12)<<K[d++&3],s[d>>2]|=(128|v>>6&63)<<K[d++&3],s[d>>2]|=(128|v&63)<<K[d++&3]):(v=65536+((v&1023)<<10|n.charCodeAt(++k)&1023),s[d>>2]|=(240|v>>18)<<K[d++&3],s[d>>2]|=(128|v>>12&63)<<K[d++&3],s[d>>2]|=(128|v>>6&63)<<K[d++&3],s[d>>2]|=(128|v&63)<<K[d++&3]);this.lastByteIndex=d,this.bytes+=d-this.start,d>=64?(this.block=s[16],this.start=d-64,this.hash(),this.hashed=!0):this.start=d}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},j.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,h=this.lastByteIndex;n[16]=this.block,n[h>>2]|=X[h&3],this.block=n[16],h>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}},j.prototype.hash=function(){var n=this.h0,h=this.h1,b=this.h2,v=this.h3,k=this.h4,d=this.h5,F=this.h6,s=this.h7,_=this.blocks,L,P,N,D,E,J,r,t,i,u,o;for(L=16;L<64;++L)E=_[L-15],P=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3,E=_[L-2],N=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10,_[L]=_[L-16]+P+_[L-7]+N<<0;for(o=h&b,L=0;L<64;L+=4)this.first?(this.is224?(t=300032,E=_[0]-1413257819,s=E-150054599<<0,v=E+24177077<<0):(t=704751109,E=_[0]-210244248,s=E-1521486534<<0,v=E+143694565<<0),this.first=!1):(P=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),N=(k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7),t=n&h,D=t^n&b^o,r=k&d^~k&F,E=s+N+r+ae[L]+_[L],J=P+D,s=v+E<<0,v=E+J<<0),P=(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10),N=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),i=v&n,D=i^v&h^t,r=s&k^~s&d,E=F+N+r+ae[L+1]+_[L+1],J=P+D,F=b+E<<0,b=E+J<<0,P=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10),N=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),u=b&v,D=u^b&n^i,r=F&s^~F&k,E=d+N+r+ae[L+2]+_[L+2],J=P+D,d=h+E<<0,h=E+J<<0,P=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),N=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),o=h&b,D=o^h&v^u,r=d&F^~d&s,E=k+N+r+ae[L+3]+_[L+3],J=P+D,k=n+E<<0,n=E+J<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+n<<0,this.h1=this.h1+h<<0,this.h2=this.h2+b<<0,this.h3=this.h3+v<<0,this.h4=this.h4+k<<0,this.h5=this.h5+d<<0,this.h6=this.h6+F<<0,this.h7=this.h7+s<<0},j.prototype.hex=function(){this.finalize();var n=this.h0,h=this.h1,b=this.h2,v=this.h3,k=this.h4,d=this.h5,F=this.h6,s=this.h7,_=f[n>>28&15]+f[n>>24&15]+f[n>>20&15]+f[n>>16&15]+f[n>>12&15]+f[n>>8&15]+f[n>>4&15]+f[n&15]+f[h>>28&15]+f[h>>24&15]+f[h>>20&15]+f[h>>16&15]+f[h>>12&15]+f[h>>8&15]+f[h>>4&15]+f[h&15]+f[b>>28&15]+f[b>>24&15]+f[b>>20&15]+f[b>>16&15]+f[b>>12&15]+f[b>>8&15]+f[b>>4&15]+f[b&15]+f[v>>28&15]+f[v>>24&15]+f[v>>20&15]+f[v>>16&15]+f[v>>12&15]+f[v>>8&15]+f[v>>4&15]+f[v&15]+f[k>>28&15]+f[k>>24&15]+f[k>>20&15]+f[k>>16&15]+f[k>>12&15]+f[k>>8&15]+f[k>>4&15]+f[k&15]+f[d>>28&15]+f[d>>24&15]+f[d>>20&15]+f[d>>16&15]+f[d>>12&15]+f[d>>8&15]+f[d>>4&15]+f[d&15]+f[F>>28&15]+f[F>>24&15]+f[F>>20&15]+f[F>>16&15]+f[F>>12&15]+f[F>>8&15]+f[F>>4&15]+f[F&15];return this.is224||(_+=f[s>>28&15]+f[s>>24&15]+f[s>>20&15]+f[s>>16&15]+f[s>>12&15]+f[s>>8&15]+f[s>>4&15]+f[s&15]),_},j.prototype.toString=j.prototype.hex,j.prototype.digest=function(){this.finalize();var n=this.h0,h=this.h1,b=this.h2,v=this.h3,k=this.h4,d=this.h5,F=this.h6,s=this.h7,_=[n>>24&255,n>>16&255,n>>8&255,n&255,h>>24&255,h>>16&255,h>>8&255,h&255,b>>24&255,b>>16&255,b>>8&255,b&255,v>>24&255,v>>16&255,v>>8&255,v&255,k>>24&255,k>>16&255,k>>8&255,k&255,d>>24&255,d>>16&255,d>>8&255,d&255,F>>24&255,F>>16&255,F>>8&255,F&255];return this.is224||_.push(s>>24&255,s>>16&255,s>>8&255,s&255),_},j.prototype.array=j.prototype.digest,j.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(this.is224?28:32),h=new DataView(n);return h.setUint32(0,this.h0),h.setUint32(4,this.h1),h.setUint32(8,this.h2),h.setUint32(12,this.h3),h.setUint32(16,this.h4),h.setUint32(20,this.h5),h.setUint32(24,this.h6),this.is224||h.setUint32(28,this.h7),n};function re(n,h,b){var v,k=typeof n;if(k==="string"){var d=[],F=n.length,s=0,_;for(v=0;v<F;++v)_=n.charCodeAt(v),_<128?d[s++]=_:_<2048?(d[s++]=192|_>>6,d[s++]=128|_&63):_<55296||_>=57344?(d[s++]=224|_>>12,d[s++]=128|_>>6&63,d[s++]=128|_&63):(_=65536+((_&1023)<<10|n.charCodeAt(++v)&1023),d[s++]=240|_>>18,d[s++]=128|_>>12&63,d[s++]=128|_>>6&63,d[s++]=128|_&63);n=d}else if(k==="object"){if(n===null)throw new Error(e);if(R&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!R||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);n.length>64&&(n=new j(h,!0).update(n).array());var L=[],P=[];for(v=0;v<64;++v){var N=n[v]||0;L[v]=92^N,P[v]=54^N}j.call(this,h,b),this.update(P),this.oKeyPad=L,this.inner=!0,this.sharedMemory=b}re.prototype=new j,re.prototype.finalize=function(){if(j.prototype.finalize.call(this),this.inner){this.inner=!1;var n=this.array();j.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(n),j.prototype.finalize.call(this)}};var H=me();H.sha256=H,H.sha224=me(!0),H.sha256.hmac=Y(),H.sha224.hmac=Y(!0),C?a.exports=H:(g.sha256=H.sha256,g.sha224=H.sha224)})()})(Pe);var gr=Pe.exports;const xr=Je(gr);class he extends Error{}he.prototype.name="InvalidTokenError";function wr(a){return decodeURIComponent(atob(a).replace(/(.)/g,(e,p)=>{let g=p.charCodeAt(0).toString(16).toUpperCase();return g.length<2&&(g="0"+g),"%"+g}))}function yr(a){let e=a.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return wr(e)}catch{return atob(e)}}function Se(a,e){if(typeof a!="string")throw new he("Invalid token specified: must be a string");e||(e={});const p=e.header===!0?0:1,g=a.split(".")[p];if(typeof g!="string")throw new he(`Invalid token specified: missing part #${p+1}`);let A;try{A=yr(g)}catch(y){throw new he(`Invalid token specified: invalid base64 for part #${p+1} (${y.message})`)}try{return JSON.parse(A)}catch(y){throw new he(`Invalid token specified: invalid json for part #${p+1} (${y.message})`)}}if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function Ne(a){if(!(this instanceof Ne))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,p,g=[],A,y={enable:!0,callbackList:[],interval:5},C=document.getElementsByTagName("script"),R=0;R<C.length;R++)(C[R].src.indexOf("keycloak.js")!==-1||C[R].src.indexOf("keycloak.min.js")!==-1)&&C[R].src.indexOf("version=")!==-1&&(e.iframeVersion=C[R].src.substring(C[R].src.indexOf("version=")+8).split("&")[0]);var f=!0,X=J(console.info),K=J(console.warn);e.init=function(r){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,A=E();var t=["default","cordova","cordova-native"];if(r&&t.indexOf(r.adapter)>-1?p=P(r.adapter):r&&typeof r.adapter=="object"?p=r.adapter:window.Cordova||window.cordova?p=P("cordova"):p=P(),r){if(typeof r.useNonce<"u"&&(f=r.useNonce),typeof r.checkLoginIframe<"u"&&(y.enable=r.checkLoginIframe),r.checkLoginIframeInterval&&(y.interval=r.checkLoginIframeInterval),r.onLoad==="login-required"&&(e.loginRequired=!0),r.responseMode)if(r.responseMode==="query"||r.responseMode==="fragment")e.responseMode=r.responseMode;else throw"Invalid value for responseMode";if(r.flow){switch(r.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=r.flow}if(r.timeSkew!=null&&(e.timeSkew=r.timeSkew),r.redirectUri&&(e.redirectUri=r.redirectUri),r.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=r.silentCheckSsoRedirectUri),typeof r.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=r.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,r.pkceMethod){if(r.pkceMethod!=="S256")throw"Invalid value for pkceMethod";e.pkceMethod=r.pkceMethod}typeof r.enableLogging=="boolean"?e.enableLogging=r.enableLogging:e.enableLogging=!1,typeof r.scope=="string"&&(e.scope=r.scope),typeof r.acrValues=="string"&&(e.acrValues=r.acrValues),typeof r.messageReceiveTimeout=="number"&&r.messageReceiveTimeout>0?e.messageReceiveTimeout=r.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var i=k(),u=k();u.promise.then(function(){e.onReady&&e.onReady(e.authenticated),i.setSuccess(e.authenticated)}).catch(function(x){i.setError(x)});var o=j();function m(){var x=function(U){U||(S.prompt="none"),r&&r.locale&&(S.locale=r.locale),e.login(S).then(function(){u.setSuccess()}).catch(function(G){u.setError(G)})},w=function(){var U=document.createElement("iframe"),G=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});U.setAttribute("src",G),U.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),U.setAttribute("title","keycloak-silent-check-sso"),U.style.display="none",document.body.appendChild(U);var Z=function(z){if(!(z.origin!==window.location.origin||U.contentWindow!==z.source)){var de=h(z.data);Y(de,u),document.body.removeChild(U),window.removeEventListener("message",Z)}};window.addEventListener("message",Z)},S={};switch(r.onLoad){case"check-sso":y.enable?F().then(function(){_().then(function(U){U?u.setSuccess():e.silentCheckSsoRedirectUri?w():x(!1)}).catch(function(U){u.setError(U)})}):e.silentCheckSsoRedirectUri?w():x(!1);break;case"login-required":x(!0);break;default:throw"Invalid value for onLoad"}}function c(){var x=h(window.location.href);if(x&&window.history.replaceState(window.history.state,null,x.newUrl),x&&x.valid)return F().then(function(){Y(x,u)}).catch(function(w){u.setError(w)});r?r.token&&r.refreshToken?(H(r.token,r.refreshToken,r.idToken),y.enable?F().then(function(){_().then(function(w){w?(e.onAuthSuccess&&e.onAuthSuccess(),u.setSuccess(),s()):u.setSuccess()}).catch(function(w){u.setError(w)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),u.setSuccess()}).catch(function(w){e.onAuthError&&e.onAuthError(),r.onLoad?m():u.setError(w)})):r.onLoad?m():u.setSuccess():u.setSuccess()}function l(){var x=k(),w=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",w),x.setSuccess())};return document.addEventListener("readystatechange",w),w(),x.promise}return o.then(function(){l().then(L).then(c).catch(function(x){i.setError(x)})}),o.catch(function(x){i.setError(x)}),i.promise},e.login=function(r){return p.login(r)};function ae(r){var t=null,i=window.crypto||window.msCrypto;if(i&&i.getRandomValues&&window.Uint8Array)return t=new Uint8Array(r),i.getRandomValues(t),t;t=new Array(r);for(var u=0;u<t.length;u++)t[u]=Math.floor(256*Math.random());return t}function ie(r){return O(r,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function O(r,t){for(var i=ae(r),u=new Array(r),o=0;o<r;o++)u[o]=t.charCodeAt(i[o]%t.length);return String.fromCharCode.apply(null,u)}function ve(r,t){switch(r){case"S256":var i=new Uint8Array(xr.arrayBuffer(t)),u=xe.fromByteArray(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return u;default:throw"Invalid value for pkceMethod"}}function me(r){var t={id_token:{acr:r}};return JSON.stringify(t)}e.createLoginUrl=function(r){var t=n(),i=n(),u=p.redirectUri(r),o={state:t,nonce:i,redirectUri:encodeURIComponent(u)};r&&r.prompt&&(o.prompt=r.prompt);var m;r&&r.action=="register"?m=e.endpoints.register():m=e.endpoints.authorize();var c=r&&r.scope||e.scope;c?c.indexOf("openid")===-1&&(c="openid "+c):c="openid";var l=m+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(u)+"&state="+encodeURIComponent(t)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(c);if(f&&(l=l+"&nonce="+encodeURIComponent(i)),r&&r.prompt&&(l+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(l+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(l+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(l+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.action&&r.action!="register"&&(l+="&kc_action="+encodeURIComponent(r.action)),r&&r.locale&&(l+="&ui_locales="+encodeURIComponent(r.locale)),r&&r.acr){var x=me(r.acr);l+="&claims="+encodeURIComponent(x)}if((r&&r.acrValues||e.acrValues)&&(l+="&acr_values="+encodeURIComponent(r.acrValues||e.acrValues)),e.pkceMethod){var w=ie(96);o.pkceCodeVerifier=w;var S=ve(e.pkceMethod,w);l+="&code_challenge="+S,l+="&code_challenge_method="+e.pkceMethod}return A.add(o),l},e.logout=function(r){return p.logout(r)},e.createLogoutUrl=function(r){var t=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(p.redirectUri(r,!1));return e.idToken&&(t+="&id_token_hint="+encodeURIComponent(e.idToken)),t},e.register=function(r){return p.register(r)},e.createRegisterUrl=function(r){return r||(r={}),r.action="register",e.createLoginUrl(r)},e.createAccountUrl=function(r){var t=q(),i=void 0;return typeof t<"u"&&(i=t+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(p.redirectUri(r))),i},e.accountManagement=function(){return p.accountManagement()},e.hasRealmRole=function(r){var t=e.realmAccess;return!!t&&t.roles.indexOf(r)>=0},e.hasResourceRole=function(r,t){if(!e.resourceAccess)return!1;var i=e.resourceAccess[t||e.clientId];return!!i&&i.roles.indexOf(r)>=0},e.loadUserProfile=function(){var r=q()+"/account",t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var i=k();return t.onreadystatechange=function(){t.readyState==4&&(t.status==200?(e.profile=JSON.parse(t.responseText),i.setSuccess(e.profile)):i.setError())},t.send(),i.promise},e.loadUserInfo=function(){var r=e.endpoints.userinfo(),t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var i=k();return t.onreadystatechange=function(){t.readyState==4&&(t.status==200?(e.userInfo=JSON.parse(t.responseText),i.setSuccess(e.userInfo)):i.setError())},t.send(),i.promise},e.isTokenExpired=function(r){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return X("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var t=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(r){if(isNaN(r))throw"Invalid minValidity";t-=r}return t<0},e.updateToken=function(r){var t=k();if(!e.refreshToken)return t.setError(),t.promise;r=r||5;var i=function(){var o=!1;if(r==-1?(o=!0,X("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(r))&&(o=!0,X("[KEYCLOAK] Refreshing token: token expired")),!o)t.setSuccess(!1);else{var m="grant_type=refresh_token&refresh_token="+e.refreshToken,c=e.endpoints.token();if(g.push(t),g.length==1){var l=new XMLHttpRequest;l.open("POST",c,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.withCredentials=!0,m+="&client_id="+encodeURIComponent(e.clientId);var x=new Date().getTime();l.onreadystatechange=function(){if(l.readyState==4)if(l.status==200){X("[KEYCLOAK] Token refreshed"),x=(x+new Date().getTime())/2;var w=JSON.parse(l.responseText);H(w.access_token,w.refresh_token,w.id_token,x),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var S=g.pop();S!=null;S=g.pop())S.setSuccess(!0)}else{K("[KEYCLOAK] Failed to refresh token"),l.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var S=g.pop();S!=null;S=g.pop())S.setError(!0)}},l.send(m)}}};if(y.enable){var u=_();u.then(function(){i()}).catch(function(o){t.setError(o)})}else i();return t.promise},e.clearToken=function(){e.token&&(H(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function q(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function ke(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function Y(r,t){var i=r.code,u=r.error,o=r.prompt,m=new Date().getTime();if(r.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(r.kc_action_status),u){if(o!="none"){var c={error:u,error_description:r.error_description};e.onAuthError&&e.onAuthError(c),t&&t.setError(c)}else t&&t.setSuccess();return}else e.flow!="standard"&&(r.access_token||r.id_token)&&S(r.access_token,null,r.id_token,!0);if(e.flow!="implicit"&&i){var l="code="+i+"&grant_type=authorization_code",x=e.endpoints.token(),w=new XMLHttpRequest;w.open("POST",x,!0),w.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l+="&client_id="+encodeURIComponent(e.clientId),l+="&redirect_uri="+r.redirectUri,r.pkceCodeVerifier&&(l+="&code_verifier="+r.pkceCodeVerifier),w.withCredentials=!0,w.onreadystatechange=function(){if(w.readyState==4)if(w.status==200){var U=JSON.parse(w.responseText);S(U.access_token,U.refresh_token,U.id_token,e.flow==="standard"),s()}else e.onAuthError&&e.onAuthError(),t&&t.setError()},w.send(l)}function S(U,G,Z,z){m=(m+new Date().getTime())/2,H(U,G,Z,m),f&&(e.tokenParsed&&e.tokenParsed.nonce!=r.storedNonce||e.refreshTokenParsed&&e.refreshTokenParsed.nonce!=r.storedNonce||e.idTokenParsed&&e.idTokenParsed.nonce!=r.storedNonce)?(X("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),t&&t.setError()):z&&(e.onAuthSuccess&&e.onAuthSuccess(),t&&t.setSuccess())}}function j(r){var t=k(),i;a?typeof a=="string"&&(i=a):i="keycloak.json";function u(w){w?e.endpoints={authorize:function(){return w.authorization_endpoint},token:function(){return w.token_endpoint},logout:function(){if(!w.end_session_endpoint)throw"Not supported by the OIDC server";return w.end_session_endpoint},checkSessionIframe:function(){if(!w.check_session_iframe)throw"Not supported by the OIDC server";return w.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!w.userinfo_endpoint)throw"Not supported by the OIDC server";return w.userinfo_endpoint}}:e.endpoints={authorize:function(){return q()+"/protocol/openid-connect/auth"},token:function(){return q()+"/protocol/openid-connect/token"},logout:function(){return q()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var S=q()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},thirdPartyCookiesIframe:function(){var S=q()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},register:function(){return q()+"/protocol/openid-connect/registrations"},userinfo:function(){return q()+"/protocol/openid-connect/userinfo"}}}if(i){var o=new XMLHttpRequest;o.open("GET",i,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200||re(o)){var w=JSON.parse(o.responseText);e.authServerUrl=w["auth-server-url"],e.realm=w.realm,e.clientId=w.resource,u(null),t.setSuccess()}else t.setError()},o.send()}else{if(!a.clientId)throw"clientId missing";e.clientId=a.clientId;var m=a.oidcProvider;if(m)if(typeof m=="string"){var x;m.charAt(m.length-1)=="/"?x=m+".well-known/openid-configuration":x=m+"/.well-known/openid-configuration";var o=new XMLHttpRequest;o.open("GET",x,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200||re(o)){var S=JSON.parse(o.responseText);u(S),t.setSuccess()}else t.setError()},o.send()}else u(m),t.setSuccess();else{if(!a.url){for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++)if(c[l].src.match(/.*keycloak\.js/)){a.url=c[l].src.substr(0,c[l].src.indexOf("/js/keycloak.js"));break}}if(!a.realm)throw"realm missing";e.authServerUrl=a.url,e.realm=a.realm,u(null),t.setSuccess()}}return t.promise}function re(r){return r.status==0&&r.responseText&&r.responseURL.startsWith("file:")}function H(r,t,i,u){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),t?(e.refreshToken=t,e.refreshTokenParsed=Se(t)):(delete e.refreshToken,delete e.refreshTokenParsed),i?(e.idToken=i,e.idTokenParsed=Se(i)):(delete e.idToken,delete e.idTokenParsed),r){if(e.token=r,e.tokenParsed=Se(r),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,u&&(e.timeSkew=Math.floor(u/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(X("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var o=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;X("[KEYCLOAK] Token expires in "+Math.round(o/1e3)+" s"),o<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,o)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function n(){var r="0123456789abcdef",t=O(36,r).split("");t[14]="4",t[19]=r.substr(t[19]&3|8,1),t[8]=t[13]=t[18]=t[23]="-";var i=t.join("");return i}function h(r){var t=b(r);if(t){var i=A.get(t.state);return i&&(t.valid=!0,t.redirectUri=i.redirectUri,t.storedNonce=i.nonce,t.prompt=i.prompt,t.pkceCodeVerifier=i.pkceCodeVerifier),t}}function b(r){var t;switch(e.flow){case"standard":t=["code","state","session_state","kc_action_status","iss"];break;case"implicit":t=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":t=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break}t.push("error"),t.push("error_description"),t.push("error_uri");var i=r.indexOf("?"),u=r.indexOf("#"),o,m;if(e.responseMode==="query"&&i!==-1?(o=r.substring(0,i),m=v(r.substring(i+1,u!==-1?u:r.length),t),m.paramsString!==""&&(o+="?"+m.paramsString),u!==-1&&(o+=r.substring(u))):e.responseMode==="fragment"&&u!==-1&&(o=r.substring(0,u),m=v(r.substring(u+1),t),m.paramsString!==""&&(o+="#"+m.paramsString)),m&&m.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((m.oauthParams.code||m.oauthParams.error)&&m.oauthParams.state)return m.oauthParams.newUrl=o,m.oauthParams}else if(e.flow==="implicit"&&(m.oauthParams.access_token||m.oauthParams.error)&&m.oauthParams.state)return m.oauthParams.newUrl=o,m.oauthParams}}function v(r,t){for(var i=r.split("&"),u={paramsString:"",oauthParams:{}},o=0;o<i.length;o++){var m=i[o].indexOf("="),c=i[o].slice(0,m);t.indexOf(c)!==-1?u.oauthParams[c]=i[o].slice(m+1):(u.paramsString!==""&&(u.paramsString+="&"),u.paramsString+=i[o])}return u}function k(){var r={setSuccess:function(t){r.resolve(t)},setError:function(t){r.reject(t)}};return r.promise=new Promise(function(t,i){r.resolve=t,r.reject=i}),r}function d(r,t,i){var u=null,o=new Promise(function(m,c){u=setTimeout(function(){c({error:i})},t)});return Promise.race([r,o]).finally(function(){clearTimeout(u)})}function F(){var r=k();if(!y.enable||y.iframe)return r.setSuccess(),r.promise;var t=document.createElement("iframe");y.iframe=t,t.onload=function(){var o=e.endpoints.authorize();o.charAt(0)==="/"?y.iframeOrigin=ke():y.iframeOrigin=o.substring(0,o.indexOf("/",8)),r.setSuccess()};var i=e.endpoints.checkSessionIframe();t.setAttribute("src",i),t.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),t.setAttribute("title","keycloak-session-iframe"),t.style.display="none",document.body.appendChild(t);var u=function(o){if(!(o.origin!==y.iframeOrigin||y.iframe.contentWindow!==o.source)&&(o.data=="unchanged"||o.data=="changed"||o.data=="error")){o.data!="unchanged"&&e.clearToken();for(var m=y.callbackList.splice(0,y.callbackList.length),c=m.length-1;c>=0;--c){var l=m[c];o.data=="error"?l.setError():l.setSuccess(o.data=="unchanged")}}};return window.addEventListener("message",u,!1),r.promise}function s(){y.enable&&e.token&&setTimeout(function(){_().then(function(r){r&&s()})},y.interval*1e3)}function _(){var r=k();if(y.iframe&&y.iframeOrigin){var t=e.clientId+" "+(e.sessionId?e.sessionId:"");y.callbackList.push(r);var i=y.iframeOrigin;y.callbackList.length==1&&y.iframe.contentWindow.postMessage(t,i)}else r.setSuccess();return r.promise}function L(){var r=k();if(y.enable||e.silentCheckSsoRedirectUri){var t=document.createElement("iframe");t.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),t.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),t.setAttribute("title","keycloak-3p-check-iframe"),t.style.display="none",document.body.appendChild(t);var i=function(u){t.contentWindow===u.source&&(u.data!=="supported"&&u.data!=="unsupported"||(u.data==="unsupported"&&(K(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),y.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(t),window.removeEventListener("message",i),r.setSuccess()))};window.addEventListener("message",i,!1)}else r.setSuccess();return d(r.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function P(r){if(!r||r=="default")return{login:function(c){return window.location.assign(e.createLoginUrl(c)),k().promise},logout:function(c){return window.location.replace(e.createLogoutUrl(c)),k().promise},register:function(c){return window.location.assign(e.createRegisterUrl(c)),k().promise},accountManagement:function(){var c=e.createAccountUrl();if(typeof c<"u")window.location.href=c;else throw"Not supported by the OIDC server";return k().promise},redirectUri:function(c,l){return c&&c.redirectUri?c.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(r=="cordova"){y.enable=!1;var t=function(c,l,x){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(c,l,x):window.open(c,l,x)},i=function(c){return c&&c.cordovaOptions?Object.keys(c.cordovaOptions).reduce(function(l,x){return l[x]=c.cordovaOptions[x],l},{}):{}},u=function(c){return Object.keys(c).reduce(function(l,x){return l.push(x+"="+c[x]),l},[]).join(",")},o=function(c){var l=i(c);return l.location="no",c&&c.prompt=="none"&&(l.hidden="yes"),u(l)},m=function(){return e.redirectUri||"http://localhost"};return{login:function(c){var l=k(),x=o(c),w=e.createLoginUrl(c),S=t(w,"_blank",x),U=!1,G=!1,Z=function(){G=!0,S.close()};return S.addEventListener("loadstart",function(z){if(z.url.indexOf(m())==0){var de=h(z.url);Y(de,l),Z(),U=!0}}),S.addEventListener("loaderror",function(z){if(!U)if(z.url.indexOf(m())==0){var de=h(z.url);Y(de,l),Z(),U=!0}else l.setError(),Z()}),S.addEventListener("exit",function(z){G||l.setError({reason:"closed_by_user"})}),l.promise},logout:function(c){var l=k(),x=e.createLogoutUrl(c),w=t(x,"_blank","location=no,hidden=yes,clearcache=yes"),S;return w.addEventListener("loadstart",function(U){U.url.indexOf(m())==0&&w.close()}),w.addEventListener("loaderror",function(U){U.url.indexOf(m())==0||(S=!0),w.close()}),w.addEventListener("exit",function(U){S?l.setError():(e.clearToken(),l.setSuccess())}),l.promise},register:function(c){var l=k(),x=e.createRegisterUrl(),w=o(c),S=t(x,"_blank",w);return S.addEventListener("loadstart",function(U){if(U.url.indexOf(m())==0){S.close();var G=h(U.url);Y(G,l)}}),l.promise},accountManagement:function(){var c=e.createAccountUrl();if(typeof c<"u"){var l=t(c,"_blank","location=no");l.addEventListener("loadstart",function(x){x.url.indexOf(m())==0&&l.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(c){return m()}}}if(r=="cordova-native")return y.enable=!1,{login:function(c){var l=k(),x=e.createLoginUrl(c);return universalLinks.subscribe("keycloak",function(w){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=h(w.url);Y(S,l)}),window.cordova.plugins.browsertab.openUrl(x),l.promise},logout:function(c){var l=k(),x=e.createLogoutUrl(c);return universalLinks.subscribe("keycloak",function(w){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),l.setSuccess()}),window.cordova.plugins.browsertab.openUrl(x),l.promise},register:function(c){var l=k(),x=e.createRegisterUrl(c);return universalLinks.subscribe("keycloak",function(w){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=h(w.url);Y(S,l)}),window.cordova.plugins.browsertab.openUrl(x),l.promise},accountManagement:function(){var c=e.createAccountUrl();if(typeof c<"u")window.cordova.plugins.browsertab.openUrl(c);else throw"Not supported by the OIDC server"},redirectUri:function(c){return c&&c.redirectUri?c.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+r}var N=function(){if(!(this instanceof N))return new N;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var r=this;function t(){for(var i=new Date().getTime(),u=0;u<localStorage.length;u++){var o=localStorage.key(u);if(o&&o.indexOf("kc-callback-")==0){var m=localStorage.getItem(o);if(m)try{var c=JSON.parse(m).expires;(!c||c<i)&&localStorage.removeItem(o)}catch{localStorage.removeItem(o)}}}}r.get=function(i){if(i){var u="kc-callback-"+i,o=localStorage.getItem(u);return o&&(localStorage.removeItem(u),o=JSON.parse(o)),t(),o}},r.add=function(i){t();var u="kc-callback-"+i.state;i.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(u,JSON.stringify(i))}},D=function(){if(!(this instanceof D))return new D;var r=this;r.get=function(o){if(o){var m=i("kc-callback-"+o);if(u("kc-callback-"+o,"",t(-100)),m)return JSON.parse(m)}},r.add=function(o){u("kc-callback-"+o.state,JSON.stringify(o),t(60))},r.removeItem=function(o){u(o,"",t(-100))};var t=function(o){var m=new Date;return m.setTime(m.getTime()+o*60*1e3),m},i=function(o){for(var m=o+"=",c=document.cookie.split(";"),l=0;l<c.length;l++){for(var x=c[l];x.charAt(0)==" ";)x=x.substring(1);if(x.indexOf(m)==0)return x.substring(m.length,x.length)}return""},u=function(o,m,c){var l=o+"="+m+"; expires="+c.toUTCString()+"; ";document.cookie=l}};function E(){try{return new N}catch{}return new D}function J(r){return function(){e.enableLogging&&r.apply(console,Array.prototype.slice.call(arguments))}}}const Q=Ye("authentication-keycloak:KeycloakAuthPlugin");var ee,pe,le,ne,M,ue,fe,oe,ge,Me;class br extends tr{constructor(p){super();W(this,ge);W(this,ee,{kind:"pending"});W(this,pe,void 0);W(this,le,void 0);W(this,ne,void 0);W(this,M,void 0);W(this,ue,void 0);W(this,fe,void 0);W(this,oe,void 0);B(this,pe,p.references.notifier),B(this,le,p.intl),B(this,ue,{redirectUri:void 0}),B(this,fe,{redirectUri:void 0});try{B(this,ne,Sr(p.properties))}catch(g){throw new Error("Invalid keycloak configuration",{cause:g})}try{B(this,M,new Ne(T(this,ne).keycloakConfig))}catch(g){throw new Error("Failed to construct keycloak instance",{cause:g})}Ie(this,ge,Me).call(this).catch(g=>{B(this,ee,{kind:"pending"}),this.emit("changed"),T(this,pe).notify({level:"error",title:T(this,le).formatMessage({id:"loginFailed.title"}),message:T(this,le).formatMessage({id:"loginFailed.message"})}),Q.error("Failed to check if user is authenticated",g)})}destroy(){clearInterval(T(this,oe)),B(this,oe,void 0)}getAuthState(){return T(this,ee)}getLoginBehavior(){return{kind:"effect",login:()=>{Q.debug("Login with options",T(this,fe)),T(this,M).login(T(this,fe))}}}logout(){Q.debug("Logout with options",T(this,ue)),T(this,M).logout(T(this,ue))}__refresh(p,g){clearInterval(T(this,oe)),B(this,oe,setInterval(()=>{T(this,M).updateToken(g).catch(A=>{Q.error("Failed to refresh token",A),B(this,ee,{kind:"not-authenticated"}),this.emit("changed"),this.destroy()})},p))}}ee=new WeakMap,pe=new WeakMap,le=new WeakMap,ne=new WeakMap,M=new WeakMap,ue=new WeakMap,fe=new WeakMap,oe=new WeakMap,ge=new WeakSet,Me=async function(){const p=T(this,ne),g=T(this,ne).keycloakInitOptions,A=p.refreshOptions;let y;try{y=await T(this,M).init(g)}catch(C){const R=typeof C=="string"?new Error(C):C;throw new Error("Failed to initialize keycloak session",{cause:R})}y?(B(this,ee,{kind:"authenticated",sessionInfo:{userId:T(this,M).subject?T(this,M).subject:"undefined",userName:T(this,M).idTokenParsed?.preferred_username,attributes:{keycloak:T(this,M),familyName:T(this,M).idTokenParsed?.family_name,givenName:T(this,M).idTokenParsed?.given_name,userName:T(this,M).idTokenParsed?.preferred_username}}}),this.emit("changed"),Q.debug(`User ${T(this,M).subject} is authenticated`),A.autoRefresh&&(Q.debug("Starting auto-refresh",A),this.__refresh(A.interval,A.timeLeft))):(B(this,ee,{kind:"not-authenticated"}),this.emit("changed"),Q.debug("User is not authenticated"))};const Le={autoRefresh:!0,interval:6e3,timeLeft:70},Re={onLoad:"check-sso",pkceMethod:"S256"};function Sr(a){const{keycloakOptions:e}=a,{refreshOptions:p,keycloakInitOptions:g,keycloakConfig:A}=e;return{refreshOptions:{..._r(p)},keycloakInitOptions:{...Fr(g)},keycloakConfig:{...Ar(A)}}}function _r(a){return!a||Ae(a)?(Q.warn(`The autorefresh options of the Keycloak configuration should be set to ensure automatic refreshes at specified intervals. Defaulting to '${Le}'.`),Object.assign({},{...Le})):a}function Fr(a){return!a||Ae(a)?(Q.warn(`The Keycloak init options of the keycloak configuration should be set. Defaulting to '${Re}'.`),Object.assign({},{...Re})):a}function Ar(a){if(!a||Ae(a))throw new Error("KeycloakConfig not found: The Keycloak configuration options are required by the plugin to perform login and logout operations");return a}const Ae=a=>a&&Object.keys(a).length===0&&a.constructor===Object,Ir={"keycloak-sample":{name:"keycloak-sample",services:{SampleTokenInterceptor:{name:"SampleTokenInterceptor",clazz:sr,provides:[{name:"http.Interceptor",qualifier:void 0}],references:{authService:{name:"authentication.AuthService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1},{name:"http.HttpService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/authentication":{name:"@open-pioneer/authentication",services:{AuthServiceImpl:{name:"AuthServiceImpl",clazz:$e,provides:[{name:"authentication.AuthService",qualifier:void 0}],references:{plugin:{name:"authentication.AuthPlugin",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:Ze,provides:[{name:"http.HttpService",qualifier:void 0}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/notifier":{name:"@open-pioneer/notifier",services:{NotificationServiceImpl:{name:"NotificationServiceImpl",clazz:er,provides:[{name:"notifier.NotificationService",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/authentication-keycloak":{name:"@open-pioneer/authentication-keycloak",services:{KeycloakAuthPlugin:{name:"KeycloakAuthPlugin",clazz:br,provides:[{name:"authentication.AuthPlugin",qualifier:void 0},{name:"authentication-keycloak.KeycloakAuthPlugin",qualifier:void 0}],references:{notifier:{name:"notifier.NotificationService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{keycloakOptions:{value:{refreshOptions:null,keycloakInitOptions:null,keycloakConfig:null,keycloakLogoutOptions:null,keycloakLoginOptions:null},required:!1}}}},Er="",Ur=["de","en"];function Cr(a){switch(a){case"de":return Ee(()=>import("./DVe9bi08BzF-.js"),[],import.meta.url).then(e=>e.default);case"en":return Ee(()=>import("./v21zemnsDP_q.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${a}'`)}const Tr=Ge(Er),Lr=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:Cr,locales:Ur,packages:Ir,styles:Tr},Symbol.toStringTag,{value:"Module"})),Rr="keycloak-sample",Fe=nr.bind(void 0,Rr);function Or(){const a=Fe("authentication.AuthService"),e=()=>{a.logout()};return I.jsx(Oe,{colorScheme:"red",onClick:e,children:"Log out"})}function jr(){const a=Fe("authentication.AuthService"),e=Fe("http.HttpService"),p=Xe(a),A=(p.kind=="authenticated"?p.sessionInfo:void 0)?.userName,y=()=>{e.fetch("https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json").catch(C=>console.error("Request failed",C))};return I.jsxs(I.Fragment,{children:[I.jsx(rr,{}),I.jsxs(ar,{maxW:"800px",children:[I.jsxs(ir,{height:"100%",direction:"column",overflow:"hidden",children:[I.jsx(Ce,{as:"h1",size:"2xl",children:"Keycloak Sample"}),I.jsxs(Ue,{mt:4,spacing:2,align:"stretch",children:[I.jsx(Ce,{as:"h2",size:"xl",children:"Additional Setup"}),I.jsx(se,{children:"This application requires additional setup. Most importantly, a Keycloak installation must be present."}),I.jsxs(se,{children:["The following environment properties should be set via vite (e.g. in"," ",I.jsx(te,{children:"env.local"}),"):"]}),I.jsxs(or,{children:[I.jsxs(ye,{children:[I.jsx(te,{children:"VITE_KEYCLOAK_CONFIG_URL"})," (the URL to the Keycloak instance)"]}),I.jsxs(ye,{children:[I.jsx(te,{children:"VITE_KEYCLOAK_CONFIG_REALM"})," (the Keycloak realm)"]}),I.jsxs(ye,{children:[I.jsx(te,{children:"VITE_KEYCLOAK_CONFIG_CLIENT_ID"})," (the client id of this application)"]})]}),I.jsxs(se,{textAlign:"center",children:[I.jsx(se,{as:"b",children:"Status: "}),A!=null?I.jsxs(I.Fragment,{children:["Logged in as ",I.jsx(te,{children:A}),"."]}):I.jsx(I.Fragment,{children:"Not logged in."})]})]})]}),I.jsx(Qe,{children:I.jsxs(Ue,{align:"center",p:10,mt:2,spacing:3,border:"2px solid red",borderRadius:5,children:[I.jsx(se,{textAlign:"center",children:"This part of the application is only visible when logged in."}),I.jsx(Or,{}),I.jsxs(se,{children:["The following button triggers a request against a backend. The request will automatically include the Keycloak token (see"," ",I.jsx(te,{children:"SampleTokenInterceptor.ts"}),"):"]}),I.jsx(Oe,{onClick:y,children:"Trigger Request With Token"})]})})]})]})}var _e={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Pr=new URLSearchParams(window.location.search),Nr=Pr.get("lang")||void 0,Mr=We({component:jr,appMetadata:Lr,config:{properties:{"@open-pioneer/authentication-keycloak":{keycloakOptions:{refreshOptions:{autoRefresh:!0,interval:6e3,timeLeft:70},keycloakInitOptions:{onLoad:"check-sso",pkceMethod:"S256"},keycloakConfig:{url:_e.VITE_KEYCLOAK_CONFIG_URL,realm:_e.VITE_KEYCLOAK_CONFIG_REALM,clientId:_e.VITE_KEYCLOAK_CONFIG_CLIENT_ID}}}},locale:Nr}});customElements.define("keycloak-app-element",Mr);
