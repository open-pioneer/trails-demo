var k=t=>{throw TypeError(t)};var w=(t,n,r)=>n.has(t)||k("Cannot "+r);var p=(t,n,r)=>(w(t,n,"read from private field"),r?r.call(t):n.get(t)),v=(t,n,r)=>n.has(t)?k("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,r),c=(t,n,r,s)=>(w(t,n,"write to private field"),s?s.call(t,r):n.set(t,r),r);import{p as O,q as I,j as e,d as F,r as d,P as _,Q as b,R as D,S as H,a as U,b as V}from"./BDSkedxQL-YV.js";import{E as G}from"./vOBnYnib6xFk.js";import{u as K,I as Q}from"./BBqZuIpGOykZ.js";import{I as L}from"./BBOfnrDe2AAt.js";import{C as N,H as T}from"./5stHmKxIU7Tc.js";import{V as Y}from"./C0hHtFCAuNhL.js";import{T as $}from"./CeUxMt2o2frV.js";import{F as y}from"./DbKSOxf4U0_D.js";import{F as P}from"./WHJqEeOJ0jCx.js";import{B as g}from"./C-3gFyvvFlJ-.js";import{H as J}from"./DjPh_fjIHlsf.js";import{A as W,u as X,F as Z}from"./ni0L3fUL2y-2.js";import{_ as C}from"./Dch09mLNbtBx.js";import{u as ee}from"./B0WlhuaTcrRe.js";import{F as te}from"./DrD7mCLjNnbP.js";import{B as ne}from"./CNWuYlzDx_4w.js";import"./CJWy3CnFOLh6.js";var re=O("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),j=I(function(n,r){var s,l;const{placement:a="left",...h}=n,m=K(),i=m.field,A={[a==="left"?"insetStart":"insetEnd"]:"0",width:(s=i?.height)!=null?s:i?.h,height:(l=i?.height)!=null?l:i?.h,fontSize:i?.fontSize,...m.element};return e.jsx(re,{ref:r,__css:A,...h})});j.id="InputElement";j.displayName="InputElement";var M=I(function(n,r){const{className:s,...l}=n,a=F("chakra-input__left-element",s);return e.jsx(j,{ref:r,placement:"left",className:a,...l})});M.id="InputLeftElement";M.displayName="InputLeftElement";var E=I(function(n,r){const{className:s,...l}=n,a=F("chakra-input__right-element",s);return e.jsx(j,{ref:r,placement:"right",className:a,...l})});E.id="InputRightElement";E.displayName="InputRightElement";function se({doLogin:t,doFail:n,wasLoggedIn:r}){const[s,l]=d.useState(""),[a,h]=d.useState(""),[m,i]=d.useState(!1),[S,A]=d.useState(),[z,R]=d.useState(r),B=f=>{f.preventDefault();const q=t(s,a);A(q||""),R(!1)};return e.jsx(N,{p:5,children:e.jsxs(Y,{as:"form",onSubmit:B,spacing:4,children:[e.jsx(T,{as:"h1",textAlign:"center",children:"Login"}),e.jsxs($,{textAlign:"center",children:["Please enter your user name and password to authenticate.",e.jsx("br",{}),"Note: credentials are ",'"admin"'," / ",'"admin"']}),S&&e.jsxs(_,{status:"error",children:[e.jsx(b,{}),e.jsx(D,{children:S})]}),z&&e.jsxs(_,{status:"info",mb:5,children:[e.jsx(b,{}),e.jsxs(H,{children:["Logout successful.",e.jsx("br",{}),"You can use the form below to log in again."]})]}),e.jsxs(y,{children:[e.jsx(P,{children:"User name"}),e.jsx(L,{placeholder:"User name",value:s,onChange:f=>l(f.target.value),autoComplete:"username"})]}),e.jsxs(y,{children:[e.jsx(P,{children:"Password"}),e.jsxs(Q,{children:[e.jsx(L,{pr:"4.5rem",type:m?"text":"password",placeholder:"Enter password",value:a,onChange:f=>h(f.target.value),autoComplete:"current-password"}),e.jsx(E,{width:"4.5rem",children:e.jsx(g,{h:"1.75rem",size:"sm",onClick:()=>i(!m),children:m?"Hide":"Show"})})]})]}),e.jsxs(J,{children:[e.jsx(g,{colorScheme:"red",onClick:n,children:"Let it fail!"}),e.jsx(g,{type:"submit",children:"Login"})]})]})})}var o,u,x;class ie extends G{constructor(){super();v(this,o,{kind:"pending"});v(this,u);v(this,x,!1);c(this,u,setTimeout(()=>{c(this,o,{kind:"not-authenticated"}),this.emit("changed")},500))}destroy(){clearTimeout(p(this,u)),c(this,u,void 0)}getAuthState(){return p(this,o)}getLoginBehavior(){const r=(a,h)=>{if(a==="admin"&&h==="admin")c(this,o,{kind:"authenticated",sessionInfo:{userId:"admin",userName:"Arnold Administrator"}}),c(this,x,!0),this.emit("changed");else return"Invalid user name or password!"},s=()=>{c(this,o,{kind:"error",error:new Error("Login failed!")}),this.emit("changed")};return{kind:"fallback",Fallback:()=>d.createElement(se,{doLogin:r,doFail:s,wasLoggedIn:p(this,x)})}}logout(){(p(this,o).kind==="authenticated"||p(this,o).kind==="pending")&&(c(this,o,{kind:"not-authenticated"}),clearTimeout(p(this,u)),c(this,u,void 0),this.emit("changed"))}}o=new WeakMap,u=new WeakMap,x=new WeakMap;const ae={"auth-app":{name:"auth-app",services:{TestAuthPlugin:{name:"TestAuthPlugin",clazz:ie,provides:[{name:"authentication.AuthPlugin",qualifier:void 0}],references:{}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/authentication":{name:"@open-pioneer/authentication",services:{AuthServiceImpl:{name:"AuthServiceImpl",clazz:W,provides:[{name:"authentication.AuthService",qualifier:void 0}],references:{plugin:{name:"authentication.AuthPlugin",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}}},oe="",le=["en","de"];function ce(t){switch(t){case"en":return C(()=>import("./P9WplnIxWHzS.js"),[],import.meta.url).then(n=>n.default);case"de":return C(()=>import("./z2D46c5wMnzO.js"),[],import.meta.url).then(n=>n.default)}throw new Error(`Unsupported locale: '${t}'`)}const ue=U(oe),pe=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:ce,locales:le,packages:ae,styles:ue},Symbol.toStringTag,{value:"Module"})),me="auth-app",de=ee.bind(void 0,me);function he(){const t=de("authentication.AuthService"),n=X(t),r=()=>{t.logout()};return n.kind==="not-authenticated"||n.kind==="pending"?null:e.jsx(g,{colorScheme:"red",onClick:r,children:"Log out"})}function fe(){return e.jsx(Z,{errorFallback:ge,children:e.jsxs(N,{p:5,children:[e.jsx(T,{as:"h1",children:"Authenticated"}),"This is the actual content of the app. Authentication was successful.",e.jsx(te,{pt:5,flexDirection:"row",justifyContent:"center",children:e.jsx(he,{})})]})})}function ge(t){return e.jsxs(e.Fragment,{children:[e.jsx(ne,{margin:2,color:"red",children:t.error.message}),e.jsx(g,{margin:2,onClick:()=>window.location.reload(),children:"reload"})]})}const xe=V({component:fe,appMetadata:pe});customElements.define("auth-app",xe);
