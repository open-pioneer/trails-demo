var E=t=>{throw TypeError(t)};var k=(t,n,r)=>n.has(t)||E("Cannot "+r);var a=(t,n,r)=>(k(t,n,"read from private field"),r?r.call(t):n.get(t)),x=(t,n,r)=>n.has(t)?E("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,r),d=(t,n,r,s)=>(k(t,n,"write to private field"),s?s.call(t,r):n.set(t,r),r);import{n as U,h as S,j as e,l as F,r as p,V as q,H as P,R as w,U as _,W as D,X as H,a as V,O as G,b as K}from"./BNseSxaIihtT.js";import{u as W,I as X}from"./B9zdqh9PWE0a.js";import{C as N}from"./jYicUDcJydKy.js";import{T as Y}from"./GR5gr-89Qrme.js";import{F as b}from"./DE_cfL-UvDdR.js";import{F as L}from"./COFhTFd8PTaT.js";import{I as y}from"./apwTDgsvPGCI.js";import{B as h}from"./CE6nEn_ZV1yL.js";import{H as $}from"./Dg0FwUWAsyRP.js";import{r as J,A as Q,u as Z,F as ee}from"./DqV0DePC79V3.js";import{_ as C}from"./CmsKOCeNyeyo.js";import{u as te}from"./DrpD1hfjkN6P.js";import{F as ne}from"./BDHIly7xvlGb.js";const re=U("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),v=S(function(n,r){const{placement:s="left",...c}=n,i=W(),u=i.field,j={[s==="left"?"insetStart":"insetEnd"]:"0",width:u?.height??u?.h,height:u?.height??u?.h,fontSize:u?.fontSize,...i.element};return e.jsx(re,{ref:r,__css:j,...c})});v.id="InputElement";v.displayName="InputElement";const T=S(function(n,r){const{className:s,...c}=n,i=F("chakra-input__left-element",s);return e.jsx(v,{ref:r,placement:"left",className:i,...c})});T.id="InputLeftElement";T.displayName="InputLeftElement";const A=S(function(n,r){const{className:s,...c}=n,i=F("chakra-input__right-element",s);return e.jsx(v,{ref:r,placement:"right",className:i,...c})});A.id="InputRightElement";A.displayName="InputRightElement";function se({doLogin:t,doFail:n,wasLoggedIn:r}){const[s,c]=p.useState(""),[i,u]=p.useState(""),[g,j]=p.useState(!1),[I,M]=p.useState(),[z,R]=p.useState(r),O=m=>{m.preventDefault();const B=t(s,i);M(B||""),R(!1)};return e.jsx(N,{p:5,children:e.jsxs(q,{as:"form",onSubmit:O,spacing:4,children:[e.jsx(P,{as:"h1",textAlign:"center",children:"Login"}),e.jsxs(Y,{textAlign:"center",children:["Please enter your user name and password to authenticate.",e.jsx("br",{}),"Note: credentials are ",'"admin"'," / ",'"admin"']}),I&&e.jsxs(w,{status:"error",children:[e.jsx(_,{}),e.jsx(D,{children:I})]}),z&&e.jsxs(w,{status:"info",mb:5,children:[e.jsx(_,{}),e.jsxs(H,{children:["Logout successful.",e.jsx("br",{}),"You can use the form below to log in again."]})]}),e.jsxs(b,{children:[e.jsx(L,{children:"User name"}),e.jsx(y,{placeholder:"User name",value:s,onChange:m=>c(m.target.value),autoComplete:"username"})]}),e.jsxs(b,{children:[e.jsx(L,{children:"Password"}),e.jsxs(X,{children:[e.jsx(y,{pr:"4.5rem",type:g?"text":"password",placeholder:"Enter password",value:i,onChange:m=>u(m.target.value),autoComplete:"current-password"}),e.jsx(A,{width:"4.5rem",children:e.jsx(h,{h:"1.75rem",size:"sm",onClick:()=>j(!g),children:g?"Hide":"Show"})})]})]}),e.jsxs($,{children:[e.jsx(h,{colorScheme:"red",onClick:n,children:"Let it fail!"}),e.jsx(h,{type:"submit",children:"Login"})]})]})})}var o,l,f;class ie{constructor(){x(this,o,J({kind:"pending"}));x(this,l);x(this,f,!1);d(this,l,setTimeout(()=>{a(this,o).value={kind:"not-authenticated"}},500))}destroy(){clearTimeout(a(this,l)),d(this,l,void 0)}getAuthState(){return a(this,o).value}getLoginBehavior(){const n=(c,i)=>{if(c==="admin"&&i==="admin")a(this,o).value={kind:"authenticated",sessionInfo:{userId:"admin",userName:"Arnold Administrator"}},d(this,f,!0);else return"Invalid user name or password!"},r=()=>{a(this,o).value={kind:"error",error:new Error("Login failed!")}};return{kind:"fallback",Fallback:()=>p.createElement(se,{doLogin:n,doFail:r,wasLoggedIn:a(this,f)})}}logout(){(a(this,o).value.kind==="authenticated"||a(this,o).value.kind==="pending")&&(a(this,o).value={kind:"not-authenticated"},clearTimeout(a(this,l)),d(this,l,void 0))}}o=new WeakMap,l=new WeakMap,f=new WeakMap;const ae={"auth-app":{name:"auth-app",services:{TestAuthPlugin:{name:"TestAuthPlugin",clazz:ie,provides:[{name:"authentication.AuthPlugin",qualifier:void 0}],references:{}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/authentication":{name:"@open-pioneer/authentication",services:{AuthServiceImpl:{name:"AuthServiceImpl",clazz:Q,provides:[{name:"authentication.AuthService",qualifier:void 0}],references:{plugin:{name:"authentication.AuthPlugin",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/reactivity":{name:"@open-pioneer/reactivity",services:{},ui:{references:[]},properties:{}}},oe="",ce=["en","de"];function le(t){switch(t){case"en":return C(()=>import("./P9WplnIxWHzS.js"),[],import.meta.url).then(n=>n.default);case"de":return C(()=>import("./z2D46c5wMnzO.js"),[],import.meta.url).then(n=>n.default)}throw new Error(`Unsupported locale: '${t}'`)}const ue=V(oe),pe=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:le,locales:ce,packages:ae,styles:ue},Symbol.toStringTag,{value:"Module"})),me="auth-app",de=te.bind(void 0,me);function he(){const t=de("authentication.AuthService"),n=Z(t),r=()=>{t.logout()};return n.kind==="not-authenticated"||n.kind==="pending"?null:e.jsx(h,{colorScheme:"red",onClick:r,children:"Log out"})}function fe(){return e.jsx(ee,{errorFallback:ge,children:e.jsxs(N,{p:5,children:[e.jsx(P,{as:"h1",children:"Authenticated"}),"This is the actual content of the app. Authentication was successful.",e.jsx(ne,{pt:5,flexDirection:"row",justifyContent:"center",children:e.jsx(he,{})})]})})}function ge(t){return e.jsxs(e.Fragment,{children:[e.jsx(G,{margin:2,color:"red",children:t.error.message}),e.jsx(h,{margin:2,onClick:()=>window.location.reload(),children:"reload"})]})}const xe=K({component:fe,appMetadata:pe});customElements.define("auth-app",xe);
