<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@open-pioneer/reactivity - v0.1.0 | Trails Packages</title><meta name="description" content="Documentation for Trails Packages"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Trails Packages</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">Trails Packages</a></li><li><a href="_open_pioneer_reactivity.html">@open-pioneer/reactivity</a></li></ul><h1>Module @open-pioneer/reactivity - v0.1.0</h1></div><section class="tsd-panel tsd-typography"><a id="md:open-pioneerreactivity" class="tsd-anchor"></a><h1 class="tsd-anchor-link">@open-pioneer/reactivity<a href="#md:open-pioneerreactivity" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This package provides hooks and helpers to work with the reactivity API provided by <a href="https://www.npmjs.com/package/@conterra/reactivity-core">@conterra/reactivity-core</a>.</p>
<blockquote>
<p>NOTE:
This package and <code>@conterra/reactivity-core</code> are still actively being worked on.
There may be breaking changes based on user feedback; stability can not yet be guaranteed.</p>
</blockquote>
<a id="md:usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage<a href="#md:usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:rendering-reactive-values" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Rendering reactive values<a href="#md:rendering-reactive-values" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The hook <code>useReactiveSnapshot(callback, deps)</code> is integrated with the reactivity API of <code>@conterra/reactivity-core</code>.
The hook will continuously invoke the provided callback and return the current result.
For this mechanism to work, the values used inside the callback should be based on the reactivity API (or be declared as <code>deps</code>).</p>
<p>Example:</p>
<pre><code class="tsx"><span class="hl-3">// YourComponent.tsx</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">useReactiveSnapshot</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-7">&quot;@open-pioneer/reactivity&quot;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">Model</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-7">&quot;./Model&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-0">interface</span><span class="hl-1"> </span><span class="hl-9">YourComponentProps</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Some model class or interface based on the reactivity API.</span><br/><span class="hl-1">    </span><span class="hl-3">// In this case, the model has the properties `firstName` and `lastName`, both are (reactive) strings.</span><br/><span class="hl-1">    </span><span class="hl-5">model</span><span class="hl-1">: </span><span class="hl-9">Model</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-0">function</span><span class="hl-1"> </span><span class="hl-6">YourComponent</span><span class="hl-1">({ </span><span class="hl-5">model</span><span class="hl-1"> }: </span><span class="hl-9">YourComponentProps</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">fullName</span><span class="hl-1"> = </span><span class="hl-6">useReactiveSnapshot</span><span class="hl-1">(() </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">// You can compute arbitrary values based on your model, even objects or array.</span><br/><span class="hl-1">        </span><span class="hl-3">// This callback is called whenever any dependency changed, this case if firstName or</span><br/><span class="hl-1">        </span><span class="hl-3">// lastName are updated.</span><br/><span class="hl-1">        </span><span class="hl-3">// Keep in mind that this callback should not have any side effects, because it may run any number of times.</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-7">`</span><span class="hl-0">${</span><span class="hl-5">model</span><span class="hl-11">.</span><span class="hl-5">firstName</span><span class="hl-0">}</span><span class="hl-7"> </span><span class="hl-0">${</span><span class="hl-5">model</span><span class="hl-11">.</span><span class="hl-5">lastName</span><span class="hl-0">}</span><span class="hl-7">`</span><span class="hl-1">;</span><br/><span class="hl-1">    }, [</span><span class="hl-5">model</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Name is automatically kept up-to-date.</span><br/><span class="hl-1">    </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-8">&lt;</span><span class="hl-13">div</span><span class="hl-8">&gt;</span><span class="hl-1">Hello </span><span class="hl-0">{</span><span class="hl-5">fullName</span><span class="hl-0">}</span><span class="hl-8">&lt;/</span><span class="hl-13">div</span><span class="hl-8">&gt;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<ul>
<li><code>callback</code> is a function that accesses reactive values which are based on signals (see example below) and returns some computed <em>result</em>.
In the example above, we used the values of <code>firstName</code> and <code>lastName</code>.
The access to those values was tracked by <code>useReactiveSnapshot</code>; updates will result in the React component rendering with the updated <code>fullName</code>.</li>
<li><code>deps</code> are an array of React dependencies (such as props or local variables), very similar to <code>useEffect</code> or <code>useMemo</code>.
The hook cannot detect changes of values that are <em>not</em> based on the reactivity API (such as react props), so they need to be listed here.
In this case we had to specify the <code>model</code> itself (it may change as well!) but not its properties.</li>
</ul>
<p>To complete the example from above, here is the full source of a compatible <code>Model</code> implementation:</p>
<pre><code class="ts"><span class="hl-3">// Model.ts</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">reactive</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-7">&quot;@conterra/reactivity-core&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">export</span><span class="hl-1"> </span><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-9">Model</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Private storage. Signals are not exposed in this example.</span><br/><span class="hl-1">    </span><span class="hl-5">#firstName</span><span class="hl-1"> = </span><span class="hl-6">reactive</span><span class="hl-1">(</span><span class="hl-7">&quot;John&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">#lastName</span><span class="hl-1"> = </span><span class="hl-6">reactive</span><span class="hl-1">(</span><span class="hl-7">&quot;Doe&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Public getters to access the current values, with a convenient API.</span><br/><span class="hl-1">    </span><span class="hl-0">get</span><span class="hl-1"> </span><span class="hl-6">firstName</span><span class="hl-1">(): </span><span class="hl-9">string</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">#firstName</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-0">get</span><span class="hl-1"> </span><span class="hl-6">lastName</span><span class="hl-1">(): </span><span class="hl-9">string</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">#lastName</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-3">// Update the name values.</span><br/><span class="hl-1">    </span><span class="hl-3">// Any UI connected to the model via useReactiveSnapshot() will automatically update.</span><br/><span class="hl-1">    </span><span class="hl-6">updateName</span><span class="hl-1">(</span><span class="hl-5">newFirstName</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1">, </span><span class="hl-5">newLastName</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1">): </span><span class="hl-9">void</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">#firstName</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1"> = </span><span class="hl-5">newFirstName</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">#lastName</span><span class="hl-1">.</span><span class="hl-5">value</span><span class="hl-1"> = </span><span class="hl-5">newLastName</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:rendering-a-single-reactive-value" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Rendering a single reactive value<a href="#md:rendering-a-single-reactive-value" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>If you have a single signal at hand, there is no need to use the more complex <code>useReactiveSnapshot</code> hook.
You can use the more primitive <code>useReactiveValue</code> hook instead:</p>
<pre><code class="jsx"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">useReactiveValue</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-7">&quot;@open-pioneer/reactivity&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">function</span><span class="hl-1"> </span><span class="hl-6">YourComponent</span><span class="hl-1">({ </span><span class="hl-5">signal</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">value</span><span class="hl-1"> = </span><span class="hl-6">useReactiveValue</span><span class="hl-1">(</span><span class="hl-5">signal</span><span class="hl-1">); </span><span class="hl-3">// Subscribes to `signal.value` and re-renders on changes.</span><br/><span class="hl-1">    </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-8">&lt;</span><span class="hl-13">div</span><span class="hl-8">&gt;</span><span class="hl-0">{</span><span class="hl-5">value</span><span class="hl-0">}</span><span class="hl-8">&lt;/</span><span class="hl-13">div</span><span class="hl-8">&gt;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>More details are available in this package's API documentation and the <a href="https://www.npmjs.com/package/@conterra/reactivity-core">README of @conterra/reactivity-core</a>.</p>
<a id="md:eslint-configuration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ESLint configuration<a href="#md:eslint-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can use React's <code>exhaustive-deps</code> linting rule to check the dependencies of <code>useReactiveSnapshot</code> and <code>useComputed</code> (see <a href="https://github.com/facebook/react/blob/main/packages/eslint-plugin-react-hooks/README.md#advanced-configuration">Documentation</a>).
This will apply the same rules used by <code>useEffect</code> etc. to the configured hooks.</p>
<p>Example:</p>
<pre><code class="jsonc"><span class="hl-3">// .eslintrc</span><br/><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-3">// ...</span><br/><span class="hl-1">    </span><span class="hl-15">&quot;rules&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-3">// ...</span><br/><span class="hl-1">        </span><span class="hl-15">&quot;react-hooks/exhaustive-deps&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">            </span><span class="hl-7">&quot;warn&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-15">&quot;additionalHooks&quot;</span><span class="hl-1">: </span><span class="hl-7">&quot;(useReactiveSnapshot|useComputed)&quot;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        ]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">License<a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Apache-2.0 (see <code>LICENSE</code> file)</p>
</section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><h3 class="tsd-index-heading uppercase">Index</h3><section class="tsd-index-section"><h3 class="tsd-index-heading">Functions</h3><div class="tsd-index-list"><a href="../functions/_open_pioneer_reactivity.useComputed.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>use<wbr/>Computed</span></a>
<a href="../functions/_open_pioneer_reactivity.useReactive.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>use<wbr/>Reactive</span></a>
<a href="../functions/_open_pioneer_reactivity.useReactiveSnapshot.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>use<wbr/>Reactive<wbr/>Snapshot</span></a>
<a href="../functions/_open_pioneer_reactivity.useReactiveValue.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>use<wbr/>Reactive<wbr/>Value</span></a>
</div></section></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:open-pioneerreactivity"><span>@open-<wbr/>pioneer/reactivity</span></a><ul><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:rendering-reactive-values"><span>Rendering reactive values</span></a></li><li><ul><li><a href="#md:rendering-a-single-reactive-value"><span>Rendering a single reactive value</span></a></li></ul></li><li><a href="#md:eslint-configuration"><span>ESLint configuration</span></a></li></ul></li><li><a href="#md:license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Trails Packages</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
